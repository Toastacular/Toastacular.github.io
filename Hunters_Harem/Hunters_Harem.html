<!DOCTYPE html>
<html data-init="no-js">
<head>
<meta charset="UTF-8" />
<title>Hunters Harem</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!--

SugarCube (v2.30.0): A free (gratis and libre) story format.

Copyright © 2013–2019 Thomas Michael Edwards <thomasmedwards@gmail.com>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.setAttribute("data-init", "loading");
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
if("document" in self){if(!("classList" in document.createElement("_"))){(function(j){"use strict";if(!("Element" in j)){return}var a="classList",f="prototype",m=j.Element[f],b=Object,k=String[f].trim||function(){return this.replace(/^\s+|\s+$/g,"")},c=Array[f].indexOf||function(q){var p=0,o=this.length;for(;p<o;p++){if(p in this&&this[p]===q){return p}}return -1},n=function(o,p){this.name=o;this.code=DOMException[o];this.message=p},g=function(p,o){if(o===""){throw new n("SYNTAX_ERR","An invalid or illegal string was specified")}if(/\s/.test(o)){throw new n("INVALID_CHARACTER_ERR","String contains an invalid character")}return c.call(p,o)},d=function(s){var r=k.call(s.getAttribute("class")||""),q=r?r.split(/\s+/):[],p=0,o=q.length;for(;p<o;p++){this.push(q[p])}this._updateClassName=function(){s.setAttribute("class",this.toString())}},e=d[f]=[],i=function(){return new d(this)};n[f]=Error[f];e.item=function(o){return this[o]||null};e.contains=function(o){o+="";return g(this,o)!==-1};e.add=function(){var s=arguments,r=0,p=s.length,q,o=false;do{q=s[r]+"";if(g(this,q)===-1){this.push(q);o=true}}while(++r<p);if(o){this._updateClassName()}};e.remove=function(){var t=arguments,s=0,p=t.length,r,o=false,q;do{r=t[s]+"";q=g(this,r);while(q!==-1){this.splice(q,1);o=true;q=g(this,r)}}while(++s<p);if(o){this._updateClassName()}};e.toggle=function(p,q){p+="";var o=this.contains(p),r=o?q!==true&&"remove":q!==false&&"add";if(r){this[r](p)}if(q===true||q===false){return q}else{return !o}};e.toString=function(){return this.join(" ")};if(b.defineProperty){var l={get:i,enumerable:true,configurable:true};try{b.defineProperty(m,a,l)}catch(h){if(h.number===-2146823252){l.enumerable=false;b.defineProperty(m,a,l)}}}else{if(b[f].__defineGetter__){m.__defineGetter__(a,i)}}}(self))}else{(function(){var b=document.createElement("_");b.classList.add("c1","c2");if(!b.classList.contains("c2")){var c=function(e){var d=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(h){var g,f=arguments.length;for(g=0;g<f;g++){h=arguments[g];d.call(this,h)}}};c("add");c("remove")}b.classList.toggle("c3",false);if(b.classList.contains("c3")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(d,e){if(1 in arguments&&!this.contains(d)===!e){return e}else{return a.call(this,d)}}}b=null}())}};
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.13/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var S=Function.prototype.toString,x=/^\s*class /,O=function isES6ClassFn(t){try{var r=S.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return x.test(i)}catch(a){return false}},E=function tryFunctionObject(t){try{if(O(t)){return false}S.call(t);return true}catch(r){return false}},j="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return E(t)}if(O(t)){return false}var r=T.call(t);return r===j||r===I};var M;var U=RegExp.prototype.exec,$=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},F="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?$(t):T.call(t)===F};var N;var C=String.prototype.valueOf,k=function tryStringObject(t){try{C.call(t);return true}catch(r){return false}},A="[object String]";N=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?k(t):T.call(t)===A};var R=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var P=function(t){var r;if(R){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function isActualNaN(t){return t!==t};var z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var Z=function Empty(){};P(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){Z.prototype=r.prototype;a.prototype=new Z;Z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var H=d.bind(n.toString);var W=d.bind(s);var B=g.bind(s);if(typeof document==="object"&&document&&document.documentElement){try{W(document.documentElement.childNodes)}catch(X){var L=W;var q=B;W=function arraySliceIE(t){var r=[];var e=t.length;while(e-- >0){r[e]=t[e]}return q(r,L(arguments,1))};B=function arraySliceApplyIE(t,r){return q(W(t),r)}}}var K=d.bind(f.slice);var Q=d.bind(f.split);var V=d.bind(f.indexOf);var _=d.bind(v);var tt=d.bind(n.propertyIsEnumerable);var rt=d.bind(r.sort);var et=t.isArray||function isArray(t){return H(t)==="[object Array]"};var nt=[].unshift(0)!==1;P(r,{unshift:function(){h.apply(this,arguments);return this.length}},nt);P(t,{isArray:et});var it=e("a");var at=it[0]!=="a"||!(0 in it);var ot=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};P(r,{forEach:function forEach(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=-1;var i=z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!ot(r.forEach));P(r,{map:function map(r){var e=z.ToObject(this);var n=at&&N(this)?Q(this,""):e;var i=z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!ot(r.map));P(r,{filter:function filter(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){_(i,a)}}}return i}},!ot(r.filter));P(r,{every:function every(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!ot(r.every));P(r,{some:function some(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!ot(r.some));var ft=false;if(r.reduce){ft=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduce:function reduce(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!ft);var ut=false;if(r.reduceRight){ut=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduceRight:function reduceRight(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!ut);var lt=r.indexOf&&[0,1].indexOf(1,2)!==-1;P(r,{indexOf:function indexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},lt);var st=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;P(r,{lastIndexOf:function lastIndexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},st);var ct=function(){var t=[1,2];var r=t.splice();return t.length===2&&et(r)&&r.length===0}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ct);var vt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=W(arguments);if(e.length<2){_(e,this.length-t)}else{e[1]=z.ToInteger(r)}}return c.apply(this,e)}},!vt);var ht=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var pt=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();P(r,{splice:function splice(t,r){var e=z.ToObject(this);var n=[];var i=z.ToUint32(e.length);var a=z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=b(w(z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=W(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!ht||!pt);var yt=r.join;var dt;try{dt=Array.prototype.join.call("123",",")!=="1,2,3"}catch(X){dt=true}if(dt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(N(this)?Q(this,""):this,r)}},dt)}var gt=[1,2].join(undefined)!=="1,2";if(gt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(this,r)}},gt)}var wt=function push(t){var r=z.ToObject(this);var e=z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var bt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:function push(t){if(et(this)){return v.apply(this,arguments)}return wt.apply(this,arguments)}},bt);var Tt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:wt},Tt);P(r,{slice:function(t,r){var e=N(this)?Q(this,""):this;return B(e,arguments)}},at);var mt=function(){try{[1,2].sort(null)}catch(t){try{[1,2].sort({})}catch(r){return false}}return true}();var Dt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var St=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();P(r,{sort:function sort(t){if(typeof t==="undefined"){return rt(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return rt(this,t)}},mt||!St||!Dt);var xt=!tt({toString:null},"toString");var Ot=tt(function(){},"prototype");var Et=!G("x","0");var jt=function(t){var r=t.constructor;return r&&r.prototype===t};var It={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true,$width:true,$height:true,$top:true,$localStorage:true};var Mt=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!It["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){jt(window[t])}}catch(r){return true}}return false}();var Ut=function(t){if(typeof window==="undefined"||!Mt){return jt(t)}try{return jt(t)}catch(r){return false}};var $t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ft=$t.length;var Nt=function isArguments(t){return H(t)==="[object Arguments]"};var Ct=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!et(t)&&D(t.callee)};var kt=Nt(arguments)?Nt:Ct;P(e,{keys:function keys(t){var r=D(t);var e=kt(t);var n=t!==null&&typeof t==="object";var i=n&&N(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=Ot&&r;if(i&&Et||e){for(var u=0;u<t.length;++u){_(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){_(a,o(l))}}}if(xt){var s=Ut(t);for(var c=0;c<Ft;c++){var v=$t[c];if(!(s&&v==="constructor")&&G(t,v)){_(a,v)}}}return a}});var At=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var Rt=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var Pt=e.keys;P(e,{keys:function keys(t){if(kt(t)){return Pt(W(t))}else{return Pt(t)}}},!At||Rt);var Jt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var Yt=new Date(-0x55d318d56a724);var zt=new Date(14496624e5);var Zt=Yt.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Gt;var Ht;var Wt=Yt.getTimezoneOffset();if(Wt<-720){Gt=Yt.toDateString()!=="Tue Jan 02 -45875";Ht=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}else{Gt=Yt.toDateString()!=="Mon Jan 01 -45875";Ht=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}var Bt=d.bind(Date.prototype.getFullYear);var Xt=d.bind(Date.prototype.getMonth);var Lt=d.bind(Date.prototype.getDate);var qt=d.bind(Date.prototype.getUTCFullYear);var Kt=d.bind(Date.prototype.getUTCMonth);var Qt=d.bind(Date.prototype.getUTCDate);var Vt=d.bind(Date.prototype.getUTCDay);var _t=d.bind(Date.prototype.getUTCHours);var tr=d.bind(Date.prototype.getUTCMinutes);var rr=d.bind(Date.prototype.getUTCSeconds);var er=d.bind(Date.prototype.getUTCMilliseconds);var nr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var ir=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var ar=function daysInMonth(t,r){return Lt(new Date(r,t,0))};P(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Xt(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);var e=Lt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);if(t<0&&Kt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);var e=Qt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e}},Jt);P(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Vt(this);var r=Qt(this);var e=Kt(this);var n=qt(this);var i=_t(this);var a=tr(this);var o=rr(this);return nr[t]+", "+(r<10?"0"+r:r)+" "+ir[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Jt||Zt);P(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n}},Jt||Gt);if(Jt||Ht){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(R){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var or=-621987552e5;var fr="-000001";var ur=Date.prototype.toISOString&&new Date(or).toISOString().indexOf(fr)===-1;var lr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var sr=d.bind(Date.prototype.getTime);P(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(sr(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=qt(this);var r=Kt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,Qt(this),_t(this),tr(this),rr(this)];t=(t<0?"-":t>9999?"+":"")+K("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=K("00"+e[n],-2)}return t+"-"+W(e,0,2).join("-")+"T"+W(e,2).join(":")+"."+K("000"+er(this),-3)+"Z"}},ur||lr);var cr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(or).toJSON().indexOf(fr)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!cr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var vr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var hr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var pr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(pr||hr||!vr){var yr=Math.pow(2,31)-1;var dr=Y(new Date(1970,0,1,0,0,0,yr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(dr&&s>=7&&l>yr){var p=Math.floor(l/yr)*yr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){P(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(dr&&n>yr){var i=Math.floor(n/yr)*yr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}P(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;P(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};P(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var gr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(1000000000000000128).toFixed(0)!=="1000000000000000128");var wr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<wr.size){n+=t*wr.data[e];wr.data[e]=n%wr.base;n=Math.floor(n/wr.base)}},divide:function divide(t){var r=wr.size;var e=0;while(--r>=0){e+=wr.data[r];wr.data[r]=Math.floor(e/t);e=e%t*wr.base}},numToString:function numToString(){var t=wr.size;var r="";while(--t>=0){if(r!==""||t===0||wr.data[t]!==0){var e=o(wr.data[t]);if(r===""){r=e}else{r+=K("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var br=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=wr.log(e*wr.pow(2,69,1))-69;f=a<0?e*wr.pow(2,-a,1):e/wr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){wr.multiply(0,f);l=r;while(l>=7){wr.multiply(1e7,0);l-=7}wr.multiply(wr.pow(10,l,1),0);l=a-1;while(l>=23){wr.divide(1<<23);l-=23}wr.divide(1<<l);wr.multiply(1,1);wr.divide(2);i=wr.numToString()}else{wr.multiply(0,f);wr.multiply(1<<-a,0);i=wr.numToString()+K("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+K("0.0000000000000000000",0,r-s+2)+i}else{i=n+K(i,0,s-r)+"."+K(i,s-r)}}else{i=n+i}return i};P(l,{toFixed:br},gr);var Tr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var mr=l.toPrecision;P(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?mr.call(this):mr.call(this,t)}},Tr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return Q(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){_(a,K(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,W(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){_(a,"")}}else{_(a,K(i,f))}return a.length>p?W(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return Q(this,t,r)}}var Dr=f.replace;var Sr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){_(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!Sr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Dr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;_(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Dr.call(this,t,i)}}}var xr=f.substr;var Or="".substr&&"0b".substr(-1)!=="b";P(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return xr.call(this,e,r)}},Or);var Er="\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var jr="\u200b";var Ir="["+Er+"]";var Mr=new RegExp("^"+Ir+Ir+"*");var Ur=new RegExp(Ir+Ir+"*$");var $r=f.trim&&(Er.trim()||!jr.trim());P(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(Mr,"").replace(Ur,"")}},$r);var Fr=d.bind(String.prototype.trim);var Nr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;P(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=V(K(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Nr);var Cr=f.lastIndexOf;P(f,{lastIndexOf:function lastIndexOf(t){return Cr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(Er+"08")!==8||parseInt(Er+"0x16")!==22){parseInt=function(t){var r=/^[-+]?0[xX]/;return function parseInt(e,n){if(typeof e==="symbol"){""+e}var i=Fr(String(e));var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Fr(String(r));var n=t(e);return n===0&&K(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var kr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=kr}if(R){var Ar=function(t,r){if(tt(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);if(e.configurable){e.enumerable=false;Object.defineProperty(t,r,e)}}};Ar(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}Ar(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Rr=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Rr}});
//# sourceMappingURL=es5-shim.map
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.4/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){return Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var L=Math.exp;var F=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Map;var H=G&&G.prototype["delete"];var V=G&&G.prototype.get;var B=G&&G.prototype.has;var U=G&&G.prototype.set;var $=S.Symbol||{};var J=$.species||"@@species";var X=Number.isNaN||function isNaN(e){return e!==e};var K=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Z=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(X(t)){return t}return t<0?-1:1};var Y=function log1p(e){var t=Number(e);if(t<-1||X(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(F(1+t)/(1+t-1))};var Q=function isArguments(e){return g(e)==="[object Arguments]"};var ee=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var te=Q(arguments)?Q:ee;var re={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var ne=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var oe=typeof $==="function"&&typeof $["for"]==="function"&&re.symbol($());var ie=re.symbol($.iterator)?$.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){ie="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ae=S.Reflect;var ue=String;var fe=typeof document==="undefined"||!document?null:document.all;var se=fe==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==fe};var ce={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!ce.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(se(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===fe},ToObject:function(e,t){return Object(ce.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return ce.IsCallable(e)},ToInt32:function(e){return ce.ToNumber(e)>>0},ToUint32:function(e){return ce.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=ce.ToNumber(e);if(X(t)){return 0}if(t===0||!K(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=ce.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return X(e)&&X(t)},SameValueZero:function(e,t){return e===t||X(e)&&X(t)},IsIterable:function(e){return ce.TypeIsObject(e)&&(typeof e[ie]!=="undefined"||te(e))},GetIterator:function(e){if(te(e)){return new q(e,"value")}var t=ce.GetMethod(e,ie);if(!ce.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=ce.Call(t,e);if(!ce.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=ce.ToObject(e)[t];if(se(r)){return void 0}if(!ce.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=ce.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=ce.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!ce.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ce.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=ce.IteratorNext(e);var r=ce.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ae.construct){return ae.construct(e,t,o)}var i=o.prototype;if(!ce.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=ce.Call(e,a,t);return ce.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!ce.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[J];if(se(n)){return t}if(!ce.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=ce.ToString(e);var i="<"+t;if(r!==""){var a=ce.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!ce.TypeIsObject(e)){return false}var t=e[$.match];if(typeof t!=="undefined"){return!!t}return re.regex(e)},ToString:function ToString(e){return ue(e)}};if(s&&oe){var le=function defineWellKnownSymbol(e){if(re.symbol($[e])){return $[e]}var t=$["for"]("Symbol."+e);Object.defineProperty($,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!re.symbol($.search)){var pe=le("search");var ve=String.prototype.search;h(RegExp.prototype,pe,function search(e){return ce.Call(ve,e,[this])});var ye=function search(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,pe);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(ve,t,[ce.ToString(e)])};ne(String.prototype,"search",ye)}if(!re.symbol($.replace)){var he=le("replace");var be=String.prototype.replace;h(RegExp.prototype,he,function replace(e,t){return ce.Call(be,e,[this,t])});var ge=function replace(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,he);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(be,r,[ce.ToString(e),t])};ne(String.prototype,"replace",ge)}if(!re.symbol($.split)){var de=le("split");var me=String.prototype.split;h(RegExp.prototype,de,function split(e,t){return ce.Call(me,e,[this,t])});var Oe=function split(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,de);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(me,r,[ce.ToString(e),t])};ne(String.prototype,"split",Oe)}var we=re.symbol($.match);var je=we&&function(){var e={};e[$.match]=function(){return 42};return"a".match(e)!==42}();if(!we||je){var Se=le("match");var Te=String.prototype.match;h(RegExp.prototype,Se,function match(e){return ce.Call(Te,e,[this])});var Ie=function match(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,Se);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(Te,t,[ce.ToString(e)])};ne(String.prototype,"match",Ie)}}var Ee=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Pe=function(){return this};var Ce=function(e){if(s&&!z(e,J)){m.getter(e,J,Pe)}};var Me=function(e,t){var r=t||function iterator(){return this};h(e,ie,r);if(!e[ie]&&re.symbol(ie)){e[ie]=r}};var xe=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Ne=function createDataPropertyOrThrow(e,t,r){xe(e,t,r);if(!ce.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Ae=function(e,t,r,n){if(!ce.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!ce.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Re=String.fromCodePoint;ne(String,"fromCodePoint",function fromCodePoint(e){return ce.Call(Re,this,arguments)})}var _e={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!ce.SameValue(r,ce.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=ce.ToObject(e,"bad callSite");var r=ce.ToObject(t.raw,"bad raw value");var n=r.length;var o=ce.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=ce.ToString(a);s=ce.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=ce.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){ne(String,"raw",_e.raw)}b(String,_e);var ke=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Le=Infinity;var Fe={repeat:function repeat(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);if(r<0||r>=Le){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return ke(t,r)},startsWith:function startsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=ce.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(ce.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=ce.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:ce.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(ce.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=ce.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){ne(String.prototype,"includes",Fe.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var De=i(function(){return"/a/".startsWith(/a/)});var ze=a(function(){return"abc".startsWith("a",Infinity)===false});if(!De||!ze){ne(String.prototype,"startsWith",Fe.startsWith);ne(String.prototype,"endsWith",Fe.endsWith)}}if(oe){var qe=a(function(){var e=/a/;e[$.match]=false;return"/a/".startsWith(e)});if(!qe){ne(String.prototype,"startsWith",Fe.startsWith)}var We=a(function(){var e=/a/;e[$.match]=false;return"/a/".endsWith(e)});if(!We){ne(String.prototype,"endsWith",Fe.endsWith)}var Ge=a(function(){var e=/a/;e[$.match]=false;return"/a/".includes(e)});if(!Ge){ne(String.prototype,"includes",Fe.includes)}}b(String.prototype,Fe);var He=["\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Ve=new RegExp("(^["+He+"]+)|(["+He+"]+$)","g");var Be=function trim(){return ce.ToString(ce.RequireObjectCoercible(this)).replace(Ve,"")};var Ue=["\x85","\u200b","\ufffe"].join("");var $e=new RegExp("["+Ue+"]","g");var Je=/^[-+]0x[0-9a-f]+$/i;var Xe=Ue.trim().length!==Ue.length;h(String.prototype,"trim",Be,Xe);var Ke=function(e){return{value:e,done:arguments.length===0}};var Ze=function(e){ce.RequireObjectCoercible(e);this._s=ce.ToString(e);this._i=0};Ze.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ke()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ke(e.substr(t,o))};Me(Ze.prototype);Me(String.prototype,function(){return new Ze(this)});var Ye={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!ce.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(te(e)||ce.GetMethod(e,ie))!=="undefined";var u,f,s;if(a){f=ce.IsConstructor(r)?Object(new r):[];var c=ce.GetIterator(e);var l,p;s=0;while(true){l=ce.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){ce.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=ce.ToObject(e);u=ce.ToLength(y.length);f=ce.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Ne(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!ce.IsCallable(t)?new Array(e):ce.Construct(t,[e]);for(var o=0;o<e;++o){Ne(n,o,arguments[o])}n.length=e;return n}};b(Array,Ye);Ce(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=ce.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ke(o)}}this.array=void 0;return Ke()}});Me(q.prototype);var Qe=Array.of===Ye.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Qe){ne(Array,"of",Ye.of)}var et={copyWithin:function copyWithin(e,t){var r=ce.ToObject(this);var n=ce.ToLength(r.length);var o=ce.ToInteger(e);var i=ce.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:ce.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=ce.ToObject(this);var o=ce.ToLength(n.length);t=ce.ToInteger(typeof t==="undefined"?0:t);r=ce.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!ce.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!ce.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ie]){b(Array.prototype,{values:Array.prototype[ie]});if(re.symbol($.unscopables)){Array.prototype[$.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var tt=Array.prototype.values;ne(Array.prototype,"values",function values(){return ce.Call(tt,this,arguments)});h(Array.prototype,ie,Array.prototype.values,true)}b(Array.prototype,et);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}Me(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){Me(Object.getPrototypeOf([].values()))}var rt=function(){return a(function(){return Array.from({length:-1}).length===0})}();var nt=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!rt||!nt){ne(Array,"from",Ye.from)}var ot=function(){return a(function(){return Array.from([0],void 0)})}();if(!ot){var it=Array.from;ne(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return ce.Call(it,this,arguments)}else{return t(it,this,e)}})}var at=-(Math.pow(2,32)-1);var ut=function(e,r){var n={length:at};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!ut(Array.prototype.forEach)){var ft=Array.prototype.forEach;ne(Array.prototype,"forEach",function forEach(e){return ce.Call(ft,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.map)){var st=Array.prototype.map;ne(Array.prototype,"map",function map(e){return ce.Call(st,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.filter)){var ct=Array.prototype.filter;ne(Array.prototype,"filter",function filter(e){return ce.Call(ct,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.some)){var lt=Array.prototype.some;ne(Array.prototype,"some",function some(e){return ce.Call(lt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.every)){var pt=Array.prototype.every;ne(Array.prototype,"every",function every(e){return ce.Call(pt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduce)){var vt=Array.prototype.reduce;ne(Array.prototype,"reduce",function reduce(e){return ce.Call(vt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduceRight,true)){var yt=Array.prototype.reduceRight;ne(Array.prototype,"reduceRight",function reduceRight(e){return ce.Call(yt,this.length>=0?this:[],arguments)},true)}var ht=Number("0o10")!==8;var bt=Number("0b10")!==2;var gt=y(Ue,function(e){return Number(e+0+e)===0});if(ht||bt||gt){var dt=Number;var mt=/^0b[01]+$/i;var Ot=/^0o[0-7]+$/i;var wt=mt.test.bind(mt);var jt=Ot.test.bind(Ot);var St=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(re.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(re.primitive(t)){return t}}throw new TypeError("No default value")};var Tt=$e.test.bind($e);var It=Je.test.bind(Je);var Et=function(){var e=function Number(t){var r;if(arguments.length>0){r=re.primitive(t)?t:St(t,"number")}else{r=0}if(typeof r==="string"){r=ce.Call(Be,r);if(wt(r)){r=parseInt(C(r,2),2)}else if(jt(r)){r=parseInt(C(r,2),8)}else if(Tt(r)||It(r)){r=NaN}}var n=this;var o=a(function(){dt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new dt(r)}return dt(r)};return e}();Ee(dt,Et,{});b(Et,{NaN:dt.NaN,MAX_VALUE:dt.MAX_VALUE,MIN_VALUE:dt.MIN_VALUE,NEGATIVE_INFINITY:dt.NEGATIVE_INFINITY,POSITIVE_INFINITY:dt.POSITIVE_INFINITY});Number=Et;m.redefine(S,"Number",Et)}var Pt=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Pt,MIN_SAFE_INTEGER:-Pt,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function isInteger(e){return K(e)&&ce.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:X});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){ne(Array.prototype,"find",et.find)}if([,1].findIndex(function(){return true})!==0){ne(Array.prototype,"findIndex",et.findIndex)}var Ct=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Mt=function ensureEnumerable(e,t){if(s&&Ct(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var xt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var Nt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var At=function(e,t){var r=n(Object(t));var o;if(ce.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),Ct(t))}return p(P(r,o||[]),Nt(t),e)};var Rt={assign:function(e,t){var r=ce.ToObject(e,"Cannot convert undefined or null to object");return p(ce.Call(xt,1,arguments),At,r)},is:function is(e,t){return ce.SameValue(e,t)}};var _t=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(_t){ne(Object,"assign",Rt.assign)}b(Object,Rt);if(s){var kt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!ce.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||ce.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,kt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Lt=!i(function(){return Object.keys("foo")});if(!Lt){var Ft=Object.keys;ne(Object,"keys",function keys(e){return Ft(ce.ToObject(e))});n=Object.keys}var Dt=i(function(){return Object.keys(/a/g)});if(Dt){var zt=Object.keys;ne(Object,"keys",function keys(e){if(re.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return zt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var qt=!i(function(){return Object.getOwnPropertyNames("foo")});if(!qt){var Wt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Gt=Object.getOwnPropertyNames;ne(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=ce.ToObject(e);if(g(t)==="[object Window]"){try{return Gt(t)}catch(r){return P([],Wt)}}return Gt(t)})}}if(Object.getOwnPropertyDescriptor){var Ht=!i(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!Ht){var Vt=Object.getOwnPropertyDescriptor;ne(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Vt(ce.ToObject(e),t)})}}if(Object.seal){var Bt=!i(function(){return Object.seal("foo")});if(!Bt){var Ut=Object.seal;ne(Object,"seal",function seal(e){if(!ce.TypeIsObject(e)){return e}return Ut(e)})}}if(Object.isSealed){var $t=!i(function(){return Object.isSealed("foo")});if(!$t){var Jt=Object.isSealed;ne(Object,"isSealed",function isSealed(e){if(!ce.TypeIsObject(e)){return true}return Jt(e)})}}if(Object.freeze){var Xt=!i(function(){return Object.freeze("foo")});if(!Xt){var Kt=Object.freeze;ne(Object,"freeze",function freeze(e){if(!ce.TypeIsObject(e)){return e}return Kt(e)})}}if(Object.isFrozen){var Zt=!i(function(){return Object.isFrozen("foo")});if(!Zt){var Yt=Object.isFrozen;ne(Object,"isFrozen",function isFrozen(e){if(!ce.TypeIsObject(e)){return true}return Yt(e)})}}if(Object.preventExtensions){var Qt=!i(function(){return Object.preventExtensions("foo")});if(!Qt){var er=Object.preventExtensions;ne(Object,"preventExtensions",function preventExtensions(e){if(!ce.TypeIsObject(e)){return e}return er(e)})}}if(Object.isExtensible){var tr=!i(function(){return Object.isExtensible("foo")});if(!tr){var rr=Object.isExtensible;ne(Object,"isExtensible",function isExtensible(e){if(!ce.TypeIsObject(e)){return false}return rr(e)})}}if(Object.getPrototypeOf){var nr=!i(function(){return Object.getPrototypeOf("foo")});if(!nr){var or=Object.getPrototypeOf;ne(Object,"getPrototypeOf",function getPrototypeOf(e){return or(ce.ToObject(e))})}}var ir=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ce.IsCallable(e.get)}();if(s&&!ir){var ar=function flags(){if(!ce.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",ar)}var ur=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var fr=oe&&s&&function(){var e=/./;e[$.match]=false;return RegExp(e)===e}();var sr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var cr=sr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!sr||!cr){var lr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=ce.RequireObjectCoercible(this);if(re.regex(e)){return t(lr,e)}var r=ue(e.source);var n=ue(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,lr)}if(s&&(!ur||fr)){var pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var vr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var yr=function(){return this.source};var hr=ce.IsCallable(vr.get)?vr.get:yr;var br=RegExp;var gr=function(){return function RegExp(e,t){var r=ce.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(re.regex(e)){o=ce.Call(hr,e);i=typeof t==="undefined"?ce.Call(pr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new br(e,t)}}();Ee(br,gr,{$input:true});RegExp=gr;m.redefine(S,"RegExp",gr)}if(s){var dr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(dr),function(e){if(e in RegExp&&!(dr[e]in RegExp)){m.getter(RegExp,dr[e],function get(){return RegExp[e]})}})}Ce(RegExp);var mr=1/Number.EPSILON;var Or=function roundTiesToEven(e){return e+mr-mr};var wr=Math.pow(2,-23);var jr=Math.pow(2,127)*(2-wr);var Sr=Math.pow(2,-126);var Tr=Math.E;var Ir=Math.LOG2E;var Er=Math.LOG10E;var Pr=Number.prototype.clz;delete Number.prototype.clz;var Cr={acosh:function acosh(e){var t=Number(e);if(X(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}var r=1/(t*t);if(t<2){return Y(t-1+D(1-r)*t)}var n=t/2;return Y(n+D(1-r)*n-1)+1/Ir},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}var r=k(t);var n=r*r;var o=Z(t);if(r<1){return o*Y(r+n/(D(n+1)+1))}return o*(Y(r/2+D(1+1/n)*r/2-1)+1/Ir)},atanh:function atanh(e){var t=Number(e);if(t===0){return t}if(t===-1){return-Infinity}if(t===1){return Infinity}if(X(t)||t<-1||t>1){return NaN}var r=k(t);return Z(t)*Y(2*r/(1-r))/2},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=L(F(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=ce.ToUint32(t);if(r===0){return 32}return Pr?ce.Call(Pr,r):31-_(F(r+.5)*Ir)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(X(t)){return NaN}if(!T(t)){return Infinity}var r=L(k(t)-1);return(r+1/(r*Tr*Tr))*(Tr/2)},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return L(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return F(e)*Ir},log10:function log10(e){return F(e)*Er},log1p:Y,sign:Z,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}var r=k(t);if(r<1){var n=Math.expm1(r);return Z(t)*n*(1+1/(n+1))/2}var o=L(r-1);return Z(t)*(o-1/(o*Tr*Tr))*(Tr/2)},tanh:function tanh(e){var t=Number(e);if(X(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(L(t)+L(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=ce.ToUint32(e);var n=ce.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||X(t)){return t}var r=Z(t);var n=k(t);if(n<Sr){return r*Or(n/Sr/wr)*Sr*wr}var o=(1+wr/Number.EPSILON)*n;var i=o-(o-n);if(i>jr||X(i)){return r*Infinity}return r*i}};var Mr=function withinULPDistance(e,t,r){return k(1-e/t)/Number.EPSILON<(r||8)};b(Math,Cr);h(Math,"sinh",Cr.sinh,Math.sinh(710)===Infinity);h(Math,"cosh",Cr.cosh,Math.cosh(710)===Infinity);h(Math,"log1p",Cr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",Cr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"asinh",Cr.asinh,Math.asinh(1e300)===Infinity);h(Math,"atanh",Cr.atanh,Math.atanh(1e-300)===0);h(Math,"tanh",Cr.tanh,Math.tanh(-2e-17)!==-2e-17);
h(Math,"acosh",Cr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"acosh",Cr.acosh,!Mr(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON)));h(Math,"cbrt",Cr.cbrt,!Mr(Math.cbrt(1e-300),1e-100));h(Math,"sinh",Cr.sinh,Math.sinh(-2e-17)!==-2e-17);var xr=Math.expm1(10);h(Math,"expm1",Cr.expm1,xr>22025.465794806718||xr<22025.465794806718);var Nr=Math.round;var Ar=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Rr=mr+1;var _r=2*mr-1;var kr=[Rr,_r].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Ar||!kr);m.preserveToString(Math.round,Nr);var Lr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Cr.imul;m.preserveToString(Math.imul,Lr)}if(Math.imul.length!==2){ne(Math,"imul",function imul(e,t){return ce.Call(Lr,Math,arguments)})}var Fr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}ce.IsPromise=function(e){if(!ce.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!ce.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(ce.IsCallable(t.resolve)&&ce.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&ce.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=ce.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(ce.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!ce.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return m(e,o)}if(!ce.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!ce.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Ae(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=ce.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=ce.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(ce.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!ce.IsPromise(n)){throw new TypeError("not a promise")}var o=ce.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=ce.IsCallable(e)?e:a;var d=ce.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Fr==="function"){b(S,{Promise:Fr});var Dr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var zr=!i(function(){return S.Promise.reject(42).then(null,5).then(null,W)});var qr=i(function(){return S.Promise.call(3,W)});var Wr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(n){return true}return t===r}(S.Promise);var Gr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Hr=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Hr.prototype=Promise.prototype;Hr.all=Promise.all;var Vr=a(function(){return!!Hr.all([1,2])});if(!Dr||!zr||!qr||Wr||!Gr||Vr){Promise=Fr;ne(S,"Promise",Fr)}if(Promise.all.length!==1){var Br=Promise.all;ne(Promise,"all",function all(e){return ce.Call(Br,this,arguments)})}if(Promise.race.length!==1){var Ur=Promise.race;ne(Promise,"race",function race(e){return ce.Call(Ur,this,arguments)})}if(Promise.resolve.length!==1){var $r=Promise.resolve;ne(Promise,"resolve",function resolve(e){return ce.Call($r,this,arguments)})}if(Promise.reject.length!==1){var Jr=Promise.reject;ne(Promise,"reject",function reject(e){return ce.Call(Jr,this,arguments)})}Mt(Promise,"all");Mt(Promise,"race");Mt(Promise,"resolve");Mt(Promise,"reject");Ce(Promise)}var Xr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Kr=Xr(["z","a","bb"]);var Zr=Xr(["z",1,"a","3",2]);if(s){var Yr=function fastkey(e,t){if(!t&&!Kr){return null}if(se(e)){return"^"+ce.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Zr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Qr=function emptyObject(){return Object.create?Object.create(null):{}};var en=function addIterableToMap(e,n,o){if(r(o)||re.string(o)){l(o,function(e){if(!ce.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!se(o)){a=n.set;if(!ce.IsCallable(a)){throw new TypeError("bad map")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!ce.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){ce.IteratorClose(i,true);throw s}}}}};var tn=function addIterableToSet(e,n,o){if(r(o)||re.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!se(o)){a=n.add;if(!ce.IsCallable(a)){throw new TypeError("bad set")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){ce.IteratorClose(i,true);throw s}}}}};var rn={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!ce.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ce.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={isMapIterator:true,next:function next(){if(!this.isMapIterator){throw new TypeError("Not a MapIterator")}var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ke()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ke(n)}}this.i=void 0;return Ke()}};Me(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Ae(this,Map,a,{_es6map:true,_head:null,_map:G?new G:null,_size:0,_storage:Qr()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){en(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=Yr(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}else{return}}if(this._map){t=V.call(this._map,e);if(t){return t.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Yr(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return B.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(ce.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Yr(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}else if(this._map){if(B.call(this._map,e)){V.call(this._map,e).value=t}else{a=new r(e,t);U.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(ce.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=Yr(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!B.call(this._map,t)){return false}n=V.call(this._map,t).prev;H.call(this._map,t)}while((n=n.next)!==r){if(ce.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=G?new G:null;this._size=0;this._storage=Qr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});Me(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!ce.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+ce.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Ae(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Qr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){tn(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new rn.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Yr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Yr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Yr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Qr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return new f(this["[[SetData]]"].values())},entries:function entries(){r(this,"entries");u(this);return new f(this["[[SetData]]"].entries())},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);Me(i.prototype,i.prototype.values);var f=function SetIterator(e){this.it=e};f.prototype={isSetIterator:true,next:function next(){if(!this.isSetIterator){throw new TypeError("Not a SetIterator")}return this.it.next()}};Me(f.prototype);return i}()};var nn=S.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(nn){S.Set=rn.Set}if(S.Map||S.Set){var on=a(function(){return new Map([[1,2]]).get(1)===2});if(!on){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(G.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var an=new Map;var un=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var fn=an.set(1,2)===an;if(!un||!fn){ne(Map.prototype,"set",function set(e,r){t(U,this,e===0?0:e,r);return this})}if(!un){b(Map.prototype,{get:function get(e){return t(V,this,e===0?0:e)},has:function has(e){return t(B,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,V);m.preserveToString(Map.prototype.has,B)}var sn=new Set;var cn=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(e){e["delete"](0);e.add(-0);return!e.has(0)}(sn);var ln=sn.add(1)===sn;if(!cn||!ln){var pn=Set.prototype.add;Set.prototype.add=function add(e){t(pn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,pn)}if(!cn){var vn=Set.prototype.has;Set.prototype.has=function has(e){return t(vn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,vn);var yn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(yn,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],yn)}var hn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var bn=Object.setPrototypeOf&&!hn;var gn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||bn||!gn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=G.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var dn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var mn=Object.setPrototypeOf&&!dn;var On=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||mn||!On){var wn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new wn;if(arguments.length>0){tn(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=wn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,wn)}var jn=new S.Map;var Sn=!a(function(){return jn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||jn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof jn.keys().next!=="function"||Sn||!hn){b(S,{Map:rn.Map,Set:rn.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}Me(Object.getPrototypeOf((new S.Map).keys()));Me(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var Tn=S.Set.prototype.has;ne(S.Set.prototype,"has",function has(e){return t(Tn,this,e)})}}b(S,rn);Ce(S.Map);Ce(S.Set)}var In=function throwUnlessTargetIsObject(e){if(!ce.TypeIsObject(e)){throw new TypeError("target must be an object")}};var En={apply:function apply(){return ce.Call(ce.Call,null,arguments)},construct:function construct(e,t){if(!ce.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!ce.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return ce.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){In(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){In(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(En,{ownKeys:function ownKeys(e){In(e);var t=Object.getOwnPropertyNames(e);if(ce.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Pn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(En,{isExtensible:function isExtensible(e){In(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){In(e);return Pn(function(){return Object.preventExtensions(e)})}})}if(s){var Cn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return Cn(o,t,r)}if("value"in n){return n.value}if(n.get){return ce.Call(n.get,r)}return void 0};var Mn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Mn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!ce.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ae.defineProperty(o,r,{value:n})}else{return ae.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(En,{defineProperty:function defineProperty(e,t,r){In(e);return Pn(function(){return Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){In(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){In(e);var r=arguments.length>2?arguments[2]:e;return Cn(e,t,r)},set:function set(e,t,r){In(e);var n=arguments.length>3?arguments[3]:e;return Mn(e,t,r,n)}})}if(Object.getPrototypeOf){var xn=Object.getPrototypeOf;En.getPrototypeOf=function getPrototypeOf(e){In(e);return xn(e)}}if(Object.setPrototypeOf&&En.getPrototypeOf){var Nn=function(e,t){var r=t;while(r){if(e===r){return true}r=En.getPrototypeOf(r)}return false};Object.assign(En,{setPrototypeOf:function setPrototypeOf(e,t){In(e);if(t!==null&&!ce.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ae.getPrototypeOf(e)){return true}if(ae.isExtensible&&!ae.isExtensible(e)){return false}if(Nn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var An=function(e,t){if(!ce.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){ne(S.Reflect,e,t)}}};Object.keys(En).forEach(function(e){An(e,En[e])});var Rn=S.Reflect.getPrototypeOf;if(c&&Rn&&Rn.name!=="getPrototypeOf"){ne(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(Rn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){ne(S.Reflect,"setPrototypeOf",En.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){ne(S.Reflect,"defineProperty",En.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){ne(S.Reflect,"construct",En.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var _n=Date.prototype.toString;var kn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return ce.Call(_n,this)};ne(Date.prototype,"toString",kn)}var Ln={anchor:function anchor(e){return ce.CreateHTML(this,"a","name",e)},big:function big(){return ce.CreateHTML(this,"big","","")},blink:function blink(){return ce.CreateHTML(this,"blink","","")},bold:function bold(){return ce.CreateHTML(this,"b","","")},fixed:function fixed(){return ce.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return ce.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return ce.CreateHTML(this,"font","size",e)},italics:function italics(){return ce.CreateHTML(this,"i","","")},link:function link(e){return ce.CreateHTML(this,"a","href",e)},small:function small(){return ce.CreateHTML(this,"small","","")},strike:function strike(){return ce.CreateHTML(this,"strike","","")},sub:function sub(){return ce.CreateHTML(this,"sub","","")},sup:function sub(){return ce.CreateHTML(this,"sup","","")}};l(Object.keys(Ln),function(e){var r=String.prototype[e];var n=false;if(ce.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){ne(String.prototype,e,Ln[e])}});var Fn=function(){if(!oe){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e($())!=="undefined"){return true}if(e([$()])!=="[null]"){return true}var t={a:$()};t[$()]=true;if(e(t)!=="{}"){return true}return false}();var Dn=a(function(){if(!oe){return true}return JSON.stringify(Object($()))==="{}"&&JSON.stringify([Object($())])==="[{}]"});if(Fn||!Dn){var zn=JSON.stringify;ne(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=ce.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(re.symbol(n)){return Nt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return zn.apply(this,o)})}return S});
//# sourceMappingURL=es6-shim.map
/*! jQuery v3.4.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],E=C.document,r=Object.getPrototypeOf,s=t.slice,g=t.concat,u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.4.1",k=function(e,t){return new k.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function d(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}k.fn=k.prototype={jquery:f,constructor:k,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(n){return this.pushStack(k.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},k.extend=k.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,a[t]=k.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},k.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){b(e,{nonce:t&&t.nonce})},each:function(e,t){var n,r=0;if(d(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(d(Object(e))?k.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(d(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g.apply([],a)},guid:1,support:y}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=t[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var h=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,k="sizzle"+1*new Date,m=n.document,S=0,r=0,p=ue(),x=ue(),N=ue(),A=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",$=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",F=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp($),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ne=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(m.childNodes),m.childNodes),t[m.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&((e?e.ownerDocument||e:m)!==C&&T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!A[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&U.test(t)){(s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=k),o=(l=h(t)).length;while(o--)l[o]="#"+s+" "+xe(l[o]);c=l.join(","),f=ee.test(t)&&ye(e.parentNode)||e}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){A(t,!0)}finally{s===k&&e.removeAttribute("id")}}}return g(t.replace(B,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[k]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:m;return r!==C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),m!==C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=k,!C.getElementsByName||!C.getElementsByName(k).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){a.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+k+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||v.push(".#.+[+~]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",$)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e===C||e.ownerDocument===m&&y(m,e)?-1:t===C||t.ownerDocument===m&&y(m,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===C?-1:t===C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]===m?-1:s[r]===m?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==C&&T(e),d.matchesSelector&&E&&!A[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){A(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!==C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=p[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&p(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(F," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[S,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[S,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[k]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace(B,"$1"));return s[k]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[S,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[k]||(e[k]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===S&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[k]&&(v=Ce(v)),y&&!y[k]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[k]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(B,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(B," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=N[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[k]?i.push(a):o.push(a);(a=N(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=S+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t===C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument===C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(S=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(S=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=k.split("").sort(D).join("")===k,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);k.find=h,k.expr=h.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=h.uniqueSort,k.text=h.getText,k.isXMLDoc=h.isXML,k.contains=h.contains,k.escapeSelector=h.escape;var T=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&k(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},N=k.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?k.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?k.grep(e,function(e){return e===n!==r}):"string"!=typeof n?k.grep(e,function(e){return-1<i.call(n,e)!==r}):k.filter(n,e,r)}k.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?k.find.matchesSelector(r,e)?[r]:[]:k.find.matches(e,k.grep(t,function(e){return 1===e.nodeType}))},k.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(k(e).filter(function(){for(t=0;t<r;t++)if(k.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)k.find(e,i[t],n);return 1<r?k.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&N.test(e)?k(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),D.test(r[1])&&k.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,q=k(E);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}k.fn.extend({has:function(e){var t=k(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(k.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&k(e);if(!N.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&k.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?k.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(k(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return"undefined"!=typeof e.contentDocument?e.contentDocument:(A(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},function(r,i){k.fn[r]=function(e,t){var n=k.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=k.filter(t,n)),1<this.length&&(O[r]||k.uniqueSort(n),H.test(r)&&n.reverse()),this.pushStack(n)}});var R=/[^\x20\t\r\n\f]+/g;function M(e){return e}function I(e){throw e}function W(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}k.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},k.each(e.match(R)||[],function(e,t){n[t]=!0}),n):k.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){k.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return k.each(arguments,function(e,t){var n;while(-1<(n=k.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<k.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},k.extend({Deferred:function(e){var o=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return k.Deferred(function(r){k.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,M,s),l(u,o,I,s)):(u++,t.call(e,l(u,o,M,s),l(u,o,I,s),l(u,o,M,o.notifyWith))):(a!==M&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==I&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(k.Deferred.getStackHook&&(t.stackTrace=k.Deferred.getStackHook()),C.setTimeout(t))}}return k.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:M,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:M)),o[2][3].add(l(0,e,m(n)?n:I))}).promise()},promise:function(e){return null!=e?k.extend(e,a):a}},s={};return k.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=k.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(W(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)W(i[t],a(t),o.reject);return o.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&$.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){C.setTimeout(function(){throw e})};var F=k.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),k.ready()}k.fn.ready=function(e){return F.then(e)["catch"](function(e){k.readyException(e)}),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0)!==e&&0<--k.readyWait||F.resolveWith(E,[k])}}),k.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(k.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var _=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)_(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(k(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},z=/^-ms-/,U=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function V(e){return e.replace(z,"ms-").replace(U,X)}var G=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=k.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[V(t)]=n;else for(r in t)i[V(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(V):(t=V(t))in r?[t]:t.match(R)||[]).length;while(n--)delete r[t[n]]}(void 0===t||k.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var Q=new Y,J=new Y,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function ee(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:K.test(i)?JSON.parse(i):i)}catch(e){}J.set(e,t,n)}else n=void 0;return n}k.extend({hasData:function(e){return J.hasData(e)||Q.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),k.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=J.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=V(r.slice(5)),ee(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){J.set(this,n)}):_(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=J.get(o,n))?t:void 0!==(t=ee(o,n))?t:void 0;this.each(function(){J.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){J.remove(this,e)})}}),k.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=k.queue(e,t),r=n.length,i=n.shift(),o=k._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){k.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:k.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),k.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?k.queue(this[0],t):void 0===n?this:this.each(function(){var e=k.queue(this,t,n);k._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&k.dequeue(this,t)})},dequeue:function(e){return this.each(function(){k.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=k.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],ie=E.documentElement,oe=function(e){return k.contains(e.ownerDocument,e)},ae={composed:!0};ie.getRootNode&&(oe=function(e){return k.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===k.css(e,"display")},ue=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function le(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return k.css(e,t,"")},u=s(),l=n&&n[3]||(k.cssNumber[t]?"":"px"),c=e.nodeType&&(k.cssNumber[t]||"px"!==l&&+u)&&ne.exec(k.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)k.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,k.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ce={};function fe(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Q.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&se(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ce[s])||(o=a.body.appendChild(a.createElement(s)),u=k.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ce[s]=u)))):"none"!==n&&(l[c]="none",Q.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}k.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){se(this)?k(this).show():k(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?k.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;var me,xe,be=/<|&#?\w+;/;function we(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))k.merge(p,o.nodeType?[o]:o);else if(be.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+k.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;k.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<k.inArray(o,r))i&&i.push(o);else if(l=oe(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}me=E.createDocumentFragment().appendChild(E.createElement("div")),(xe=E.createElement("input")).setAttribute("type","radio"),xe.setAttribute("checked","checked"),xe.setAttribute("name","t"),me.appendChild(xe),y.checkClone=me.cloneNode(!0).cloneNode(!0).lastChild.checked,me.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!me.cloneNode(!0).lastChild.defaultValue;var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Se(){return!1}function Ne(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Se;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return k().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=k.guid++)),e.each(function(){k.event.add(this,t,i,r,n)})}function De(e,i,o){o?(Q.set(e,i,!1),k.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Q.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(k.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Q.set(this,i,r),t=o(this,i),this[i](),r!==(n=Q.get(this,i))||t?Q.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Q.set(this,i,{value:k.event.trigger(k.extend(r[0],k.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,i)&&k.event.add(e,i,ke)}k.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.get(t);if(v){n.handler&&(n=(o=n).handler,i=o.selector),i&&k.find.matchesSelector(ie,i),n.guid||(n.guid=k.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof k&&k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(R)||[""]).length;while(l--)d=g=(s=Ee.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=k.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=k.event.special[d]||{},c=k.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),k.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.hasData(e)&&Q.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(R)||[""]).length;while(l--)if(d=g=(s=Ee.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=k.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||k.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)k.event.remove(e,d+t[l],n,r,!0);k.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=k.event.fix(e),u=new Array(arguments.length),l=(Q.get(this,"events")||{})[s.type]||[],c=k.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){a=k.event.handlers.call(this,s,l),t=0;while((i=a[t++])&&!s.isPropagationStopped()){s.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!s.isImmediatePropagationStopped())s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<k(i,this).index(l):k.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click",ke),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Q.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},function(e,t){k.event.special[e]={setup:function(){return De(this,e,Ne),!1},trigger:function(){return De(this,e),!0},delegateType:t}}),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){k.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||k.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),k.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,k(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each(function(){k.event.remove(this,e,n,t)})}});var je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,qe=/<script|<style|<link/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.access(e),a=Q.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)k.event.add(t,i,l[i][n]);J.hasData(e)&&(s=J.access(e),u=k.extend({},s),J.set(t,u))}}function Ie(n,r,i,o){r=g.apply([],r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Le.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Ie(t,r,i,o)});if(f&&(t=(e=we(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=k.map(ve(e,"script"),Pe)).length;c<f;c++)u=e,c!==p&&(u=k.clone(u,!0,!0),s&&k.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,k.map(a,Re),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Q.access(u,"globalEval")&&k.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?k._evalUrl&&!u.noModule&&k._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):b(u.textContent.replace(He,""),u,l))}return n}function We(e,t,n){for(var r,i=t?k.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||k.cleanData(ve(r)),r.parentNode&&(n&&oe(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}k.extend({htmlPrefilter:function(e){return e.replace(je,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=oe(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Me(o[r],a[r]);else Me(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=k.event.special,o=0;void 0!==(n=e[o]);o++)if(G(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),k.fn.extend({detach:function(e){return We(this,e,!0)},remove:function(e){return We(this,e)},text:function(e){return _(this,function(e){return void 0===e?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ie(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)})},prepend:function(){return Ie(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return k.clone(this,e,t)})},html:function(e){return _(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(k.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Ie(this,arguments,function(e){var t=this.parentNode;k.inArray(this,n)<0&&(k.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){k.fn[e]=function(e){for(var t,n=[],r=k(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),k(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var $e=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Fe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Be=new RegExp(re.join("|"),"i");function _e(e,t,n){var r,i,o,a,s=e.style;return(n=n||Fe(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||oe(e)||(a=k.style(e,t)),!y.pixelBoxStyles()&&$e.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(s).appendChild(u);var e=C.getComputedStyle(u);n="1%"!==e.top,a=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),r=36===t(e.width),u.style.position="absolute",i=12===t(u.offsetWidth/3),ie.removeChild(s),u=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s=E.createElement("div"),u=E.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),i}}))}();var Ue=["Webkit","Moz","ms"],Xe=E.createElement("div").style,Ve={};function Ge(e){var t=k.cssProps[e]||Ve[e];return t||(e in Xe?e:Ve[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Ue.length;while(n--)if((e=Ue[n]+t)in Xe)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,Qe=/^--/,Je={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"};function Ze(e,t,n){var r=ne.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=k.css(e,n+re[a],!0,i)),r?("content"===n&&(u-=k.css(e,"padding"+re[a],!0,i)),"margin"!==n&&(u-=k.css(e,"border"+re[a]+"Width",!0,i))):(u+=k.css(e,"padding"+re[a],!0,i),"padding"!==n?u+=k.css(e,"border"+re[a]+"Width",!0,i):s+=k.css(e,"border"+re[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function tt(e,t,n){var r=Fe(e),i=(!y.boxSizingReliable()||n)&&"border-box"===k.css(e,"boxSizing",!1,r),o=i,a=_e(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if($e.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||"auto"===a||!parseFloat(a)&&"inline"===k.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===k.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+et(e,t,n||(i?"border":"content"),o,r,a)+"px"}function nt(e,t,n,r,i){return new nt.prototype.init(e,t,n,r,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=_e(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=V(t),u=Qe.test(t),l=e.style;if(u||(t=Ge(s)),a=k.cssHooks[t]||k.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=ne.exec(n))&&i[1]&&(n=le(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(k.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=V(t);return Qe.test(t)||(t=Ge(s)),(a=k.cssHooks[t]||k.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=_e(e,t,r)),"normal"===i&&t in Ke&&(i=Ke[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),k.each(["height","width"],function(e,u){k.cssHooks[u]={get:function(e,t,n){if(t)return!Ye.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,u,n):ue(e,Je,function(){return tt(e,u,n)})},set:function(e,t,n){var r,i=Fe(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===k.css(e,"boxSizing",!1,i),s=n?et(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-et(e,u,"border",!1,i)-.5)),s&&(r=ne.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=k.css(e,u)),Ze(0,t,s)}}}),k.cssHooks.marginLeft=ze(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(_e(e,"marginLeft"))||e.getBoundingClientRect().left-ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(i,o){k.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+re[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(k.cssHooks[i+o].set=Ze)}),k.fn.extend({css:function(e,t){return _(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Fe(e),i=t.length;a<i;a++)o[t[a]]=k.css(e,t[a],!1,r);return o}return void 0!==n?k.style(e,t,n):k.css(e,t)},e,t,1<arguments.length)}}),((k.Tween=nt).prototype={constructor:nt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}}).init.prototype=nt.prototype,(nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||!k.cssHooks[e.prop]&&null==e.elem.style[Ge(e.prop)]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=nt.prototype.init,k.fx.step={};var rt,it,ot,at,st=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function lt(){it&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(lt):C.setTimeout(lt,k.fx.interval),k.fx.tick())}function ct(){return C.setTimeout(function(){rt=void 0}),rt=Date.now()}function ft(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=re[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function pt(e,t,n){for(var r,i=(dt.tweeners[t]||[]).concat(dt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function dt(o,e,t){var n,a,r=0,i=dt.prefilters.length,s=k.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=rt||ct(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},t),originalProperties:e,originalOptions:t,startTime:rt||ct(),duration:t.duration,tweens:[],createTween:function(e,t){var n=k.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=V(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=k.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=dt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(k._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return k.map(c,pt,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),k.fx.timer(k.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}k.Animation=k.extend(dt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(R);for(var n,r=0,i=e.length;r<i;r++)n=e[r],dt.tweeners[n]=dt.tweeners[n]||[],dt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&se(e),v=Q.get(e,"fxshow");for(r in n.queue||(null==(a=k._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,k.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],st.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||k.style(e,r)}if((u=!k.isEmptyObject(t))||!k.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Q.get(e,"display")),"none"===(c=k.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=k.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===k.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Q.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&fe([e],!0),p.done(function(){for(r in g||fe([e]),Q.remove(e,"fxshow"),d)k.style(e,r,d[r])})),u=pt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?dt.prefilters.unshift(e):dt.prefilters.push(e)}}),k.speed=function(e,t,n){var r=e&&"object"==typeof e?k.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return k.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in k.fx.speeds?r.duration=k.fx.speeds[r.duration]:r.duration=k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(e,t,n,r){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=k.isEmptyObject(t),o=k.speed(e,n,r),a=function(){var e=dt(this,k.extend({},t),o);(i||Q.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=k.timers,r=Q.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&ut.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||k.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Q.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=k.timers,o=n?n.length:0;for(t.finish=!0,k.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),k.each(["toggle","show","hide"],function(e,r){var i=k.fn[r];k.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ft(r,!0),e,t,n)}}),k.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){k.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),k.timers=[],k.fx.tick=function(){var e,t=0,n=k.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||k.fx.stop(),rt=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){it||(it=!0,lt())},k.fx.stop=function(){it=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(r,e){return r=k.fx&&k.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},ot=E.createElement("input"),at=E.createElement("select").appendChild(E.createElement("option")),ot.type="checkbox",y.checkOn=""!==ot.value,y.optSelected=at.selected,(ot=E.createElement("input")).value="t",ot.type="radio",y.radioValue="t"===ot.value;var ht,gt=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return _(this,k.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){k.removeAttr(this,e)})}}),k.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?k.prop(e,t,n):(1===o&&k.isXMLDoc(e)||(i=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?ht:void 0)),void 0!==n?null===n?void k.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=k.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(R);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ht={set:function(e,t,n){return!1===t?k.removeAttr(e,n):e.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(e,t){var a=gt[t]||k.find.attr;gt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=gt[o],gt[o]=r,r=null!=a(e,t,n)?o:null,gt[o]=i),r}});var vt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;function mt(e){return(e.match(R)||[]).join(" ")}function xt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(R)||[]}k.fn.extend({prop:function(e,t){return _(this,k.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[k.propFix[e]||e]})}}),k.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(e)||(t=k.propFix[t]||t,i=k.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).addClass(t.call(this,e,xt(this)))});if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).removeClass(t.call(this,e,xt(this)))});if(!arguments.length)return this.attr("class","");if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){k(this).toggleClass(i.call(this,e,xt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=k(this),r=bt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=xt(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+mt(xt(n))+" ").indexOf(t))return!0;return!1}});var wt=/\r/g;k.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,k(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=k.map(t,function(e){return null==e?"":e+""})),(r=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=k.valHooks[t.type]||k.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(wt,""):null==e?"":e:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:mt(k.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=k(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=k.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<k.inArray(k.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<k.inArray(k(e).val(),t)}},y.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var Tt=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!Tt.test(d+k.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[k.expando]?e:new k.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:k.makeArray(t,[e]),c=k.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,Tt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Q.get(o,"events")||{})[e.type]&&Q.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&G(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!G(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),k.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Ct),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Ct),k.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=k.extend(new k.Event,n,{type:e,isSimulated:!0});k.event.trigger(r,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each(function(){k.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return k.event.trigger(e,t,n,!0)}}),y.focusin||k.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){k.event.simulate(r,e.target,k.event.fix(e))};k.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=Q.access(e,r);t||e.addEventListener(n,i,!0),Q.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Q.access(e,r)-1;t?Q.access(e,r,t):(e.removeEventListener(n,i,!0),Q.remove(e,r))}}});var Et=C.location,kt=Date.now(),St=/\?/;k.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+e),t};var Nt=/\[\]$/,At=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function qt(n,e,r,i){var t;if(Array.isArray(e))k.each(e,function(e,t){r||Nt.test(n)?i(n,t):qt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)qt(n+"["+t+"]",e[t],r,i)}k.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,function(){i(this.name,this.value)});else for(n in e)qt(n,e[n],t,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&jt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,function(e){return{name:t.name,value:e.replace(At,"\r\n")}}):{name:t.name,value:n.replace(At,"\r\n")}}).get()}});var Lt=/%20/g,Ht=/#.*$/,Ot=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,Mt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Ft=E.createElement("a");function Bt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(R)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function _t(t,i,o,a){var s={},u=t===Wt;function l(e){var r;return s[e]=!0,k.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function zt(e,t){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&k.extend(!0,e,r),e}Ft.href=Et.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,k.ajaxSettings),t):zt(k.ajaxSettings,e)},ajaxPrefilter:Bt(It),ajaxTransport:Bt(Wt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=k.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?k(y):k.event,x=k.Deferred(),b=k.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Pt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+"").replace(Mt,Et.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(R)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Ft.protocol+"//"+Ft.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=k.param(v.data,v.traditional)),_t(It,v,t,T),h)return T;for(i in(g=k.event&&v.global)&&0==k.active++&&k.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Rt.test(v.type),f=v.url.replace(Ht,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Lt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(St.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Ot,"$1"),o=(St.test(f)?"&":"?")+"_="+kt+++o),v.url=f+o),v.ifModified&&(k.lastModified[f]&&T.setRequestHeader("If-Modified-Since",k.lastModified[f]),k.etag[f]&&T.setRequestHeader("If-None-Match",k.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+$t+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=_t(Wt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(k.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(k.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--k.active||k.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return k.get(e,t,n,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],function(e,i){k[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),k.ajax(k.extend({url:e,type:i,dataType:r,data:t,success:n},k.isPlainObject(e)&&e))}}),k._evalUrl=function(e,t){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){k.globalEval(e,t)}})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){k(this).wrapInner(n.call(this,e))}):this.each(function(){var e=k(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){k(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Xt=k.ajaxSettings.xhr();y.cors=!!Xt&&"withCredentials"in Xt,y.ajax=Xt=!!Xt,k.ajaxTransport(function(i){var o,a;if(y.cors||Xt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Ut[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),k.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),k.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=k("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Vt,Gt=[],Yt=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||k.expando+"_"+kt++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Yt,"$1"+r):!1!==e.jsonp&&(e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||k.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?k(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Vt=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),k.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=D.exec(e))?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var r,i,o},k.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=mt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&k.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?k("<div>").append(k.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){k.fn[t]=function(e){return this.on(t,e)}}),k.expr.pseudos.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length},k.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=k.css(e,"position"),c=k(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=k.css(e,"top"),u=k.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,k.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},k.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){k.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===k.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),i.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-k.css(r,"marginTop",!0),left:t.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===k.css(e,"position"))e=e.offsetParent;return e||ie})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;k.fn[t]=function(e){return _(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),k.each(["top","left"],function(e,n){k.cssHooks[n]=ze(y.pixelPosition,function(e,t){if(t)return t=_e(e,n),$e.test(t)?k(e).position()[n]+"px":t})}),k.each({Height:"height",Width:"width"},function(a,s){k.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){k.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return _(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?k.css(e,t,i):k.style(e,t,n,i)},s,n?e:void 0,n)}})}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){k.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),k.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),k.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||k.guid++,i},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=A,k.isFunction=m,k.isWindow=x,k.camelCase=V,k.type=w,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return k});var Qt=C.jQuery,Jt=C.$;return k.noConflict=function(e){return C.$===k&&(C.$=Jt),e&&C.jQuery===k&&(C.jQuery=Qt),k},e||(C.jQuery=C.$=k),k});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}(this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||[];return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var s=r&&r[o];s&&(this.off(t,o),delete r[o]),o.apply(this,e),n+=s?0:1,o=i[n]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}(window,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}function o(t,e,r){return this instanceof o?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=i({},this.options),"function"==typeof e?r=e:i(this.options,e),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(function(){this.check()}.bind(this))):new o(t,e,r)}function r(t){this.img=t}function s(t,e){this.url=t,this.element=e,this.img=new Image}var h=t.jQuery,a=t.console;o.prototype=Object.create(e.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),this.options.background===!0&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&d[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=t.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var d={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,t),n=i.exec(e.backgroundImage)}},o.prototype.addImage=function(t){var e=new r(t);this.images.push(e)},o.prototype.addBackground=function(t,e){var i=new s(t,e);this.images.push(i)},o.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},o.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,t,e)},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},r.prototype=Object.create(e.prototype),r.prototype.check=function(){var t=this.getIsImageComplete();return t?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},o.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(h=e,h.fn.imagesLoaded=function(t,e){var i=new o(this,t,e);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string-1.3.3-min.js | (c) 2013 Pieroxy | Licensed under a WTFPL license */
var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(e){"use strict";var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=e.URL||e.webkitURL||e,i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),s="download"in i,o=function(n){var r=t.createEvent("MouseEvents");r.initMouseEvent("click",true,false,e,0,0,0,0,0,false,false,false,false,0,null);n.dispatchEvent(r)},u=e.webkitRequestFileSystem,a=e.requestFileSystem||u||e.mozRequestFileSystem,f=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",c=0,h=[],p=function(){var e=h.length;while(e--){var t=h[e];if(typeof t==="string"){r.revokeObjectURL(t)}else{t.remove()}}h.length=0},d=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var i=e["on"+t[r]];if(typeof i==="function"){try{i.call(e,n||e)}catch(s){f(s)}}}},v=function(t,r){var f=this,p=t.type,v=false,m,g,y=function(){var e=n().createObjectURL(t);h.push(e);return e},b=function(){d(f,"writestart progress write writeend".split(" "))},w=function(){if(v||!m){m=y(t)}if(g){g.location.href=m}else{window.open(m,"_blank")}f.readyState=f.DONE;b()},E=function(e){return function(){if(f.readyState!==f.DONE){return e.apply(this,arguments)}}},S={create:true,exclusive:false},x;f.readyState=f.INIT;if(!r){r="download"}if(s){m=y(t);i.href=m;i.download=r;o(i);f.readyState=f.DONE;b();return}if(e.chrome&&p&&p!==l){x=t.slice||t.webkitSlice;t=x.call(t,0,t.size,l);v=true}if(u&&r!=="download"){r+=".download"}if(p===l||u){g=e}if(!a){w();return}c+=t.size;a(e.TEMPORARY,c,E(function(e){e.root.getDirectory("saved",S,E(function(e){var n=function(){e.getFile(r,S,E(function(e){e.createWriter(E(function(n){n.onwriteend=function(t){g.location.href=e.toURL();h.push(e);f.readyState=f.DONE;d(f,"writeend",t)};n.onerror=function(){var e=n.error;if(e.code!==e.ABORT_ERR){w()}};"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=f["on"+e]});n.write(t);f.abort=function(){n.abort();f.readyState=f.DONE};f.readyState=f.WRITING}),w)}),w)};e.getFile(r,{create:false},E(function(e){e.remove();n()}),E(function(e){if(e.code===e.NOT_FOUND_ERR){n()}else{w()}}))}),w)}),w)},m=v.prototype,g=function(e,t){return new v(e,t)};m.abort=function(){var e=this;e.readyState=e.DONE;d(e,"abort")};m.readyState=m.INIT=0;m.WRITING=1;m.DONE=2;m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null;e.addEventListener("unload",p,false);return g}(self)
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau, all rights reserved. | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
}else{document.documentElement.setAttribute("data-init", "lacking");}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{display:none;z-index:100000;position:fixed;top:0;left:0;height:100%;width:100%;font:28px/1 Helmet,Freesans,sans-serif;font-weight:700;color:#eee;background-color:#111;text-align:center}#init-screen>div{display:none;position:relative;margin:0 auto;max-width:1136px;top:25%}html[data-init=lacking] #init-screen,html[data-init=loading] #init-screen,html[data-init=no-js] #init-screen{display:block}html[data-init=lacking] #init-lacking,html[data-init=no-js] #init-no-js{display:block;padding:0 1em}html[data-init=no-js] #init-no-js{color:red}html[data-init=loading] #init-loading{display:block;border:24px solid transparent;border-radius:50%;border-top-color:#7f7f7f;border-bottom-color:#7f7f7f;width:100px;height:100px;-webkit-animation:init-loading-spin 2s linear infinite;-o-animation:init-loading-spin 2s linear infinite;animation:init-loading-spin 2s linear infinite}html[data-init=loading] #init-loading>div{text-indent:9999em;overflow:hidden;white-space:nowrap}html[data-init=loading] #passages,html[data-init=loading] #ui-bar{display:none}</style>
<style id="style-font" type="text/css">@font-face{font-family:tme-fa-icons;src:url(data:application/octet-stream;base64,d09GRgABAAAAACWoAA4AAAAAQhQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABRAAAAEQAAABWPihI/2NtYXAAAAGIAAAAOgAAAUrQXRm3Y3Z0IAAAAcQAAAAKAAAACgAAAABmcGdtAAAB0AAABZQAAAtwiJCQWWdhc3AAAAdkAAAACAAAAAgAAAAQZ2x5ZgAAB2wAABjCAAAq+uJ4WNtoZWFkAAAgMAAAADQAAAA2BZlJs2hoZWEAACBkAAAAIAAAACQIJwQZaG10eAAAIIQAAABuAAABOPTeAABsb2NhAAAg9AAAAJ4AAACeojKW6m1heHAAACGUAAAAIAAAACAA6gvwbmFtZQAAIbQAAAGPAAAC/eLsyKlwb3N0AAAjRAAAAfwAAAM0412SIHByZXAAACVAAAAAZQAAAHvdawOFeJxjYGRWYZzAwMrAwVTFtIeBgaEHQjM+YDBkZGJgYGJgZWbACgLSXFMYHF4wvPBhDvqfxRDFHMQwDSjMCJIDANLeC6V4nGNgYGBmgGAZBkYGEHAB8hjBfBYGDSDNBqQZGZgYGF74/P8PUvCCAURLMELVAwEjG8OIBwC4Ywb6AAAAAAAAAAAAAAAAAAB4nK1WaXMTRxCd1WHLNj6CDxI2gVnGcox2VpjLCBDG7EoW4BzylexCjl1Ldu6LT/wG/ZpekVSRb/y0vB4d2GAnVVQoSv2m9+1M9+ueXpPQksReWI+k3HwpprY2aWTnSUg3bFqO4kPZ2QspU0z+LoiCaLXUvu04JCISgap1hSWC2PfI0iTjQ48yWrYlvWpSbulJd9kaD+qt+vbT0FGO3QklNZuhQ+uRLanCqBJFMu2RkjYtw9VfSVrh5yvMfNUMJYLoJJLGm2EMj+Rn44xWGa3GdhxFkU2WG0WKRDM8iCKPslpin1wxQUD5oBlSXvk0onyEH5EVe5TTCnHJdprf9yU/6R3OvyTieouyJQf+QHZkB3unK/ki0toK46adbEehivB0fSfEI5uT6p/sUV7TaOB2RaYnzQiWyleQWPkJZfYPyWrhfMqXPBrVkoOcCFovc2Jf8g60HkdMiWsmyILujk6IoO6XnKHYY/q4+OO9XSwXIQTIOJb1jkq4EEYpYbOaJG0EOYiSskWV1HpHTJzyOi3iLWG/Tu3oS2e0Sag7MZ6th46tnKjkeDSp00ymTu2k5tGUBlFKOhM85tcBlB/RJK+2sZrEyqNpbDNjJJFQoIVzaSqIZSeWNAXRPJrRm7thmmvXokWaPFDPPXpPb26Fmzs9p+3AP2v8Z3UqpoO9MJ2eDshKfJp2uUnRun56hn8m8UPWAiqRLTbDlMVDtn4H5eVjS47CawNs957zK+h99kTIpIH4G/AeL9UpBUyFmFVQC9201rUsy9RqVotUZOq7IU0rX9ZpAk05Dn1jX8Y4/q+ZGUtMCd/vxOnZEZeeufYlyDSH3GZdj+Z1arFdgM5sz+k0y/Z9nebYfqDTPNvzOh1ha+t0lO2HOi2w/UinY2wvaEGT7jsEchGBXMAGEoGwdRAI20sIhK1CIGwXEQjbIgJhu4RA2H6MQNguIxC2l7Wsmn4qaRw7E8sARYgDoznuyGVuKldTyaUSrotGpzbkKXKrpKJ4Vv0rA/3ikTesgbVAukTW/IpJrnxUleOPrmh508S5Ao5Vf3tzXJ8TD2W/WPhT8L/amqqkV6x5ZHIVeSPQk+NE1yYVj67p8rmqR9f/i4oOa4F+A6UQC0VZlg2+mZDwUafTUA1c5RAzGzMP1/W6Zc3P4fybGCEL6H78NxQaC9yDTllJWe1gr9XXj2W5twflsCdYkmK+zOtb4YuMzEr7RWYpez7yecAVMCqVYasNXK3gzXsS85DpTfJMELcVZYOkjceZILGBYx4wb76TICRMXbWB2imcsIG8YMwp2O+EQ1RvlOVwe6F9Ho2Uf2tX7MgZFU0Q+G32Rtjrs1DyW6yBhCe/1NdAVSFNxbipgEsj5YZq8GFcrdtGMk6gr6jYDcuyig8fR9x3So5lIPlIEatHRz+tvUKd1Ln9yihu3zv9CIJBaWL+9r6Z4qCUd7WSZVZtA1O3GpVT15rDxasO3c2j7nvH2Sdy1jTddE/c9L6mVbeDg7lZEO3bHJSlTC6o68MOG6jLzaXQ6mVckt52DzAsMKDfoRUb/1f3cfg8V6oKo+NIvZ2oH6PPYgzyDzh/R/UF6OcxTLmGlOd7lxOfbtzD2TJdxV2sn+LfwKy15mbpGnBD0w2Yh6xaHbrKDXynBjo90tyO9BDwse4K8QBgE8Bi8InuWsbzKYDxfMYcH+Bz5jBoMofBFnMYbDNnDWCHOQx2mcNgjzkMvmDOOsCXzGEQModBxBwGT5gTADxlDoOvmMPga+Yw+IY59wG+ZQ6DmDkMEuYw2Nd0ayhzixd0F6htUBXowPQTFvewONRUGbK/44Vhf28Qs38wiKk/aro9pP7EC0P92SCm/mIQU3/VdGdI/Y0Xhvq7QUz9wyCmPtMvxnKZwV9GvkuFA8ouNp/z98T7B8IaQLYAAQAB//8AD3icrToNcBzVefe9/b3dvd29u909/dyd7ke6k86yLEunOyHJsrCxJWyJGmEcLMDYxBhHNsZQBzOAkjQmFDrGIq5gHEIcCILOAGZq3IQO04RkIGkgaUMKMbQznSlJW0wgJtOQHxRr1e+93TvJwq7JTD3y2/f//bzvfX/vAhAIzL3KPcYNBFIB8UR9EJYuAcuAqGNbOiwDSczkuorlaJ6WTeVSRwMIDveY8aN20GztjzMhW4P2H+kNUPM5NaVNQE0K3tWM77vv8rJqgnT33VJE4WWIfd/QbKHZjcXcZiFAqjCDgUJA/mZTWOIIwi0vAwNiUjkW9THIZs6DAbnj6ffGP/P+0y2vv+5SXGLKuXHJPJH92c+yT7x3883wnI9W/DxI4T9+bm7uOL+MUwNywAg0BJYFQgNKa2NDzFBEjqeM0SFXLHU4YKe7yjFoSmdEKWw5nemOUj5czMXCliilM7lyuFgqp3HaDf1j/fhH+s6cfm4MEpA8c0BSQBO5CUkD5fJi05kDjSUoNnETTUUSXtpPVm0aGHDdmV0nNkPiMUWeHZMVRSZPSlp0dqypCKVG8iT9IK5AEeamyZGAjecW5tm5SSBm8ojiSqBsYoXDTRtuymw13V8axjB+p2EPlsMGcRzTTRkGOLRpmk/AzSZ+A97ecx+QN8g9gUbc26F7N+GJiN5pLGMA8hUo7EQcHI455A0PwrS3I37N+bZhTE8bex1aeeIJ4+MTjTY6gcH+iIvgGWQRdh2TR9sS81kspCzytguLfBcyuBOLXuhwYnZnh8NFUs6plLPLScGpWBKwkYztwsop7Hie9r7rYK/9brWXTg9U+RiBX+GJiyc0rgIv7UNJe3vPjrFdyZOV/byNUkyW/0AuIi/h+h6U5a64SmW5ieGcya2AYimG+EUtnZN08ImgveV+KOYykiiJVMrbkI+dHUkC9+nyPUFdD94j639r1uTq7FiSNrR1hXS8uLbGapYUSbpaJvzmp5aODbU9iJNBU1gJa5LFTCqihNpDigmWWtc2GjUy7Y2m3hHk14qmPJXp2cTInZudO85dhzw2AuXAJQHl+Yt7l0RVjkO8u4q5JZARE2A5yNxStNgGWcQSj7izA1HucCgJOsRsb7xYWgn9XAwvRqaN4HAS4ENF3kXFFovJ/muW3zsYDK3jxaCQbOouOPXZPmBDNZG4krS0N2/9wakf7hHv+IcPX/jcaGWZAp9fvrFtv66UeSlXn4zYdZo5kLNwIJJRTbEu3jz62Zf37Xv5l7RAeugZfAQ7kJ5koA3PoJB1eP8MpHRVWqpygyITpiKz4DCoHMENlun+wrDA0bNZ9jmJZdZwhhx9UnewMKztg2yAlie9j6O7Lzrks7tYdRdOO4u/FJ9e5G93RyFTJ1f5G17IZDs7z25uEfuFBYwlvYpUUuTnKJO6umg5IymD88yGGxbycjN2JOkIVk6wUoEzm/0O5T/Owb92Jg8NyL/6qFrl30IZ5nSgMp3nch7DkvOMCaMeoQ1U4JZxQncenmAMmcAei/S7V9CvAccW8mczwtMCceSQ8nwhXWuKAeQPJbRCc9RnhoSyhvBL+WgxTzsk0Y567IFj+35wa4Xq7ykS5YIm7UIdq4iCfKcsiIoSvFFWONUnFovZoXHKhXE69R9hTOIEgZPcJ0VZRrx+i3j9hhtFPqQDnYjX8uaEpS2+F4twiVkOylSJAwfvBZO3XBnoTaEHtltSWAGKIEl3SJIQ1CRESIRnLFtJRc88GckEbQuOBTO5zBXziL0JIPKiyMtzggwiMc+czmbDEbDMbJaLhC3LPzPuFOKaD6zEM+tt15gNxTPLIg5dvglCfGmbmakYmqmKsEfRVOWWAXjqvEzVeamT6botq9321Vu2rIb7KOrufmZ24LWmoiI3yspJJ65e704JprBSFGH3pxXLhAQe9fBzbM1rq7YAm1dsctvZSiqu8G94rxwS/LQ7JYorRR0XXq/GmSh4dJADKAsSk70ajQ8gHdE0MhzVjOCbVDSvKINd1PhKVN+fgMTG2zYCvIaq+V2mmsNTP36IRLD6xO7ejWTDisfc7zCVD6tQW+/eMTW1Y3fSt20foe+hBZpQ3zfGfH3vyzmCZNvHFoJFVPrRjj7m6I26M3r7KHQxgD5c2H/4tQdIeJLJ+yQDvTsZOwv4jYfJQxVaxxmtKtNTTVaQnRmS6kkWvfBoNvCeIT55jt41PJZwpg3YYeJYGK+dppgK/sF+R/8ggZIOBlnyNoK/qpwokLZ6uCFRKCTKV8HeGaYksPg2Xj/3fyQZb6dhGWv2QLLQU4DW7lZwf77Hw+vb3AjzexKIVywkEXoGlB1JUqr4FW3A7BZlDzgzhZ5W0tyfI1da7mmn13JvsZOFxLuJIRsmLXJVskByA41iu/uvSds9bWOnPZQ4lSgANm+xqQ6gMPlGH2YR79rSDIXLXQBujHZSxkCpSIeynwCdNxEFJ2HVmSDaFPxQYoIN2BfCM8E6zTCu66VDSQ97KkPfIa8i7nGUITNAZagDhYFJjeg5rXh+bcBuYamT/JWmRVE8Iopeb/3ud1ZdSIs4TkQLcaogJ63Z5dGUxEfefz8qSKko+Qm2PB/ZgyEEMngmjkjovYB0GBog+n9COzD7MiQ73pfOA5S8NLseIst+QWbPC9y/J8dRv7QFliCNWcnzAYlI3fE8hdNVbBPY1WEeZxm8m5mKOdypQRG1qhiRgQBnZbr7N20qT1ipoPsLVYWEGq8hE3BoLPn2tV8PhWVe0WTB4nIN3WMD7cmIiDZEhaSSROulWMbk2+sX4LIs0Iq4NNdUfV3mDeqCbaEOligmbYSFCaU0VRVULrhTKoKlIMubNvV3ZyyOByWMilXkBpNjcIjihTjBrwzF/bmKF1iMJNsHxrobcnxElDVF0C3u69fevP5txIsEcUrVZyR96DPqiI/C+zGTp0uZGkXVP6PG1RncET7Ey/eKjnX885QeWw83krsCIVyvMp8TD9P3rEvMFUkFZxS6Rw25ytWQJ/52/tqLyQSDrc7Dpiq/H2XDgYsVBgjnK7BF95EwLKLNKLh0bg5x74VXPNwJO1fq7raB588j7pbhat78pDKjPE1td1Jl6Hhn8Q73LdISsCrrgwuijljQ28Tinnavx+Xu9ap6jYqn2QzNaly7RoVJ99MoBl/DvmtU1X0Lu3FCnO37XXKEW832Nai8BYnDKKvIF92W3F9dotK94ahCNyJPuW+5b2L1WrQ2X6fSc1TBejLg77uvsm8FX2b1ghWk6cbjuB1FUIVm9y0f6aMKfMbdhjshNGihFKgIgE7044ZvkbXz+zbh3chXN/f35Z6mOyF2b/m7H6V7HVV3XYOYtiDOig/J25bh+xPuAPMdxRPRc8V1YU8Z2mEv9OIO2O6DTg8Wtt2C3+lCcjBRmEaNVbDhi0nLnUK1ttvqdVpsexruQ93WGnf3T9s47N+te7nN5FeohRGeChUfIvZx5htAPYTNjQl/ea/tTlkW7LZ7nIK3dyNsGUwWpq0+a4k/ALvozB5nurkCqwthUdrq5mnzBD/tu5rpfPVYuC6L0VZwnMfd/YnGxgTc97jjFNjGFvRQ6iyrYPfZjyPVyQJM233YRF5YVb1xgLzjwVMX3NOwZ/K7wtJZx4W8pGRNNzf4ZOBeCKgPCxuKcUYmxQNycbjP5wGlEJGk8OZc369tR3gtaZ+X6CbmVkIONRVJcugpluk1TQL1Fqmfy1ELVi4hYy1zJhYNj4zu7RkfbuebN17fv+q2Fj4sDgtE7Hv2uk89uneIH7j9yNWjR1YMmUvJSzO6s9QcGWkbHt83PtzW0yWCMMLr4roNcMm+o88e3XdJ/0VDkWiFDxSv5YhXq8d3nVAryjjtoDXp7Ojn2gg6ijGHIUxDpQZ0Y2lQym2+5NZHN219to8XhsUw33Lb6p6dG9DVGN598/bmkXA0NoPeR2t4qO/h0U8d3bcKtmB5yeilos6PCCB29fgINjeNmEsdfaYmGhm6qB9RrPhEx7mrEbfGwCDauZXNJo09wLJ1oAhSe1NxWkUDKKJofMqeE+szt8S4K9JYmjbLXRRtylOU1vWN//mVy4/0DVGNqM9QJT7SvL287ot5MSZoGC/oyHTWO7p3vdd5s6RB439/5fKH6aIaEDh46AVkpMqWo1YdaWpe1690hzT4e79jxGuLvD+R0iUwuiJ+TLUM4+yrA8aAdsVAsX1JFgMsTkCF4ceBdtgLZ8oXaENnPpfPipLA6A57nn4+XI1hUbCoYmig1KP5pH44Kybnq4cUyatKivvTmXpeOC7y8J4il3yHncWVz+SDrc5zTqucPyYro3Af7XP30/I8ddJxsQAgXIFbz37QdsmqNhJl0K6145C0rkWzExAX8aM3sDpwYyA8oF83PNBXWu7xRPQMIT1E6syw7M4F2tFwOmyhVKQ7+uH/lz9DribLBF4jsuze94lYBc+7LzLOXMw4c+66u52EZz/QLEWxyA0XZFuA9+OVUfSTwyzWCw0o3a0Jx9BYTrKp2AZiEi9qGSs6OFhZkPboRDXesZKpbcd3UOjV8dMgNNQhr1pJh0Qy5petVIQ48Zq1KefMj7zIhluf3pQeBs5JfUuJMGcgHFRik16gP1mzHX2EmroaYhmVysETLOo54aSGU/gHzbEwdRvCMXuGhUczHj3HkZ42Rk9LYIDS07c8YRuqSBg91Pmnwo8VghFR2Y9oKTmxziSwi0HTN2I1cMvT3E7Fezk/Pae1UnYyUwqdRnqCNZPoXSJSk6hxGWmRBKqBSMqyTP97/wmaJcQCGpqbG5Iw6vhEtHpEVWihepULpFG3rqG0rOha2qTxJIC0YOSYFjrxEtP8nlSlIxvu7PLcRKmS76mk04Sq0HoTqJ04CcfcK+DDIU34mhCX/dByaAiDy58ibicVeRdNJrNyezI2G/ESlUKsZDxiOtLJk/ChXCc9Imp+1nO2xL6QZIkkWiizM7SHIF9q9K8ZpQDx8zOjgWaMzORvdrSGPJ2sEzRYZer9O2gmWD4zSTr6sSuH8Uc/IGjmyLIMOHUV0G48840967ixy2v6zIhcU+pr3bDj9u0bc1xfqUbO9sUuH3O/iqEbFPqaPbOBZuFTO57rx7mxvnDL7avRFLah/ei55LZCpKddjqz4OxhyH6YRLuzA0rcfY5yC8rQTcb08JdLYleZW8TZ0lGgSCyVfQoQtRDiPV6BqKLryzL7kqRmkuoGdE5UzlKWy39mJQlU1OChf1KrEHOYcsdMhvaO3j5JN+zZBXJZ2Kmq0WRSMDSFJGqmtC0q8eZesmfWxPxNNca3DC3KzYsg7MBBXhJ2yHmvy5sojNXVBmQvfhUdoxJ0NgiENWTzfqwd3SOjC927ceNvGjbfTUTNp13eIumhvAKEvJA/HTUW6Maj1CeJAUtBFrcOI1xugSWxubV1qqaRJ1gZvqiHLbKqwOo5TR9hELw7/iBsjL/t6WXl+SWN9VOO5RfnTtJcwreTFY35bWthGB+bMB+yOcGEDg4bztxbkUR0wh1h2kJWgV0awMR+Hjvn5mlrmu9BMCMpYsZynmQC8KR2xco4maZIg5jN5CU86ViJ/s27nzqlxgFc6167fuXP92s5XYOdDO8j4pYNYw16IjR8eH79U0ra3Y6V9uyat20l2P7AbsKpjJ81Tzs39nt9PXgqYeL9LNB+Yi9uMN1BEZ0knnvijDiZLEDg6dJ30NuA9oQEVh9U0uk/kgO8A+R94pvWy8YveWn0ZWbfmLepJXdqz5Z5B94qhu7d2k75r7l0Lx2gVtvTMr6FXgDY7p56d6qSNS+/e0ke6r//CQ1/YXiTdW++u+FK/529HfC3klvzNhK3Te4txIUFlkuQ8tIjguXrUG6WAPWgMsIcDF664d3v3DHXwhQ07YMul2I9QDvtQXz+bokoej3uUo5mt1Qi7f/m58pGoIAyavsnnFiUl8cbhKTpRmI+CKw9Y1oKc5GvZZJCT6kWJcCHNzzDS3KTQKEocr/6Fe1GoUf+1rq/QG/W/hs9goz8E649Xc5M6HxXjAnDV9OT9spBFuwOC26Prv2bzQ3RhCHfwaYpW8+LxqOzlYOZR7/Kf/RbmXMktCzAr3jWP/Kqt5KUqZDq4uTqyBbYGfL17HcuL19KcjykyePSoAP2bNgILH1qOXXFwA9l471P3bOIvOwRXL8j+k0OjB6cPjrLCfe2sXP/824QcsAMZlOmGWiMo0rwb4K1qo+mH/LkBVlXdA+cFXFFWvz0//AXvbZ6+ac3GoyzHHvXfzCqvNILfLi9qV7KBJ/03OPbql/A+XlcDa3g9C1/rnPPU/XzkR4E3q/4p6kHES6V3vVx1M7x3EG4RnpwfhuT9B8mTF4BG6w/vZp7SbtoL4oJBkCuYe2+LL3GT6CtdzGKjNas6FGaHETyqOIeljCSdy4azYTwkLxFIL08OHSKaM+7sonl9vERpGguhHaS5bUgz24xu3ETTPsVKqntkIZfpqR1MdBfQKd6hmiFHviU1QZ260MQ2FSOcbfDmVoyFeHkb9rq/db9KFWsP6uutqz6LgZW6R+JrIjp86Gp6jSXL+7RoUv38yjEracH0NiVpKdu2ISBl27QDRdTKAT9WHoc/IL/p7w4sptcdmtpFR6IcZRnNXDnaT909x7Ykjj6PwmlFdP9FMuWgQvb8nAiKpHB7iS4/r+pk678LRCWOGpq9QwfOlOGlbpDkEPwThngKL7puibAY5LvMl+ZQQ8Yx4mxF/wZjkGJ7a3NjKl5jyjiJ/hAhLzVVExN+9qMpZsAyWImhu/eF2NlfcmS6bxq6lNlO9CZvxpjon/G7R5k1SqVwuFwOv3HTTZn0TTelSQs2wtjpPkNH8D/RH++b3mkosx0KLkzSlfi92qSrzPKX2arMTe692ChjJ7T5I75t3I487EIe5jXKQ6pg6Q83qs/lEn3noSFynmb4aOrBF9sEoBuHhKFYcL11up41emofLCQGE60wVdeDClSvn5qqM41Go7t+iuWUHqzrNrOGWTsFst5TtwLXXPk0Syc9fSX2rsBFmzadY6C/Fge8d+e5uXHkfyiQRc6vwTu2Ylkhz95Fq2/8+YVv/CxSqb7xxyqhDjDBRxFBxcQnSYzeBfrYNqGJjej4TLDfWEywII42hqZ+/BB/6I2DkCn0WS9uv3PD4Z0DpG/3oemDe7u5NS/aMOWtol60t2qCusYTSi19uHn1iHiQOpz2i2v6xx/4xqE9PfyqHQ+N3Ln9RftsmoxADcYAyvMt9Y73lr7wdwTUmb8g/u53GOaw6pPizJC9MJrEj7noG9sG1CNhmWN2BcF2dpRzGBfz5XrojEWZRxuj6aCYY0tiLJOTMmK2uJJQjxj/8hjKEB1iGHCj4JTpxczQzEtehAevG+5pUO12twtCjfG4I979yJB4a7RlZbDdVGV1OMgDQPZQY+ERm1wqiVyYJwJHMrGaP+o9YKbUlE2ApL6YEiyylNT9ESff74qtvCgqNSZcBVOa+2Hr9q9E70rVikGTcxRJ4BSQa6ImzpQIEXk+OFbqhvQRQ4souDWotqAiL2Xqm+AZ/Yz0kXcCOnvfqg1779vzOXtqtvPMii9Ig5+dwj87Kf4bQ6EJfdRt4PyQZYFY0/NXERbE5vPzi+As2njhToFqfp7h6ufXYTFiZ6MCryyG/xQX5qIBFddLfr6b+SYsHc3P1ocikRD5rxCMuNslxeBKuiZjzQpUY6kFvwNgPtyioHRxkEr9fv+HE5AwHFc9q0neOXOa/kiAi9ByQX3et1fZb2+q7yCL914QN5y1GVt/DOVaR29JPCECXV9iGaI84A7sQ9W3Y4dLZe4vVR1Mxd3Hc7rq7lNVOKjqHM9xqmiceVWXNTgoiO6fswpN0R/EfnefyHtnMvcsdw1nzMOJiSzGpQ+SPmclxmVRqlVM0HG5wNFSQYAIRhjE3ZDTsobwJbifVegTxj7sx7mCRwvp5XSWh6/QYs/TwjyMahKsVCYZVaeECMTR56MplPyzCfrSPO/dL0m8RwvpQ1oS56aF7i/58Mpn0eOHaKxcTNGd84cLd4oCvXPu3B+4a8kPUA7rmSzJ7E3Zy7OzuJEm/Mt+7Eh/pyDPMx7xF7luuh/CY9hDe4WZYLqvW+YhFlJiWX1PO0aOB6L0t3AVOUK7V/XSqP8Dx/CavHCY8erwC3jhyKHZR2nu9wXvpz4vKN4dwOIA22sZ/S1RTbhyBxbvF/XeXzEQpfEUTa0hLTTE+RigN9vzQhBp0RzT5OUaKazwlhEU8u0fx8D9XmGdwVmmZmpavDGuichhJJUz1nn5pp9yj5H3GG7DgZtovmnn5YNFiiT/JyIZqw6Uvd+i0TRIFwumFw7SVEg/TYvQDM/8hE9O4uTWEVlECuyU2tLW1oKK3jIk+bItDxy6TZKw36mttdZgKDxo1fIRzrFMSbrt0J/Cl8KVh1OcozuqGUyO7RxLBk3UrA6XfmDTF97qwAErpOl655GnjnTqOidyIQsHO08G/hcLt/j/AAB4nGNgZGBgAOLaW41M8fw2Xxm4mV8ARRguss1QhNC5H/9//Z/FUsEcBORyMDCBRAFTFwxveJxjYGRgYA76n8UQxVLGwPD/FUsFA1AEBfgBAHyYBUh4nGN+wcDAvACCWfSBNIgviMBM1kA6koGBMRWVBqsDYqYmiF4wHQkxg+kUBMPVWEP0gTDYvBdoahZAzYxEY0ciuWUBFjkoZimDYLC8IKpehmsQccYvSGYgYZB7YBhFL5o8cxTQjDUI/wIArpclrwAAAAAAAAA6AIYA3AEKAUgBgAGgAfoCYgKqAwIDOgOGA9wEQAR4BLYFAgU8BZoFzAYMBlIGmga6BtgG+AcYB0QHcAecB8gIAAg2CG4IpgjyCUAJrAo0CtALOAueDAoMYA0ADVANjg3mDiQOjg7GDvgPOA+ED84QPBB2EN4RNhGgEfISchKoEsgS6BMGEz4TXhOSE8QT+BQsFGIUiBTWFX0AAAABAAAATgBuAAYAAAAAAAIAAAAQAHMAAAAiC3AAAAAAeJx1kctOGzEUhn9DoIKgLloJdcdZIRDK5CKhSqyoogJrhLJDwgyeSzpjRx4HlGfgLcoz8Dp9j+76Z2KhqFJmZM93Ph/bxx4AX/AHCqvnnG3FCgeMVryFT/gReZv+JnKHfBd5B108RN6l/xV5H2d4idzFV/zmCqqzx2iK98gK39RR5C18Vt8jb9P/jNwh30fewaGaR96lf428j4l6i9zFsfo7drOFL/MiyMn4VEaD4bk8LsRRlVZXouehcL6RS8mcDaaqXJK6OtSml+lemTrb3Jp8Xmm/rtZ5YnxTOivDZLCur401XgfztNytec5HIWSSeVfLVdxHZt5NTRqSIoTZRb+/vj/GcJhhAY8SOQoECE5oT/kdYYAhf4zgkRnCzFVWCQuNikZjzhlFO9IwvmTLGFlaw4yKnCBlX9PUdD2Oa/Zlay1n3dLmXKei9xuzNvkJ7XLvso2F9SaselP2Na1tZ+i2wqePszV4ZhUj2sBZy1P4tmrB1X/nEd7XcmxKk9In7a0F2gv0+W44/z/KQo7lAHicbZLnlpswEIW5Bgy4bLLpvfeE9N57z76DLARWEJKOEEucpw8CO/kTncOdT6PhnlHxRt4wJt7/x47nYQQfAUKMESFGggmmmGGOLezBXmxjH/bjAA7iEA7jCI7iGI7jBE7iFE7jDM7iHM7jAi7iEi7jCq7iGq7jBlLcxC3cxh3cxT3cxwM8xCM8xhM8xTM8xwu8xCu8xhu8xTu8xwd8xCd8xhd8xTd8xw/sBLUlZuIkZZW2q0hzahvDRqocUyIpE4EWTR1WXDZ1sGRCz5yklBsqWBZwmauZk01mTqxl0nIlUyLs9r/Zej35m4kFl2XKftlAKFomTlKlmfQ1l74lRdB9dbxQqqyIKbc2MPQZGqbFKsqVaYnJ4ky1Ms24iQXLrYPE8GLZ07jRfaIvcf5JX+NoMhQ5jLoqFwenBS8Gpw7WTh05py6MaOtT2ibEGNXWKW1Da0i9nPY6dNe7CEWy7pc+5EJpvfJVnvtUFUHFZBPWS2LYxKqiECztVpINypAuGS2nvQ6Gs+H0hsk0U3ZznDETguua1/MNpLvMWH/RFGEuuobCihScxqS2zPC6jH4rVaVcxn1UjQ1yJW1QK2MTJ6nrPOqp0d3Vk1WoSVOz7p0oHeWdTbpoh5i3sVWpezp23AGTWch+Mmonu0o0Vb+l6RqdabLmRnveH9ru7j54nGPw3sFwIihiIyNjX+QGxp0cDBwMyQUbGVidNjIwaEFoDhR6JwMDAycyi5nBZaMKY0dgxAaHjoiNzCkuG9VAvF0cDQyMLA4dySERICWRQLCRgUdrB+P/1g0svRuZGFwAB9MiuAAAAA==) format('woff')}</style>
<style id="style-core" type="text/css">html{font:16px/1 Helmet,Freesans,sans-serif}#store-area,tw-storydata{display:none!important;z-index:0}.no-transition{-o-transition:none!important;transition:none!important}:focus{outline:thin dotted}:disabled{cursor:not-allowed!important}body{color:#eee;background-color:#111}a{cursor:pointer;color:#68d;text-decoration:none;-o-transition-duration:.2s;transition-duration:.2s}a:hover{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover{color:#e44}a[disabled],span.link-disabled{color:#aaa;cursor:not-allowed!important;text-decoration:none}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover{background-color:#57c;border-color:#79e}button:disabled{background-color:#444;border:1px solid #666}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em;resize:vertical}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input[type=range]{-webkit-appearance:none;min-height:1.2em}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;margin-top:-5px;width:33px}input[type=range]:focus::-webkit-slider-runnable-track{background:#222}input[type=range]::-moz-range-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-moz-range-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;width:33px}input[type=range]::-ms-track{background:0 0;border-color:transparent;color:transparent;cursor:pointer;height:10px;width:calc(100% - 1px)}input[type=range]::-ms-fill-lower{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-fill-upper{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:16px;width:33px}input:not(:disabled):focus,input:not(:disabled):hover,select:not(:disabled):focus,select:not(:disabled):hover,textarea:not(:disabled):focus,textarea:not(:disabled):hover{background-color:#333;border-color:#eee}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}audio,canvas,progress,video{max-width:100%;vertical-align:middle}.error-view{background-color:#511;border-left:.5em solid #c22;display:inline-block;margin:.1em;max-width:100%;padding:0 .25em;position:relative}.error-view>.error-toggle{background-color:transparent;border:none;line-height:inherit;left:0;padding:0;position:absolute;top:0;width:1.75em}.error-view>.error{display:inline-block;margin-left:.25em}.error-view>.error-toggle+.error{margin-left:1.5em}.error-view>.error-source[hidden]{display:none}.error-view>.error-source:not([hidden]){background-color:rgba(0,0,0,.2);display:block;margin:0 0 .25em;overflow-x:auto;padding:.25em}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}.error-view>.error-toggle:before,.error-view>.error:before,[data-icon-after]:after,[data-icon-before]:before,[data-icon]:before,a.link-external:after{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}[data-icon]:before{content:attr(data-icon)}[data-icon-before]:before{content:attr(data-icon-before) "\00a0"}[data-icon-after]:after{content:"\00a0" attr(data-icon-after)}.error-view>.error-toggle:before{content:"\e81a"}.error-view>.error-toggle.enabled:before{content:"\e818"}.error-view>.error:before{content:"\e80d\00a0\00a0"}a.link-external:after{content:"\00a0\e80e"}</style>
<style id="style-core-display" type="text/css">#story{z-index:10;margin:2.5em}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}</style>
<style id="style-core-passage" type="text/css">.passage{line-height:1.75;text-align:left;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}</style>
<style id="style-core-macro" type="text/css">.macro-append-insert,.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-prepend-insert,.macro-repeat-insert,.macro-replace-insert,.macro-timed-insert{-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-append-in,.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-prepend-in,.macro-repeat-in,.macro-replace-in,.macro-timed-in{opacity:0}</style>
<style id="style-ui-dialog" type="text/css">html[data-dialog] body{overflow:hidden}#ui-overlay.open{visibility:visible;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-overlay:not(.open){-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in}#ui-overlay{visibility:hidden;opacity:0;z-index:100000;position:fixed;top:-50%;left:-50%;height:200%;width:200%}#ui-dialog.open{display:block;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog{display:none;opacity:0;z-index:100100;position:fixed;top:50px;margin:0;padding:0}#ui-dialog>*{box-sizing:border-box}#ui-dialog-titlebar{position:relative}#ui-dialog-close{display:block;position:absolute;right:0;top:0;white-space:nowrap}#ui-dialog-body{overflow:auto;min-width:280px;height:92%;height:calc(100% - 2.1em)}#ui-overlay{background-color:#000}#ui-overlay.open{opacity:.8}#ui-dialog{max-width:66em}#ui-dialog.open{opacity:1}#ui-dialog-titlebar{background-color:#444;min-height:24px}#ui-dialog-title{margin:0;padding:.2em 3.5em .2em .5em;font-size:1.5em;text-align:center;text-transform:uppercase}#ui-dialog-close{cursor:pointer;font-size:120%;margin:0;padding:0;width:3.6em;height:92%;background-color:transparent;border:1px solid transparent;-o-transition-duration:.2s;transition-duration:.2s}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;text-align:left;line-height:1.5;padding:1em}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}#ui-dialog-close{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-close{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}</style>
<style id="style-ui" type="text/css">#ui-dialog-body.settings [id|=setting-body]>div:first-child{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-dialog-body.list{padding:0}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves table{border-spacing:0;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em .33em}#ui-dialog-body.saves td:first-child{min-width:1.5em;text-align:center}#ui-dialog-body.saves td:nth-child(3){line-height:1.2}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999;speak:none;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves .datestamp{font-size:75%;margin-left:1em}#ui-dialog-body.saves ul.buttons li{padding:.4em}#ui-dialog-body.saves ul.buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves ul.buttons li:last-child{float:right}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-desc],#ui-dialog-body.settings p[id|=setting-desc]{font-size:87.5%;margin:0 0 0 .5em}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:1em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.settings input[type=range][id|=setting-control]{max-width:35vw}#ui-dialog-body.list a,#ui-dialog-body.settings span[id|=setting-input]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves button[id=saves-clear]:before,#ui-dialog-body.saves button[id=saves-export]:before,#ui-dialog-body.saves button[id=saves-import]:before,#ui-dialog-body.settings button[id|=setting-control].enabled:after,#ui-dialog-body.settings button[id|=setting-control]:after{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#ui-dialog-body.saves button[id=saves-export]:before{content:"\e829\00a0"}#ui-dialog-body.saves button[id=saves-import]:before{content:"\e82a\00a0"}#ui-dialog-body.saves button[id=saves-clear]:before{content:"\e827\00a0"}#ui-dialog-body.settings button[id|=setting-control]:after{content:"\00a0\00a0\e830"}#ui-dialog-body.settings button[id|=setting-control].enabled:after{content:"\00a0\00a0\e831"}</style>
<style id="style-ui-bar" type="text/css">#story{margin-left:20em;-o-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (max-width:1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (max-width:768px){#story{margin-left:3.5em}}#ui-bar{position:fixed;z-index:50;top:0;left:0;width:17.5em;height:100%;margin:0;padding:0;-o-transition:left .2s ease-in;transition:left .2s ease-in}#ui-bar.stowed{left:-15.5em}#ui-bar-body{height:90%;height:calc(100% - 2.5em);margin:2.5em 0;padding:0 1.5em}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-o-transition:visibility .2s step-end;transition:visibility .2s step-end}#ui-bar{background-color:#222;border-right:1px solid #444;text-align:center}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-history [id|=history],#ui-bar-toggle{font-size:1.2em;line-height:inherit;color:#eee;background-color:transparent;border:1px solid #444}#ui-bar-toggle{display:block;position:absolute;top:0;right:0;border-right:none;padding:.3em .45em .25em}#ui-bar.stowed #ui-bar-toggle{padding:.3em .35em .25em .55em}#ui-bar-toggle:hover{background-color:#444;border-color:#eee}#ui-bar-history{margin:0 auto}#ui-bar-history [id|=history]{padding:.2em .45em .35em}#ui-bar-history #history-jumpto{padding:.2em .665em .35em}#ui-bar-history [id|=history]:not(:first-child){margin-left:1.2em}#ui-bar-history [id|=history]:hover{background-color:#444;border-color:#eee}#ui-bar-history [id|=history]:disabled{color:#444;background-color:transparent;border-color:#444}#ui-bar-body{line-height:1.5;overflow:auto}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{margin:1em 0 0;padding:0;list-style:none;border:1px solid #444}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-transform:uppercase}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-history [id|=history],#ui-bar-toggle{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-core li[id|=menu-item] a:before,#ui-bar-history [id|=history],#ui-bar-toggle:before{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#ui-bar-toggle:before{content:"\e81d"}#ui-bar.stowed #ui-bar-toggle:before{content:"\e81e"}#menu-item-saves a:before{content:"\e82b\00a0"}#menu-item-settings a:before{content:"\e82d\00a0"}#menu-item-restart a:before{content:"\e82c\00a0"}#menu-item-share a:before{content:"\e82f\00a0"}</style>
<style id="style-ui-debug" type="text/css">#debug-bar{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:0;margin:0;max-height:75%;padding:.5em;position:fixed;right:0;z-index:99900}#debug-bar>div:not([id])+div{margin-top:.5em}#debug-bar>div>label{margin-right:.5em}#debug-bar>div>input[type=text]{min-width:0;width:8em}#debug-bar>div>select{width:15em}#debug-bar-toggle{color:#eee;background-color:#222;border:1px solid #444;height:101%;height:calc(100% + 1px);left:-2em;left:calc(-2em - 1px);position:absolute;top:-1px;width:2em}#debug-bar-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-hint{bottom:.175em;font-size:4.5em;opacity:.33;pointer-events:none;position:fixed;right:.6em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}#debug-bar-watch{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:102%;bottom:calc(100% + 1px);font-size:.9em;left:-1px;max-height:650%;max-height:65vh;position:absolute;overflow-x:hidden;overflow-y:scroll;right:0;z-index:99800}#debug-bar-watch[hidden]{display:none}#debug-bar-watch div{color:#999;font-style:italic;margin:1em auto;text-align:center}#debug-bar-watch table{width:100%}#debug-bar-watch tr:nth-child(2n){background-color:rgba(127,127,127,.15)}#debug-bar-watch td{padding:.2em 0}#debug-bar-watch td:first-child+td{padding:.2em .3em .2em .1em}#debug-bar-watch .watch-delete{background-color:transparent;border:none;color:#c00}#debug-bar-watch-all,#debug-bar-watch-none{margin-left:.5em}#debug-bar-views-toggle,#debug-bar-watch-toggle{color:#eee;background-color:transparent;border:1px solid #444;margin-right:1em;padding:.4em}#debug-bar-views-toggle:hover,#debug-bar-watch-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle,html[data-debug-view] #debug-bar-views-toggle{background-color:#282;border-color:#4a4}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:hover,html[data-debug-view] #debug-bar-views-toggle:hover{background-color:#4a4;border-color:#6c6}#debug-bar-hint:after,#debug-bar-toggle:before,#debug-bar-views-toggle:after,#debug-bar-watch .watch-delete:before,#debug-bar-watch-add:before,#debug-bar-watch-all:before,#debug-bar-watch-none:before,#debug-bar-watch-toggle:after{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#debug-bar-toggle:before{content:"\e838"}#debug-bar-hint:after{content:"\e838\202f\e822"}#debug-bar-watch .watch-delete:before{content:"\e804"}#debug-bar-watch-add:before{content:"\e805"}#debug-bar-watch-all:before{content:"\e83a"}#debug-bar-watch-none:before{content:"\e827"}#debug-bar-views-toggle:after,#debug-bar-watch-toggle:after{content:"\00a0\00a0\e830"}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:after,html[data-debug-view] #debug-bar-views-toggle:after{content:"\00a0\00a0\e831"}html[data-debug-view] .debug{padding:.25em;background-color:#234}html[data-debug-view] .debug[title]{cursor:help}html[data-debug-view] .debug.block{display:inline-block;vertical-align:middle}html[data-debug-view] .debug.invalid{text-decoration:line-through}html[data-debug-view] .debug.hidden,html[data-debug-view] .debug.hidden .debug{background-color:#555}html:not([data-debug-view]) .debug.hidden{display:none}html[data-debug-view] .debug[data-name][data-type].nonvoid:after,html[data-debug-view] .debug[data-name][data-type]:before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html[data-debug-view] .debug[data-name][data-type]:before{content:attr(data-name)}html[data-debug-view] .debug[data-name][data-type|=macro]:before{content:"<<" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=macro].nonvoid:after{content:"<</" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=html]:before{content:"<" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type|=html].nonvoid:after{content:"</" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type]:not(:empty):before{margin-right:.25em}html[data-debug-view] .debug[data-name][data-type].nonvoid:not(:empty):after{margin-left:.25em}html[data-debug-view] .debug[data-name][data-type|=special],html[data-debug-view] .debug[data-name][data-type|=special]:before{display:block}</style>
</head>
<body>
	<div id="init-screen">
		<div id="init-no-js"><noscript>JavaScript is required. Please enable it to continue.</noscript></div>
		<div id="init-lacking">Your browser lacks required capabilities. Please upgrade it or switch to another to continue.</div>
		<div id="init-loading"><div>Loading&hellip;</div></div>
	</div>
	<tw-storydata name="Hunters Harem" startnode="1" creator="Twine" creator-version="2.3.5" ifid="C0B679C5-F49F-4259-BEA2-7391CEC02F56" zoom="0.6" format="SugarCube" format-version="2.30.0" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">@font-face {font-family: AlwaysForever; src: url('img/AlwaysForever.ttf');}
.Mom {background-color:#ff6666; !important}.Andrea {background-color:#99ffbb; !important}.Lisa {background-color:#99bbff; !important}.Brian{background-color:#e6ff99; !important}.Henry {background-color:#ffb380; !important}.Jasmin {background-color:#d699ff; !important}.You {background-color:grey; !important}.Brenda{background-color:#ccff99;!important}.Christina{background-color: #ff9999;!important}.Lucy{background-color: #ff80b3;!important}.Stranger{background-color:#d6d6c2 !important}.Albert{background-color:#9999ff;!important}.Dad{background-color:#99ff99;!important}.Victoria{background-color:#ffff80;!important}
/*=====================================================*/ 
.macro-textbox{color:black;background-color:white;border-radius:3px;font-weight:bold;}
.macro-textbox:hover{background-color:lightgray;}

#story{	max-width: auto; padding: 0 0 0 0;}
#passages{margin: 0 200px 0 0;max-width: 100%;left: 0px;}

#gallery{float:right; margin-left:10px;display:flex;flex-direction:column;} 
#gallerylink {display:flex;flex-direction:row;justify-content:space-between;margin:0 10px 0 10px;}
#gallerylink a{display:inline-block;font-weight: bold;font-variant: small-caps; border:1px solid white; border-radius:3px; background-color: #85a3e0;margin: 5px 0 0 0;color:black;padding-left:5px;box-shadow:0 3px darkgray;}
#gallerylink a:hover{text-decoration:none;box-shadow:0 1px darkgray; transform:translateY(2px);}

/*==============================================*/
.msg {display: flex;flex-direction: row;font-weight: bold;color: black;border: 2px solid white;border-radius: 5px;padding: 8px 8px 8px 8px;box-shadow: 5px 5px 3px Black;margin-bottom: 5px;} 
.msg-pic {width: 140px;min-width:140px;height: 140px;min-height:140px;border-radius: 10%;display: inline-block;margin-right: 1em;}  
.msg-nonpic{display: flex;flex-direction: column;}
.msg-name {color: black;font-weight: bold;font-size: large;font-family: serif;margin-bottom: 5px;}     
.msg-text {font-size: 150;font-weight:bold;left: 160px;}
/*=====================================================*/
/*@keyframes blinking {0%{background-color: transparent;}100%{background-color:red;opacity:0.5}}.blinking {animation:blinking 1s infinite;}*/

.important {color:red; font-size:x-large;}
.important a{font-weight:bold;display:block;}

.inline.choice {display:flex;flex-direction:row;width:auto;}
.inline.choice a {flex-grow:1;margin: 0 2px 0 2px;}


#streamoverview {display:flex;flex-direction:row;flex-wrap:wrap;}
#streamoverview>.choice>a{width:auto;}
.progressbar {display:flex;align-items:center;justify-content:center;height:100%;background-color:#778899;border:none;border-right:1px solid white;left:0px;}
#leftmenu {display: flex;flex-direction: column;margin: auto;z-index:2;}
.leftmenurow{display: flex; flex-direction: row; margin-bottom: 10px;width:100%;min-height:52px;line-height:1em; height:50px;}

.showfield{display:flex;align-items:center;justify-content:center;border: 2px solid white; border-radius: 3px; background-color: darkgray; min-height: 50px; font-weight:bold;width:100%;}
.leftmenupic{min-width:50px;min-height:50px; border: 2px solid white; border-radius:3px; left:0px; margin-right: 10px;}
.leftmenupic>img{border: none;height: 50px; width:50px;}

#leftmenujournal,#leftmenuphone,#leftmenuinventory,#leftmenumove,#leftmenumap{position:relative;display: flex;align-items: center;text-align: center;border-radius: 3px;padding: 2px;cursor: pointer;margin: 0 5px 0 5px;}
#leftmenuoptions {display:inline-block;position:relative;align-items:center;cursor:pointer;width:auto;}

#leftmenujournal img{border-color:#99ffff;border-style:inset;}
#leftmenumove img{border-color:#99ffff;border-style:inset;}
#leftmenuoptions img{border-color:#99ffff;border-style:inset;}
#leftmenuinventory img{border-color:#99ffff;border-style:inset;}
#leftmenuphone img{border-color:#99ffff;border-style:inset;}
#leftmenumap img{border-color:#99ffff;border-style:inset;}


#phonenotification{
right:2px;bottom:2px;border-radius:8px;background-color:red;;border:1px solid darkred;color:black;text-align:center;position:absolute;
}

/*=====================================================*/
#sidemenu{z-index: 999;right: 10px;top: 2.5em;position: absolute;max-width: 150px;	border: 1px solid white;border-radius: 3px;	padding: 0 20px 20px 20px;}
#headspace{display:flex;flex-direction:column;}
.head{display:flex;flex-direction:column;border: 2px solid white;border-radius: 7px;margin: 5px 0 5px 0;font-weight:bold;}
.head img{min-width:140px;min-height:140px;border-top:none;border-left:none;border-right:none;border-bottom:2px solid white;border-radius:none;} 
/*=====================================================*/
#sidemenu .message-text{display:block; width:100%; color:black;text-align:center;font-variant:small-caps;text-shadow: 4px 4px 3px #262626;}
#sidemenu .message-text a{color:black;}
#sidemenu .message-text.open a{color:black;}
#macro-message-InteractionMom{background-color:#ff6666;}
#macro-message-InteractionJasmin{background-color:#d699ff;}
#macro-message-InteractionAndrea{background-color:#99ffbb;}
#macro-message-InteractionBrian{background-color:#e6ff99;}
#macro-message-InteractionHenry{background-color:#ffb380;}
#macro-message-InteractionLisa{background-color:#99bbff;}
#macro-message-InteractionVictoria{background-color:#ffff80;}
#macro-message-SpellsYou{background-color:grey;}

#questouter {display:flex; flex-direction:row;}
#questmenu {display:flex; flex-direction:column;border-right: 1px solid black; margin-right:5px; padding-right:5px;}
#questmenu a {display:block;font-variant:small-caps; font-weight:bold;}

/*=====================================================*/
.interactioninner{border-top:1px solid white;text-align:left;font-variant:none;text-shadow:none;padding-left: 10px;}

/*=====================================================*/
#store>.choice a{display:block; width:100%;}
#store>.choice {display:block;}

#store{display:flex;flex-wrap:wrap;justify-content:center;}
.item {margin:5px;display:flex;flex-direction:row;border:1px solid white;border-radius:5px;height:120px;width:100%, margin:auto;align-items:center;}
.item img{margin-left:20px;min-width:100px;min-height:100px;}
.price {margin-left:20px;display:block;text-align:center;width:200px;}
/*=====================================================*/
#bookshelf{display:flex;flex-wrap:wrap;}
.book{margin-left:20px;}
#letter {width: 800px;height: auto;background-image: url("img/random/letterpaper.png");border-radius: 5px;background-color:transparent;}
.lettertext {font-family: AlwaysForever, sans-serif;padding: 50px 0px 0px 50px;width: 600px;height: auto;color: black;text-align: left;margin: auto;font-size:40px;}
/*=====================================================*/
.choice {display:block;margin: 10px 0 10px 0;padding: 2px;}
.choice a {display:block;font-weight: bold;font-variant: small-caps;width:25%; border:1px solid white; border-radius:3px; background-color: #85a3e0; margin: 5px 0 0 0;color:black;padding:0 2px 0 2px;box-shadow:0 3px darkgray;}
.choice a:hover{text-decoration:none;box-shadow:0 1px darkgray; transform:translateY(2px);}

.infolink a{display:inline;font-weight: bold;font-variant: small-caps;line-height:1em; border:1px solid black; border-radius:3px; background-color:#ffd9b3;color:black;padding:0 2px 0 2px;}
.infolink a:hover{text-decoration:none;}

.talklink {display:flex;flex-direction:column;justify-content:center;margin:10px 0 10px 0;padding: 2px;}
.talklink a {margin: 5px 0  0; padding 2px; font-weight:bold;font-variant:small-caps;width:auto;border:1px solid white;border-radius:3px;background-color:grey;color:black;padding-left:5px;box-shadow:0 3px darkgray;}
.talklink a:hover{text-decoration:none;box-shadow:0 1px darkgray; transform:translateY(2px);}
.talklink a::before{content:url("img/random/talklink.png") '"';border-radius: 1px;vertical-align:middle;display:inline-flex;margin:2px;}
.talklink a::after{content:'"';}
/*=====================================================*/
#thought {display: flex;flex-direction: row; color: black; background-color: lightgray;	border: 2px solid black;border-radius: 5px;font-style: italic;margin: 10px 0 10px 0;padding-left: 10px;padding-right:10px;}
/*=====================================================*/
#locpic {float: right;margin-left: 20px;}
#locpic >img{width: 450px;height: auto;}
/*=====================================================*/

.sexpic {float: right;margin-left: 20px;}

img {border-radius: 3px;border: 2px solid white;max-width: 100%;height: auto;}

.video video{width: 500px; max-width:500px;max-height:auto; border:1px solid white;border-radius:5px;}
.event video{display:block;margin:auto;}
.right {float:right;margin-left:20px;}
.left {float:left;margin-right:20px;}
/*=====================================================*/
#ui-dialog-body {overflow-y: auto;text-align: justify;max-width: auto;min-width: 500px;}
#ui-dialog-body >img{min-width: 140px;min-height: 140px;display:block;margin-bottom:5px;margin-top:5px;}
#ui-dialog-titlebar {display:none;}
#ui-dialog-body .choice {clear:both;}
#ui-dialog-body .talklink {clear:both;}
#ui-dialog-body.event {min-width:1000px;}

/*=====================================================*/
#ui-dialog-body.phone {display:flex;flex-direction:column;background-image: url("img/random/phone_dialog.png");background-repeat: no-repeat;height:700px; width: 350px; min-height:700px; min-width:350px;padding: 0px;border:none;background-color: transparent;} 
#phone_content{display:flex;flex-direction:column;margin: 75px 20px 15px 20px;width:310px;height:555px;padding 10px;} 
#phone_content a {display:block;color:black;background-color:#c2d1f0; border:1px solid darkgray;margin-top:6px;padding-left:2px;box-shadow:0 3px darkgray;border-radius:3px;}
#phone_content a:hover {text-decoration:none; box-shadow: 0 1px darkgray; transform:translateY(2px);}
#phone_content .text {display:inline-block; color:black;width: 50%;margin:3px 5px 5px 2px;border: 1px solid grey; border-radius:5px;padding 10px;width:90%;}


#phone_back {position:absolute;right:30px;bottom:60px;}
#phone_back img{border:none;}
#phone_exit{margin-left:130px;width:84px;height:35px;border-radius:8px;}
/*=====================================================*/
#ui-dialog-body.journal {display:flex;flex-direction:column;background-image: url("img/random/journal_dialog.png");background-repeat:no-repeat;height:800px;width:850px;background-color:transparent;color:black;border:none;}
.journal a{color:black;}
.journal a:hover{text-decoration:none;}
#journal {margin:10px 30px 20px 105px;}
#journalmenu {display:flex;flex-direction:row;background-color:transparent;padding-top:10px;}
#journalmenu a {display:block;border:none;}
#journalmenu a:hover{background-color:white;}
#journalmenu span{border:1px solid white;margin:auto;border-radius:5px 5px 0 0;width:100%;background-color:#d9d9d9;}

#journalsubmenu {display:flex;flex-direction:row; background-color: transparent;padding-top:10px;}
#journalsubmenu a {display:block;border:none;}
#journalsubmenu a:hover{background-color:white;}
#journalsubmenu span {border: 1px solid white;margin:auto;border-radius:5px 5px 0 0; border-bottom:none;width:100%;white-space: nowrap; }

#journal_content{background-color:transparent;overflow:auto;}
#journal_content img{float:right;margin:10px;}

#aboutauthor{font-family:AlwaysForever, sans-serif;font-size:40px;display:flex;flex-direction:row;width:1000px; min-width:1000px;min-height:600px;}
#aboutauthormenu{display:flex;flex-direction:column;width:200px;min-width:200px;}
#aboutauthormenu>.choice>a{width:100%;font-size:30px;margin-right:10px;margin-right:5px;}
#aboutauthortext{color:black;margin-left:10px;padding-left:20px;padding-right:10px;background-image: url("img/random/letterpaper.png");background-repeat:none;width:100%;border-radius:3px;}
#aboutauthortext>h1,h3{text-align:center;}

#ui-dialog-body.inventory {width:1000px;height:800px;background-color:transparent;border:none;}
#ui-dialog-body.inventory .item>img{margin-right:10px;}
#ui-dialog-body.inventory .item a{display:inline-block;box-shadow:0 3px darkgray;border:1px solid white;border-radius:3px;font-weight:bold;font-variant:small-caps;background-color:#8080ff;color:white;margin: 0 10px 0 10px;padding: 2px 5px 2px 5px;}
#ui-dialog-body.inventory .item a:hover{text-decoration:none;box-shadow:0 1px darkgray; transform:translateY(2px);background-color:#4d4dff}
#ui-dialog-body.inventory .amount {display:inline-block;border:1px solid white;border-radius:2px;margin: 0 10px 0 10px;padding: 2px 5px 2px 5px;}
#inventorymenu{display:flex;flex-direction:row;background-color:black;}
#inventorymenu a{display:block;border:1px solid white;background-color:gray;border-radius:5px 5px 0 0;color:black; width:100%;border-bottom:none;}
#inventorymenu a:hover{background-color:lightgray;text-decoration:none;}
#inventoryspace{border:1px solid white;border-radius:0 0 5px 5px;background-color:black;min-height:100px;}

.border{border:1px solid white;border-radius:5px;margin 5px;}

#dayreviewstreaming {display:flex;flex-direction:column;}



#ui-dialog-body.talk {background-image:url("img/random/speechbubble.png");background-repeat:none; width: 810px; height:684px;background-color:transparent;border:none;box-sizing: border-box;color:black;}
#ui-dialog-body #talkouter{position:absolute;top:60px; left:60px; right:60px; bottom: 180px;overflow:auto;}
#ui-dialog-body.talk .msg {border:2px solid black;}

.talk>.choice a{width:100%;}

#dailythoughts {border: 1px solid white; border-radius:5px;}
.rightlink {display:block; text-align:right;}

.research>.choice a{width:100%;}
.cheats>.choice>a{width:100%;}
.event>.choice> a{width:100%;}


/*===================================================================*/
.wrap-collabsible {margin-bottom: 1.2rem 0;}

input[type='checkbox'] {display: none;}

.lbl-toggle {display: block;font-weight: bold;font-family: monospace;font-size: 1.2rem;text-transform: uppercase;text-align: center;border: 2px solid white;max-width: 140px;padding: 1rem;color: black;background: dimgray;cursor: pointer;border-radius: 7px;transition: all 0.25s ease-out;}

.lbl-toggle::before {content: ' ';display: inline-block;border-top: 5px solid transparent; border-bottom:5px solid transparent;border-left: 5px solid currentColor;vertical-align: middle;margin-right: .7rem; transform: translateY(-2px);transition: transform .2s ease-out;}

.toggle:checked + .lbl-toggle::before {transform: rotate(90deg) translateX(-3px);}

.collapsible-content {max-height: 0px;overflow: hidden;transition: max-height .25s ease-in-out;}

.toggle:checked + .lbl-toggle + .collapsible-content {max-height: 350px;}

.toggle:checked + .lbl-toggle {border-bottom-right-radius: 0;border-bottom-left-radius: 0;}

.collapsible-content .content-inner {background: black;border-bottom: 2px solid white;border-right: 2px solid white;border-left: 2px solid white;border-bottom-left-radius: 7px;border-bottom-right-radius: 7px; padding: .5rem 1rem; overflow:auto;}

.content-inner a{display:block; border:1px solid white; border-radius:3px; background-color: #85a3e0; margin-top:4px;margin-bottom:1px;color:black;padding-left:1px;font-size:small;box-shadow:0 3px darkgray;}
.content-inner a:hover{text-decoration:none;box-shadow:0 1px darkgray;transform:translateY(2px);}
/*===================================================================*/













































</style><script role="script" id="twine-user-script" type="text/twine-javascript">
Config.saves.onLoad = function (save) {
	if (save.version < 0.003900) {
		/* Invalidate save versions that are too old */
		throw new Error("The save you're attempting to load is too old and incompatible with the current game. Please download the latest version.");
	} 
}; 


//Use passage titles for savegames
Config.passages.descriptions = true;

//Code for statusbars
setup.updateStatusBar = function(el,prop){if (document.getElementById(el) != undefined){var w = document.getElementById(el).offsetWidth;document.getElementById(el).style.backgroundPosition="-" + (w - w * prop) + "px 0px";}}


// helper functions
setup.selectStore = function (storyVar) {var store, varName;if (storyVar.charAt(0) === '$') {	store = State.variables;} else if (storyVar.charAt(0) === '_') {store = State.temporary;} else {return false;}
varName = storyVar.slice(1);return [store, varName];};
setup.storeCode = function (storyVar, code) {var store, varName;storyVar = setup.selectStore(storyVar);if (!storyVar) {return false;}if (typeof code != 'string') {return false;}store   = storyVar[0];varName = storyVar[1];store[varName] = code;return true;};
setup.evalCode = function (code, silent, $element, stream) {if (typeof code != 'string') {return false;}if (silent) {new Wikifier(null, code);return true;} else {$element.wiki(code).appendTo(stream);return true;}return false;};
// the <<code>> macro
Macro.add('code', {tags : null,handler : function () {var code, storyVar, check;if (this.args.length !== 1) {return this.error('incorrect number of arguments');}if (typeof this.args[0] != 'string') {return this.error('first argument should be a quoted variable name');}
// store code chunk as string in variable
storyVar = this.args[0];code = this.payload[0].contents;check = setup.storeCode(storyVar, code);if (!check) {return this.error('error in arguments');}}});
// the <<wiki>> and <<eval>> macros
Macro.add(['wiki', 'eval'], {handler : function () {var $wrapper = $(document.createElement('span'));var code, silent, check;if (this.args.length !== 1) {return this.error('incorrect number of arguments');}
$wrapper.addClass('macro-' + this.name);code = this.args[0];silent = (this.name === 'eval') ? true : false;	check = setup.evalCode(code, silent, $wrapper, this.output);if (!check) {return this.error('unknown error; please check arguments');}}});

// ui-macro.min.js, for SugarCube 2, by Chapel
;!function(){var a={update:UIBar.setStoryElements,stow:UIBar.stow,unstow:UIBar.unstow,toggle:function(){$("#ui-bar").hasClass("stowed")?UIBar.unstow():UIBar.stow()},hide:function(){$("#ui-bar").css("display","none")},show:function(){$("#ui-bar").css("display","block")},kill:function(){$("#ui-bar").css("display","none"),$("#story").css("margin-left","2.5em")},restore:function(){$("#ui-bar").css("display","block"),$("#story").css("margin-left","20em")},jump:UI.jumpto,saves:UI.saves,restart:UI.restart,settings:UI.settings,share:UI.share,aliases:{refresh:"update",reload:"update",destroy:"kill",revive:"restore",jumpto:"jump",save:"saves",load:"saves",setting:"settings",sharing:"share"}},e=Object.keys(a);function t(s){return s&&"string"==typeof s?(s=s.toLowerCase().trim(),t=s,e.includes(t)||(r=s,s=a.aliases[r]||null)?(a[s](),!1):'Command "'+s+'" is not a valid command.'):"Command is not a string.";var r,t}Macro.add("ui",{handler:function(){Array.isArray(this.args)&&this.args.length||this.error("No commands passed to macro.");var s,r=function(s){if(!Array.isArray(s))return"Command list error.";var r=[];return s.forEach(function(s){r.push(t(s))}),r}(this.args.flatten());s=(r=r.filter(function(s){return"string"==typeof s})).join(" "),r.length&&s&&this.error(s)}})}();
// end ui-macro.min.js
			
$(document).on(':dialogclosed', function (ev) {
	$("#ui-overlay").addClass("ui-close");$("#ui-dialog").removeClass("closeBlocked");
});


// <<dialog>> macro
Macro.add('dialog', {
       tags : ['onopen', 'onclose'],
    handler : function () {       
        // handle args (if any)
        var errors = [];
        var content = '', onOpen = null, onClose = null;
        var title = (this.args.length > 0) ? this.args[0] : '';
        var classes = (this.args.length > 1) ? this.args.slice(1).flatten() : [];
			
        this.payload.forEach( function (pl, idx) {
            if (idx === 0) {
                content = pl.contents;
            } else {
                if (pl.name === 'onopen') {
                    onOpen = onOpen ? onOpen + pl.contents : pl.contents;
                } else {
                    onClose = onClose ? onClose + pl.contents : pl.contents;
                }
            }
        });
      	//Added code  
	  		if (this.args.includes(true)){$("#ui-overlay").removeClass("ui-close");$("#ui-dialog").addClass("closeBlocked");}
			  //Added code end		
        // add the macro- class
        classes.push('macro-' + this.name);      
        // dialog box
        Dialog.setup(title, classes.join(' '));
        Dialog.wiki(content);
        // should these be shadowWrapper-aware?
        if (onOpen && typeof onOpen === 'string' && onOpen.trim()) {
            $(document).one(':dialogopened', function () {
                $.wiki(onOpen);
            });
        }
        if (onClose && typeof onClose === 'string' && onClose.trim()) {
            $(document).one(':dialogclosed', function () {
                $.wiki(onClose);
            });
        }
        Dialog.open();      
    }
});


	
;!function(){var a=1;Macro.add("done",{skipArgs:!0,tags:null,handler:function(){var n=this.payload[0].contents.trim();""!==n&&(postdisplay[":chapel-done-macro-"+a]=function(a){delete postdisplay[a],$.wiki(n)},a++)}})}();

;Macro.add("trigger",{handler:function(){var t;return 2<this.args.length||0===this.args.length?this.error("incorrect number of arguments"):"string"!=typeof this.args[0]?this.error("first argument should be a string and a valid event type"):(t=this.args[0],void(1===this.args.length||this.args[1]&&"string"==typeof this.args[1]&&"document"===this.args[1].toLowerCase().trim()?$(document):$(this.args[1])).trigger(t))}}),Macro.add("event",{tags:["which"],handler:function(){var t,r,s=this.payload,e="",i="";return 2<this.args.length||0===this.args.length?this.error("incorrect number of arguments"):"string"!=typeof this.args[0]?this.error("first argument should be a string and a valid event type"):(2===this.args.length&&"string"==typeof this.args[1]&&(e=this.args[1]),t=this.args[0],void $(document).on(t,e,function(t){if(i=s[0].contents,1<s.length)for(r=1;r<s.length;r++)s[r].args.includes(t.which)&&(i+=s[r].contents);new Wikifier(null,i)}))}});

;Macro.add("first",{skipArgs:!0,tags:["then","finally"],handler:function(){var a,t=$(document.createElement("span")),n=this.payload[this.payload.length-1],s=visited()-1;a=s<this.payload.length?this.payload[s].contents:"finally"===n.name?n.contents:"",t.wiki(a).addClass("macro-"+this.name).appendTo(this.output)}});

;Macro.add("mouseover",{tags:["onhover","onmouseover","onmousein","onmouseenter","onmouseout"],skipArgs:!0,handler:function(){if(this.payload.length<2)return this.error("No event tag used.");var e={mouseover:[],mousein:[],mouseout:[]},o=$(document.createElement("span")).addClass("macro-"+this.name).wiki(this.payload[0].contents).appendTo(this.output);this.payload.forEach(function(o){switch(o.name){case"onhover":case"onmouseover":e.mouseover.push(o.contents);break;case"onmousein":case"onmouseenter":e.mousein.push(o.contents);break;case"onmouseout":e.mouseout.push(o.contents);break;default:return}}),e.mouseover.length&&o.on("mouseover",function(o){$.wiki(e.mouseover.join(" "))}),e.mousein.length&&o.on("mouseenter",function(o){$.wiki(e.mousein.join(" "))}),e.mouseout.length&&o.on("mouseout",function(o){$.wiki(e.mouseout.join(" "))})}});

;setup.messageMacro={},setup.messageMacro.default="Help",Macro.add("message",{tags:null,handler:function(){var e=this.payload[0].contents,a=$(document.createElement("span")),s=$(document.createElement(this.args.includes("btn")?"button":"a")),t=$(document.createElement("span"));s.wiki(0<this.args.length&&"btn"!==this.args[0]?this.args[0]:setup.messageMacro.default).ariaClick(function(){a.hasClass("open")?t.css("display","none").empty():t.css("display","block").wiki(e),a.toggleClass("open")}),a.attr("id","macro-"+this.name+"-"+this.args.join("").replace(/[^A-Za-z0-9]/g,"")).addClass("message-text").append(s).append(t).appendTo(this.output)}});



































</script><tw-tag name="Bar" color="orange"></tw-tag>,<tw-tag name="apartment_complex" color="orange"></tw-tag>,<tw-tag name="appartment_complex" color="orange"></tw-tag>,<tw-tag name="brians_home" color="orange"></tw-tag>,<tw-tag name="eventspossible" color="blue"></tw-tag>,<tw-tag name="henrys_home" color="orange"></tw-tag>,<tw-tag name="home" color="orange"></tw-tag>,<tw-tag name="jasmins_home" color="orange"></tw-tag>,<tw-tag name="mall" color="orange"></tw-tag>,<tw-tag name="nobr" color="purple"></tw-tag>,<tw-tag name="nomove" color="yellow"></tw-tag>,<tw-tag name="nosidebar" color="yellow"></tw-tag>,<tw-tag name="outside" color="orange"></tw-tag>,<tw-tag name="public" color="red"></tw-tag>,<tw-tag name="widget" color="green"></tw-tag><tw-passagedata pid="1" name="start" tags="nobr" position="25,25" size="200,200">&lt;span id=&quot;introreplace&quot;&gt;
@@.important;
Savegames older than Version 0.3.9 are not compatible.&lt;br&gt;
&lt;span class=&quot;choice&quot;&gt;&lt;&lt;linkreplace &quot;Delete all savegames&quot;&gt;&gt;All saves deleted.&lt;br&gt;&lt;&lt;set Save.clear()&gt;&gt;&lt;&lt;/linkreplace&gt;&gt;&lt;/span&gt;

@@
&lt;br&gt;&lt;br&gt;
&lt;&lt;link &quot;Changelog&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;changelog&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
Hello and welcome to Hunters Harem. A mind control game. My goal is to create a whole town where you can control, dominate (and transform) anyone.
This game features heavy themes of mind control, mtf transformation and domination/submission. If you are not interested or comfortable with these themes I highly recommend you to not play it.&lt;br&gt;&lt;br&gt;
&lt;&lt;thanks&gt;&gt;&lt;br&gt;&lt;br&gt;
Please only continue if you are over the age of 18.
&lt;br&gt;
&lt;br&gt;

Are you?&lt;br&gt;
@@.choice;
&lt;&lt;link &quot;Yes, I am!&quot;&gt;&gt;&lt;&lt;replace &quot;#introreplace&quot;&gt;&gt;&lt;&lt;introreplace&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;No, I&#39;m not.&quot; &quot;end&quot;&gt;&gt;&lt;&lt;set $end to &quot;tooyoung&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
@@
&lt;/span&gt;

</tw-passagedata><tw-passagedata pid="2" name="intro" tags="nobr" position="25,250" size="100,100">&lt;&lt;first&gt;&gt;&lt;&lt;dialog &#39;A wonderful dream&#39; &#39;dream&#39; true&gt;&gt;&lt;&lt;introdream&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;momintrodialog&gt;&gt;
&lt;&lt;then&gt;&gt;&lt;&lt;dirtykitchen&gt;&gt;
&lt;&lt;then&gt;&gt;&lt;&lt;kitchencleaned&gt;&gt;
&lt;&lt;then&gt;&gt;&lt;&lt;cleaningtherest&gt;&gt;
&lt;&lt;then&gt;&gt;&lt;&lt;getcleaning&gt;&gt;
&lt;&lt;then&gt;&gt;&lt;&lt;aftercleaning&gt;&gt;
&lt;&lt;then&gt;&gt;&lt;&lt;momreturns&gt;&gt;
&lt;&lt;then&gt;&gt;&lt;&lt;box&gt;&gt;
&lt;&lt;then&gt;&gt;&lt;&lt;boxcontent&gt;&gt;
&lt;&lt;then&gt;&gt;&lt;&lt;boxclosed&gt;&gt;
&lt;&lt;then&gt;&gt;WOW! YOU SHOULDN&#39;T BE HERE
&lt;&lt;/first&gt;&gt;</tw-passagedata><tw-passagedata pid="3" name="end" tags="nobr" position="250,25" size="100,100">&lt;&lt;switch $end&gt;&gt;
&lt;&lt;case &quot;angeredjasmin&quot;&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;You asshole! I never knew you were such a pervert! Get away from me!&quot;&gt;&gt;
	You angered $Jasmin.callname so much, that she threw you out of her house. She also complained about you to all her friends, which in turn made them despise you. This in turn made it impossible for you to 
	enchant them. Your story here is over, but you can restart the game if you want.&lt;br&gt;
	HINT: Don&#39;t be an asshole to others (unless you have enchanted them)

&lt;&lt;case &quot;angeredmom&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;What?! Are you insane? Leave this house immediatley. If I see you ever again I&#39;m gonna castrate you.&quot;&gt;&gt; 
	You angered your Mom so much, that she kicked you out of the house. She also burned all your stuff, including the book. You were disowned and had to make a living on your own. Without the book you couldn&#39;t 
	improve your understanding of the spell and so you lost the possibilities it offered. Your story ends here, but thanks to modern technology you can just restart it. &lt;br&gt;
	HINT: Your mother is a bitch! To put her into her place you need to have power over her!

&lt;&lt;case &quot;angeredandrea&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;I always knew you were a little pervert, but that is way over the line! I&#39;m calling the cops on you!&quot;&gt;&gt;
	You pissed of $Andrea.callname, which in turn pissed of your Mom who in turn called everyone she knew and made your life horrible. You were disowned and had to get out of Springvale as fast as you could. Sadly 
	you weren&#39;t able to take the book with you.&lt;br&gt; HINT: To get $Andrea.callname to talk with you, you need to give her something she might not even know she missed.

&lt;&lt;case &quot;angeredlisa&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;Wow! You are even more of a loser than I thought. I don&#39;t know how I could&#39;ve ever agreed to be your girlfriend.&quot;&gt;&gt;
	You reignited &lt;&lt;=$Lisa.callname&gt;&gt;s scorn and loathing for you. Instead of just ignoring you she put all her energy towards making your life miserable. She, of course, succeeded. That is all for your exploits,
	but in another universe, it could all have played out differently.
	HINT: Patience goes a long way. If you want to start going anywhere with her, you need someone to speak on your behalf. Try her boyfriend or maybe your sister.

&lt;&lt;case &quot;binnedbox&quot;&gt;&gt;
	You threw away your legacy before even having it. This is by far the stupidest way to end the game. What were you expecting? Or did you just want to know what happened if you clicked that link? Well, 
	it ended your story.&lt;br&gt; HINT: Next time, don&#39;t be an idiot. We both know why you play the game. Don&#39;t throw it away.

&lt;&lt;case &quot;tooyoung&quot;&gt;&gt;
	I&#39;m very sorry, but you are too young to play this game. Please feel free to come back once you reached the appropriate amount of lifetime.&lt;br&gt;
	Although I can&#39;t keep you from lying about your [[age|start]].
	
&lt;&lt;default&gt;&gt; ERROR End is: $end	
&lt;&lt;/switch&gt;&gt;

@@.choice;
	&lt;&lt;link &quot;Load a savegame&quot;&gt;&gt;&lt;&lt;set UI.saves()&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Restart the game&quot;&gt;&gt;&lt;&lt;set UI.restart()&gt;&gt;&lt;&lt;/link&gt;&gt;
@@</tw-passagedata><tw-passagedata pid="4" name="Street widgets" tags="widget nobr" position="625,375" size="100,100">&lt;&lt;widget bakerstreet&gt;&gt;
&lt;&lt;jpg &quot;locations&quot; &quot;baker_street&quot;&gt;&gt;&lt;br&gt;
$Brian.callname&lt;&lt;if $Brian.gender is &quot;female&quot;&gt;&gt;, your submissive slut, &lt;&lt;else&gt;&gt;, your nemesis,&lt;&lt;/if&gt;&gt; lives in number 2.&lt;br&gt;
Your &lt;&lt;if $Henry.gender is &quot;female&quot;&gt;&gt;servant&lt;&lt;else&gt;&gt;friend&lt;&lt;/if&gt;&gt; $Henry.callname lives in number 3.&lt;br&gt;
&lt;&lt;/widget&gt;&gt;
/*=======================================================*/
&lt;&lt;widget marlowestreet&gt;&gt;
&lt;&lt;jpg &quot;locations&quot; &quot;marlowe_street&quot;&gt;&gt;&lt;br&gt;
This is Marlowe Street. You live in number 1.&lt;br&gt;
Your &lt;&lt;if $Jasmin.status lt 2&gt;&gt;childhood friend&lt;&lt;elseif $Jasmin.status is 2&gt;&gt;girlfriend&lt;&lt;else&gt;&gt;loveslave&lt;&lt;/if&gt;&gt; $Jasmin.callname lives in number 2.&lt;br&gt;
&lt;&lt;/widget&gt;&gt;
/*=======================================================*/
&lt;&lt;widget mainstreet&gt;&gt;
&lt;&lt;jpg &quot;locations&quot; &quot;main_street&quot;&gt;&gt;&lt;br&gt;
This is the Main street of Springvale. A Joes Tavern, the local bar, is located here, as well as the public park and a few smaller businesses.
&lt;&lt;/widget&gt;&gt;
/*=======================================================*/
&lt;&lt;widget backstreets&gt;&gt;
&lt;&lt;jpg &quot;locations&quot; &quot;backstreets&quot;&gt;&gt;&lt;br&gt;
These are the seedy backstreets of Springvale. 
&lt;&lt;set _ran to random(1,2)&gt;&gt;
&lt;&lt;switch _ran&gt;&gt;
&lt;&lt;case 1&gt;&gt;Not much is going on here.
&lt;&lt;case 2&gt;&gt;There is a shady looking person leaned against a wall.
&lt;&lt;/switch&gt;&gt;

&lt;&lt;/widget&gt;&gt;
/*=======================================================*/
&lt;&lt;widget watched&gt;&gt;
&lt;&lt;set _ran to random(1,10)&gt;&gt;
&lt;&lt;if _ran is 1&gt;&gt;
	&lt;&lt;if $Victoria.seen lt 3&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;
		&lt;&lt;mp4 &quot;random&quot; &quot;watching&quot;&gt;&gt; &lt;br&gt;You have a feeling of being watched&lt;&lt;if $Victoria.seen gt 0&gt;&gt; again&lt;&lt;/if&gt;&gt;.
		@@.choice;
		&lt;&lt;link &quot;Look for passersby&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;lookatpassersby&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Look at the houses&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;&lt;&lt;lookathouses&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt; 
		&lt;&lt;link &quot;Look at the cars&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;&lt;&lt;lookatcars&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Ignore it&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
		&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*=======================================================*/
&lt;&lt;widget lookathouses&gt;&gt;
@@.right;&lt;&lt;jpg &quot;locations&quot; &quot;houses&quot;&gt;&gt;@@
You look at the houses, but everything seems to be in order.&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*=======================================================*/
&lt;&lt;widget lookatpassersby&gt;&gt;
	@@.right;&lt;&lt;jpg &quot;locations&quot; &quot;passersby&quot;&gt;&gt;@@
	You look around, to see if someone is watching you, but you can&#39;t see anything out of the ordinary. Some random townspeople are milling about, most of whom you know at least by sight.&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*=======================================================*/
&lt;&lt;widget lookatcars&gt;&gt;
You look for the cars parked at the street.
@@.right;&lt;&lt;jpg &quot;locations&quot; &quot;suspiciouscar&quot;&gt;&gt;@@ 
There is one black car with the motor running. Very suspicious.
@@.choice;
&lt;&lt;link &quot;Get a better look.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;&lt;&lt;suspiciouscar&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Ignore it&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@			
&lt;&lt;/widget&gt;&gt;
/*=======================================================*/
&lt;&lt;widget suspiciouscar&gt;&gt;
&lt;&lt;set $quests[7].unlocked to true&gt;&gt;
You walk towards the car and try to get a better look at the driver. It seems that the driver has indeed been watching you, as the car suddenly speeds off when you com nearer. But you still got to catch a glimpse of the driver. &lt;br&gt;
@@.right;&lt;&lt;jpg &quot;Victoria/Event&quot; &quot;car&quot;&gt;&gt;@@
&lt;&lt;switch $Victoria.seen&gt;&gt;
&lt;&lt;case 0&gt;&gt;
	It was a beautiful woman, you have never seen before in Springvale. Most likely she is from out of town.
	&lt;&lt;thought &quot;Was she really watching me? Or was it just coincidence?&quot;&gt;&gt;&lt;&lt;set $Victoria.seen++&gt;&gt;
&lt;&lt;case 1&gt;&gt;
	It was that woman again. But before you can get a better look she turns a corner and is gone. 
	&lt;&lt;thought &quot;This time I&#39;m pretty sure she was watching me.&quot;&gt;&gt;&lt;&lt;set $Victoria.seen++&gt;&gt;
&lt;&lt;case 2&gt;&gt;
	Again this woman. She seems to be shadowing you. But this time you saw something fly out of the open window. You quickly run towards it and pick it up.
	It&#39;s a photo.&lt;&lt;set $Victoria.seen++&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Turn it over&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;victoriadroppedphoto&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/switch&gt;&gt;
&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget victoriadroppedphoto&gt;&gt;
	&lt;&lt;png &quot;Victoria/Event&quot; &quot;dropped_photo&quot;&gt;&gt;
	&lt;&lt;thought &quot;Why does she have a photo of me? Where did she get it? I should really investigate (CURRENTLY A DEAD END, WILL CONTINUE IN THE FUTURE)&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Pocket the picture and go your way&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;set $dropped_photo.owned to true&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;














</tw-passagedata><tw-passagedata pid="5" name="Brian sex widgets" tags="widget nobr" position="2000,0" size="100,100">/*===================================================================*/
/*================================SEX================================*/
/*===================================================================*/
&lt;&lt;widget brianorgasm&gt;&gt;
	&lt;&lt;msg $Brian &quot;May I cum,&lt;&lt;yourname $Brian&gt;&gt;?&quot;&gt;&gt;
	&lt;span id=&quot;brianorgasm&quot;&gt;
	@@.talklink;
		&lt;&lt;link &quot;Yes&quot;&gt;&gt;
			&lt;&lt;replace &quot;#brianorgasm&quot;&gt;&gt;
			&lt;&lt;switch $Brian.act&gt;&gt;
				&lt;&lt;case &quot;analtraining&quot;&gt;&gt;&lt;&lt;sexmp4 &quot;Brian&quot; &quot;dildo_orgasm&quot;&gt;&gt;
				&lt;&lt;case &quot;boundfun&quot; &quot;boundpussy&quot; &quot;boundanal&quot; &quot;boundfist&quot; &quot;boundmouth&quot;&gt;&gt;&lt;&lt;mp4 &quot;Brian&quot; &quot;bound_orgasm&quot;&gt;&gt;
			&lt;&lt;/switch&gt;&gt;&lt;br&gt;
			&lt;&lt;msg $Brian &quot;Thank you! Thank you! Thank you!&quot;&gt;&gt;
			&lt;&lt;set $Brian.arousal to 0&gt;&gt;
			&lt;&lt;continueon&gt;&gt;
			&lt;&lt;/replace&gt;&gt;
		&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;No!&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;set $Brian.arousal to 6&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
	&lt;/span&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget brianarousal&gt;&gt; /*args[0] is the toy that is used*/
	&lt;&lt;set $Brian.arousal++&gt;&gt;
	&lt;&lt;switch $Brian.act&gt;&gt;
	&lt;&lt;case &quot;analtraining&quot;&gt;&gt;
		&lt;&lt;set _pic to &quot;training_&quot;+$Brian.trained&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;mp4 &quot;Brian&quot; _pic&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;switch $Brian.arousal&gt;&gt;
			&lt;&lt;case 0&gt;&gt;Her asshole opens under the pressure of $args[0].&lt;&lt;msg $Brian &quot;Slowly, please, &lt;&lt;yourname $Brian&gt;&gt;. I beg you!&quot;&gt;&gt;
			&lt;&lt;case 1&gt;&gt;$Brian.callname gasps as her butthole slowly adjusts to the width of &lt;&lt;=$args[0]&gt;&gt;.&lt;&lt;msg $Brian &quot;Mmmmm&quot;&gt;&gt;
			&lt;&lt;case 2 3&gt;&gt;She begins moaning as the discomfort turns into pleasure. &lt;&lt;msg $Brian &quot;It begins to feel good.&quot;&gt;&gt;
			&lt;&lt;case 4 5&gt;&gt;Her now open asshole easily lets $args[0] slide in and out of her. &lt;&lt;msg $Brian &quot;Please! Harder! Deeper!&quot;&gt;&gt;
			&lt;&lt;case 6 7&gt;&gt;She twitches in pleasure, obviously nearing orgams.&lt;&lt;msg $Brian &quot;Yes! Yes! I&#39;m so close!&quot;&gt;&gt;
			&lt;&lt;case 8&gt;&gt;&lt;&lt;msg $Brian &quot;OHHHHHHHHHH!&quot;&gt;&gt;She screaches as &lt;&lt;=$args[0]&gt;&gt; rips waves of pleasure through her asshole.&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;brianorgasm&gt;&gt;&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;case &quot;boundfun&quot; &quot;boundpussy&quot; &quot;boundanal&quot; &quot;boundfist&quot; &quot;boundmouth&quot;&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;mp4 &quot;Brian&quot; $Brian.act&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;switch $Brian.arousal&gt;&gt;
			&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Brian &quot;Mmmmmmmmhhh!&quot;&gt;&gt;
			&lt;&lt;case 1 2 3&gt;&gt;&lt;&lt;msg $Brian &quot;Ahhhhh Ahhhh Arghhhhh&quot;&gt;&gt;
			&lt;&lt;case 4 5 6&gt;&gt;&lt;&lt;msg $Brian &quot;Mm! Mm! Mm! Mm!&quot;&gt;&gt;
			&lt;&lt;case 7&gt;&gt;&lt;&lt;msg $Brian &quot;AIIIIIIIIIIIIIIII!!!!&quot;&gt;&gt;
			&lt;&lt;case 8&gt;&gt;&lt;&lt;msg $Brian &quot;AAAAAAAAAAAAAAAAAAAAAAAAAAHHHHHHHHHHHHHHHHRGGGGGG!!!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;brianorgasm&gt;&gt;&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget sexmenuBrian&gt;&gt;
	&lt;&lt;if $Brian.act is &quot;none&quot;&gt;&gt;
		&lt;&lt;link &quot;Train her asshole&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.act to &quot;analtraining&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;if $sextoys[0].amount gt 0&gt;&gt;&lt;&lt;link &quot;Sexually torture her&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.act to &quot;bdsm&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &quot;Stop fucking her&quot; $location.target&gt;&gt;&lt;&lt;set $sidemenu to true&gt;&gt;&lt;&lt;set $Brian.arousal to 0&gt;&gt;&lt;&lt;set $Brian.act to &quot;none&quot;&gt;&gt;&lt;&lt;set $Brian.bdsm to 0&gt;&gt;&lt;&lt;set $Brian.trained to 0&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget briansex&gt;&gt; /*args[0] is $Brian.act*/
	&lt;&lt;switch $args[0]&gt;&gt;
	&lt;&lt;case &quot;analtraining&quot;&gt;&gt;&lt;&lt;briananaltrainingmenu&gt;&gt;
	&lt;&lt;case &quot;bdsm&quot;&gt;&gt;&lt;&lt;brianbdsm&gt;&gt;
	&lt;&lt;case &quot;boundfun&quot; &quot;boundanal&quot; &quot;boundpussy&quot; &quot;boundmouth&quot; &quot;boundfist&quot;&gt;&gt;&lt;&lt;brianbound&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget brianbdsm&gt;&gt;
	@@.sexpic;&lt;&lt;switch $Brian.bdsm&gt;&gt;&lt;&lt;case 0&gt;&gt;&lt;&lt;locpic $Brian&gt;&gt;&lt;&lt;case 1&gt;&gt;&lt;&lt;jpg &quot;Brian/Brians home&quot; &quot;rope&quot;&gt;&gt;&lt;&lt;case 2&gt;&gt;&lt;&lt;jpg &quot;Brian/Brians home&quot; &quot;gag&quot;&gt;&gt;&lt;&lt;case 3&gt;&gt;&lt;&lt;jpg &quot;Brian/Brians home&quot; &quot;clamps&quot;&gt;&gt;&lt;&lt;/switch&gt;&gt;@@
	&lt;&lt;switch $Brian.bdsm&gt;&gt;
	&lt;&lt;case 0&gt;&gt;She looks at you, unsure what you are going to do to her.
	&lt;&lt;case 1&gt;&gt;You take out the rope and show it to her. &lt;&lt;msg $You &quot;I&#39;ll tie you up now, bitch!&quot;&gt;&gt; She gets a look of fearful anticipation in her eyes, almost eagerly participating in the binding of her limps.
	&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $You &quot;Open your filthy mouth! I don&#39;t want to hear your moaning all day.&quot;&gt;&gt; You roughly pull her hair and forcefully shove the gag into her mouth.
	&lt;&lt;case 3&gt;&gt;You show her the gleaming metal nipple clamps. &lt;&lt;msg $You &quot;Are you afraid?&quot;&gt;&gt;She nods. &lt;&lt;msg $You &quot;Good!&quot;&gt;&gt;You quickly put them on and she moans into the gag.
	&lt;&lt;/switch&gt;&gt;
	@@.choice;
		&lt;&lt;if $sextoys[0].amount gt 0 and $Brian.bdsm is 0&gt;&gt;&lt;&lt;link &quot;Tie her up&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.act to &quot;bdsm&quot;&gt;&gt;&lt;&lt;set $Brian.bdsm to 1&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $sextoys[1].amount gt 0 and $Brian.bdsm is 1&gt;&gt;&lt;&lt;link &quot;Gag her&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.act to &quot;bdsm&quot;&gt;&gt;&lt;&lt;set $Brian.bdsm to 2&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $sextoys[2].amount gt 0 and $Brian.bdsm is 2&gt;&gt;&lt;&lt;link &quot;Clamp her nipples&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.act to &quot;bdsm&quot;&gt;&gt;&lt;&lt;set $Brian.bdsm to 3&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $sextoys[0].amount gt 0 and $sextoys[1].amount gt 0 and $sextoys[2].amount gt 0 and $Brian.bdsm isnot 3&gt;&gt;&lt;&lt;link &quot;Just put her in bondage&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.act to &quot;bdsm&quot;&gt;&gt;&lt;&lt;set $Brian.bdsm to 3&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $Brian.bdsm is 3&gt;&gt;&lt;&lt;link &quot;Have fun with her bound body&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.act to &quot;boundfun&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget brianbound&gt;&gt;
	@@.sexpic;
	&lt;&lt;switch $Brian.act&gt;&gt;
		&lt;&lt;case &quot;boundfun&quot;&gt;&gt;&lt;&lt;jpg &quot;Brian/Brians home&quot; &quot;bdsm_fun&quot;&gt;&gt;
		&lt;&lt;case &quot;boundmouth&quot;&gt;&gt;&lt;&lt;jpg &quot;Brian/Brians home&quot; &quot;bdsm_mouth&quot;&gt;&gt;
		&lt;&lt;case &quot;boundpussy&quot;&gt;&gt;&lt;&lt;jpg &quot;Brian/Brians home&quot; &quot;bdsm_pussy&quot;&gt;&gt;
		&lt;&lt;case &quot;boundfist&quot;&gt;&gt;&lt;&lt;jpg &quot;Brian/Brians home&quot; &quot;bdsm_fist&quot;&gt;&gt;
		&lt;&lt;case &quot;boundanal&quot;&gt;&gt;&lt;&lt;jpg &quot;Brian/Brians home&quot; &quot;bdsm_anal&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	@@
	&lt;&lt;switch $Brian.act&gt;&gt;
		&lt;&lt;case &quot;boundfun&quot;&gt;&gt;$Brian.callname is bound and gagged in front of you. She is totally at your mercy.
		&lt;&lt;case &quot;boundmouth&quot;&gt;&gt;You take out the ballgag and hammer her throat with your hard cock. She gags and gasps for air, but you don&#39;t care.
		&lt;&lt;case &quot;boundpussy&quot;&gt;&gt;You ram your cock deep into her pussy, not caring about possible pain you are causing her. By the sounds of her voice though, she is actually quite enjoying it.
		&lt;&lt;case &quot;boundfist&quot;&gt;&gt;You curl your hands into fists and push them deep into her pussy and ass. She screams in pain, but when you look into her eyes you only see animalistic lust. 
		&lt;&lt;case &quot;boundanal&quot;&gt;&gt;You ram your cock deep into her open asshole. The warmth envelopes you, but what makes it even better is the knowledge that you are causing her pain and humiliation.
	&lt;&lt;/switch&gt;&gt;
		&lt;&lt;if $Brian.act isnot &quot;boundfun&quot;&gt;&gt;&lt;&lt;brianarousal&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $Brian.act is &quot;boundmouth&quot; or $Brian.act is &quot;boundpussy&quot; or $Brian.act is &quot;boundanal&quot;&gt;&gt;&lt;&lt;youarousal $Brian&gt;&gt;&lt;&lt;/if&gt;&gt;
	@@.choice;
		&lt;&lt;link &quot;Fuck her mouth&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.act to &quot;boundmouth&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;if $Brian.training gte 6&gt;&gt;&lt;&lt;link &quot;Fist her&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.act to &quot;boundfist&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;link &quot;Fuck her pussy&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.act to &quot;boundpussy&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;if $Brian.training gte 3&gt;&gt;&lt;&lt;link &quot;Fuck her ass&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.act to &quot;boundanal&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget briananaltrainingmenu&gt;&gt;
		&lt;&lt;switch $Brian.trained&gt;&gt;
			&lt;&lt;case 0&gt;&gt;&lt;&lt;set _toy to &quot;none&quot;&gt;&gt;
			&lt;&lt;case 1&gt;&gt;&lt;&lt;set _toy to &quot;your finger&quot;&gt;&gt;
			&lt;&lt;case 2&gt;&gt;&lt;&lt;set _toy to &quot;the small buttplug&quot;&gt;&gt;
			&lt;&lt;case 3&gt;&gt;&lt;&lt;set _toy to &quot;your cock&quot;&gt;&gt;
			&lt;&lt;case 4&gt;&gt;&lt;&lt;set _toy to &quot;the medium buttplug&quot;&gt;&gt;
			&lt;&lt;case 5&gt;&gt;&lt;&lt;set _toy to &quot;the big dildo&quot;&gt;&gt;
			&lt;&lt;case 6&gt;&gt;&lt;&lt;set _toy to &quot;your fist&quot;&gt;&gt;
			&lt;&lt;case 7&gt;&gt;&lt;&lt;set _toy to &quot;the big buttplug&quot;&gt;&gt;
			&lt;&lt;case 8&gt;&gt;&lt;&lt;set _toy to &quot;the giant dildo&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;if $Brian.trained is 0&gt;&gt;&lt;&lt;locpic $Brian&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set _image to &quot;img/Brian/Brians home/training_&quot;+$Brian.trained+&quot;.jpg&quot;&gt;&gt;@@.sexpic;[img[_image]]@@&lt;&lt;/if&gt;&gt;
	&lt;&lt;if _toy is &quot;none&quot;&gt;&gt;
		$Brian.callname nervously awaits how you want to punish him.
	&lt;&lt;else&gt;&gt;	
		&lt;&lt;if $Brian.training lt $Brian.trained-1&gt;&gt;
			You try to force _toy into her asshole.
			&lt;&lt;msg $Brian &quot;Ouch! Ouch! Ouch! This hurts!&quot;&gt;&gt;
			&lt;&lt;thought &quot;There is no way this will fit. I don&#39;t want to tear her asshole, just train it. I&#39;ll have to losen it up first.&quot;&gt;&gt;
		&lt;&lt;elseif $Brian.training is $Brian.trained&gt;&gt;
			She grunts in pain, but her sphincter slowly relaxes and you carefully insert _toy into her ass.
			&lt;&lt;msg $Brian &quot;Ouch! This is so big.&quot;&gt;&gt;
			&lt;&lt;set $Brian.training++&gt;&gt;
		&lt;&lt;elseif $Brian.training lte $Brian.trained+1&gt;&gt;
			&lt;&lt;brianarousal _toy&gt;&gt;
			&lt;&lt;set $Brian.training++&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;brianarousal _toy&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Brian.trained is 3&gt;&gt;&lt;&lt;youarousal $Brian&gt;&gt;&lt;&lt;/if&gt;&gt;
	What do you want to use?
	@@.choice;
	&lt;&lt;link &quot;Finger&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.trained to 1&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Small Buttplug&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.trained to 2&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Cock&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.trained to 3&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Medium Buttplug&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.trained to 4&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Big Dildo&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.trained to 5&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Fist&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.trained to 6&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Big Buttplug&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.trained to 7&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Giant Dildo&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Brian.trained to 8&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="6" name="Jasmin sex widgets" tags="widget nobr" position="1625,0" size="100,100">/*===================================================================*/
/*================================SEX================================*/
/*===================================================================*/
&lt;&lt;widget jasminorgasm&gt;&gt;
	&lt;&lt;sexmp4 &quot;Jasmin&quot; &quot;orgasm&quot;&gt;&gt;&lt;br&gt;
	&lt;&lt;msg $Jasmin &quot;OH YES! YES! YES! YOU ARE AMAZING!&quot;&gt;&gt;
	&lt;&lt;set $Jasmin.arousal to 0&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasminarousal&gt;&gt;
		&lt;&lt;set $Jasmin.arousal ++&gt;&gt;
		&lt;&lt;switch $Jasmin.arousal&gt;&gt;
		&lt;&lt;case 1&gt;&gt;
			&lt;&lt;switch $Jasmin.act&gt;&gt;
			&lt;&lt;case &quot;pussyplay&quot;&gt;&gt;She spreads her legs and lets her fingers slowly creep up her thighs, sneaking towards her target. &lt;&lt;msg $Jasmin &quot;Can you see well from over there?&quot;&gt;&gt;
			&lt;&lt;case &quot;pussyplaydildo&quot;&gt;&gt;She spreads her legs and runs her toy along her inner thighs towards her pink pussy. &lt;&lt;msg $Jasmin &quot;I can&#39;t believe I&#39;m doing this.&quot;&gt;&gt;
			&lt;&lt;case &quot;analplay&quot;&gt;&gt;$Jasmin.callname looks at you unsure, her finger caressing her ass. &lt;&lt;msg $Jasmin &quot;It feels pretty thight. It&#39;s gonna be difficult.&quot;&gt;&gt;
			&lt;&lt;case &quot;analplaydildo&quot;&gt;&gt;She uses her dildo to slowly circle her puckered asshole. &lt;&lt;msg $Jasmin &quot;This toy is so big, it scares me a little.&quot;&gt;&gt;
			&lt;&lt;case &quot;blowjob&quot;&gt;&gt;She looks at your erect manhood and smirks. &lt;&lt;msg $Jasmin &quot;Is this all for me?&quot;&gt;&gt;
			&lt;&lt;case &quot;fuck&quot;&gt;&gt;$Jasmin.callname spreads her legs and looks at you with desire in her eyes. &lt;&lt;msg $Jasmin &quot;Come on &lt;&lt;yourname $Jasmin&gt;&gt; Let&#39;s do this.&quot;&gt;&gt;		
			&lt;&lt;case &quot;anal&quot;&gt;&gt;$Jasmin.callname uses her hands to spread her ass cheeks and nods. &lt;&lt;msg $Jasmin &quot;I do this just for you, &lt;&lt;yourname $Jasmin&gt;&gt;&quot;&gt;&gt;		
			&lt;&lt;/switch&gt;&gt;
		&lt;&lt;case 2 3&gt;&gt;
			&lt;&lt;switch $Jasmin.act&gt;&gt;
			&lt;&lt;case &quot;pussyplay&quot;&gt;&gt;She carefully spreads her pussy lips, giving you a good look of the glistening flesh inside. &lt;&lt;msg $Jasmin &quot;Mmmmh. I this feels good.&quot;&gt;&gt;
			&lt;&lt;case &quot;pussyplaydildo&quot;&gt;&gt;She uses the toy to slowly trace the outline of her pussy. &lt;&lt;msg $Jasmin &quot;Ohh. That was nice.&quot;&gt;&gt;
			&lt;&lt;case &quot;analplay&quot;&gt;&gt;She spits on her finger and slowly lubricates her asshole. &lt;&lt;msg $Jasmin &quot;I can feel it loosening up.&quot;&gt;&gt;
			&lt;&lt;case &quot;analplaydildo&quot;&gt;&gt;$Jasmin.callname spits on the dildo and massages her asshole with the lubricated plastic. &lt;&lt;msg $Jasmin &quot;Ohh, that actually feels quite nice.&quot;&gt;&gt;
			&lt;&lt;case &quot;blowjob&quot;&gt;&gt;$Jasmin.callname takes your cock into her hands and gives it a loving kiss, then roaming her tongue up and down the shaft. &lt;&lt;msg $Jasmin &quot;Mmmm. You taste good.&quot;&gt;&gt;
			&lt;&lt;case &quot;fuck&quot;&gt;&gt;She moves to align her pussy with your cock. &lt;&lt;msg $Jasmin &quot;Put it in, &lt;&lt;yourname $Jasmin&gt;&gt;&quot;&gt;&gt;			
			&lt;&lt;case &quot;anal&quot;&gt;&gt;$Jasmin.callname spits on her hand lubricates her asshole so your dick can enter more easily. &lt;&lt;msg $Jasmin &quot;Fuck my ass, &lt;&lt;yourname $Jasmin&gt;&gt;!&quot;&gt;&gt;		
			&lt;&lt;/switch&gt;&gt;		
		&lt;&lt;case 4 5&gt;&gt;
			&lt;&lt;switch $Jasmin.act&gt;&gt;
			&lt;&lt;case &quot;pussyplay&quot;&gt;&gt;She puts one of her hands on her clitoris and slowly inserts the fingers of her other hand into her pussy. &lt;&lt;msg $Jasmin &quot;Ohh, I&#39;m already very wet.&quot;&gt;&gt;
			&lt;&lt;case &quot;pussyplaydildo&quot;&gt;&gt;$Jasmin.callname carefully inserts the tip of the dildo into her glistening pussy. &lt;&lt;msg $Jasmin &quot;Mmmmmmmmmmhmmm.&quot;&gt;&gt;
			&lt;&lt;case &quot;analplay&quot;&gt;&gt;She insert her pinkie to the first digit, carefully massaging and probing. &lt;&lt;msg $Jasmin &quot;Unghhh. So tight.&quot;&gt;&gt;
			&lt;&lt;case &quot;analplaydildo&quot;&gt;&gt;With a grunt $Jasmin.callname pushes the dildo past the tight entrance of her butthole. &lt;&lt;msg $Jasmin &quot;Ouch. That hurt a little.&quot;&gt;&gt;
			&lt;&lt;case &quot;blowjob&quot;&gt;&gt;She takes your cock into her mouth and begins massaging it with her tongue. &lt;&lt;msg $Jasmin &quot;Is that okay?&quot;&gt;&gt;
			&lt;&lt;case &quot;fuck&quot;&gt;&gt;You grab &lt;&lt;=$Jasmin.callname&gt;&gt;s waist and begin to thrust into her warm, welcoming flesh. Slowly at first. &lt;&lt;msg $Jasmin &quot;Ohhhhh yessss!&quot;&gt;&gt;				
			&lt;&lt;case &quot;anal&quot;&gt;&gt;You slowly push your dick forward, forcing the head into her tight, warm butt. &lt;&lt;msg $Jasmin &quot;Please be gentle, &lt;&lt;yourname $Jasmin&gt;&gt;&quot;&gt;&gt;					
			&lt;&lt;/switch&gt;&gt;		
		&lt;&lt;case 6 7&gt;&gt;
			&lt;&lt;switch $Jasmin.act&gt;&gt;
			&lt;&lt;case &quot;pussyplay&quot;&gt;&gt;She stimulates her clitoris with increasingly faster movements and pushes her other hand in and out of her pink pussy. &lt;&lt;msg $Jasmin &quot;Yes, yes! That feels goooooood.&quot;&gt;&gt;
			&lt;&lt;case &quot;pussyplaydildo&quot;&gt;&gt;$Jasmin.callname begins to move the toy in and out of her pussy with increasing speed. &lt;&lt;msg $Jasmin &quot;More! More!&quot;&gt;&gt;
			&lt;&lt;case &quot;analplay&quot;&gt;&gt;She spits on her hand again, this time inserting two fingers into her asshole. &lt;&lt;msg $Jasmin &quot;I think I can fit more.&quot;&gt;&gt;
			&lt;&lt;case &quot;analplaydildo&quot;&gt;&gt;She begins moving the toy in and out of her asshole, slowly building up speed. &lt;&lt;msg $Jasmin &quot;I feel so full.&quot;&gt;&gt;
			&lt;&lt;case &quot;blowjob&quot;&gt;&gt;You put your hands on her head and guide her movement to take your cock deeper and deeper into her mouth.	&lt;&lt;msg $Jasmin &quot;I love how good you taste!&quot;&gt;&gt;		
			&lt;&lt;case &quot;fuck&quot;&gt;&gt;You speed up, plunging deeply into her body, while she moves to match your rythm. &lt;&lt;msg $Jasmin &quot;Faster, &lt;&lt;yourname $Jasmin&gt;&gt;! Faster!&quot;&gt;&gt;		
			&lt;&lt;case &quot;anal&quot;&gt;&gt;Holding her tight you plunge your dick deep into her pussy, while she moans with a mixture of pleasure and pain. &lt;&lt;msg $Jasmin &quot;Ouch! Don&#39;t stop! Harder!&quot;&gt;&gt;		
			&lt;&lt;/switch&gt;&gt;	
		&lt;&lt;case 8&gt;&gt;
			&lt;&lt;switch $Jasmin.act&gt;&gt;
			&lt;&lt;case &quot;pussyplay&quot;&gt;&gt;
				She furiously rubs her clit and at the same time rams her other hand into herself with almost pistonlike movements. Small squirts of clear liquid are forced out with every iteration.
				&lt;&lt;msg $Jasmin &quot;OH GOD! I&#39;M ABOUT TO CUM!&quot;&gt;&gt;
			&lt;&lt;case &quot;pussyplaydildo&quot;&gt;&gt;She rams the doy deep insider her, scooping out massive amounts of lovejuice with every movement. &lt;&lt;msg $Jasmin &quot;SOOOOOO CLOSE!&quot;&gt;&gt;
			&lt;&lt;case &quot;analplay&quot;&gt;&gt;$Jasmin.callname puts her fingers together and slowly inserts her hole fist into her pulsing asshole. &lt;&lt;msg $Jasmin &quot;THIS IS SO TIGHT! I FEEL SO FULL!&quot;&gt;&gt;
			&lt;&lt;case &quot;analplaydildo&quot;&gt;&gt;$Jasmin.callname pulls the dildo out, shows you her gaping asshole, then rams it back in deeply. &lt;&lt;msg $Jasmin &quot;IT FILLS ME UP SOOO GOOOOOD!&quot;&gt;&gt;
			&lt;&lt;case &quot;blowjob&quot;&gt;&gt;You push her down, forcing your cock deep into her throat, making her choak on it. &lt;&lt;msg $Jasmin &quot;COME ON! FILL ME UP! FUCK MY THROAT!&quot;&gt;&gt;		
			&lt;&lt;case &quot;fuck&quot;&gt;&gt;You pull out of her and in the very moment she looks at you confused, you ram it back into her, hitting her G-spot with force. She howls with pleasure, convulsing heavily.
				&lt;&lt;msg $Jasmin &quot;AHHHHHHHHHH!&quot;&gt;&gt;		
			&lt;&lt;case &quot;anal&quot;&gt;&gt;You pick her up and plunge deep into her while at the same time pulling her towards you, thus impaling her on your erection. &lt;&lt;msg $Jasmin &quot;OH MY GOOOOOD! SOOOOO DEEP!&quot;&gt;&gt;
			&lt;&lt;/switch&gt;&gt;
		&lt;&lt;case 9&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;jasminorgasm&gt;&gt;&lt;&lt;/dialog&gt;&gt;
			She flops around on the ground, still spasming from the waves of pleasure that came crushing over her.
		&lt;&lt;default&gt;&gt;
			ERROR: Arousal Jasmin is $Jasmin.arousal &lt;br&gt; Threshold Jasmin is $Jasmin.threshold
		&lt;&lt;/switch&gt;&gt;

&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget sexmenuJasmin&gt;&gt;
	&lt;&lt;link &quot;Have her play with her pussy&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Jasmin.act to &quot;pussyplay&quot;&gt;&gt;&lt;&lt;/link&gt;&gt; &lt;&lt;if $Jasmin.dildo is true&gt;&gt;&lt;&lt;link &quot;&amp;#8627; use a toy&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Jasmin.act to &quot;pussyplaydildo&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Jasmin.status gt 1&gt;&gt;&lt;&lt;link &quot;Have her blow you&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Jasmin.act to &quot;blowjob&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Have her play with her ass&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Jasmin.act to &quot;analplay&quot;&gt;&gt;&lt;&lt;/link&gt;&gt; &lt;&lt;if $Jasmin.dildo is true&gt;&gt;&lt;&lt;link &quot;&amp;#8627; use a toy&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Jasmin.act to &quot;analplaydildo&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;link &quot;Fuck her pussy&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Jasmin.act to &quot;fuck&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Jasmin.status gt 2&gt;&gt;&lt;&lt;link &quot;Fuck her ass&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Jasmin.act to &quot;anal&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &quot;Stop fucking her&quot; $location.target&gt;&gt;&lt;&lt;set $sidemenu to true&gt;&gt;&lt;&lt;set $Jasmin.arousal to 0&gt;&gt;&lt;&lt;set $Jasmin.act to &quot;none&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasminsex&gt;&gt; /*args[0] is $Jasmin.act*/
	&lt;&lt;switch $args[0]&gt;&gt;
	&lt;&lt;case &quot;pussyplay&quot;&gt;&gt;&lt;&lt;jasminpussyplay&gt;&gt;&lt;&lt;case &quot;pussyplaydildo&quot;&gt;&gt;&lt;&lt;jasminpussyplaydildo&gt;&gt;&lt;&lt;case &quot;analplay&quot;&gt;&gt;&lt;&lt;jasminanalplay&gt;&gt;&lt;&lt;case &quot;analplaydildo&quot;&gt;&gt;&lt;&lt;jasminanalplaydildo&gt;&gt;&lt;&lt;case &quot;blowjob&quot;&gt;&gt;&lt;&lt;jasminbj&gt;&gt;
	&lt;&lt;case &quot;fuck&quot;&gt;&gt;&lt;&lt;jasminfuck&gt;&gt;&lt;&lt;case &quot;anal&quot;&gt;&gt;&lt;&lt;jasminanal&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;

/*==================================================================*/
/*==================================================================*/
&lt;&lt;widget jasminpussyplay&gt;&gt;
	&lt;&lt;xxxjpg &quot;Jasmin&quot; $location.id &quot;pussyplay&quot;&gt;&gt;
	&lt;&lt;if $Jasmin.pussyplay is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;jasminpussyplayfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;set Dialog.open()&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Jasmin&quot; &quot;pussyplay&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;jasminarousal&gt;&gt;&lt;&lt;youarousal $Jasmin&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget jasminpussyplayfirst&gt;&gt;
	&lt;&lt;msg $You &quot;I want to watch you play with your pussy.&quot;&gt;&gt;
	&lt;&lt;switch $Jasmin.status&gt;&gt;
		&lt;&lt;case 1&gt;&gt;
			&lt;&lt;msg $Jasmin &quot;Play with my what?&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;Come on! It would be fun, wouldn&#39;t it? Plus I&#39;ve already seen you naked plenty of times when we were playing in the pool as kids.&quot;&gt;&gt;
			&lt;&lt;msg $Jasmin &quot;I guess. You are my best friend after all and I&#39;m pretty horny right now.&quot;&gt;&gt;
			She already drops her hands towards her nether region.
			&lt;&lt;msg $You &quot;You see! And what is the worst that could happen?&quot;&gt;&gt;
			&lt;&lt;msg $Jasmin &quot;You&#39;re right. Okay. Enjoy the show!&quot;&gt;&gt;
			She quickly disrobes and puts her clothes to the side. She sits down and spreads her legs, letting her hand glide down her body.
		&lt;&lt;case 2&gt;&gt;
			&lt;&lt;msg $Jasmin &quot;Right now?&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;Why not? I want my beautiful girlfriend enjoy herself.&quot;&gt;&gt;
			She smiles at the compliment.
			&lt;&lt;msg $Jasmin &quot;Then I will gladly give my horny boyfriend a good show.&quot;&gt;&gt;
			She begins to strip, sensually getting rid of her blouse, her trousers and finally her underwear. She makes sure to give you the best view she can.
		&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Jasmin &quot;Of course,&lt;&lt;yourname $Jasmin&gt;&gt;. But if I get going now you&#39;d better fuck me later. You can&#39;t leave me all wet and horny.&quot;&gt;&gt; She begins teasing you, mixing dance and masturbation 
			to a supremly erotic performance.
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
	&lt;&lt;set $Jasmin.pussyplay to true&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
/*==================================================================*/
&lt;&lt;widget jasminpussyplaydildo&gt;&gt;
	&lt;&lt;xxxjpg &quot;Jasmin&quot; $location.id &quot;pussyplaydildo&quot;&gt;&gt;
	&lt;&lt;if $Jasmin.pussyplaydildo is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;jasminpussyplaydildofirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Jasmin&quot; &quot;pussyplay_dildo&quot;&gt;&gt;&lt;br&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;jasminarousal&gt;&gt;&lt;&lt;youarousal $Jasmin&gt;&gt;	
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget jasminpussyplaydildofirst&gt;&gt;
	&lt;&lt;msg $You &quot;Could you use the dildo? I want to see you fuck yourself with it.&quot;&gt;&gt;
	&lt;&lt;switch $Jasmin.status&gt;&gt;
		&lt;&lt;case 1&gt;&gt;
			&lt;&lt;msg $Jasmin &quot;You do? Why?&quot;&gt;&gt;
			&lt;&lt;thought &quot;If I am correct she should react well to commands.&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;Does it matter? Do it!&quot;&gt;&gt;
			She looks at you with conflicted feelings. On the one hand she seems to be shocked by your request, on the other side she seems excited to be able to obey a command you have given.
			&lt;&lt;msg $Jasmin &quot;Are you sure you want to see that?&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;Listen, &lt;&lt;=$Jasmin.callname&gt;&gt;. You are beautiful, you are sexy and I want to see you masturbating with a dildo.&quot;&gt;&gt;
			$Jasmin.callname closes her eyes and takes a deep breath. When she opens them again, there is determination in her eyes.
			&lt;&lt;msg $Jasmin &quot;In that case ... Okay ... I&#39;ll do it.&quot;&gt;&gt;
			She quickly fetches her dildo, shyly strips out of her clothings and neatly folds them. She seems to be unsure what to do. Laying down, she spreads her legs and goes to work with the toy.
		&lt;&lt;case 2&gt;&gt;
			&lt;&lt;msg $Jasmin &quot;Sure! Anything for you &lt;&lt;yourname $Jasmin&gt;&gt;.&quot;&gt;&gt;
			She strips out of her clothes and puts them away neatly. 
			&lt;&lt;msg $Jasmin &quot;Do you want to help me out?&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;Not right now, honey. I just want to watch this time.&quot;&gt;&gt;
			&lt;&lt;msg $Jasmin &quot;Ohh. Well, enjoy the show.&quot;&gt;&gt;
			She grabs the dildo from her bag, undresses and begins to masturbate.
		&lt;&lt;case 3&gt;&gt;
			&lt;&lt;msg $Jasmin &quot;Yes, &lt;&lt;yourname $Jasmin&gt;&gt;. But can we fuck later? I much prefer the real thing.&quot;&gt;&gt;
			She grabs her dildo, shimmies out of her clothes and begins the show, clearly with to goal to get you to fuck her.
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
	&lt;&lt;set $Jasmin.pussyplaydildo to true&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
/*==================================================================*/
&lt;&lt;widget jasminanalplay&gt;&gt;
	&lt;&lt;xxxjpg &quot;Jasmin&quot; $location.id &quot;analplay&quot;&gt;&gt;
	&lt;&lt;if $Jasmin.analplay is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;jasminanalplayfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Jasmin&quot; &quot;analplay&quot;&gt;&gt;&lt;br&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;jasminarousal&gt;&gt;&lt;&lt;youarousal $Jasmin&gt;&gt;	
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget jasminanalplayfirst&gt;&gt;
	&lt;&lt;msg $You &quot;I want to see you play with your ass.&quot;&gt;&gt;
	&lt;&lt;switch $Jasmin.status&gt;&gt;
		&lt;&lt;case 2&gt;&gt;
			&lt;&lt;msg $Jasmin &quot;I have never done that before.&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;Does that mean you don&#39;t want to do it?&quot;&gt;&gt;
			She shakes her head emphaticly.
			&lt;&lt;msg $Jasmin &quot;No! If you want me to, I&#39;ll be glad to do this for you. It&#39;s just ...&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;What?&quot;&gt;&gt;
			&lt;&lt;msg $Jasmin &quot;I&#39;m a little scared.&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;Don&#39;t be. I&#39;m here for you.&quot;&gt;&gt;
			She takes a deep breath, undresses and begins caressing her buttcheeks.
		&lt;&lt;case 3&gt;&gt;
			&lt;&lt;msg $Jasmin &quot;Are you sure you don&#39;t want to just fuck my ass?&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;Maybe later.&quot;&gt;&gt;
			She grins and erotically licks her finger to lubricate it.
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
	&lt;&lt;set $Jasmin.analplay to true&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
/*==================================================================*/
&lt;&lt;widget jasminanalplaydildo&gt;&gt;
	&lt;&lt;xxxjpg &quot;Jasmin&quot; $location.id &quot;analplaydildo&quot;&gt;&gt;
	&lt;&lt;if $Jasmin.analplaydildo is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;jasminanalplaydildofirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Jasmin&quot; &quot;analplay_dildo&quot;&gt;&gt;&lt;br&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;jasminarousal&gt;&gt;&lt;&lt;youarousal $Jasmin&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget jasminanalplaydildofirst&gt;&gt;
	&lt;&lt;msg $You &quot;Go fetch a dildo and put it in your ass!&quot;&gt;&gt;
	&lt;&lt;switch $Jasmin.status&gt;&gt;
	&lt;&lt;case 2&gt;&gt;
		&lt;&lt;msg $Jasmin &quot;What?&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;You understood me.&quot;&gt;&gt;
		&lt;&lt;msg $Jasmin &quot;But ... why?&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Because I ask you to?&quot;&gt;&gt;
		&lt;&lt;msg $Jasmin &quot;But it is too big.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Don&#39;t worry it will fit perfectly in your beautiful, perfect ass.&quot;&gt;&gt;
		&lt;&lt;msg $Jasmin &quot;Stop flattering me.&quot;&gt;&gt;
		She slaps you playfully.
		&lt;&lt;msg $Jasmin &quot;Okay. But only because I&#39;m curious.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;And because you love me.&quot;&gt;&gt;
		&lt;&lt;msg $Jasmin &quot;Yes, also that &lt;&lt;yourname $Jasmin&gt;&gt;&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;
		&lt;&lt;msg $Jasmin &quot;I would prefer your cock ...&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Don&#39;t worry. Your ass will get its fill of cock later.&quot;&gt;&gt;
		&lt;&lt;msg $Jasmin &quot;Don&#39;t wait to long. It gets lonely without you.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;In the meantime you should fill it with that dildo.&quot;&gt;&gt;
		She smiles with mischiev and winks at you. She licks the dildo to lubricate it.
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
	&lt;&lt;set $Jasmin.analplaydildo to true&gt;&gt;
&lt;&lt;/widget&gt;&gt;

/*==================================================================*/
/*==================================================================*/
&lt;&lt;widget jasminbj&gt;&gt;
	&lt;&lt;xxxjpg &quot;Jasmin&quot; $location.id &quot;blowjob&quot;&gt;&gt;
	&lt;&lt;if $Jasmin.bj is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;jasminbjfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Jasmin&quot; &quot;blowjob&quot;&gt;&gt;&lt;br&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt; 
	&lt;&lt;jasminarousal&gt;&gt;&lt;&lt;youarousal $Jasmin&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasminbjfirst&gt;&gt;
	&lt;&lt;msg $You &quot;Will you give me a blowjob?&quot;&gt;&gt;
	&lt;&lt;switch $Jasmin.status&gt;&gt;
		&lt;&lt;case 2&gt;&gt;
			&lt;&lt;msg $Jasmin &quot;I don&#39;t really like the taste of cum.&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;Please?&quot;&gt;&gt;
			She sighs.
			&lt;&lt;msg $Jasmin &quot;Well ... okay ... for you.&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;Thank you.&quot;&gt;&gt;
			&lt;&lt;msg $Jasmin &quot;But only because I love you so much.&quot;&gt;&gt;
			She kneels down and opens your fly.
		&lt;&lt;case 3&gt;&gt;
			She drops to her knees even before you finished the request.
			&lt;&lt;msg $Jasmin &quot;Glady. My mouth is already watering.&quot;&gt;&gt;
			She opens your pants and engulfes your cock with wet, warm, welcoming mouth.
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
	&lt;&lt;set $Jasmin.bj to true&gt;&gt;		
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasminfuck&gt;&gt;
	&lt;&lt;xxxjpg &quot;Jasmin&quot; $location.id &quot;fuck&quot;&gt;&gt;
	&lt;&lt;if $Jasmin.fuck is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;jasminfuckfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;	
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Jasmin&quot; &quot;fuck&quot;&gt;&gt;&lt;br&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;jasminarousal&gt;&gt;&lt;&lt;youarousal $Jasmin&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasminfuckfirst&gt;&gt;
	&lt;&lt;msg $You &quot;Spread your legs. We&#39;re gonna fuck!&quot;&gt;&gt;
	&lt;&lt;switch $Jasmin.status&gt;&gt;
	&lt;&lt;case 2&gt;&gt;
		&lt;&lt;msg $Jasmin &quot;Finally! I fantasized about this for soooo long. It&#39;s kinda scary.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Don&#39;t worry. It will be glorious.&quot;&gt;&gt;
		&lt;&lt;msg $Jasmin &quot;Lead the way, &lt;&lt;yourname $Jasmin&gt;&gt;&quot;&gt;&gt;
		You sensually undress each other. Then you pick her up and carry her to the blanket.
	&lt;&lt;case 3&gt;&gt;
		&lt;&lt;msg $Jasmin &quot;Finally! I&#39;ve been getting lonely down there.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;And we don&#39;t want that, right?&quot;&gt;&gt;
		She almost races over to the blanket, shedding her clothes on the way. She spreads her legs widely, displaying her glistening, dripping pussy.
		&lt;&lt;msg $Jasmin &quot;Come over... I&#39;m ready.&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
	&lt;&lt;set $Jasmin.fuck to true&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
/*===================================================================*/
&lt;&lt;widget jasminanal&gt;&gt;
	&lt;&lt;xxxjpg &quot;Jasmin&quot; $location.id &quot;anal&quot;&gt;&gt;
	&lt;&lt;if $Jasmin.anal is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;jasminanalfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Jasmin&quot; &quot;anal&quot;&gt;&gt;&lt;br&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;jasminarousal&gt;&gt;&lt;&lt;youarousal $Jasmin&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasminanalfirst&gt;&gt;
	&lt;&lt;msg $You &quot;Spread those cheeks. I want to fuck your ass!&quot;&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;Yes &lt;&lt;yourname $Jasmin&gt;&gt;. Let me lubricate it first.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Hurry up.&quot;&gt;&gt;
	She gags a little on her hand to produce enough spit and quickly applies it to her butthole. She bends over, reaching behind and spreading her cheeks for easy entry.
	&lt;&lt;set $Jasmin.anal to true&gt;&gt;&lt;br&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;

</tw-passagedata><tw-passagedata pid="7" name="Henry sex widgets" tags="widget nobr" position="1750,0" size="100,100">/*===================================================================*/
/*================================SEX================================*/
/*===================================================================*/
&lt;&lt;widget henryorgasm&gt;&gt;
	&lt;&lt;sexmp4 &quot;Henry&quot; &quot;orgasm&quot;&gt;&gt;&lt;br&gt;
	&lt;&lt;msg $Henry &quot;YES! THANKYOUTHANKYOUTHANKYOU!&quot;&gt;&gt;
	&lt;&lt;set $Henry.arousal to 0&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget henryarousal&gt;&gt;
	&lt;&lt;set $Henry.arousal ++&gt;&gt;
	&lt;&lt;switch $Henry.arousal&gt;&gt;
	&lt;&lt;case 1&gt;&gt;
		&lt;&lt;timepass 3&gt;&gt;
		&lt;&lt;switch $Henry.act&gt;&gt;
		&lt;&lt;case &quot;blowjob&quot;&gt;&gt;$Henry.callname carefully takes your cock into her hands and begins to massage it.&lt;&lt;msg $Henry &quot;Is this good?&quot;&gt;&gt;
		&lt;&lt;case &quot;fuck&quot;&gt;&gt;As you align your cock with her dripping pussy she looks at you, with devotion in her eyes.&lt;&lt;msg $Henry &quot;Please use my pussy.&quot;&gt;&gt;
		&lt;&lt;case &quot;anal&quot;&gt;&gt;She inhales sharply as you press the head of your cock against her tight asshole.&lt;&lt;msg $Henry &quot;Even if it hurts me, don&#39;t hold back!&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;case 2 3&gt;&gt;
		&lt;&lt;timepass 3&gt;&gt;
		&lt;&lt;switch $Henry.act&gt;&gt;
		&lt;&lt;case &quot;blowjob&quot;&gt;&gt;She begins to slowly lick the tip of your cock.&lt;&lt;msg $Henry &quot;Your cock tastes good.&quot;&gt;&gt;
		&lt;&lt;case &quot;fuck&quot;&gt;&gt;You slowly push your cock into her snatch. It is warm and welcoming. &lt;&lt;msg $Henry &quot;Ohhhhh! Does my pussy feel good? Should I move more?&quot;&gt;&gt;
		&lt;&lt;case &quot;anal&quot;&gt;&gt;Her asshole is tight and warm.&lt;&lt;msg $Henry &quot;Please give me a moment to relax my asshole. It will feel much better for you.&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;		
	&lt;&lt;case 4 5&gt;&gt;
		&lt;&lt;timepass 3&gt;&gt;
		&lt;&lt;switch $Henry.act&gt;&gt;
		&lt;&lt;case &quot;blowjob&quot;&gt;&gt;$Henry.callname takes your cock into her mouth and massages it with her tongue.&lt;&lt;msg $Henry &quot;Mmmmm.&quot;&gt;&gt;
		&lt;&lt;case &quot;fuck&quot;&gt;&gt;She begins moving in a rythmic motion, trying to maximize your pleasure.&lt;&lt;msg $Henry &quot;Please relax &lt;&lt;yourname $Henry&gt;&gt;. Let me do the work and just enjoy.&quot;&gt;&gt;			
		&lt;&lt;case &quot;anal&quot;&gt;&gt;$Henry.callname relaxes her asshole, letting you penetrate her more easily, while still keeping up enough pressure to stimulate you well.
			&lt;&lt;msg $Henry &quot;Does it feel good? What can I do better?&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;		
	&lt;&lt;case 6 7&gt;&gt;
		&lt;&lt;timepass 3&gt;&gt;
		&lt;&lt;switch $Henry.act&gt;&gt;
		&lt;&lt;case &quot;blowjob&quot;&gt;&gt;She happily bops up and down on your cock, alternating shallow dips with deep plunges.&lt;&lt;msg $Henry &quot;This is amazing.&quot;&gt;&gt;
		&lt;&lt;case &quot;fuck&quot;&gt;&gt;$Henry.callname moans and squirms with pleasure.&lt;&lt;msg $Henry &quot;More! Please more! Use me more! Harder &lt;&lt;yourname $Henry&gt;&gt;!&quot;&gt;&gt;
		&lt;&lt;case &quot;anal&quot;&gt;&gt;She undulates the muscles in her rectum to increase your pleasure. Her freely flowing pussy juice is a clear indicator that she enjoys it as well.
		&lt;&lt;msg $Henry &quot;Harder! Fuck me harder! Faster!&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;	
	&lt;&lt;case 8&gt;&gt;
		&lt;&lt;timepass 10&gt;&gt;
		&lt;&lt;switch $Henry.act&gt;&gt;
		&lt;&lt;case &quot;blowjob&quot;&gt;&gt;$Henry.callname takes a deep breath and then forces herself to take it deep into her throat.&lt;&lt;msg $Henry &quot;Hghh!&quot;&gt;&gt;
		&lt;&lt;case &quot;fuck&quot;&gt;&gt;You can feel the spasms of her approaching orgasms through her pussy. She still con&lt;&lt;msg $Henry &quot;I&#39;m almost there! Please! I&#39;ll make you feel even better.&quot;&gt;&gt;
		&lt;&lt;case &quot;anal&quot;&gt;&gt;$Henry.callname tightens her asshole as the spasms of her quickly approaching orgasms begin to rock her body. &lt;&lt;msg $Henry &quot;OHHHHHH! HARDER!&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;case 9&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;henryorgasm&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget sexmenuHenry&gt;&gt;
	&lt;&lt;link &quot;Have her blow you&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Henry.act to &quot;blowjob&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Fuck her pussy&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Henry.act to &quot;fuck&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Fuck her ass&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Henry.act to &quot;anal&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Stop fucking her&quot; $location.target&gt;&gt;&lt;&lt;set $sidemenu to true&gt;&gt;&lt;&lt;set $Henry.arousal to 0&gt;&gt;&lt;&lt;set $Henry.act to &quot;none&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget henrysex&gt;&gt; /*args[0] is $Henry.act*/
	&lt;&lt;switch $args[0]&gt;&gt;&lt;&lt;case &quot;blowjob&quot;&gt;&gt;&lt;&lt;henrybj&gt;&gt;&lt;&lt;case &quot;fuck&quot;&gt;&gt;&lt;&lt;henryfuck&gt;&gt;&lt;&lt;case &quot;anal&quot;&gt;&gt;&lt;&lt;henryanal&gt;&gt;&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget henrybj&gt;&gt;
		&lt;&lt;xxxjpg &quot;Henry&quot; $location.id &quot;blowjob&quot;&gt;&gt; 
	&lt;&lt;if $Henry.bj is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;henrybjfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Henry&quot; &quot;blowjob&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;henryarousal&gt;&gt;&lt;&lt;youarousal $Henry&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget henrybjfirst&gt;&gt;
	&lt;&lt;set $Henry.bj to true&gt;&gt;
	&lt;&lt;switch $Henry.status&gt;&gt;
	&lt;&lt;case 3&gt;&gt;
		&lt;&lt;msg $You &quot;$Henry.callname, I&#39;m kinda stressed.&quot;&gt;&gt;
		&lt;&lt;msg $Henry &quot;What can I do to help you, &lt;&lt;yourname $Henry&gt;&gt;?&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;You could use that new mouth of yours to give me a blowjob.&quot;&gt;&gt;
		&lt;&lt;msg $Henry &quot;I&#39;ve been wondering how it will feel for some time now. Let&#39;s try it.&quot;&gt;&gt;
		$Henry.callname drops to her knees and fishes your cock out of your pants. She diligently goes to work, totally focussed on her task.
	&lt;&lt;case 4&gt;&gt;
		&lt;&lt;msg $You &quot;Disciple, suck my cock.&quot;&gt;&gt;
		&lt;&lt;msg $Henry &quot;At once, &lt;&lt;yourname $Henry&gt;&gt;!&quot;&gt;&gt;
		$Henry.callname kneels down and frees your cock from your pants. She stares at it in awe.
		&lt;&lt;msg $Henry &quot;Thank you, &lt;&lt;yourname $Henry&gt;&gt;, for letting me pleasure you.&quot;&gt;&gt;
		She begins sucking your cock, treating every moment as a praise to your divine glory.&lt;br&gt;
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget henryfuck&gt;&gt;
	&lt;&lt;xxxjpg &quot;Henry&quot; $location.id &quot;fuck&quot;&gt;&gt;
	&lt;&lt;if $Henry.fuck is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;henryfuckfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
 	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Henry&quot; &quot;fuck&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;henryarousal&gt;&gt;&lt;&lt;youarousal $Henry&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget henryfuckfirst&gt;&gt;
	&lt;&lt;set $Henry.fuck to true&gt;&gt;
	&lt;&lt;switch $Henry.status&gt;&gt;
	&lt;&lt;case 3&gt;&gt;
		&lt;&lt;msg $You &quot;$Henry.callname, I&#39;d like to give your pussy a test ride.&quot;&gt;&gt;
		&lt;&lt;msg $Henry &quot;I think I&#39;m ready, but I only tried it with toys a little, so can we please do it slowly?&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;I will fuck you as gentle or as hard as I think is right. Or do you suggest otherwise?&quot;&gt;&gt;
		&lt;&lt;msg $Henry &quot;No! Of course not! You always know what&#39;s right.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Get naked and spread your legs!&quot;&gt;&gt;
		&lt;&lt;msg $Henry &quot;Yes, &lt;&lt;yourname $Henry&gt;&gt;.&quot;&gt;&gt;
	&lt;&lt;case 4&gt;&gt;
		&lt;&lt;msg $You &quot;Worship me.&quot;&gt;&gt;
		$Henry.callname kneels down.
		&lt;&lt;msg $Henry &quot;Which prayer does &lt;&lt;yourname $Henry&gt;&gt; desire?&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;I will use your pussy.&quot;&gt;&gt;
		She eagerly spreads her legs.
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget henryanal&gt;&gt;
	&lt;&lt;xxxjpg &quot;Henry&quot; $location.id &quot;anal&quot;&gt;&gt;
	&lt;&lt;if $Henry.anal is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;henryanalfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
 		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Henry&quot; &quot;anal&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;henryarousal&gt;&gt;&lt;br&gt;&lt;&lt;youarousal $Henry&gt;&gt;&lt;br&gt;

&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget henryanalfirst&gt;&gt;
	&lt;&lt;set $Henry.anal to true&gt;&gt;
	&lt;&lt;switch $Henry.status&gt;&gt;
	&lt;&lt;case 3&gt;&gt;
		&lt;&lt;msg $You &quot;What do you think about anal?&quot;&gt;&gt;
		&lt;&lt;msg $Henry &quot;I&#39;m a little afraid. Do you think it would feel good?&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Yes.&quot;&gt;&gt;
		&lt;&lt;msg $Henry &quot;Can we try it then?&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Get yourself ready.&quot;&gt;&gt;
		$Henry.callname spits on her hand and lubricates her asshole, which she then spreads for your easy access.
	&lt;&lt;case 4&gt;&gt;
		&lt;&lt;msg $You &quot;Today you will worship me with your ass.&quot;&gt;&gt;
		$Henry.callname immediately spreads her legs.
		&lt;&lt;msg $Henry &quot;Please accept this offering of your faithful disciple, &lt;&lt;yourname $Henry&gt;&gt;!&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="8" name="Jasmins home" tags="nobr" position="400,125" size="200,100">&lt;&lt;switch $location.id&gt;&gt;
&lt;&lt;case &quot;Jasmins livingroom&quot;&gt;&gt;
	&lt;&lt;switch $Jasmin.event&gt;&gt;
		&lt;&lt;case &quot;confession&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasmin_confession&gt;&gt;&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;case &quot;jasminhornyfirst&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasminhornyfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;case &quot;jasminslave&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasminslave&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;if $hour gte 22 and $Jasmin.location is &quot;Jasmins livingroom&quot;&gt;&gt;&lt;&lt;locpic $Jasmin&gt;&gt;&lt;&lt;msg $Jasmin &quot;It is pretty late. What do you want?&quot;&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;jasmin_livingroom&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;case &quot;Jasmins bedroom&quot;&gt;&gt;&lt;&lt;jasminbedroom&gt;&gt;
&lt;&lt;default&gt;&gt; ERROR no location set (JASMINS HOME)
&lt;&lt;/switch&gt;&gt;

</tw-passagedata><tw-passagedata pid="9" name="Streets" tags="nobr outside public" position="400,375" size="200,100">&lt;&lt;watched&gt;&gt;
&lt;&lt;switch $location.name&gt;&gt;
&lt;&lt;case &quot;Baker Street&quot;&gt;&gt;&lt;&lt;bakerstreet&gt;&gt;
&lt;&lt;case &quot;Marlowe Street&quot;&gt;&gt;&lt;&lt;marlowestreet&gt;&gt;
&lt;&lt;case &quot;Main Street&quot;&gt;&gt;&lt;&lt;mainstreet&gt;&gt;
&lt;&lt;case &quot;Back Streets&quot;&gt;&gt;&lt;&lt;backstreets&gt;&gt;
&lt;&lt;default&gt;&gt;ERROR no location set (STREETS)
&lt;&lt;/switch&gt;&gt;</tw-passagedata><tw-passagedata pid="10" name="StoryCaption" tags="nobr" position="25,1200" size="200,100">
&lt;&lt;if $introseen is true&gt;&gt;
	&lt;h1&gt;$location.name&lt;/h1&gt;&lt;br&gt;
	&lt;&lt;leftmenu&gt;&gt;
	&lt;div id=&quot;leftmenuoptions&quot;&gt;[img[img/random/options.png]]&lt;/div&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;br&gt;



</tw-passagedata><tw-passagedata pid="11" name="journal widgets" tags="widget nobr" position="2725,350" size="100,100">/*===================================================================*/
/*This widget sets up the journal and the different divs that are targeted by the other widgets*/
&lt;&lt;widget journal&gt;&gt;
&lt;div id=&quot;journal&quot;&gt;
&lt;div id=&quot;journalmenu&quot;&gt;&lt;&lt;journalmenu&gt;&gt;&lt;/div&gt;
&lt;div id=&quot;journalsubmenu&quot;&gt;&lt;/div&gt;
&lt;div id=&quot;journal_content&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
/*This widget controls the menu of the journal. It controls which widget is shown in which div*/
&lt;&lt;widget journalmenu&gt;&gt;
&lt;span&gt;&lt;&lt;link &quot;Characters&quot;&gt;&gt;&lt;&lt;replace &quot;#journalsubmenu&quot;&gt;&gt;&lt;&lt;characterlink&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#journal_content&quot;&gt;&gt; &lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;  
&lt;span&gt;&lt;&lt;link &quot;Hints and Tips&quot;&gt;&gt;&lt;&lt;replace &quot;#journal_content&quot;&gt;&gt;&lt;&lt;hints_and_tips&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#journalsubmenu&quot;&gt;&gt; &lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt; 
&lt;span&gt;&lt;&lt;link &quot;Quests&quot;&gt;&gt;&lt;&lt;replace &quot;#journal_content&quot;&gt;&gt;&lt;&lt;quests&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#journalsubmenu&quot;&gt;&gt; &lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
&lt;span&gt;&lt;&lt;link &quot;Close&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
&lt;&lt;/widget&gt;&gt;
/*================================================================*/
&lt;&lt;widget characterlink&gt;&gt;
/*This widget controls the widgets for the different npc journal entries and where they are shown.*/
@@.Mom;&lt;&lt;link $Mom.callname&gt;&gt;&lt;&lt;replace &quot;#journal_content&quot;&gt;&gt;&lt;&lt;momjournal&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;@@
@@.Dad;&lt;&lt;link $Dad.callname&gt;&gt;&lt;&lt;replace &quot;#journal_content&quot;&gt;&gt;&lt;&lt;dadjournal&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;@@
@@.Andrea;&lt;&lt;link $Andrea.callname&gt;&gt;&lt;&lt;replace &quot;#journal_content&quot;&gt;&gt;&lt;&lt;andreajournal&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;@@ 
@@.Albert;&lt;&lt;link &quot;$Albert.callname&quot;&gt;&gt;&lt;&lt;replace &quot;#journal_content&quot;&gt;&gt;&lt;&lt;albertjournal&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;@@
@@.Jasmin;&lt;&lt;link $Jasmin.callname&gt;&gt;&lt;&lt;replace &quot;#journal_content&quot;&gt;&gt;&lt;&lt;jasminjournal&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;@@
@@.Henry;&lt;&lt;link $Henry.callname&gt;&gt;&lt;&lt;replace &quot;#journal_content&quot;&gt;&gt;&lt;&lt;henryjournal&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;@@
@@.Brian;&lt;&lt;link $Brian.callname&gt;&gt;&lt;&lt;replace &quot;#journal_content&quot;&gt;&gt;&lt;&lt;brianjournal&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;@@
@@.Lisa;&lt;&lt;link $Lisa.callname&gt;&gt;&lt;&lt;replace &quot;#journal_content&quot;&gt;&gt;&lt;&lt;lisajournal&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;if $Victoria.seen gt 0&gt;&gt;@@.Victoria;&lt;&lt;link $Victoria.callname&gt;&gt;&lt;&lt;replace &quot;#journal_content&quot;&gt;&gt;&lt;&lt;victoriajournal&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;@@&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Brenda.known&gt;&gt;@@.Brenda;&lt;&lt;link $Brenda.callname&gt;&gt;&lt;&lt;replace &quot;#journal_content&quot;&gt;&gt;&lt;&lt;brendajournal&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;@@&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Lucy.known&gt;&gt;@@.Lucy;&lt;&lt;link $Lucy.callname&gt;&gt;&lt;&lt;replace &quot;#journal_content&quot;&gt;&gt;&lt;&lt;lucyjournal&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;@@&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Christina.known&gt;&gt;@@.Christina;&lt;&lt;link $Christina.callname&gt;&gt;&lt;&lt;replace &quot;#journal_content&quot;&gt;&gt;&lt;&lt;christinajournal&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;@@&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
/*This widget controls the quests.*/
&lt;&lt;widget quests&gt;&gt;
&lt;h2&gt;Quests&lt;/h2&gt;
&lt;div id=&quot;questouter&quot;&gt;
	&lt;div id=&quot;questmenu&quot;&gt;
		&lt;&lt;for _i to 0; _i lt $quests.length; _i++&gt;&gt;
			&lt;&lt;if $quests[_i].unlocked is true&gt;&gt;
			&lt;&lt;capture _i&gt;&gt;
			&lt;&lt;set _linkname to $quests[_i].name + &quot; (&quot; + $quests[_i].progress+ &quot;/&quot;+ $quests[_i].steps + &quot;)&quot;&gt;&gt;
			&lt;&lt;link &quot;_linkname&quot;&gt;&gt;&lt;&lt;replace &quot;#questcontent&quot;&gt;&gt;&lt;&lt;set _descriptions to $quests[_i].descriptions&gt;&gt;&lt;&lt;set _progress to $quests[_i].progress&gt;&gt;
			&lt;h4&gt;&lt;&lt;switch $quests[_i].char&gt;&gt;&lt;&lt;case &quot;Mom&quot;&gt;&gt;$Mom.callname&lt;&lt;case &quot;Andrea&quot;&gt;&gt;$Andrea.callname&lt;&lt;case &quot;Lisa&quot;&gt;&gt;$Lisa.callname&lt;&lt;case &quot;Brian&quot;&gt;&gt;$Brian.callname&lt;&lt;case &quot;Henry&quot;&gt;&gt;$Henry.callname&lt;&lt;case &quot;Jasmin&quot;&gt;&gt;$Jasmin.callname&lt;&lt;case &quot;Victoria&quot;&gt;&gt;$Victoria.callname&lt;&lt;case &quot;Brian&quot;&gt;&gt;$Brian.callname&lt;&lt;case &quot;miscellaneous&quot;&gt;&gt;Miscellaneous&lt;&lt;/switch&gt;&gt;&lt;/h4&gt;&lt;hr&gt;
			_descriptions[_progress]
			&lt;&lt;if $quests[_i].rewardchosen is false and $quests[_i].progress is $quests[_i].steps&gt;&gt;
				&lt;&lt;switch $quests[_i].rewardtype&gt;&gt;
					&lt;&lt;case &quot;magic&quot;&gt;&gt;
						&lt;br&gt;Choose a stat to improve:&lt;br&gt;
						@@.inline;.choice;
						&lt;&lt;link &quot;Spellpower&quot;&gt;&gt;&lt;&lt;set $You.spellpower += 2&gt;&gt;&lt;&lt;set $quests[_i].rewardchosen to true&gt;&gt;&lt;&lt;replace &quot;#questcontent&quot;&gt;&gt;_descriptions[_progress]&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
						&lt;&lt;link &quot;Mana capacity&quot;&gt;&gt;&lt;&lt;set $You.maxmana +=10&gt;&gt;&lt;&lt;set $quests[_i].rewardchosen to true&gt;&gt;&lt;&lt;replace &quot;#questcontent&quot;&gt;&gt;_descriptions[_progress]&lt;&lt;/replace&gt;&gt;&lt;&lt;ui update&gt;&gt;&lt;&lt;/link&gt;&gt;
						&lt;&lt;link &quot;Mana Regeneration&quot;&gt;&gt;&lt;&lt;set $You.manaregen +=2&gt;&gt;&lt;&lt;set $quests[_i].rewardchosen to true&gt;&gt;&lt;&lt;replace &quot;#questcontent&quot;&gt;&gt;_descriptions[_progress]&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
						@@					
					&lt;&lt;case &quot;money&quot;&gt;&gt;
						@@.inline;.choice;
						&lt;&lt;link &quot;50$&quot;&gt;&gt;&lt;&lt;set $You.money+=50&gt;&gt;&lt;&lt;ui update&gt;&gt;&lt;&lt;set $quests[_i].rewardchosen to true&gt;&gt;&lt;&lt;replace &quot;#questcontent&quot;&gt;&gt;_descriptions[_progress]&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
						@@
					&lt;&lt;/switch&gt;&gt;
			&lt;&lt;elseif $quests[_i].rewardchosen is true&gt;&gt;
				Reward already chosen.
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
			&lt;&lt;/capture&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/for&gt;&gt;
	&lt;/div&gt;
	&lt;div id=&quot;questcontent&quot;&gt;

	&lt;/div&gt;
&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget hints_and_tips&gt;&gt;
&lt;h4&gt;Click on the topic you want to have help on&lt;/h4&gt;
&lt;&lt;message &quot;General Tips&quot;&gt;&gt;
&lt;ul&gt;
&lt;li&gt;You need to improve your spellpower if you plan to reach the higher tiers of enchantment in a manageable amount of time, since the difficulty scales. To do this you need to study the book.&lt;/li&gt;
&lt;li&gt;If the studying takes to long, (the difficulty also scales), try buying some books that help you translate the text quicker. Try the bookshop in the mall.&lt;/li&gt;
&lt;li&gt;The book also allows you to increase your stamina, your mana regeneration and your maximum mana.&lt;br&gt;&lt;br&gt;&lt;/li&gt;
&lt;li&gt;You can raid the fridge in the kitchen to maybe find some useful items to regain stamina.&lt;/li&gt;
&lt;li&gt;If you need money, there is a way to get your slaves to do porn streams to earn you some money. But you need to buy equipment. Try the sex shop in the mall.&lt;/li&gt;
&lt;li&gt;There are 3 spells you can learn from the book. Recreo and Recupero allow you to spend Mana to regain Stamina and vice versa. Mutaris allows you to transform a willing male into a female.&lt;/li&gt;
&lt;li&gt;You can try to search the attic. There is something hidden up there.&lt;/li&gt;
&lt;li&gt;There is a cheats menu accessible via the options menu. There you can increase your stats.&lt;/li&gt;
&lt;/ul&gt;
&lt;&lt;/message&gt;&gt;
&lt;hr&gt;
&lt;&lt;message &quot;$Henry.callname&quot;&gt;&gt;
&lt;ul&gt;
&lt;li&gt;The beginning of &lt;&lt;=$Henry.callname&gt;&gt;s enchantment path is straight forward. Just go to him and cast the spell.&lt;/li&gt;
&lt;li&gt;To enchant $Henry.callname further, you need to change him into a woman. You can do this by learning the Mutaris spell from the book.&lt;/li&gt;
&lt;li&gt;To get him to accept the change, you need to convince him that you are powerful. You could show him that you already have a slave that you can control.&lt;/li&gt;
&lt;/ul&gt;
&lt;&lt;/message&gt;&gt;
&lt;hr&gt;
&lt;&lt;message &quot;$Andrea.callname&quot;&gt;&gt;
&lt;ul&gt;
&lt;li&gt;To get into the apartment building you have to either ring up a random apartment and hope they&#39;ll let you in or you have to wait for someone to come out so you can grab the door. Since it is RNG dependend you need to have some patience. Ringing is quicker, but has a lesser chance and waiting takes longer, but has a bigger chance for success.&lt;/li&gt;
&lt;li&gt;To enchant $Andrea.callname you must first get her to talk to you. Find the bag with her stuff in the attic of your home. Enter the apartment building and ring on her door. There you have the option to give it to her. This starts her enslavement route.&lt;/li&gt;
&lt;/ul&gt;
&lt;&lt;/message&gt;&gt;
&lt;hr&gt;
&lt;&lt;message &quot;$Brian.callname&quot;&gt;&gt;
&lt;ul&gt;
&lt;li&gt;To start the enslavement of $Brian.callname you need to go to the Bar (on Mainstreet) in the evening. He will be there.&lt;/li&gt;
&lt;li&gt;Buy rounds until he is drunk and leaves. Follow him outside.&lt;/li&gt;
&lt;li&gt;Follow him into the backstreets. Attack him. Once he is down, enchant him.&lt;/li&gt;
&lt;li&gt;After that you can continue his enslavement normally.&lt;/li&gt;
&lt;/ul&gt;
&lt;&lt;/message&gt;&gt;
&lt;hr&gt;
&lt;&lt;message &quot;Main Plot&quot;&gt;&gt;
&lt;ul&gt;
&lt;li&gt;After finding the photo in the third encounter with the mysteious woman you can ask your mom about the photo to get new information.&lt;/li&gt;
&lt;/ul&gt;
&lt;&lt;/message&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget letter&gt;&gt;
&lt;div id=&quot;letter&quot;&gt;
&lt;div class=&quot;lettertext&quot;&gt;
Dearest Nephew,&lt;br&gt;
I&#39;m sure you are surprised as well as delighted to hear from your old uncle Albert. There are a few things that have to be said and I don&#39;t have the time to visit personally and I especially don&#39;t have the peace of mind to confront your lying witch of a mother personally. Therefore I write this letter to you. If you read this I most certainly am already dead. Although I led a long and successful life full of amazing discoveries I was not able to discover a cure for the cancer that is eating away at my mind and body.&lt;br&gt;

As I am about to die I bequeath onto you my greatest discovery. The book it took almost half of my life to find. It is old, as you surely can see. It is a mythic treatise by Olaous Wormius the Older, an alchemist and magician from the middle ages. It is written in a strange code made from a combination of latin and arabic words, written in greek script. It is hard to translate, but the hardest part - finding the key - has already been done. I put a transcript of my work in the book. You should be able to continue the translation with a bit of effort.&lt;br&gt;

It contains magical spells. The first one, which I alrady translated is called Rego Te. As far as I can tell you channel some of your inner stength, lets call it Mana, into the mind of the target. There it clashes with their willpower. If you have channeled enough of your mana into them, they become, for a moment, highly suggestible, which allows you to reprogram their mind. I tried it a little around my place and let me tell you, I had lots and lots of fun. I&#39;m sure a young man like you can find many opportunities to use an effect like that. The victim of the spell forgets everything you told them, but will still act on the suggestions and think of them as their own ideas. But be warned. To master the spell needs lots of practise and some people are harder to enchant then others. If you already have a connection to the target and are aware of their character and thoughtprocesses it becomes easier for you. Interestingly the spell is desinged to be more effective on women than on men. But I found mentions of a spell that actually allowed Wormius to transform men into women. It must be somewhere in the book.&lt;br&gt;
I&#39;m sure there are even more spells in there, but I just found it too late in my already short life.&lt;br&gt;

If you throw this all away I applaud you for being a better man than I am, but if you decide to use it I have but one request:
Use it in your mother first.
I can not stand the thought of me dieing and her going unpunished for destroying my brother, your father.&lt;br&gt;

That all said I can only wish you luck and good fun.
With the best regards,&lt;br&gt;
&lt;br&gt;
Your uncle Albert.
&lt;br&gt;&lt;br&gt;
P.S.: The spell is very draining. Don&#39;t overdo it. In my experience it takes about one day to recharge your mental energy. I used the spell way to much and sometimes the thought comes to me that this stress caused or at least aggravated my cancer. Be careful.&lt;br&gt;&lt;br&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*================================================================*/
&lt;&lt;widget momjournal&gt;&gt;
/*India Summer*/
&lt;&lt;set $momgallery.imageseen to $momgallery.pictures.length-1&gt;&gt;
&lt;div id=&quot;gallery&quot;&gt;&lt;&lt;gallery $momgallery&gt;&gt;&lt;/div&gt;

&lt;&lt;if $Mom.status gte 3&gt;&gt;
The third casting of Rego-te finally broke her mind. She is yours with mind, body and soul. She will do anything you ask of her, no matter the consequences or the cost. She and everything she owns belongs to you. As her master you are the center and meaning of her life. She keeps herself wet and ready for you, in the case you might want to fuck her.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Mom.status gte 2&gt;&gt;
A second application of the Rego-te turned your Mom into a submissive nymphomaniac. She can&#39;t have an orgasm unless You are involved, either physical or in her thoughts. You made sure she will be able to control herself in public, but not at home. You&#39;re looking forward to many spicy encounters, as she will not be able to keep from masturbating very long.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Mom.status gte 1&gt;&gt;
You used the spell to turn her into the perfect mothers. She now values your happines far more than her own. She does everything to please you, but, like a good servant, tries to do it as unintrusive as possible. You don&#39;t have to do anything in the house anymore, for she takes care of everything. Sadly she still has inhibitions and won&#39;t do anything more sexual than an occasional blowjob. And she doesn&#39;t seem to enjoy that very much. It seems You have to use the spell on her again.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
Your Dad married your Mom a few years before You were born, but soon had to discover that a good body is no garantuee for a good character. She terrorized him with unwarrented jealosy, threatened to divorce him and take almost everything he had if he wouldn&#39;t do as she wished. 
He didn&#39;t even put up a fight. His heart was broken. He gave her all his money under one condition: She had to take care of you, because he really loved you. Then he just disappeared. No one knows where he went, and she had him declared dead as soon as possible. She took care of you. You are her son after all. But that didn&#39;t mean that she loved you. She only ever loved herself and $Andrea.callname, your older sister.
&lt;&lt;/widget&gt;&gt;

/*================================================================*/
&lt;&lt;widget dadjournal&gt;&gt;
[img[img/Dad/dad_intro.jpg]]
You don&#39;t know much about your dad. He disapeared when you were only 3 years old. Your mother destroyed or hid all he left behind. You&#39;ve seen some photos, so you know what he looks like. Or at least what he looked like when he vanished. You haven&#39;t had a sign of life since then. If he is dead or just gone doesn&#39;t really make a difference.
&lt;&lt;/widget&gt;&gt;
/*================================================================*/
&lt;&lt;widget jasminjournal&gt;&gt;
/*Adriana Chechik*/
&lt;&lt;set $jasmingallery.imageseen to $jasmingallery.pictures.length-1&gt;&gt;
&lt;div id=&quot;gallery&quot;&gt;&lt;&lt;gallery $jasmingallery&gt;&gt;&lt;/div&gt;

&lt;&lt;if $Jasmin.status gte 3&gt;&gt;
$Jasmin.callname became your happy loveslave. She is totally devoted to you. Her every action is geared toward pleasing you, her Master. She still has most of her original personality, which makes her a lot of fun to be around. She also really enjoys fantasizing about helping you have your way with other girls and actively points out beautiful women and ways to seduce them.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Jasmin.status gte 2&gt;&gt;
The second application of the Rego Te spell finally pushed her to confess her feeling to you. She asked you to be your girlfriend and of course you accepted. She threw herself into her new role with a passion. She is always there if you need her, but gives you enough space for your own life. She is happy to be of service to you and expects nothing in return than your occasional attention. She is still shy and unsure about sex, though her (newly acquired) perverted fantasies shine through now and then.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Jasmin.status gte 1&gt;&gt;
Since you cast the spell on her she behaves a little different around you. She is still the funny, quirky girl you grew to like so much, but she steals glances at you whenever she thinks you arent looking. She is much more helpful as she uses every possibility to do things for you or to obey you. She also flirts a lot more with you and is much more open about her sexuality. She hasn&#39;t yet told you about her feelings, but they clearly show in her behaviour.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
$Jasmin.callname and you have been friends for as long as you can remember. You two were in kindergarden, in elementary school, in high school and you still hang out together, watching movies, playing games or just talking. Although you find her attractive, you never made a move on her. It just didn&#39;t feel right to hit on one of your best friends and she made it clear that she isn&#39;t interested in a sexual relationship with you. 

&lt;&lt;/widget&gt;&gt;
/*================================================================*/
&lt;&lt;widget albertjournal&gt;&gt;
[img[img/Albert/albert_intro.jpg]]
You don&#39;t really know your Uncle Albert. You only met him twice, when you were very little. The only thing you remember clearly is that he was a funny man. He always made little jokes, played funny games with you and Andrea and brought you small presents.
&lt;&lt;/widget&gt;&gt;
/*================================================================*/
&lt;&lt;widget lisajournal&gt;&gt;
/*Carter Cruise*/

&lt;&lt;set $lisagallery.imageseen to $lisagallery.pictures.length-1&gt;&gt;
&lt;div id=&quot;gallery&quot;&gt;&lt;&lt;gallery $lisagallery&gt;&gt;&lt;/div&gt;

&lt;&lt;if $Lisa.status gte 4&gt;&gt;
	You got her a new name, more fitting to her new existance as your bimbo slave: &lt;&lt;=$Lisa.callname&gt;&gt;! She is brainless, horny and happy. You made it so that she can still pretend to be her old self for a short time. It would be very bothersome if someone would ask too many questions. But it is always make pretend for her and she&#39;ll never actually understand what she is saying and doing. For you she&#39;ll always be the happy, ditzy, brainless, horny and submissive bimbo! The only thing that would make this even better would be, if her old self could see what has become of her.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Lisa.status gte 3&gt;&gt;
	&lt;&lt;if $Lisa.iqdrop lte 3&gt;&gt;
		$Lisa.callname is really stupid now. It is time to complete the enslavement now. She 
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Lisa.iqdrop lte 2&gt;&gt;
		You fucked her again. The drop in iq is more noticeable now. She slips in her thoughts more and more, sometimes referring to herself in third person. It is really funny to see her fall like that. In the same time her iq drops her arousal increases. Sex with her has never been that much fun.
	&lt;&lt;/if&gt;&gt;	
	&lt;&lt;if $Lisa.iqdrop lte 1&gt;&gt;
		$Lisa.callname had an orgasm. It is not really noticeable right now, but if you know what to look for, it is obvious that she lost some of her intelligence. She has difficulties finding complicated words and takes a little longer to finish her thoughts. She is perfectly on the way to be the dumb, brainless bimbo she never wanted to be.
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Lisa.iqdrop is 0&gt;&gt;
	  You made it so, that &lt;&lt;=$Lisa.callname&gt;&gt;s intelligence get drained whenever she orgasms. You can literally fuck her mind away.	
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Lisa.status gte 2&gt;&gt;
	You used the spell to make her fuck you. She thought it would be for one last time, a goodbye fuck if you will. Little did she know that it would be only the beginning of her bimbofication. You will fuck her into a blissfull, thoughtless happiness that will weaken over time, but never completely dissapear. It will feel so good, she will want to feel it again and again, fucking you whenever you let her.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Lisa.status gte 1&gt;&gt;
	&lt;&lt;if $Lisa.reasontotalk is &quot;Brian&quot;&gt;&gt;
		You made $Brian.callname break up with Lisa and you made sure it was hurtful. On one hand it was satisfying revenge, to hurt her as she had hurt you, on the other hand it opened her up 
		for future enslavement. She is talking to you again, because she needs someone to talk to.
	&lt;&lt;else&gt;&gt;
		You had $Andrea.callname to intervene on your behalf. She had been &lt;&lt;= $Lisa.callname&gt;&gt;s friend for a long time, so she was able to convince $Lisa.callname to speak with you again, somehow. 
		It gave you the opening you need to continue with the enslavement.
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
$Lisa.callname is ... was your girlfriend.
You met her in highschool and fell for her instantly. Hot, cute, intelligent, charming, fun. She had everything you could ever wish for in a woman. Sadly other guys saw it the same way.
And even sadder is that $Lisa.callname is a whore. Not only did you catch her in bed with $Brian.callname, but she also had the gall to blame you for her cheating. If you just were more of a man, she said, she wouldn&#39;t have had to cheat on you with him. The two of them had been going at it for more than a month and it seems you were the last one to know.
But the worst part of the story is that she lives a mere two streets apart from you and you have to see her all the time.

&lt;&lt;/widget&gt;&gt;
/*================================================================*/
&lt;&lt;widget henryjournal&gt;&gt;
/*Henrietta: Ana Foxxx*/

&lt;&lt;set $henrygallery.imageseen to $henrygallery.pictures.length-1&gt;&gt;
&lt;div id=&quot;gallery&quot;&gt;&lt;&lt;gallery $henrygallery&gt;&gt;&lt;/div&gt;

&lt;&lt;if $Henry.status is 4&gt;&gt;
$Henry.callname has become your devoted disciple. She sees you as a living good and serving you sexually as a holy action. She is willing to do anything for you, including killing herself or others in your name. You quickly forbid that path of action, as you most certainly not want to lose such a great and useful toy as she has turned out to be.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Henry.status gte 3&gt;&gt;
$Henry.callname asked you for a solution and with the mutaris spell you were able to offer one. You turned him into a biological female, which made her incredibly happy. You decided to give her the name Henrietta, not only because it is easy to remember, but also to always remind her where she came from and what power you wield. Her new body is indeed very beautiful and she has a powerful sexdrive. She likes to experiment with the new sensations and is very receptive for any kind of sex.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Henry.status gte 2&gt;&gt;
You instilled the powerful need to serve you in &lt;&lt;=$Henry.callname&gt;&gt;. He needs to serve you, not only with his actions, but you also made him want to serve you with his body. This means, that he has to become female in order to do that, since you made it clear to him that you are not gay. In the trance you instructed him to ask you for a solution to this problem.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Henry.status gte 1&gt;&gt;
You increased &lt;&lt;=$Henry.callname&gt;&gt;s insecurities and his dependency to you. He has become much more accomodating since then. He follows your lead and tries to be as helpful as he can. To the outside he even seems to be more confident, but all this confidence is centered around being your friend and being helpful in supporting you. He is incredibly loyal to you now.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
$Henry.callname is a nerd. Just as you are. He is kinda strange, but you two get along quite well. Henry can be quite annoying, though. He is a braggard and often makes up stories. It&#39;s his not really lying, but bending the truth and exagerating that has gotten him in trouble again and again. Most of the times you have been collateral damage. You suspect that his behaviour stems from a very low self esteem. On the other hand, he had always been there if you needed him and it is a lot of fun playing video games out of his impressive collection with him.
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget andreajournal&gt;&gt;
/*Casey Calvert*/
&lt;&lt;set $andreagallery.imageseen to $andreagallery.pictures.length-1&gt;&gt;
&lt;div id=&quot;gallery&quot;&gt;&lt;&lt;gallery $andreagallery&gt;&gt;&lt;/div&gt;

&lt;&lt;if $Andrea.status is 4&gt;&gt;
$Andrea.callname has offered you her pussy and you gladly accepted. She is now so dependend on the pleasure only the sex with you can give her, she has completely submitted to you and became your slave. She is incredibly happy and enjoys her new status fully. You ordered her to keep her enslavement a secret, because you just don&#39;t want other people to meddle in your affairs.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Andrea.status gte 3&gt;&gt;
$Andrea.callname ramped up her teasing of you even more. In your presence she is almost always walking around in very sexy underwear. You made her offer you a blowjob in jest, but also made her to follow through when you accepted. The arousal she felt by it pushed her over the edge and she freely offered her anal virginity to you.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Andrea.status gte 2&gt;&gt;
You used the spell to subtly change &lt;&lt;=$Andrea.callname&gt;&gt;s approach to harassing you. She now thinks it is a great idea to turn you on. She also gets really aroused by doing this, because you made her aroused by breaking taboos. She started flirting with you aggressively, including flashing you her tits and pussy. You also gave her the need to fantasize about you while masturbating and making her only orgasm when imagining you cumming.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Andrea.status gte 1&gt;&gt;
You used an old bag with knickknacks that once belonged to $Andrea.callname you found in the attic to get her to let you in. This allows the perfect opportunity to begin enslaving her.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
$Andrea.callname is your sister. She is slightly older than you and lives in her own apartment in the Springvale towers, the apartment complex of the town. She has a job as fitness instructor at the gym where she spends much of her time. She has always teased you and invested a lot of energy into annoying and humiliating you. Since she is the favorite of your Mom, it was always you who took the blame. You don&#39;t think she hates you, she just loves to humiliate you.
&lt;&lt;/widget&gt;&gt;

/*===================================================================*/

&lt;&lt;widget brianjournal&gt;&gt;
/*Male/Female: Ramon Nomar/Roxy Raye*/
&lt;&lt;set $briangallery.imageseen to $briangallery.pictures.length-1&gt;&gt;
&lt;div id=&quot;gallery&quot;&gt;&lt;&lt;gallery $briangallery&gt;&gt;&lt;/div&gt;

&lt;&lt;if $Brian.status is 4&gt;&gt;
$Brian.callname happily accepted her new lifestyle. She is totally dependend on you. You made it so that she is always horny, always in need of release, but can only get it through your punishments. You also made sure that she can&#39;t intentionally misbehave to get punished. She knows that, which torments her and in turn makes her even hornier. She is totally addicted to you and loves every moment of it.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Brian.status gte 3&gt;&gt;
You transformed $Brian.callname into a woman. You also ordered her to get rid of everything that was important to her before you took over her life. This is what humiliates her the most, since $Brian.callname was always very proud of his achievements and his trophies. Now she is just a slut addicted to the abuse you heap on her.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Brian.status gte 2&gt;&gt;
You made it that $Brian.callname gets more aroused the more you humiliate and punish him. This arousal builds and builds and he can only find the release of an orgasm while he is humiliated by you. This made him crave, even need, your punishment and he is actually looking forward to it. He has turned into a fine masochist that looks forward to his next punishment.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Brian.status gte 1&gt;&gt;
You ambushed $Brian.callname after he got drunk in the bar. With the help of the spell you made Brian afraid of you. Not only is he terrified of what you might do to him as revenge now that you are more powerful than him, he is also convinved that he has to do everything you want of him or he&#39;d have to face your wrath. Now the time for payback has come. He will endure anything you throw at him, because he fears what might come for him when he resists.
&lt;br&gt;&lt;hr&gt;&lt;br&gt;
&lt;&lt;/if&gt;&gt;
$Brian.callname is and has always been a bully. He bullied $Henry.callname and you in school and even before. He always insulted the two of you as gay. He seems really homophobic. You had thought that you left all that behind when you finished school, but then you found out that he was banging your girlfriend $Lisa.callname behind your back. You&#39;ve harbored a deep grudge since then, but as he is far stronger than you, you&#39;d need superpowers (or magic) to do something about it.
&lt;&lt;/widget&gt;&gt;

/*===================================================================*/
&lt;&lt;widget brendajournal&gt;&gt;
/*Corey Chase*/
NOTHING YET
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lucyjournal&gt;&gt;
/*Mia Li*/
[img[img/Lucy/lucy_intro.jpg]]
&lt;&lt;if $cafejob.hired is true&gt;&gt;
She has given you a job as a dishwasher in her cafe. That is the perfect way of getting closer to her. Maybe even close enough to use the spell on her.
&lt;&lt;/if&gt;&gt;
$Lucy.callname is the owner of The Busy Bean. She is a very carefree, happy person who always has a smile on her face.
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget christinajournal&gt;&gt;
/*Amirah Adara*/
[img[img/Christina/christina_intro.jpg]]
$Christina.callname is the owner of and only employee at the Happy Secrets, the sex shop in the Springvale Mall. She is very sexual and uses every oportunity to flirt with you. She is very open with the fact that she is a dominant and wants her sexual partners to submit to her.
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget victoriajournal&gt;&gt;
/*Bobbi Starr*/
[img[img/Victoria/victoria_intro.jpg]]
&lt;&lt;if $dropped_photo.owned&gt;&gt;
She has lost a photo of you that she seemed to have used to identify you.
&lt;&lt;/if&gt;&gt;
This mysterious woman is shadowing you. You have never seen her before, you would surely remember someone as beautiful as that.
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="12" name="Random widgets" tags="widget nobr" position="2600,100" size="100,100">
/*Generates a link that moves the player to the given location (args[0]) and passes the time (args[1])minutes forward */
&lt;&lt;widget move&gt;&gt;&lt;&lt;link $args[0].name $args[0].target&gt;&gt;&lt;&lt;timepass $args[1]&gt;&gt;&lt;&lt;set $location to $args[0]&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/widget&gt;&gt; /*args[0] is the location, args[1] is time in minutes*/
/*==================================================================*/
&lt;&lt;widget fatiguereduce&gt;&gt; 
	&lt;&lt;set $You.fatigue -= $args[0]&gt;&gt;
	&lt;&lt;if $You.fatigue lt 0&gt;&gt;&lt;&lt;set $You.fatigue to 0&gt;&gt;&lt;&lt;/if&gt;&gt;	
	&lt;&lt;dialog &#39;&#39; true&gt;&gt;You feel your energy reserves refilling. &lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;ui update&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
/*These widgets add/subtract the given amount of money.*/
&lt;&lt;widget addmoney&gt;&gt;&lt;&lt;set $You.money += $args[0]&gt;&gt;&lt;&lt;ui update&gt;&gt;&lt;&lt;/widget&gt;&gt; /*args[0] is amount*/
&lt;&lt;widget losemoney&gt;&gt;&lt;&lt;set $You.money -= $args[0]&gt;&gt;&lt;&lt;if $You.money lt 0&gt;&gt;&lt;&lt;set $You.money to 0&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;ui update&gt;&gt;&lt;&lt;/widget&gt;&gt; /*args[0] is amount*/
/*===================================================================*/
/*This widget just lists of all relevant variables for ingame troubleshooting processes. Will not be in the final game*/
&lt;&lt;widget statscheck&gt;&gt;
	&lt;h2&gt;You&lt;/h2&gt;
	&lt;&lt;= &quot;Name: &quot; + $You.callname&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Facepic: &quot; + $You.facepic&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Location: &quot; + $location.name&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Sandwich preferrance: &quot; + $You.sandwich&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Arousal: &quot; + $You.arousal&gt;&gt;&lt;br&gt;
	&lt;&lt;= &quot;Fatigue: &quot; + $You.fatigue&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Stamina: &quot; + $You.stamina&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Spellpower :&quot; + $You.spellpower&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Current Mana: &quot; + $You.mana&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Maximum Mana: &quot; + $You.maxmana&gt;&gt;&lt;br&gt;
	&lt;&lt;= &quot;Mana regeneration: &quot; + $You.manaregen&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Study efficiency: &quot; + $You.studyefficiency&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Money: &quot; + $You.money&gt;&gt;&lt;br&gt;&lt;br&gt;
	&lt;h2&gt;Intro variables&lt;/h2&gt;
	&lt;&lt;= &quot;Intro seen: &quot; + $introseen&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Letter already read: &quot; + $letterread&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Kitchen cleaned: &quot; + $kitchenclean&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Cleaning help: &quot; + $cleaninghelp&gt;&gt;&lt;br&gt;&lt;br&gt;
	&lt;h2&gt;Random variables&lt;/h2&gt;
	&lt;&lt;= &quot;Show sidemenu: &quot; + $sidemenu&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;People present: &quot; + $peoplepresent&gt;&gt;&lt;br&gt;
	&lt;h2&gt;Navigation variables&lt;/h2&gt;
	&lt;&lt;= &quot;Knocked on Bedroom: &quot; + $knocked.bedroom&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Knocked on Bathroom: &quot; + $knocked.bathroom&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;End: &quot; + $end&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Who is fucked: &quot; + $fucked&gt;&gt;&lt;br&gt;
	&lt;&lt;= &quot;Who is enslaved: &quot; + $enslaved&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Who is talked to: &quot; + $talkto&gt;&gt;&lt;br&gt;&lt;&lt;= &quot;Who has an orgasm: &quot; + $orgasm&gt;&gt;&lt;br&gt;&lt;br&gt;
	&lt;&lt;for _i to 0; _i lt $npcs.length;_i++&gt;&gt;
		&lt;&lt;set _statsname to Object.keys($npcs[_i])&gt;&gt;
		&lt;&lt;set _char to $npcs[_i]&gt;&gt;
		&lt;h1&gt;_char.callname (_char.id)&lt;/h1&gt;	
		&lt;&lt;for _j to 0;_j lt _statsname.length;_j++&gt;&gt;
			&lt;&lt;set _help1 to _statsname[_j]&gt;&gt;
			&lt;&lt;= _help1&gt;&gt;: &lt;&lt;=_char[_help1]&gt;&gt;&lt;br&gt;
		&lt;&lt;/for&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;

/*===================================================================*/
/*The cheats widget lets the player cheat in all the major ways*/
&lt;&lt;widget cheats&gt;&gt;
&lt;&lt;code &#39;_cheats&#39;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;cheats&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/code&gt;&gt;
&lt;&lt;ui update&gt;&gt;
@@.choice;
&lt;&lt;link &#96;&quot;Increase spellpower (Current:&quot;+$You.spellpower+&quot;)&quot;&#96;&gt;&gt;&lt;&lt;set $You.spellpower+=20&gt;&gt;&lt;&lt;wiki _cheats&gt;&gt;&lt;&lt;/link&gt;&gt; 
&lt;&lt;link &quot;Add 100 Mana maximum&quot;&gt;&gt;&lt;&lt;set $You.maxmana +=100&gt;&gt;&lt;&lt;wiki _cheats&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#96;&quot;Add 500$ (Current:&quot;+$You.money+&quot;$)&quot;&#96;&gt;&gt;&lt;&lt;set $You.money +=500&gt;&gt;&lt;&lt;wiki _cheats&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#96;&quot;Increase Studyefficiency (Current:&quot;+$You.studyefficiency+&quot;)&quot;&#96;&gt;&gt;&lt;&lt;set $You.studyefficiency += 10&gt;&gt;&lt;&lt;wiki _cheats&gt;&gt;&lt;&lt;/link&gt;&gt; 
&lt;&lt;link &#96;&quot;Add 10 stamina (Current:&quot;+$You.stamina+&quot;)&quot;&#96;&gt;&gt;&lt;&lt;set $You.stamina += 10&gt;&gt;&lt;&lt;wiki _cheats&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Replenish mana&quot;&gt;&gt;&lt;&lt;set $You.mana to $You.maxmana&gt;&gt;&lt;&lt;wiki _cheats&gt;&gt;&lt;&lt;/link&gt;&gt; 
&lt;&lt;link &quot;Reset stamina&quot;&gt;&gt;&lt;&lt;set $You.fatigue to 0&gt;&gt;&lt;&lt;wiki _cheats&gt;&gt;&lt;&lt;/link&gt;&gt;

&lt;hr&gt;
&lt;&lt;if $mutarisknown is false&gt;&gt;&lt;&lt;link &quot;Learn mutaris&quot;&gt;&gt;&lt;&lt;set $mutarisknown to true&gt;&gt;&lt;&lt;wiki _cheats&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;else&gt;&gt;You already know the mutaris spell.&lt;&lt;/if&gt;&gt;
&lt;hr&gt;

&lt;&lt;link &quot;Change character names&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39;&gt;&gt;
&lt;&lt;customize_names&gt;&gt;&lt;br&gt;
@@.choice;&lt;&lt;link &quot;Confirm changes&quot;&gt;&gt;&lt;&lt;wiki _cheats&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;hr&gt;
Instant enslave characters (This skips all corresponding events and dialoges for the skipped stages of enslavement):&lt;br&gt;
&lt;&lt;if $Mom.status isnot 3&gt;&gt;
&lt;&lt;link &quot;Enslave Mom&quot;&gt;&gt;
	&lt;&lt;set $momgallery.pictures.pushUnique(&quot;img/Mom/mom_submissive.jpg&quot;,&quot;img/Mom/mom_horny.jpg&quot;,&quot;img/Mom/mom_slave.jpg&quot;)&gt;&gt;
	&lt;&lt;set $Mom.facepic to &quot;img/Mom/face/slave.jpg&quot;&gt;&gt;&lt;&lt;set $Mom.callsyou to &quot;Master&quot;&gt;&gt;&lt;&lt;set $Mom.status to 3&gt;&gt;&lt;&lt;set $quests[0].progress to 3&gt;&gt;&lt;&lt;wiki _cheats&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;else&gt;&gt;Mom is already your slave.&lt;br&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Jasmin.status isnot 3&gt;&gt;
&lt;&lt;link &quot;Enslave $Jasmin.callname&quot;&gt;&gt;
	&lt;&lt;set $jasmingallery.pictures.pushUnique(&quot;img/Jasmin/jasmin_submissive.jpg&quot;, &quot;img/Jasmin/jasmin_horny.jpg&quot;,&quot;img/Jasmin/jasmin_slave.jpg&quot;)&gt;&gt;
	&lt;&lt;set $Jasmin.status to 3&gt;&gt;&lt;&lt;set $Jasmin.facepic to &quot;img/Jasmin/face/slave.jpg&quot;&gt;&gt;&lt;&lt;set $Jasmin.callsyou to &quot;Master&quot;&gt;&gt;&lt;&lt;set $quests[1].progress to 3&gt;&gt;&lt;&lt;wiki _cheats&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;else&gt;&gt;$Jasmin.callname is already your slave.&lt;br&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Henry.status isnot 4&gt;&gt;
&lt;&lt;link &quot;Enslave and transform $Henry.callname&quot;&gt;&gt;
	&lt;&lt;set $henrygallery.pictures.pushUnique(&quot;img/Henry/henry_submissive.jpg&quot;,&quot;img/Henry/henry_male_horny.jpg&quot;,&quot;img/Henry/henry_female_horny.jpg&quot;,&quot;img/Henry/henry_slave.jpg&quot;)&gt;&gt;
	&lt;&lt;set $Henry.status to 4&gt;&gt;&lt;&lt;set $Henry.facepic to &quot;img/Henry/face/female_slave.jpg&quot;&gt;&gt;&lt;&lt;set $Henry.gender to &quot;female&quot;&gt;&gt;
	&lt;&lt;set $Henry.callname to &quot;Henrietta&quot;&gt;&gt;&lt;&lt;set $Henry.callsyou to &quot;My Lord&quot;&gt;&gt;&lt;&lt;set $quests[2].progress to 4&gt;&gt;&lt;&lt;wiki _cheats&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;else&gt;&gt;$Henry.callname is already your slave.&lt;br&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Andrea.status isnot 4&gt;&gt;
&lt;&lt;link &quot;Enslave $Andrea.callname&quot;&gt;&gt;
	&lt;&lt;set $andreagallery.pictures.pushUnique(&quot;img/Andrea/andrea_submissive.jpg&quot;,&quot;img/Andrea/andrea_horny.jpg&quot;,&quot;img/Andrea/andrea_slave.jpg&quot;)&gt;&gt;
	&lt;&lt;set $Andrea.status to 4&gt;&gt;&lt;&lt;set $Andrea.facepic to &quot;img/Andrea/face/slave.jpg&quot;&gt;&gt;&lt;&lt;set $Andrea.callsyou to &quot;Master&quot;&gt;&gt;&lt;&lt;set $quests[3].progress to 4&gt;&gt;
	&lt;&lt;wiki _cheats&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;else&gt;&gt;$Andrea.callname is already your slave.&lt;br&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;if $Brian.status isnot 4&gt;&gt;
&lt;&lt;link &quot;Enslave and transform $Brian.callname&quot;&gt;&gt;
	&lt;&lt;set $briangallery.pictures.pushUnique(&quot;img/Brian/brian_submissive.jpg&quot;,&quot;img/Brian/brian_male_horny.jpg&quot;,&quot;img/Brian/brian_female_horny.jpg&quot;,&quot;img/Brian/brian_slave.jpg&quot;)&gt;&gt;
	&lt;&lt;set $Brian.status to 4&gt;&gt;&lt;&lt;set $Brian.gender to &quot;female&quot;&gt;&gt;&lt;&lt;set $Brian.facepic to &quot;img/Brian/face/female_slave.jpg&quot;&gt;&gt;&lt;&lt;set $Brian.callsyou to &quot;Master&quot;&gt;&gt;&lt;&lt;set $quests[4].progress to 4&gt;&gt;
	&lt;&lt;set $Brian.callname to &quot;Brianna&quot;&gt;&gt;
	&lt;&lt;wiki _cheats&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;else&gt;&gt;$Brian.callname is already your slave.&lt;br&gt;&lt;&lt;/if&gt;&gt;

&lt;hr&gt;
&lt;&lt;link &quot;Close cheatsmenu&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/

&lt;&lt;widget thanks&gt;&gt;
	Thank you everyone for the support and bug reports in the [[hypnopic collective|https://hypnopics-collective.net/]].&lt;br&gt; Special thanks to Geo for helping me with the CSS and the Javascript.&lt;br&gt;
	You can also find and review the game in the [[TFGames Database|https://tfgames.site/index.php?module=viewgame&amp;id=2127]].
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget variablesetup&gt;&gt;
&lt;&lt;set $jasmins_livingroom.name to $Jasmin.callname + &quot;s livingroom&quot;&gt;&gt;
&lt;&lt;set $jasmins_bedroom.name to $Jasmin.callname + &quot;s bedroom&quot;&gt;&gt;
&lt;&lt;set $henrys_home.name to $Henry.callname + &quot;s home&quot;&gt;&gt;
&lt;&lt;set $lisas_apartment.name to $Lisa.callname + &quot;s apt&quot;&gt;&gt;
&lt;&lt;set $andreas_apartment.name to $Andrea.callname + &quot;s apt&quot;&gt;&gt;
&lt;&lt;set $brians_home.name to $Brian.callname + &quot;s home&quot;&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget customize_names&gt;&gt;
	&lt;table class=&quot;nametable&quot;&gt;
	&lt;tr&gt;&lt;td&gt;[img[$You.facepic]]&lt;/td&gt;&lt;td&gt;Your name is:&lt;/td&gt;&lt;td&gt;&lt;&lt;textbox &quot;$You.callname&quot; &quot;Hunter&quot;&gt;&gt;&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;[img[$Mom.facepic]]&lt;/td&gt;&lt;td&gt;Your moms name is:&lt;/td&gt;&lt;td&gt;&lt;&lt;textbox &quot;$Mom.callname&quot; &quot;Mom&quot;&gt;&gt;&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;[img[$Andrea.facepic]]&lt;/td&gt;&lt;td&gt;Your sisters name is:&lt;/td&gt;&lt;td&gt;&lt;&lt;textbox &quot;$Andrea.callname&quot; &quot;Andrea&quot;&gt;&gt;&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;[img[$Jasmin.facepic]]&lt;/td&gt;&lt;td&gt;Your childhood friends name is:&lt;/td&gt;&lt;td&gt;&lt;&lt;textbox &quot;$Jasmin.callname&quot; &quot;Jasmin&quot;&gt;&gt;&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;[img[$Henry.facepic]]&lt;/td&gt;&lt;td&gt;Your gamer buddys name is:&lt;/td&gt;&lt;td&gt;&lt;&lt;textbox &quot;$Henry.callname&quot; &quot;Henry&quot;&gt;&gt;&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;[img[$Lisa.facepic]]&lt;/td&gt;&lt;td&gt;Your ex girlfriends name is:&lt;/td&gt;&lt;td&gt;&lt;&lt;textbox &quot;$Lisa.callname&quot; &quot;Lisa&quot;&gt;&gt;&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;[img[$Brian.facepic]]&lt;/td&gt;&lt;td&gt;Your high school bullys name is:&lt;/td&gt;&lt;td&gt;&lt;&lt;textbox &quot;$Brian.callname&quot; &quot;Brian&quot;&gt;&gt;&lt;/td&gt;&lt;/tr&gt;
	&lt;&lt;if $Christina.known&gt;&gt;&lt;tr&gt;&lt;td&gt;[img[$Christina.facepic]]&lt;/td&gt;&lt;td&gt;The sexshop owners name is:&lt;/td&gt;&lt;td&gt;&lt;&lt;textbox &quot;$Christina.callname&quot; &quot;Christina&quot;&gt;&gt;&lt;/td&gt;&lt;/tr&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Brenda.known&gt;&gt;&lt;tr&gt;&lt;td&gt;[img[$Brenda.facepic]]&lt;/td&gt;&lt;td&gt;The bookshop owners name is:&lt;/td&gt;&lt;td&gt;&lt;&lt;textbox &quot;$Brenda.callname&quot; &quot;Brenda&quot;&gt;&gt;&lt;/td&gt;&lt;/tr&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Lucy.known&gt;&gt;&lt;tr&gt;&lt;td&gt;[img[$Lucy.facepic]]&lt;/td&gt;&lt;td&gt;The cafe owners name is:&lt;/td&gt;&lt;td&gt;&lt;&lt;textbox &quot;$Lucy.callname&quot; &quot;Lucy&quot;&gt;&gt;&lt;/td&gt;&lt;/tr&gt;&lt;&lt;/if&gt;&gt;
	&lt;/table&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="13" name="PassageReady" tags="nobr" position="250,1325" size="200,100">&lt;&lt;set $npcs to [$Mom, $Jasmin, $Andrea, $Lisa, $Brian, $Henry, $Brenda, $Lucy, $Christina]&gt;&gt;

&lt;&lt;if $You.mana lt 0&gt;&gt;&lt;&lt;set $You.mana to 0&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;if $You.fatigue lt 0&gt;&gt;&lt;&lt;set $You.fatigue to 0&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;if $You.money lt 0&gt;&gt;&lt;&lt;set $You.money to 0&gt;&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;timetables&gt;&gt;
/*Set timetables for characters*/

&lt;&lt;variablesetup&gt;&gt;</tw-passagedata><tw-passagedata pid="14" name="StoryInit" tags="" position="25,400" size="100,100">&lt;&lt;include chardef&gt;&gt;
&lt;&lt;include magicdef&gt;&gt;
&lt;&lt;include timedef&gt;&gt;
&lt;&lt;include itemdef&gt;&gt;
&lt;&lt;include locationdef&gt;&gt;
&lt;&lt;include jobdef&gt;&gt;
&lt;&lt;include eventdef&gt;&gt;
&lt;&lt;include gallerydef&gt;&gt;
&lt;&lt;include questdef&gt;&gt;


&lt;&lt;set $introseen to false&gt;&gt;
&lt;&lt;set $end to &quot;&quot;&gt;&gt;
&lt;&lt;set $letterread to false&gt;&gt;

&lt;&lt;set $calls to {
number:0,
}&gt;&gt;


&lt;&lt;set $insultnoun to [
&quot;asshole&quot;, &quot;excuse for a human being&quot;, &quot;bitch&quot;, &quot;sack of flesh&quot;, &quot;whore&quot;, &quot;pussy&quot;
]&gt;&gt;

&lt;&lt;set $insultadjective to [
&quot;stupid&quot;, &quot;useless&quot;, &quot;hideous&quot;, &quot;dumb&quot;, &quot;talentless&quot;, &quot;brainless&quot;, &quot;trashy&quot;, &quot;worthless&quot;
]&gt;&gt;

&lt;&lt;set $fridge to {
	raidedtoday:0,
	raidspossible:1,
	upgradecost:100
}&gt;&gt;

&lt;&lt;set $knocked to {bedroom: false,bathroom: false,jasmins_bedroom:false,moms_bedroom:false}&gt;&gt;
&lt;&lt;set $faces to true&gt;&gt;
&lt;&lt;set $streamadd to false&gt;&gt;
&lt;&lt;set $kitchenclean to false&gt;&gt;
&lt;&lt;set $peoplepresent to 0&gt;&gt;
&lt;&lt;set $sidemenu to false&gt;&gt;

&lt;&lt;set $fucked to &quot;none&quot;&gt;&gt;
&lt;&lt;set $enslaved to &quot;none&quot;&gt;&gt;
&lt;&lt;set $talkto to &quot;none&quot;&gt;&gt;
&lt;&lt;set $orgams to &quot;none&quot;&gt;&gt;

&lt;&lt;set $moveshortcut to false&gt;&gt;

&lt;&lt;set $desk to &quot;none&quot;&gt;&gt;

&lt;&lt;set $game to {
Version: &quot;0.3.9&quot;,
version: 0.003900,
release: &quot;Alpha&quot;
}&gt;&gt;

/*=====================================================================*/

&lt;&lt;script&gt;&gt;
	Config.saves.version = state.variables.game.version;
	Config.saves.autosave = &quot;autosave&quot;;
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="15" name="Henrys home" tags="nobr" position="400,250" size="200,100">&lt;&lt;switch $Henry.event&gt;&gt;&lt;&lt;case &quot;submission&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;&lt;&lt;henry_submission&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/switch&gt;&gt;
&lt;&lt;henrys_home&gt;&gt;</tw-passagedata><tw-passagedata pid="16" name="chardef" tags="nobr" position="150,400" size="100,100">&lt;&lt;set $You to {
	known:true,
	facepic: &quot;img/you/you_face.jpg&quot;,
	id: &quot;You&quot;,
	callname: &quot;Hunter&quot;,
	sandwich: &quot;nothing yet&quot;,
	arousal: 0,
	fatigue: 0,
	stamina: 12,
	mana: 20,
	maxmana: 20,
	manaregen: 1,
	studyefficiency: 0,
	spellpower: 1,
	money: 100
}&gt;&gt;
/*==================================================================*/
&lt;&lt;set $Mom to { /*0:bad Mom,1:perfect Mom, 2:horny, 3:sexslave*/
	facepic: &quot;img/Mom/face/neutral.jpg&quot;,
	privacy:[&quot;Bathroom&quot;,&quot;Livingroom&quot;,&quot;Moms bedroom&quot;,&quot;Your bedroom&quot;,&quot;Kitchen&quot;,&quot;Hallway&quot;,&quot;Attic&quot;],
	id: &quot;Mom&quot;,callname: &quot;Mom&quot;, streaming: false, streamingmod: 1,
	known:true, callsyou: &quot;Hunter&quot;,
	location: &quot;Kitchen&quot;, movecd: 0,
	status: 0, maxstatus:3, willpower: 1, progress: 0,
	event: &quot;none&quot;, events: [&quot;sandwich&quot;], eventcd: 0,
	gender: &quot;female&quot;, stayathome:false,
	act: &quot;none&quot;, arousal: 0, threshold: 8,
	bj: false, fuck: false, anal: false
}&gt;&gt;	
/*==================================================================*/
&lt;&lt;set $Jasmin to { /*0:childhood friend,1: horny crush, 2: devoted girlfriend, 3: loveslave*/
	facepic: &quot;img/Jasmin/face/neutral.jpg&quot;,
	privacy:[&quot;Jasmins livingroom&quot;,&quot;Jasmins bedroom&quot;],
	id: &quot;Jasmin&quot;,callname:&quot;Jasmin&quot;, streaming: false, streamingmod: 1 , known:true,
	callsyou: &quot;Hunter&quot;,
	location: &quot;Jasmins livingroom&quot;, movecd: 0,
	status: 0, maxstatus:3,willpower: 1, progress: 0,
	event: &quot;none&quot;, events: [&quot;movie&quot;], eventcd: 0,
	gender: &quot;female&quot;, stayathome:false,
	act: &quot;none&quot;, arousal: 0, threshold: 9, dildo: false,
	bj: false, fuck: false, anal: false, pussyplay: false, pussyplaydildo: false, analplay: false, analplaydildo: false
}&gt;&gt;
/*==================================================================*/
&lt;&lt;set $Andrea to { /*0:bitchy sister, 1:normal sister,2: teasing sister, 3:perverted sister, 4: sexslave*/
	facepic: &quot;img/Andrea/face/neutral.jpg&quot;,
	privacy:[&quot;Andreas apt&quot;],
	id: &quot;Andrea&quot;, callname:&quot;Andrea&quot;, streaming: false, streamingmod: 1 , known:true,
	callsyou: &quot;Dweeb&quot;,
	location: &quot;Andreas apt&quot;,movecd: 0,
	status: 0, maxstatus:4, willpower: 2, progress: 0,
	event: &quot;none&quot;, events: [], eventcd: 0,
	gender: &quot;female&quot;, stayathome:false,
	act: &quot;none&quot;, arousal: 0, threshold: 10,
	bj:false,fuck:false,anal:false
}&gt;&gt;
/*==================================================================*/
&lt;&lt;set $Lisa to { /*0:arrogant ex-girlfriend, 1:depressed ex-girlfriend, 2:stupid, 3:bimbo slut, 4: bimbo slave*/
	facepic: &quot;img/Lisa/face/neutral.jpg&quot;,
	id: &quot;Lisa&quot;, callname:&quot;Lisa&quot;, streaming: false, streamingmod: 1,
	known:true, iqdrop:0, reasontotalk:&quot;&quot;,
	callsyou: &quot;Loser&quot;, privacy:[&quot;Lisas apt&quot;],
	location: &quot;Lisas apt&quot;, movecd: 0,
	status: 0,maxstatus:4, willpower: 2, progress: 0,
	event: &quot;none&quot;, events: [], eventcd: 0,
	gender: &quot;female&quot;, stayathome: false,
	act: &quot;none&quot;, arousal: 0, threshold: 11
}&gt;&gt;
/*==================================================================*/
&lt;&lt;set $Brian to { /*0:bully, 1:submissive,                */
	facepic: &quot;img/Brian/face/neutral.jpg&quot;,privacy:[&quot;Brians home&quot;],
	id: &quot;Brian&quot;,callname:&quot;Brian&quot;, streaming: false, streamingmod: 1, known:true,
	callsyou: &quot;Faggot&quot;, drunk: 0, insult: &quot;&quot;, 
	location: &quot;Brians home&quot;, movecd: 0,bdsm:0,plug:false,
	status: 0,maxstatus:4, willpower: 5, progress: 0,
	event: &quot;none&quot;, events: [], eventcd: 0,
	gender: &quot;male&quot;, stayathome: false, training:0,trained:0,
	act: &quot;none&quot;, arousal: 0, threshold: 8
}&gt;&gt;
/*==================================================================*/
&lt;&lt;set $Henry to {/*0:annoying friend, 1:helpful friend, 2:devoted friend, 3: transformed submissive, 4: worshipping slave*/
	facepic: &quot;img/Henry/face/male_neutral.jpg&quot;, privacy:[&quot;Henrys home&quot;],
	id: &quot;Henry&quot;,callname:&quot;Henry&quot;, streaming: false, streamingmod: 1, known:true,
	callsyou: &quot;Nerd&quot;, stayathome: false,
	location: &quot;Henrys home&quot;, movecd: 0,
	status: 0,maxstatus:4, willpower: 2, progress: 0,
	event: &quot;none&quot;, events: [], eventcd: 0,
	gender: &quot;male&quot;, askedfortransformation: false,
	act: &quot;none&quot;, arousal: 0, threshold: 9,
	bj: false, fuck: false, anal: false
}&gt;&gt;
/*==================================================================*/
&lt;&lt;set $Albert to {
	facepic:&quot;img/Albert/face/neutral.jpg&quot;,
	id: &quot;Uncle Albert&quot;, callname:&quot;Uncle Albert&quot;, known:true,
	callsyou: &quot;Nephew&quot;,
}&gt;&gt;
/*==================================================================*/
&lt;&lt;set $Dad to {
	facepic:&quot;img/Dad/face/neutral.jpg&quot;,
	id:&quot;Dad&quot;, callname:&quot;Dad&quot;, known:true,
	callsyou:&quot;Son&quot;,
}&gt;&gt;
&lt;&lt;set $Unknown to {
	facepic:&quot;img/random/face_unknown.jpg&quot;,
	name:&quot;Unknown&quot;
}&gt;&gt;

/*==================================================================*/
&lt;&lt;set $Brenda to {
	known: false,
	facepic: &quot;img/Brenda/face/neutral.jpg&quot;,
	id: &quot;Brenda&quot;, callname:&quot;Brenda&quot;, streaming: false, streamingmod: 1,
	callsyou: &quot;Sir&quot;,
	location: &quot;Bookstore&quot;, movecd: 0,
	status: 0,maxstatus:3, willpower: 2, progress: 0,
	event: &quot;none&quot;, events: [], eventcd: 0,
	gender: &quot;female&quot;
}&gt;&gt;
&lt;&lt;set $Lucy to {
	known: false,
	facepic: &quot;img/Lucy/face/neutral.jpg&quot;,
	id:&quot;Lucy&quot;, callname: &quot;Lucy&quot;, streaming: false, streamingmod: 1,
	callsyou: &quot;Sir&quot;,
	location: &quot;Cafe&quot;, movecd: 0,
	status: 0, maxstatus:3, willpower: 1, progress: 0,
	event: &quot;none&quot;, events: [], eventcd: 0,
	gender: &quot;female&quot;
}&gt;&gt;
&lt;&lt;set $Christina to {
	known: false,
	facepic: &quot;img/Christina/face/neutral.jpg&quot;,
	id:&quot;Christina&quot;,callname: &quot;Christina&quot;, streaming: false, streamingmod: 1,
	callsyou: &quot;Sexy&quot;,
	location: &quot;Sexshop&quot;, movecd: 0,
	status: 0,maxstatus:3, willpower: 4, progress: 0,
	event: &quot;none&quot;, events: [], eventcd: 0,
	gender: &quot;female&quot;
}&gt;&gt;
&lt;&lt;set $Victoria to {
	known: false, seen: 0,
	facepic: &quot;img/Victoria/face/neutral.jpg&quot;,
	id:&quot;Victoria&quot;,callname: &quot;Mysterious woman&quot;, streaming: false, streamingmod: 1,
	callsyou: &quot;Sir&quot;, satus:0, maxstatus:3,
	location: &quot;Away&quot;,movecd: 0,
	event: &quot;none&quot;, events: [], eventcd: 0,
	gender: &quot;female&quot;
}&gt;&gt;</tw-passagedata><tw-passagedata pid="17" name="magicdef" tags="" position="25,525" size="100,100">&lt;&lt;set $book to {
	tableofcontent: false,
	chaptertranslated: 0
}&gt;&gt;
&lt;&lt;set $rego_te to {level: 1, manacost: 15}&gt;&gt;
&lt;&lt;set $mutarisknown to false&gt;&gt;
&lt;&lt;set $segnitasknown to false&gt;&gt;

&lt;&lt;set $research to {
spellpower: {difficulty:5, progress:0},
maxmana: {difficulty:5, progress:0},
manaregen: {difficulty:5, progress:0},
mutaris: {difficulty:50, progress:0},
segnitas: {difficulty:100, progress:0},
stamina: {difficulty:5, progress:0},
rego_te: {difficulty:10, progress:0},
recreo: {difficulty:10,progress:0}, /*Mana+ Stamina-*/
recupero: {difficulty:10,progress:0} /*Mana- Stamina+*/
}&gt;&gt;

&lt;&lt;set $recreo to {level:0, cost:5, effect:1 }&gt;&gt;
&lt;&lt;set $recupero to {level:0, cost:5, effect:1}&gt;&gt;

&lt;&lt;set $propmana&gt;&gt;
&lt;&lt;set $propstamina&gt;&gt;
&lt;&lt;set $proparousal&gt;&gt;</tw-passagedata><tw-passagedata pid="18" name="timedef" tags="" position="150,525" size="100,100">&lt;&lt;set $day to 0&gt;&gt;
&lt;&lt;set $daycount to 1&gt;&gt;
&lt;&lt;set $month to 7&gt;&gt;
&lt;&lt;set $hour to 8&gt;&gt;
&lt;&lt;set $minutes to 0&gt;&gt;

&lt;&lt;set $days to [&quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;, &quot;Sunday&quot;]&gt;&gt;

&lt;&lt;set $months to [&quot;January&quot;, &quot;February&quot;, &quot;March&quot;, &quot;April&quot;, &quot;May&quot;, &quot;June&quot;, &quot;July&quot;, &quot;August&quot;, &quot;September&quot;, &quot;October&quot;, &quot;November&quot;, &quot;December&quot;]&gt;&gt;</tw-passagedata><tw-passagedata pid="19" name="Mom sex widgets" tags="widget nobr" position="1500,0" size="100,100">/*===================================================================*/
/*================================SEX================================*/
/*===================================================================*/
&lt;&lt;widget momorgasm&gt;&gt;
	&lt;&lt;sexmp4 &quot;Mom&quot; &quot;orgasm&quot;&gt;&gt;&lt;br&gt;
	&lt;&lt;msg $Mom &quot;I&#39;M CUMMING! CUMMING! OHHHHHHHH!&quot;&gt;&gt;
	&lt;&lt;set $Mom.arousal to 0&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget momarousal&gt;&gt;
	&lt;&lt;if $Mom.status lt 2&gt;&gt;
		&lt;&lt;msg $Mom &quot;Hurry up, please. I want to get this over with.&quot;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;set $Mom.arousal ++&gt;&gt;
		&lt;&lt;switch $Mom.arousal&gt;&gt;
		&lt;&lt;case 1&gt;&gt;
			&lt;&lt;timepass 3&gt;&gt;
			&lt;&lt;switch $Mom.act&gt;&gt;
			&lt;&lt;case &quot;blowjob&quot;&gt;&gt;She looks at your dick and licks her lips. &lt;&lt;msg $Mom &quot;Mmm! Looks delicious!&quot;&gt;&gt;
			&lt;&lt;case &quot;fuck&quot;&gt;&gt;Your Mom spreads her legs and looks at you. &lt;&lt;msg $Mom &quot;Come on &lt;&lt;yourname $Mom&gt;&gt;. I&#39;m ready.&quot;&gt;&gt;	
			&lt;&lt;case &quot;anal&quot;&gt;&gt;She looks a little nervous. &lt;&lt;msg $Mom &quot;I think I&#39;m ready. Put it in.&quot;&gt;&gt;	
			&lt;&lt;/switch&gt;&gt;
		&lt;&lt;case 2 3&gt;&gt;
			&lt;&lt;timepass 3&gt;&gt;
			&lt;&lt;switch $Mom.act&gt;&gt;
			&lt;&lt;case &quot;blowjob&quot;&gt;&gt;She happily licks up and down your cock. &lt;&lt;msg $Mom &quot;&lt;&lt;yourname $Mom&gt;&gt;, you taste so good.&quot;&gt;&gt;
			&lt;&lt;case &quot;fuck&quot;&gt;&gt;She moans as you enter her pussy. &lt;&lt;msg $Mom &quot;Oh yes! Fuck me!&quot;&gt;&gt;			
			&lt;&lt;case &quot;anal&quot;&gt;&gt;She groans a little as you fuck her. &lt;&lt;msg $Mom &quot;Ouch! Take it slow please&quot;&gt;&gt;
			&lt;&lt;/switch&gt;&gt;		
		&lt;&lt;case 4 5&gt;&gt;
			&lt;&lt;timepass 3&gt;&gt;
			&lt;&lt;switch $Mom.act&gt;&gt;
			&lt;&lt;case &quot;blowjob&quot;&gt;&gt;She takes your shaft into her mouth and massages your tip with her tongue while bopping her head up and down. &lt;&lt;msg $Mom &quot;Mmmmmhmmm!&quot;&gt;&gt;
			&lt;&lt;case &quot;fuck&quot;&gt;&gt;She matches your rythm, augmenting your thrusts with her body. &lt;&lt;msg $Mom &quot;Faster! Harder! Don&#39;t hold back, &lt;&lt;yourname $Mom&gt;&gt;!&quot;&gt;&gt;			
			&lt;&lt;case &quot;anal&quot;&gt;&gt;She begins to moan more and louder as the pain turns to pleasure. &lt;&lt;msg $Mom &quot;I&#39;m so full! This feels amazing.&quot;&gt;&gt;	
			&lt;&lt;/switch&gt;&gt;		
		&lt;&lt;case 6 7&gt;&gt;
			&lt;&lt;timepass 3&gt;&gt;
			&lt;&lt;switch $Mom.act&gt;&gt;
			&lt;&lt;case &quot;blowjob&quot;&gt;&gt;She takes a deep breath and forces herself down until her nose touches your body. Although she gags, she doesn&#39;t stop, upping the pressure and massaging you with her whole mouth.
				&lt;&lt;msg $Mom &quot;FUCK MY THROAT UNTIL I CUM!&quot;&gt;&gt;
			&lt;&lt;case &quot;fuck&quot;&gt;&gt;She wraps her legs around you, drawing you deeper into her writhing body. &lt;&lt;msg $Mom &quot;OH GOD! YES! YOU FEEL SOOO GOOD! I&#39;M CLOSE! FILL ME UP!&quot;&gt;&gt;	
			&lt;&lt;case &quot;anal&quot;&gt;&gt;She screams in pleasure as you plow her ass. &lt;&lt;msg $Mom &quot;COME ON! PUMP MY SLUTTY ASS FULL OF YOUR SPERM!&quot;&gt;&gt;			
			&lt;&lt;/switch&gt;&gt;	
		&lt;&lt;case 8&gt;&gt;
			&lt;&lt;timepass 10&gt;&gt;
			&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;momorgasm&gt;&gt;&lt;&lt;/dialog&gt;&gt;
			&lt;&lt;switch $Mom.act&gt;&gt;
			&lt;&lt;case &quot;blowjob&quot;&gt;&gt;She breathes hard, equally because of her powerful orgasm and the rough way you fucked her throat. 
				&lt;&lt;msg $Mom &quot;That felt amazing. I never knew a blowjob could feel that good. I might get addicted.&quot;&gt;&gt;
			&lt;&lt;case &quot;fuck&quot;&gt;&gt;The spasms that rocked her body while she was orgasming hard on your cock slowly subside. &lt;&lt;msg $Mom &quot;Do you ... want ... to go again, &lt;&lt;yourname $Mom&gt;&gt;?&quot;&gt;&gt;
			&lt;&lt;case &quot;anal&quot;&gt;&gt;She flops around on the floor, her now empty asshole gaping, begging for your cock. She takes some time to recover. &lt;&lt;msg $Mom &quot;Oh wow! Let&#39;s do that again sometimes.&quot;&gt;&gt;
			&lt;&lt;/switch&gt;&gt;	
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget sexmenuMom&gt;&gt;
	&lt;&lt;link &quot;Have her blow you&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Mom.act to &quot;blowjob&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;if $Mom.status gt 1&gt;&gt;&lt;&lt;link &quot;Fuck her pussy&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Mom.act to &quot;fuck&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Mom.status gt 2&gt;&gt;&lt;&lt;link &quot;Fuck her ass&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Mom.act to &quot;anal&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &quot;Stop fucking her&quot; $location.target&gt;&gt;&lt;&lt;set $sidemenu to true&gt;&gt;&lt;&lt;set $Mom.arousal to 0&gt;&gt;&lt;&lt;set $Mom.act to &quot;none&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget momsex&gt;&gt; /*args[0] is $Mom.act*/
	&lt;&lt;switch $args[0]&gt;&gt;&lt;&lt;case &quot;blowjob&quot;&gt;&gt;&lt;&lt;mombj&gt;&gt;&lt;&lt;case &quot;fuck&quot;&gt;&gt;&lt;&lt;momfuck&gt;&gt;&lt;&lt;case &quot;anal&quot;&gt;&gt;&lt;&lt;momanal&gt;&gt;&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
/*==================================================================*/
&lt;&lt;widget mombj&gt;&gt;
	&lt;&lt;xxxjpg &quot;Mom&quot; $location.id &quot;blowjob&quot;&gt;&gt; 
	&lt;&lt;if $Mom.bj is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;mombjfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Mom&quot; &quot;blowjob&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;momarousal&gt;&gt;&lt;br&gt;&lt;&lt;youarousal $Mom&gt;&gt;	
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget mombjfirst&gt;&gt;
	&lt;&lt;msg $You &quot;Mom, I need a blowjob!&quot;&gt;&gt;
	&lt;&lt;switch $Mom.status&gt;&gt;
		&lt;&lt;case 1&gt;&gt;
			&lt;&lt;msg $Mom &quot;We are family. We shouldn&#39;t do that.&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;It&#39;s only a blowjob and it would make me really happy.&quot;&gt;&gt;
			&lt;&lt;msg $Mom &quot;Well if it would make you happy, I guess I could. It&#39;s not like we are fucking, or anything.&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;It would help if you&#39;d get naked.&quot;&gt;&gt;
			&lt;&lt;msg $Mom &quot;If it helps.&quot;&gt;&gt;
			She quickly begins to undress, folding her clothes and putting them aside neatly.
			&lt;&lt;msg $Mom &quot;Lets get this over with.&quot;&gt;&gt;
			She drops to her knees in front of you.
		&lt;&lt;case 2&gt;&gt;
			&lt;&lt;msg $Mom &quot;A ... blowjob?&quot;&gt;&gt;
			You nod.
			&lt;&lt;msg $Mom &quot;You want me to get on my knees and suck your cock?&quot;&gt;&gt;
			You nod again.
			&lt;&lt;msg $Mom &quot;That&#39;s... That&#39;s soo hot!&quot;&gt;&gt;
			She shudders with anticipation.
			&lt;&lt;msg $You &quot;Get over here. And get naked first.&quot;&gt;&gt;
			Your Mom begins to rip her clothes off in a hurry to get to the task.
			&lt;&lt;msg $You &quot;Make it slow! And sexy!&quot;&gt;&gt;
			&lt;&lt;msg $Mom &quot;Sexy? Yesssss.&quot;&gt;&gt;
			She stops what she is doing and starts to dance, stripping out of her clothes. All the while she is running her hands up and down her body, massaging her breasts, pinching her nipples and rubbing up
			and down her thighs.
			&lt;&lt;msg $You &quot;Get your sexy ass over here.&quot;&gt;&gt;
			She smiles and saunters over to you. She kneels down, her hand already between her legs.
		&lt;&lt;case 3&gt;&gt;
			&lt;&lt;msg $Mom &quot;With pleasure, &lt;&lt;yourname $Mom&gt;&gt;.&quot;&gt;&gt;
			She sensually drops to the floor. With a purr she crawls over to you.
		&lt;&lt;default&gt;&gt;
			Status ist: $Mom.status
		&lt;&lt;/switch&gt;&gt;
		&lt;&lt;continueon&gt;&gt;
		&lt;&lt;set $Mom.bj to true&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget momfuck&gt;&gt;
	&lt;&lt;xxxjpg &quot;Mom&quot; $location.id &quot;fuck&quot;&gt;&gt;
	&lt;&lt;if $Mom.fuck is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;momfuckfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Mom&quot; &quot;fuck&quot;&gt;&gt;&lt;br&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;momarousal&gt;&gt;&lt;&lt;youarousal $Mom&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget momfuckfirst&gt;&gt;
	&lt;&lt;msg $You &quot;Mom I want to fuck you.&quot;&gt;&gt;
	&lt;&lt;switch $Mom.status&gt;&gt;
	&lt;&lt;case 2&gt;&gt;
		&lt;&lt;msg $Mom &quot;You want to do what?&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;I want to throw you down to the floor and ravage your pussy.&quot;&gt;&gt;
		&lt;&lt;msg $Mom &quot;Ohhhhh.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;I want you to get naked right now and spread your legs for me, like the slut you are.&quot;&gt;&gt;
		&lt;&lt;msg $Mom &quot;I&#39;m no slut!&quot;&gt;
		But she has already started to undress. Mom is barely able to control herself from arousal.
		&lt;&lt;msg $You &quot;Faster, you horny slut!&quot;&gt;&gt;
		&lt;&lt;msg $Mom &quot;Young man! That is no way to talk to your mother!&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Shut up!&quot;&gt;&gt;
		You grab her already half naked form and rip the rest of her clothes apart.
		&lt;&lt;msg $You &quot;Spread your legs!&quot;&gt;&gt;
		She complies.
		&lt;&lt;msg $Mom &quot;Oh god! I can&#39;t take it anymore. Fuck me already!&quot;&gt;&gt;
		&lt;&lt;set $Mom.fuck to true&gt;&gt;
	&lt;&lt;case 3&gt;&gt;
		She almost jumps with joy.
		&lt;&lt;msg $Mom &quot;With pleasure, &lt;&lt;yourname $Mom&gt;&gt;.&quot;&gt;&gt;
		Before you can even look she is already on the floor, presenting her already wet snatch to you.
		&lt;&lt;set $Mom.fuck to true&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
/*===================================================================*/
&lt;&lt;widget momanal&gt;&gt;
	&lt;&lt;xxxjpg &quot;Mom&quot; $location.id &quot;anal&quot;&gt;&gt;
	&lt;&lt;if $Mom.anal is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;momanalfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Mom&quot; &quot;anal&quot;&gt;&gt;&lt;br&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;momarousal&gt;&gt;&lt;br&gt;&lt;&lt;youarousal $Mom&gt;&gt;	
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget momanalfirst&gt;&gt;
	&lt;&lt;msg $You &quot;I&#39;ll fuck your ass today.&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;Of course &lt;&lt;yourname $Mom&gt;&gt;. I anticipated something like that and already cleaned it this morning.&quot;&gt;&gt;
	She spits on her hand and uses the saliva and some of her already dripping pussy juices to lubricate her asshole.
	&lt;&lt;msg $Mom &quot;I have never done that before. Please be gentle, &lt;&lt;yourname $Mom&gt;&gt;.&quot;&gt;&gt;
	She winks at you.
	&lt;&lt;msg $Mom &quot;Or don&#39;t. However you like.&quot;&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
	&lt;&lt;set $Mom.anal to true&gt;&gt;
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="20" name="PassageHeader" tags="nobr" position="25,1325" size="200,100">&lt;&lt;if $sidemenu is false&gt;&gt;
&lt;&lt;else&gt;&gt;
	@@#sidemenu;
	&lt;&lt;headspace&gt;&gt;
	&lt;&lt;if tags().includes(&quot;nomove&quot;)&gt;&gt;
	&lt;&lt;else&gt;&gt;
	&lt;div class=&quot;wrap-collabsible&quot;&gt;
  		&lt;input id=&quot;collapsible&quot; class=&quot;toggle&quot; type=&quot;checkbox&quot; checked&gt;
  		&lt;label for=&quot;collapsible&quot; class=&quot;lbl-toggle&quot;&gt;Move&lt;/label&gt;
  		&lt;div class=&quot;collapsible-content&quot;&gt;
    	&lt;div class=&quot;content-inner&quot;&gt;
      	&lt;p&gt;&lt;&lt;locationmove&gt;&gt;&lt;/p&gt;
    	&lt;/div&gt;
  		&lt;/div&gt;
	&lt;/div&gt;
	&lt;&lt;/if&gt;&gt;@@
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="21" name="media widgets" tags="widget nobr" position="2600,350" size="100,100">/*=====================================================================*/
&lt;&lt;widget locpic&gt;&gt; /*Example: &lt;&lt;locpic $Mom&gt;&gt;*/ 
	&lt;&lt;if def $args[1]&gt;&gt;&lt;&lt;set _location to $args[1].id&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set _location to $location.id&gt;&gt;&lt;&lt;/if&gt;&gt;	
	&lt;&lt;set _i to &quot;img/&quot;+ $args[0].id +&quot;/&quot;+_location+&quot;/&quot;+$args[0].status+&quot;.jpg&quot;&gt;&gt;@@#locpic;[img[_i]]@@
&lt;&lt;/widget&gt;&gt;
/*=====================================================================*/
/*Use the name of the Character (args[0]), the location (args[1])and the act (args[2]) to create the image path for the random sex picture of that person in that location.*/
/*Example: &lt;&lt;xxxjpg &quot;Mom&quot; &quot;Livingroom&quot; &quot;fuck&quot;&gt;&gt;*/
&lt;&lt;widget xxxjpg&gt;&gt;&lt;&lt;set $_r to random(1,5)&gt;&gt;&lt;&lt;set _i to &quot;img/&quot;+$args[0]+&quot;/&quot;+$args[1]+&quot;/&quot;+$args[2]+&quot;_&quot;+$_r+&quot;.jpg&quot;&gt;&gt;@@.sexpic;[img[_i]]@@&lt;&lt;/widget&gt;&gt; 

/*args(0) is the folder, args(1) is the filename*/
&lt;&lt;widget jpg&gt;&gt;&lt;&lt;set _i to &quot;img/&quot;+$args[0]+&quot;/&quot;+$args[1]+&quot;.jpg&quot;&gt;&gt;[img[_i]]&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget png&gt;&gt;&lt;&lt;set _i to &quot;img/&quot;+$args[0]+&quot;/&quot;+$args[1]+&quot;.png&quot;&gt;&gt;[img[_i]]&lt;&lt;/widget&gt;&gt;
/*=====================================================================*/
&lt;&lt;widget sexmp4&gt;&gt; /*args[0] is who, args[1] is what, */
/*Example: &lt;&lt;sexmp4 Mom anal&gt;&gt;*/
	&lt;&lt;set _ran to random (1,3)&gt;&gt;
	&lt;&lt;set _src to &quot;img/&quot;+$args[0]+&quot;/video/&quot;+$args[1]+&quot;_&quot;+_ran+&quot;.mp4&quot;&gt;&gt;
	&lt;br&gt;@@.video;&lt;&lt;= &#39;&lt;video src=&#39;+_src+&#39; autoplay loop&gt;&lt;/video&gt;&#39;&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*=====================================================================*/
&lt;&lt;widget mp4&gt;&gt; /*args[0] is who, args[1] is name of mp4*/
/*Example: &lt;&lt;mp4 Mom mom_surrender_blowjob&gt;&gt;*/
	&lt;&lt;set _src to &quot;img/&quot;+$args[0]+&quot;/video/&quot;+$args[1]+&quot;.mp4&quot;&gt;&gt;
	@@.video;&lt;&lt;= &#39;&lt;video src=&#39;+_src+&#39; autoplay loop&gt;&lt;/video&gt;&#39;&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*=====================================================================*/
&lt;&lt;widget gallery&gt;&gt;
&lt;&lt;set _help to $args[0].imageseen&gt;&gt;
&lt;&lt;set _help2 to $args[0].pictures[_help]&gt;&gt;
&lt;&lt;if $args[0].pictures.length is 1&gt;&gt;
  &lt;div id=&quot;gallerylink&quot;&gt;&lt;/div&gt;
  &lt;div id=&quot;gallerypic&quot;&gt;
    [img[_help2]]
  &lt;/div&gt;
&lt;&lt;else&gt;&gt;
  &lt;div id=&quot;gallerylink&quot;&gt;
	&lt;&lt;link &quot;Previous&quot;&gt;&gt;
		&lt;&lt;set $args[0].imageseen --&gt;&gt;
		&lt;&lt;replace &quot;#gallery&quot;&gt;&gt;
			&lt;&lt;if $args[0].imageseen lt 0&gt;&gt;&lt;&lt;set $args[0].imageseen to $args[0].pictures.length-1&gt;&gt;&lt;&lt;/if&gt;&gt;
		    &lt;&lt;gallery $args[0]&gt;&gt;
		&lt;&lt;/replace&gt;&gt;
	&lt;&lt;/link&gt;&gt;
    &lt;&lt;link &quot;Next&quot;&gt;&gt;
		&lt;&lt;set $args[0].imageseen ++&gt;&gt;
		&lt;&lt;replace &quot;#gallery&quot;&gt;&gt;
			&lt;&lt;if $args[0].imageseen gte $args[0].pictures.length&gt;&gt;&lt;&lt;set $args[0].imageseen to 0&gt;&gt;&lt;&lt;/if&gt;&gt;
		    &lt;&lt;gallery $args[0]&gt;&gt;
		&lt;&lt;/replace&gt;&gt;
	&lt;&lt;/link&gt;&gt;
  &lt;/div&gt;
  &lt;div id=&quot;gallerypic&quot;&gt;
  	[img[_help2]]
  &lt;/div&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="22" name="intro widgets" tags="widget nobr" position="150,250" size="100,100">
/*===============================================================*/
&lt;&lt;widget introreplace&gt;&gt;
Life sucks, if you live in a small town. The small town in question is called &lt;&lt;linkappend &quot;Springvale&quot;&gt;&gt;&lt;br&gt;&lt;&lt;jpg &quot;locations&quot; &quot;town&quot;&gt;&gt;&lt;br&gt;&lt;&lt;/linkappend&gt;&gt;
Aside from the local police station and a small shopping center there is nothing interesting here. It is very &lt;&lt;linkappend &quot;boring&quot;&gt;&gt;&lt;br&gt;&lt;&lt;jpg &quot;random&quot; &quot;boring&quot;&gt;&gt;&lt;br&gt;&lt;&lt;/linkappend&gt;&gt;.&lt;br&gt;&lt;br&gt;

A little light at the end of the tunnel and almost the only redeeming factor of living in this shithole are your friends $Jasmin.callname and $Henry.callname  
Although they are very different they are fun to hang out with and always try to cheer you up.&lt;br&gt;
But sadly you have to add to that a rather difficult personal situation, like a absent dad, a cheating (now ex) girlfriend, the bully she cheated on you with, a condecending older sister and a rather uncaring Mom. 
So in the end you got the recipe for an &quot;interesting&quot; story.&lt;br&gt;&lt;br&gt;

@@.infolink;&lt;&lt;link &quot;Customize the names of the characters&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39;&gt;&gt;
&lt;&lt;customize_names&gt;&gt;
@@.choice;&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;br&gt;

@@.choice;&lt;&lt;link &quot;Well, shall we begin?&quot; &quot;intro&quot;&gt;&gt;&lt;&lt;set $Mom.callsyou to $You.callname&gt;&gt;&lt;&lt;set $Jasmin.callsyou to $You.callname&gt;&gt;&lt;&lt;set $Lisa.callsyou to $You.callname&gt;&gt;&lt;&lt;set $location to $your_bedroom&gt;&gt;&lt;&lt;variablesetup&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;link &quot;Skip the intro&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;set $Mom.callsyou to $You.callname&gt;&gt;&lt;&lt;set $Jasmin.callsyou to $You.callname&gt;&gt;&lt;&lt;set $Lisa.callsyou to $You.callname&gt;&gt;&lt;&lt;variablesetup&gt;&gt;&lt;&lt;set $introseen to true&gt;&gt;&lt;&lt;set $location to $your_bedroom&gt;&gt;&lt;&lt;set $sidemenu to true&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===============================================================*/
&lt;&lt;widget introdream&gt;&gt;
&lt;&lt;mp4 &quot;random&quot; &quot;flyingdream&quot;&gt;&gt;&lt;br&gt;
You are soaring through the clouds, feeling the wind beneath your widespread arms. Birds fly past you and the sun is shining on your face. Everything is peaceful and quit. @@.choice;&lt;&lt;link &quot;But then...&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===============================================================*/
&lt;&lt;widget momintrodialog&gt;&gt;
&lt;&lt;msg $Mom &quot;&lt;big&gt;&lt;big&gt;&lt;big&gt;Wake up!&lt;/big&gt;&lt;/big&gt;&lt;/big&gt;&quot;&gt;&gt;
	Your Mom storms into your room, shouting angrily.
	&lt;&lt;msg $You &quot;What?&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;It&#39;s 8 o&#39;clock!&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;And?&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;I told you a week ago that you had to clean the whole house until yesterday.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;No you haven&#39;t!&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;I have! But it doesn&#39;t matter now. $Andrea.callname is coming over tonight. The house better be clean then or you can look for some other place to live for no rent.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;She is your daughter. Why don&#39;t you do it?&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;I have things to do that are more important. And since YOU don&#39;t have a job, you have time.&quot;&gt;&gt;
	She leaves and throws the door shut behind her.
	&lt;&lt;msg $Mom &quot;&lt;small&gt;Start with the kitchen!&lt;/small&gt;&quot;&gt;&gt;
	Is the next thing you here through the closed door.
	@@.choice;&lt;&lt;link &quot;Well, better start cleaning.&quot; &quot;intro&quot;&gt;&gt;&lt;&lt;set $location to $home_kitchen&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===============================================================*/
&lt;&lt;widget dirtykitchen&gt;&gt;
	&lt;&lt;jpg &quot;locations&quot; &quot;home_kitchen_dirty&quot;&gt;&gt;&lt;br&gt;
	Your mom is right. The kitchen is a mess. But you weren&#39;t the one to do it, so that just sucks. But like the good manservant you have to be (if you want to continue living in this house) you ...  @@.choice;&lt;&lt;link &quot;get to work.&quot; &quot;intro&quot;&gt;&gt;&lt;&lt;set $kitchenclean to true&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===============================================================*/
&lt;&lt;widget kitchencleaned&gt;&gt;
	&lt;&lt;jpg &quot;locations&quot; &quot;home_kitchen_clean&quot;&gt;&gt;&lt;br&gt;
	After many hours of cleaning you finally stand in front of a spotless kitchen.
	&lt;&lt;msg $You &quot;That took hours. I&#39;ll never be able to clean the house in time if I do it alone. I should get help.&quot;&gt;&gt;
	You could either call $Jasmin.callname or &lt;&lt;=$Henry.callname&gt;&gt;. Both might be willing to help you.
	
	@@.choice;&lt;&lt;link &#96;&quot;Call &quot;+ $Jasmin.callname&#96; &quot;intro&quot;&gt;&gt;&lt;&lt;set $cleaninghelp to $Jasmin.callname&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;link &#96;&quot;Call &quot;+$Henry.callname&#96; &quot;intro&quot;&gt;&gt;&lt;&lt;set $cleaninghelp to $Henry.callname&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===============================================================*/
&lt;&lt;widget cleaningtherest&gt;&gt;
You take out your phone and call &lt;&lt;= $cleaninghelp&gt;&gt;.
&lt;&lt;if $cleaninghelp is &quot;Jasmin&quot;&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;Hi &lt;&lt;yourname $Jasmin&gt;&gt;, what&#39;s up?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;I&#39;m in trouble! My mom decided I have until tonight to clean the whole goddamn place and I just won&#39;t make it. Can you help me?&quot;&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;Of course. I&#39;ll be over as soon as I can.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Thanks so much. I knew I could count on you.&quot;&gt;&gt;
	&lt;&lt;thought &quot;$Jasmin.callname is such a sweetheart. Always helpful, always happy and always kind.&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;msg $Henry &quot;Yo, nerd. What&#39;s going on?&quot;&gt;&gt;
	&lt;&lt;thought &quot;Ugh. $Henry.callname can be such a poser.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;You&#39;re the nerd. And I need your help.&quot;&gt;&gt;
	&lt;&lt;msg $Henry &quot;With what? Finding a job? I&#39;m sorry to tell you, but you are a hopeless case.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;No, idiot. I can do that myself. I need your help to clean this place or my mom will evict me.&quot;&gt;&gt;
	&lt;&lt;msg $Henry &quot;Ugh, that sucks. You can count on me. I&#39;ll be over in a sec.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Thanks man.&quot;&gt;&gt;
	&lt;&lt;msg $Henry &quot;&lt;big&gt;But&lt;/big&gt; you owe me.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Deal!&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
@@.choice;&lt;&lt;link &#39;Wait for $cleaninghelp&#39; &quot;intro&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===============================================================*/
&lt;&lt;widget getcleaning&gt;&gt;
&lt;&lt;set $location to $home_livingroom&gt;&gt;
You don&#39;t have to wait long. After a few minutes there is a knock on the door.
&lt;&lt;msg $You &quot;Come in. It&#39;s open.&quot;&gt;&gt;
The door opens and $cleaninghelp sneaks in.
&lt;&lt;if $cleaninghelp is &quot;Jasmin&quot;&gt;&gt;&lt;&lt;msg $Jasmin &quot;Hey &lt;&lt;yourname $Jasmin&gt;&gt;. Roll up your sleeves and lets get going.&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;msg $Henry &quot;Everything clear? Has the dragon left the cave?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;If by that you mean if my mother is around, yes, the dragon has left the cave.&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;msg $You &quot;We have to clean the bathroom and the livingroom. It&#39;d be fastest if we split up. I&#39;ll do the bathroom. For privacy reasons.&quot;&gt;&gt;
@@.choice; &lt;&lt;link &quot;Clean the bathroom&quot; &quot;intro&quot;&gt;&gt;&lt;&lt;set $hour += 2&gt;&gt;&lt;&lt;/link&gt;&gt;@@

&lt;&lt;/widget&gt;&gt;
/*===============================================================*/
&lt;&lt;widget aftercleaning&gt;&gt;
$cleaninghelp and you finished cleaning after many hours filled with the smell of cleaning products and complaining about unneccessary cleaning, because everything already was kinda clean. You meet up in the Livingroom.
&lt;&lt;msg $You &quot;Phew. Finally done. I&#39;m so glad you helped me. I couldn&#39;t have done it on my own.&quot;&gt;&gt;
&lt;&lt;if $cleaninghelp is &quot;Jasmin&quot;&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;No biggie. You&#39;d have done the same for me.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Of course. That&#39;s what friends are for.&quot;&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;But I better go now, before your mom comes back. She can be scary.&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;msg $Henry &quot;Now that thats done, I&#39;ll get outta here, before the dragon comes back.&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;

@@.choice;&lt;&lt;link &quot;Wait for Mom&quot; &quot;intro&quot;&gt;&gt;&lt;&lt;set $location to $home_livingroom&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===============================================================*/
&lt;&lt;widget momreturns&gt;&gt;
&lt;&lt;msg $Mom &quot;I&#39;m back! And the place better be clean!&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Everything done. It is clean now.&quot;&gt;&gt;
$Andrea.callname enters behind your mom.
&lt;&lt;msg $Andrea &quot;Hey, little bro. Still no job other than janitor for Mom?&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Better than beeing oggled by horny dudebros in the gym, wondering how much it costs to have you for the night.&quot;&gt;&gt;
&lt;&lt;msg $Mom &quot;&lt;big&gt;&lt;&lt;yourname $Mom&gt;&gt;!&lt;/big&gt; That&#39;s no way to talk to your sister. To your room with you.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;But I haven&#39;t eaten yet.&quot;&gt;&gt;
&lt;&lt;msg $Mom &quot;You can have the leftovers once we are finished.&quot;&gt;&gt;
She storms off, your sister in tow, into the kitchen.
$Andrea.callname turns around and laughs.
&lt;&lt;msg $Andrea &quot;Oh, by the way, somone left a package for you in front of the door. Maybe its the sexpuppet you ordered.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Ha ha. Very funny.&quot;&gt;&gt;
&lt;&lt;thought &quot;Ugh, I hate her. She is such a bitch.&quot;&gt;&gt;
&lt;&lt;msg $Mom &quot;No, really. You get that box off my frontporch or it gets thrown in the trash.&quot;&gt;&gt;

@@.choice; &lt;&lt;link &quot;Get the box&quot; &quot;intro&quot;&gt;&gt;&lt;&lt;set $location to $your_bedroom&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;link &quot;Bin it&quot; &quot;end&quot;&gt;&gt;&lt;&lt;set $end to &quot;binnedbox&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===============================================================*/
&lt;&lt;widget box&gt;&gt;
You take the box back to your room and let Mom and $Andrea.callname eat without you, because you 
&lt;ol type=&quot;a&quot;&gt;
&lt;li&gt;have no interest in the awkward and hostile discussion at the table&lt;/li&gt;
&lt;li&gt;are quite curious about the box&lt;/li&gt;
&lt;/ol&gt;
Finally you can get a better look at it.&lt;br&gt;
&lt;&lt;jpg &quot;random&quot; &quot;unclesbox&quot;&gt;&gt;&lt;br&gt;
@@.infolink;&lt;&lt;linkreplace &quot;Investigate the outside&quot;&gt;&gt;It is made from wood and adressed to you. There are some markings on it, that, although faded are still readable. You can decipher Miscatonic University on there and also something in a slavic looking script. You can&#39;t find anything indicating the sender. &lt;&lt;/linkreplace&gt;&gt;@@&lt;br&gt;
@@.choice;&lt;&lt;link &quot;Open it&quot; &quot;intro&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

/*===============================================================*/
&lt;&lt;widget boxcontent&gt;&gt;
Inside the box are two things. &lt;br&gt;
@@.infolink;&lt;&lt;linkappend &quot;An old book&quot;&gt;&gt;&lt;br&gt;&lt;&lt;jpg &quot;random&quot; &quot;thebook&quot;&gt;&gt;&lt;&lt;/linkappend&gt;&gt;@@ 
and a @@.infolink;&lt;&lt;linkappend &quot;sealed letter&quot;&gt;&gt;&lt;br&gt;&lt;&lt;png &quot;random&quot; &quot;letter&quot;&gt;&gt;&lt;&lt;/linkappend&gt;&gt;@@.
Stumped by the book you focus on the letter. It is adressed	to you personally and here you find a sender. It&#39;s from $Albert.callname, the brother of your missing father. The uncle, you&#39;ve rarely ever seen.
	@@.choice;&lt;&lt;link &quot;Read it.&quot; &quot;intro&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;&lt;&lt;letter&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===============================================================*/
&lt;&lt;widget boxclosed&gt;&gt;
	&lt;&lt;thought &quot;How odd. $Albert.callname never struck me as a crazy person.&quot;&gt;&gt;
	You yawn and put the letter down. 
	&lt;&lt;thought &quot;Damn, I&#39;m tired&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Go to sleep.&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;set $Mom.movecd to 0&gt;&gt;&lt;&lt;set $Mom.location to $kitchen&gt;&gt;&lt;&lt;set $sidemenu to true&gt;&gt;&lt;&lt;/link&gt;&gt;.@@
&lt;&lt;/widget&gt;&gt;
/*===============================================================*/
&lt;&lt;widget barbariandream&gt;&gt;
&lt;div id=&quot;journalpic&quot;&gt;&lt;&lt;jpg &quot;random&quot; &quot;barbariandream&quot;&gt;&gt;&lt;/div&gt;
You are a barbarian king, standing on mountain of your dead enemies. At your feet kneels a beautiful woman, submissively staring up to you with lust and love in her eyes.
&lt;&lt;thought &#39;Is... Is that Mom?&#39;&gt;&gt;
&lt;&lt;jpg &quot;Mom/Event&quot; &quot;barbariandream&quot;&gt;&gt;&lt;br&gt;
&lt;&lt;thought &#39;Yes. It is her. Why am I dreaming something like that about Mom?&#39;&gt;&gt;
No matter the reason, the image of your Mom at your feet, worshipping you is incredibly arousing. You know it is tabu, but that only seems to highten the eroticism. Maybe $Albert.callname is not crazy and it works. You have to try the spell. What could go wrong? 
&lt;&lt;thought &#39;I can hear mom making breakfast. That could be the opportunity.&#39;&gt;&gt;
@@.choice;&lt;&lt;link &quot;Continue&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;set $introseen to true&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="23" name="book widgets" tags="widget nobr" position="2725,600" size="100,100">&lt;&lt;widget contenttable&gt;&gt;
	&lt;&lt;if $book.tableofcontent is true&gt;&gt;
	You translated some of the content table. There are some sections of the book that seem interesting.
	@@.choice;
		&lt;&lt;link &quot;Spells&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;spells&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;About the author&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;aboutauthor&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Practical magic&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;appliedmagic&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Close the book&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
	&lt;&lt;else&gt;&gt;
		&lt;&lt;if $You.studyefficiency lte 3&gt;&gt;
			You can&#39;t make any sense of the confusing script that you see on the page. Thankfully your uncle has already done a lot of work and provided you with his notes. You just need to study them.
			@@.choice;&lt;&lt;link &quot;Study uncle Alberts notes&quot; &quot;desk&quot;&gt;&gt;&lt;&lt;timepass 240&gt;&gt;&lt;&lt;set $You.studyefficiency+=2&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39; true&gt;&gt;&lt;&lt;contenttable&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@	
		&lt;&lt;elseif $You.studyefficiency gt 3&gt;&gt;
			You learned all you could learn from uncle Alberts notes and now feel confident enough to slowly work through the book. It still takes a lot of time, but it is better than nothing.
			&lt;&lt;if $book.tableofcontent is false&gt;&gt;
				@@.choice;&lt;&lt;link &quot;Translate the table of contents&quot; &quot;desk&quot;&gt;&gt;&lt;&lt;timepass 60&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;contenttable&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;set $book.tableofcontent to true&gt;&gt;&lt;&lt;/link&gt;&gt;@@
			&lt;&lt;/if&gt;&gt;   
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt; 
&lt;&lt;/widget&gt;&gt;

/*===========================================================*/
&lt;&lt;widget aboutauthor&gt;&gt;
&lt;div id=&quot;aboutauthor&quot;&gt;
&lt;div id=&quot;aboutauthormenu&quot;&gt;
@@.choice;
&lt;&lt;if $book.chaptertranslated gt 0&gt;&gt;&lt;&lt;link &quot;Chapter 1&quot;&gt;&gt;&lt;&lt;replace &quot;#aboutauthortext&quot;&gt;&gt;&lt;&lt;aboutauthor_1&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;if $book.chaptertranslated gt 1&gt;&gt;&lt;&lt;link &quot;Chapter 2&quot;&gt;&gt;&lt;&lt;replace &quot;#aboutauthortext&quot;&gt;&gt;&lt;&lt;aboutauthor_2&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;if $book.chaptertranslated gt 2&gt;&gt;&lt;&lt;link &quot;Chapter 3&quot;&gt;&gt;&lt;&lt;replace &quot;#aboutauthortext&quot;&gt;&gt;&lt;&lt;aboutauthor_3&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;if $book.chaptertranslated gt 3&gt;&gt;&lt;&lt;link &quot;Chapter 4&quot;&gt;&gt;&lt;&lt;replace &quot;#aboutauthortext&quot;&gt;&gt;&lt;&lt;aboutauthor_4&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;if $book.chaptertranslated lt 4&gt;&gt;&lt;&lt;link &quot;Translate chapter&quot;&gt;&gt;&lt;&lt;set $book.chaptertranslated++&gt;&gt;&lt;&lt;timepass 240&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;aboutauthor&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;contenttable&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
@@
&lt;/div&gt;
&lt;div id=&quot;aboutauthortext&quot;&gt;
&lt;h1&gt;My Story&lt;/h1&gt;
&lt;h3&gt;by Olaus Wormius&lt;/h3&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;
/*===========================================================*/
&lt;&lt;widget aboutauthor_1&gt;&gt;
I am going to die in two years, seven days, three hours. The [visions/gods] told me so and I have no reason to deubt them for they have always been [right/true].&lt;br&gt;
The [kings/highpriests] men will find me and I will be on trial for what those [insignificant/worthless] insects in their [stupidity/close mindedness] perceive as [crimes/sins]. They will cut of my head, they will cut out my [heart/soul] and they will burn each part seperatly and hide the ashes all over the [land/world].&lt;br&gt;
And so I write this treatise filled with the [knowledge/secrets] of the [gods/ancients] I collected over thousands(?) of years.&lt;br&gt;
I do this not to brag, although I have all reason to, but to preserve my hard work and do live on in the text.&lt;br&gt;
My [hope/certainty] is that this book will get into the hands of someone as brilliant, as free from [moral/societys] restraints as me and willing to pursue the dream of the power only [ancient/forbidden] secrets can give.&lt;br&gt;
I have lived a life filled with slaves [loyal/devoted] to me and my pleasure. I have wielded political power without anyone knowing and I have layed with the most beautiful of women. Now you, if you are [willing/able] to grasp the [knowledge/secrets] presented to you by my spirit from beyond death, can live this life as well.
&lt;&lt;/widget&gt;&gt;
/*===========================================================*/
&lt;&lt;widget aboutauthor_2&gt;&gt;
I was born under [strange/glorious] circumstances. A solar eclipse pierced by a falling star heralded my arrival on this [miserable/leaderless] world. My mother died giving birth to me and my father soon fell in a raid of barbarians. A distant aunt took me in, but soon she realized my superior [intellect/understanding] and gave me to the priests. It was there, taht I first [came into contact/found] the [magical/divine] nature of this world.&lt;br&gt;
The temple library was full of [books/scrolls] praising the glory of the [gods/ancients]. Most of them were [boring/trivial] scribblings of simple minds, but precious few managed to capture my [curiosity/attention]. They told of forbidden magic, of forgotten gods and the power to [control/rule] the [mind/spirit] of the weak.&lt;br&gt;
I learned everything I could, then I left in search of [power/magic]. The head priest tried to [stop/capture] me, but to no avail. I struck the old fool down, mortally wounding him.&lt;br&gt;
Thus became the first, but certainly not last, who died for standing in my way.
&lt;&lt;/widget&gt;&gt;
/*===========================================================*/
&lt;&lt;widget aboutauthor_3&gt;&gt;
I travelled the [world/lands] far and wide, from the maze of Minos to the remnants of sunken Atlantis, from the mountains of madness to the ruins of lost Irem. I talked with oracles and shamans, wizards and sorcerers. I braved stormy seas and arid deserts. I survived where others perished. And finally I found what I was looking for. In old tombs, long forgotten even by time itself, I discovered tablets made from strange stone that contained all the knowledge, that I bequeath upon you. You who are destined to become the heir to my [power/spirit]. The stone tablets were too heavy to carry with me, so I sat there and [learned them/was learned by them]. For many years I [deciphered/translated] everything I could.
&lt;&lt;/widget&gt;&gt;
/*===========================================================*/
&lt;&lt;widget aboutauthor_4&gt;&gt;
I emerged from the tomb as a [new/changed] man. Where before I was merely a genius, I know [possessed/was possessed by] the power of a god! 
&lt;&lt;/widget&gt;&gt;
/*===========================================================*/
&lt;&lt;widget spells&gt;&gt;
	&lt;&lt;regoteresearch&gt;&gt;&lt;hr&gt;&lt;&lt;mutarisresearch&gt;&gt;&lt;hr&gt;/*&lt;&lt;segnitasresearch&gt;&gt;&lt;hr&gt;*/&lt;&lt;recreoresearch&gt;&gt;&lt;hr&gt;&lt;&lt;recuperoresearch&gt;&gt;&lt;hr&gt;
	@@.choice;&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;contenttable&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===========================================================*/
&lt;&lt;widget regoteresearch&gt;&gt;
	The Rego Te spell is the most basic spell that is written in the book. Uncle Albert has already done most of the basic translations, so you can easily use the spell.
	&lt;&lt;if $rego_te.level lte 10&gt;&gt;&lt;&lt;thought &quot;It seems there is more to learn about the spell. Mostly about how the Mana can be used more efficiently.&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $research.rego_te.progress gte $research.rego_te.difficulty&gt;&gt;&lt;&lt;set $rego_te.level++&gt;&gt;&lt;&lt;set $rego_te.manacost--&gt;&gt;&lt;&lt;set $research.rego_te.difficulty+=10&gt;&gt;&lt;&lt;set $research.rego_te.progress to 0&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $rego_te.level lte 10&gt;&gt;
	&lt;&lt;set _re to Math.trunc(($research.rego_te.progress/$research.rego_te.difficulty)*100)&gt;&gt;
	You are about &lt;&lt;= _re&gt;&gt;% done with your research about the Rego Te spell.&lt;br&gt;
	@@.choice;&lt;&lt;link &quot;Research the Rego Te spell&quot; &quot;desk&quot;&gt;&gt;&lt;&lt;set $research.rego_te.progress+=$You.studyefficiency&gt;&gt;&lt;&lt;timepass 240&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;spells&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;else&gt;&gt;You perfected your understanding of the Rego Te spell.&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===========================================================*/
&lt;&lt;widget mutarisresearch&gt;&gt;
	There is the description of a spell called Mutaris. It allows the sorcerer to use the mana already accumulated in the target to transform the target according to the sorcerers wishes. 
	The target has to be willing, but it doesn&#39;t matter if this willingnes is forced by the Rego Te spell or genuine.&lt;br&gt;
	&lt;&lt;if $research.mutaris.progress gte $research.mutaris.difficulty&gt;&gt;&lt;&lt;set $mutarisknown to true&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $mutarisknown is false&gt;&gt;
 		&lt;&lt;thought &quot;The spell seems difficult to learn and it might take me a long time.&quot;&gt;&gt;
		&lt;&lt;set _m to Math.trunc(($research.mutaris.progress/$research.mutaris.difficulty)*100)&gt;&gt;
		You are about &lt;&lt;= _m&gt;&gt;% done with the research of the Mutaris spell.&lt;br&gt;
		@@.choice;&lt;&lt;link &quot;Research the Mutaris spell&quot; &quot;desk&quot;&gt;&gt;&lt;&lt;set $research.mutaris.progress+=$You.studyefficiency&gt;&gt;&lt;&lt;timepass 240&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;spells&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;else&gt;&gt;You already learned the Mutaris spell.&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===========================================================*/
&lt;&lt;widget segnitasresearch&gt;&gt;
&lt;&lt;if $research.segnitas.progress gte $research.segnitas.difficulty&gt;&gt;&lt;&lt;set $segnitasknown to true&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $segnitasknown is false&gt;&gt;
		NOT IMPLEMENTED YET. NO FUNCTION IN GAME.
		&lt;br&gt;
		&lt;&lt;set _s to Math.trunc(($research.segnitas.progress/$research.segnitas.difficulty)*100)&gt;&gt;You are about &lt;&lt;= _s&gt;&gt;% done with the research of the Segnitas ritual.&lt;br&gt;
		@@.choice;&lt;&lt;link &quot;Research the Segnitas ritual&quot; &quot;desk&quot;&gt;&gt;&lt;&lt;set $research.segnitas.progress+=$You.studyefficiency&gt;&gt;&lt;&lt;timepass 240&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;spells&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;else&gt;&gt;You already learned the Segnitas ritual.&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===========================================================*/
&lt;&lt;widget recreoresearch&gt;&gt;
	There is the description of a spell called Recreo. It allows you to sacrifice your body for increased magical energy.&lt;br&gt;
	&lt;&lt;switch $recreo.level&gt;&gt;
		&lt;&lt;case 0&gt;&gt; &lt;&lt;thought &quot;It might be a really useful spell to learn.&quot;&gt;&gt;
		&lt;&lt;case 1 2 3 4 5&gt;&gt; &lt;&lt;thought &quot;My knowledge of the spell is still lackluster. It is very draining on my constitution for little gain in magical energy.&quot;&gt;&gt;
		&lt;&lt;case 6 7 8&gt;&gt; &lt;&lt;thought &quot;My research allowed me to improve the effect of the spell greatly. It now gives more magical energy than it drains stamina.&quot;&gt;&gt;
		&lt;&lt;case 9&gt;&gt; &lt;&lt;thought &quot;I have mastered the Recreo spell. The drain on m&lt; stamina is now minimal and the gain in energy is substantial.&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;if $recreo.level lt 10&gt;&gt;	
	&lt;&lt;if $research.recreo.progress gte $research.recreo.difficulty&gt;&gt;&lt;&lt;levelup $recreo&gt;&gt;&lt;&lt;set $research.recreo.progress to 0&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;set _r1 to Math.trunc(($research.recreo.progress/$research.recreo.difficulty)*100)&gt;&gt;
	You are about &lt;&lt;=_r1&gt;&gt;% done with &lt;&lt;if $recreo.level is 0&gt;&gt;researching the Recreo spell.&lt;&lt;else&gt;&gt;improving your understanding of the Recreo spell.&lt;&lt;/if&gt;&gt;
	&lt;br&gt;
	@@.choice;&lt;&lt;link &quot;Research the Recreo spell&quot; &quot;desk&quot;&gt;&gt;&lt;&lt;set $research.recreo.progress+=$You.studyefficiency&gt;&gt;&lt;&lt;timepass 60&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;spells&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===========================================================*/
&lt;&lt;widget recuperoresearch&gt;&gt;
There is the description of a spell called Recupero. It allows you to use the magical energy you command to replenish your stamina.&lt;br&gt;
	&lt;&lt;switch $recupero.level&gt;&gt;
		&lt;&lt;case 0&gt;&gt;&lt;&lt;thought &quot;This spell also sounds very useful.&quot;&gt;&gt;
		&lt;&lt;case 1 2 3 4 5&gt;&gt; &lt;&lt;thought &quot;My command of the spell is not great. It drains a lot of magical energy but restores only little stamina.&quot;&gt;&gt;
		&lt;&lt;case 6 7 8&gt;&gt; &lt;&lt;thought &quot;I got over the break even point. The Recupero spell now restores more stamina than it burns magical energy.&quot;&gt;&gt;
		&lt;&lt;case 9&gt;&gt; &lt;&lt;thought &quot;I have mastered the Recupero spell. I only need to expend minimal magical energy to gain a lot of stamina.&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;if $recupero.level lt 10&gt;&gt;
	&lt;&lt;if $research.recupero.progress gte $research.recupero.difficulty&gt;&gt;&lt;&lt;levelup $recupero&gt;&gt;&lt;&lt;set $research.recupero.progress to 0&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;set _r2 to Math.trunc(($research.recupero.progress/$research.recupero.difficulty)*100)&gt;&gt;
	You are about &lt;&lt;=_r2&gt;&gt;% done with&lt;&lt;if $recupero.level is 0&gt;&gt;researching the Recupero spell.	&lt;&lt;else&gt;&gt;improving your understanding of the Recupero spell.&lt;&lt;/if&gt;&gt;
	&lt;br&gt;
	@@.choice;&lt;&lt;link &quot;Research the Recupero spell&quot; &quot;desk&quot;&gt;&gt;&lt;&lt;set $research.recupero.progress+=$You.studyefficiency&gt;&gt;&lt;&lt;timepass 60&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;spells&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

/*===========================================================*/
&lt;&lt;widget appliedmagic&gt;&gt;
&lt;&lt;if $research.spellpower.progress gte $research.spellpower.difficulty&gt;&gt;&lt;&lt;set $You.spellpower ++&gt;&gt;&lt;&lt;set $research.spellpower.progress to 0&gt;&gt;&lt;&lt;set $research.spellpower.difficulty +=5&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;if $research.maxmana.progress gte $research.maxmana.difficulty&gt;&gt;&lt;&lt;set $You.maxmana ++&gt;&gt;&lt;&lt;set $research.maxmana.progress to 0&gt;&gt;&lt;&lt;set $research.maxmana.difficulty +=2&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;if $research.manaregen.progress gte $research.manaregen.difficulty&gt;&gt;&lt;&lt;set $You.manaregen ++&gt;&gt;&lt;&lt;set $research.manaregen.progress to 0&gt;&gt;&lt;&lt;set $research.manaregen.difficulty +=3&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;if $research.stamina.progress gte $research.stamina.difficulty&gt;&gt;&lt;&lt;set $You.stamina ++&gt;&gt;&lt;&lt;set $research.stamina.progress to 0&gt;&gt;&lt;&lt;set $research.stamina.difficulty +=3&gt;&gt;&lt;&lt;/if&gt;&gt;

	@@.choice;&lt;&lt;link &quot;Increase your spellpower&quot; &quot;desk&quot;&gt;&gt;&lt;&lt;set $research.spellpower.progress +=$You.studyefficiency&gt;&gt;&lt;&lt;timepass 240&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;appliedmagic&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;set _sp to Math.trunc(($research.spellpower.progress/$research.spellpower.difficulty)*100)&gt;&gt;
	You are about &lt;&lt;= _sp&gt;&gt;% done with the research to increase the power of your spells.
	&lt;hr&gt;
	&lt;&lt;link &quot;Increase your maximum mana&quot; &quot;desk&quot;&gt;&gt;&lt;&lt;set $research.maxmana.progress +=$You.studyefficiency&gt;&gt;&lt;&lt;timepass 240&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;appliedmagic&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;set _mm to Math.trunc(($research.maxmana.progress/$research.maxmana.difficulty)*100)&gt;&gt;
	You are about &lt;&lt;= _mm&gt;&gt;% done with the research to increase your ability to store magical energy.
	&lt;hr&gt;	
	&lt;&lt;link &quot;Increase your mana regeneration&quot; &quot;desk&quot;&gt;&gt;&lt;&lt;set $research.manaregen.progress +=$You.studyefficiency&gt;&gt;&lt;&lt;timepass 240&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;appliedmagic&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;set _mr to Math.trunc(($research.manaregen.progress/$research.manaregen.difficulty)*100)&gt;&gt;
	You are about &lt;&lt;= _mr&gt;&gt;% done with the research to increase the regeneration of your power.
	&lt;hr&gt;
	&lt;&lt;link &quot;Increase your stamina&quot; &quot;desk&quot;&gt;&gt;&lt;&lt;set $research.stamina.progress += $You.studyefficiency&gt;&gt;&lt;&lt;timepass 240&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;appliedmagic&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;set _st to Math.trunc(($research.stamina.progress/$research.stamina.difficulty)*100)&gt;&gt;
	You are about &lt;&lt;= _st&gt;&gt;% done with the research to increase your stamina.
&lt;br&gt;
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;research&#39;&gt;&gt;&lt;&lt;contenttable&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

</tw-passagedata><tw-passagedata pid="24" name="magic widgets" tags="widget nobr" position="2725,225" size="100,100">/*This widget opens the echantment dialog, sets the correct character as the target and checks if you have enough mana. If not, it fires the manalow widget&gt;&gt;*/
&lt;&lt;widget usemagic_on&gt;&gt;&lt;&lt;set $enslaved to $args[0]&gt;&gt;
&lt;&lt;if $You.mana lt $rego_te.manacost&gt;&gt;
	&lt;&lt;link &quot;Enchant&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;manalow&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;link &quot;Enchant&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;enchant&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;set $You.mana -= $rego_te.manacost&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget manalow&gt;&gt;Your magical energy is too drained. You can&#39;t access your magic power right now.&lt;br&gt; Try again later. &lt;br&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget manaregen&gt;&gt;&lt;&lt;if $You.mana lt $You.maxmana&gt;&gt;&lt;&lt;set $You.mana+= $args[0]&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;if $You.mana gte $You.maxmana&gt;&gt;&lt;&lt;set $You.mana to $You.maxmana&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;ui update&gt;&gt;&lt;&lt;/widget&gt;&gt;
/*==================================================================*/	
&lt;&lt;widget enslavedialog&gt;&gt;
&lt;&lt;switch $enslaved.id&gt;&gt;
&lt;&lt;case &quot;Mom&quot;&gt;&gt;
	&lt;&lt;switch $Mom.status&gt;&gt;
		&lt;&lt;case 0&gt;&gt;&lt;&lt;set $Mom.willpower *=5&gt;&gt;&lt;&lt;momenslavesub&gt;&gt;
		&lt;&lt;case 1&gt;&gt;&lt;&lt;set $Mom.willpower *=5&gt;&gt;&lt;&lt;momenslavehorny&gt;&gt;
		&lt;&lt;case 2&gt;&gt;&lt;&lt;set $Mom.willpower *=5&gt;&gt;&lt;&lt;momenslaveslave&gt;&gt;
		&lt;&lt;default&gt;&gt; ERROR IN STATUS COMPARISON (MOM)
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;case &quot;Jasmin&quot;&gt;&gt;
	&lt;&lt;switch $Jasmin.status&gt;&gt;
		&lt;&lt;case 0&gt;&gt;&lt;&lt;set $Jasmin.willpower *=4&gt;&gt;&lt;&lt;jasminenslavesub&gt;&gt;
		&lt;&lt;case 1&gt;&gt;&lt;&lt;set $Jasmin.willpower *=3&gt;&gt;&lt;&lt;jasminenslavehorny&gt;&gt;
		&lt;&lt;case 2&gt;&gt;&lt;&lt;set $Jasmin.willpower *=2&gt;&gt;&lt;&lt;jasminenslaveslave&gt;&gt;
		&lt;&lt;default&gt;&gt; ERROR IN STATUS COMPARISON (JASMIN)
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;case &quot;Henry&quot;&gt;&gt;
	&lt;&lt;switch $Henry.status&gt;&gt;
		&lt;&lt;case 0&gt;&gt;&lt;&lt;set $Henry.willpower *=5&gt;&gt;&lt;&lt;henryenslavesub&gt;&gt;
		&lt;&lt;case 1&gt;&gt;&lt;&lt;set $Henry.willpower *=5&gt;&gt;&lt;&lt;henryenslavehorny&gt;&gt;
		&lt;&lt;case 3&gt;&gt;&lt;&lt;set $Henry.willpower *=2&gt;&gt;&gt;&lt;&lt;henryenslaveslave&gt;&gt;
		&lt;&lt;default&gt;&gt; ERROR IN STATUS COMPARISON (HENRY)
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;case &quot;Lisa&quot;&gt;&gt;
	&lt;&lt;switch $Lisa.status&gt;&gt;
		&lt;&lt;case 1&gt;&gt;&lt;&lt;set $Lisa.willpower *=5&gt;&gt;&lt;&lt;lisaenslavesub&gt;&gt;
		&lt;&lt;case 2&gt;&gt;&lt;&lt;set $Lisa.willpower *=5&gt;&gt;&lt;&lt;lisaenslavehorny&gt;&gt;
		&lt;&lt;case 3&gt;&gt;&lt;&lt;set $Lisa.willpower *=5&gt;&gt;&lt;&lt;lisaenslaveslave&gt;&gt;
		&lt;&lt;default&gt;&gt; ERROR IN STATUS COMPARISON (LISA)
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;case &quot;Andrea&quot;&gt;&gt;
	&lt;&lt;switch $Andrea.status&gt;&gt;
		&lt;&lt;case 1&gt;&gt;&lt;&lt;set $Andrea.willpower *=5&gt;&gt;&lt;&lt;andreaenslavesub&gt;&gt;
		&lt;&lt;case 2&gt;&gt;&lt;&lt;set $Andrea.willpower *=5&gt;&gt;&lt;&lt;andreaenslavehorny&gt;&gt;
		&lt;&lt;case 3&gt;&gt;&lt;&lt;set $Andrea.willpower *=5&gt;&gt;&lt;&lt;andreaenslaveslave&gt;&gt;
		&lt;&lt;default&gt;&gt; ERROR IN STATUS COMPARISON (ANDREA)
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;case &quot;Brian&quot;&gt;&gt;
	&lt;&lt;switch $Brian.status&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;set $Brian.willpower *=5&gt;&gt;&lt;&lt;brianenslavehorny&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;set $Brian.willpower *=5&gt;&gt;&lt;&lt;brianenslaveslave&gt;&gt;
	&lt;&lt;default&gt;&gt; ERROR IN STATUS COMPARISON (BRIAN)
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;default&gt;&gt;EITHER NOT WRITTEN YET OR ERROR IN SETTING OF ENSLAVED NPC
&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget enchant&gt;&gt;
&lt;&lt;switch $enslaved.id&gt;&gt;
&lt;&lt;case &quot;Mom&quot;&gt;&gt;&lt;&lt;set $Mom.progress += $You.spellpower&gt;&gt;
&lt;&lt;case &quot;Jasmin&quot;&gt;&gt;&lt;&lt;set $Jasmin.progress += $You.spellpower&gt;&gt;
&lt;&lt;case &quot;Henry&quot;&gt;&gt;&lt;&lt;set $Henry.progress += $You.spellpower&gt;&gt;
&lt;&lt;case &quot;Brian&quot;&gt;&gt;&lt;&lt;set $Brian.progress += $You.spellpower&gt;&gt;
&lt;&lt;case &quot;Andrea&quot;&gt;&gt;&lt;&lt;set $Andrea.progress += $You.spellpower&gt;&gt;
&lt;&lt;case &quot;Lisa&quot;&gt;&gt;&lt;&lt;set $Lisa.progress += $You.spellpower&gt;&gt;
&lt;&lt;/switch&gt;&gt;
&lt;&lt;msg $You &quot;REGO TE!&quot;&gt;&gt;
&lt;&lt;if $enslaved.progress gte $enslaved.willpower&gt;&gt;&lt;&lt;enslavedialog $enslaved&gt;&gt;
&lt;&lt;else&gt;&gt;You focus your mana on &lt;&lt;= $enslaved.name&gt;&gt;s mind. The power of the spell crashes against the defensive layers of &lt;&lt;hisher $enslaved 1&gt;&gt; consciousness.&lt;&lt;msg $enslaved &quot;Huh?&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;hisher $enslaved 0&gt;&gt; eyes lose focus and &lt;&lt;heshe $enslaved 1&gt;&gt; stares into space. 
&lt;&lt;thought &quot;I should leave and let the mana work inside &lt;&lt;hisher $enslaved 1&gt;&gt; mind.&quot;&gt;&gt;
&lt;&lt;enchantment_end&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget enchantment_end&gt;&gt;
	@@.choice;
	&lt;&lt;switch $location.target&gt;&gt;
	&lt;&lt;case &quot;Home&quot;&gt;&gt;&lt;&lt;link &quot;Let the magic work&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;set $location to $your_bedroom&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;case &quot;Jasmins home&quot; &quot;Mall&quot;&gt;&gt;&lt;&lt;link &quot;Let the magic work&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $marlowe_street&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;case &quot;Henrys home&quot; &quot;Brians home&quot;&gt;&gt;&lt;&lt;link &quot;Let the magic work&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $baker_street&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;case &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;link &quot;Let the magic work&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $apartment_outside&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;case &quot;Bar&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;link &quot;Let the magic work&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $main_street&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget recreo&gt;&gt;
&lt;&lt;code &quot;_recreoeffect&quot;&gt;&gt;&lt;&lt;set $You.fatigue +=$recreo.cost&gt;&gt;&lt;&lt;set $You.mana+=$recreo.effect&gt;&gt;&lt;&lt;if $You.mana gt $You.maxmana&gt;&gt;&lt;&lt;set $You.mana to $You.maxmana&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;&#39; true&gt;&gt;You reached the limit of magical energy your body can contain.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;&#39; true&gt;&gt;&lt;&lt;recreo&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;ui update&gt;&gt;&lt;&lt;/code&gt;&gt;
&lt;&lt;if ($You.stamina - $You.fatigue) lt $recreo.cost&gt;&gt;	
	You are already too drained to use the spell.&lt;&lt;continueon&gt;&gt;
&lt;&lt;else&gt;&gt;
	Do you want to use the Recreo spell to regain $recreo.effect Mana for the cost of $recreo.cost Stamina?
	@@.choice;
	&lt;&lt;link &quot;Yes&quot;&gt;&gt;&lt;&lt;wiki _recreoeffect&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;No&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget recupero&gt;&gt;
&lt;&lt;code &quot;_recuperoeffect&quot;&gt;&gt;
	&lt;&lt;set $You.mana-=$recupero.cost&gt;&gt;&lt;&lt;set $You.fatigue -=$recupero.effect&gt;&gt;&lt;&lt;if $You.fatigue lt 0&gt;&gt;&lt;&lt;set $You.fatigue to 0&gt;&gt;
	&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;There is only so much magic can do. You feel as refreshed as you can.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;recupero&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;ui update&gt;&gt;&lt;&lt;/code&gt;&gt;
&lt;&lt;if $You.mana lt $recupero.cost&gt;&gt;
	You have to little magical energy to use the spell.&lt;&lt;continueon&gt;&gt;
&lt;&lt;else&gt;&gt;
	Do you want to use the Recupero spell to regain $recupero.effect Stamina by expending $recupero.cost Mana?
	@@.choice;
		&lt;&lt;link &quot;Yes&quot;&gt;&gt;&lt;&lt;wiki _recuperoeffect&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;No&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget levelup&gt;&gt; /*args[0] is spell*/
&lt;&lt;set $args[0].level++&gt;&gt;
&lt;&lt;switch $args[0].level&gt;&gt;
&lt;&lt;case 1&gt;&gt;&lt;&lt;set $args[0].effect++&gt;&gt;&lt;&lt;case 2&gt;&gt;&lt;&lt;set $args[0].cost--&gt;&gt;&lt;&lt;case 3&gt;&gt;&lt;&lt;set $args[0].effect++&gt;&gt;&lt;&lt;case 4&gt;&gt;&lt;&lt;set $args[0].cost--&gt;&gt;
&lt;&lt;case 5&gt;&gt;&lt;&lt;set $args[0].effect++&gt;&gt;&lt;&lt;case 6&gt;&gt;&lt;&lt;set $args[0].cost--&gt;&gt;&lt;&lt;case 7&gt;&gt;&lt;&lt;set $args[0].effect++&gt;&gt;&lt;&lt;case 8&gt;&gt;&lt;&lt;set $args[0].cost--&gt;&gt;
&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="25" name="HUD widgets" tags="widget nobr" position="2725,100" size="100,100">
/*==================================================================*/

/*==================================================================*/
/*This widget constructs the content of the right sidebar*/
&lt;&lt;widget headspace&gt;&gt;
	&lt;&lt;set $peoplepresent to 0&gt;&gt;
	&lt;&lt;peoplepresent&gt;&gt;
	&lt;div id=&quot;headspace&quot;&gt; 
	&lt;div id=&quot;headspaceheader&quot;&gt;&lt;h3&gt;People present:&lt;/h3&gt;&lt;/div&gt;
	&lt;div class=&quot;head&quot;&gt;&lt;&lt;if $faces is false&gt;&gt;You&lt;&lt;else&gt;&gt;[img[$You.facepic]]&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $recreo.level gte 1 or $recupero.level gte 1&gt;&gt; /*The interaction menu for you is only displayed when you know some relevant spells.*/
	&lt;&lt;message &quot;Spells&quot; &quot;You&quot;&gt;&gt;&lt;div class=&quot;interactioninner&quot;&gt;
	&lt;&lt;if $recreo.level gt 0&gt;&gt;&lt;&lt;link &quot;recreo&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;recreo&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $recupero.level gt 0&gt;&gt;&lt;&lt;link &quot;recupero&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;recupero&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;/div&gt;&lt;&lt;/message&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;/div&gt;
	&lt;&lt;for _i to 0; _i lt $npcs.length; _i++&gt;&gt;&lt;&lt;if $npcs[_i].location is $location.id&gt;&gt;&lt;&lt;interaction $npcs[_i]&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/for&gt;&gt; 
	&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
/*This widget checks how many characters are present at the current location.*/
&lt;&lt;widget peoplepresent&gt;&gt;&lt;&lt;for _i to 0; _i lt $npcs.length; _i++&gt;&gt;&lt;&lt;if $npcs[_i].location is $location.id&gt;&gt;&lt;&lt;set $peoplepresent++&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/for&gt;&gt;&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
/*This widget constructs the left sidebar with the statusbars and the menubuttons*/
&lt;&lt;widget leftmenu&gt;&gt; 
&lt;div id=&quot;leftmenu&quot;&gt; 
	&lt;&lt;set $propmana to $You.mana/$You.maxmana&gt;&gt;   
	&lt;div class=&quot;leftmenurow&quot;&gt;
		&lt;div class=&quot;leftmenupic&quot;&gt;[img[img/random/mana.png]]&lt;/div&gt;
		&lt;&lt;=&#39;&lt;div class=&quot;showfield&quot; id=&quot;showmana&quot; style=&quot;background: url(\&#39;img/random/progressbar.png\&#39;) no-repeat -&#39; + (168 - 168 * $propmana) +&#39;px 0px darkgray;&quot;&gt;&#39;+$You.mana+&#39; / &#39;+$You.maxmana + &#39; Mana&lt;/div&gt;&#39;&gt;&gt;
	&lt;/div&gt;
		&lt;div class=&quot;leftmenurow&quot;&gt;&lt;div class=&quot;leftmenupic&quot;&gt;[img[img/random/clock.png]]&lt;/div&gt;&lt;div class=&quot;showfield&quot;&gt;&lt;&lt;timestamp&gt;&gt;&lt;/div&gt;&lt;/div&gt;
		&lt;div class=&quot;leftmenurow&quot;&gt;&lt;div class=&quot;leftmenupic&quot;&gt;[img[img/random/calender.png]]&lt;/div&gt;&lt;div class=&quot;showfield&quot;&gt;&lt;&lt;date&gt;&gt;&lt;/div&gt;&lt;/div&gt;
		&lt;div class=&quot;leftmenurow&quot;&gt;&lt;div class=&quot;leftmenupic&quot;&gt;[img[img/random/dollar.png]]&lt;/div&gt;&lt;div class=&quot;showfield&quot;&gt;&lt;&lt;= $You.money + &quot; $&quot;&gt;&gt;&lt;/div&gt;&lt;/div&gt;
	&lt;&lt;set $propfatigue to $You.fatigue/$You.stamina&gt;&gt;   
	&lt;div class=&quot;leftmenurow&quot;&gt;
	&lt;div class=&quot;leftmenupic&quot;&gt;[img[img/random/stamina.png]]&lt;/div&gt;
	&lt;&lt;=&#39;&lt;div class=&quot;showfield&quot; id=&quot;showfatigue&quot; style=&quot;background: url(\&#39;img/random/progressbar.png\&#39;) no-repeat -&#39; + (168 - 168 * $propfatigue) +&#39;px 0px darkgray;&quot;&gt;&#39;+$You.fatigue+&#39; / &#39;+$You.stamina + &#39; Fatigue&lt;/div&gt;&#39;&gt;&gt;
	&lt;/div&gt;
	&lt;&lt;set $proparousal to $You.arousal/10&gt;&gt;   
	&lt;div class=&quot;leftmenurow&quot;&gt;
	&lt;div class=&quot;leftmenupic&quot;&gt;[img[img/random/arousal.png]]&lt;/div&gt;
	&lt;&lt;=&#39;&lt;div class=&quot;showfield&quot; id=&quot;showarousal&quot; style=&quot;background: url(\&#39;img/random/progressbar.png\&#39;) no-repeat -&#39; + (168 - 168 * $proparousal) +&#39;px 0px darkgray;&quot;&gt;&#39;+$You.arousal+&#39; / &#39;+10 + &#39; Arousal&lt;/div&gt;&#39;&gt;&gt;
	&lt;/div&gt;
		&lt;div class=&quot;leftmenurow&quot;&gt;
			&lt;div id=&quot;leftmenuphone&quot;&gt;[img[img/random/phone.png]]&lt;&lt;if $calls.number gt 0&gt;&gt;&lt;div id=&quot;phonenotification&quot;&gt;$calls.number&lt;/div&gt;&lt;&lt;/if&gt;&gt;&lt;/div&gt;
			&lt;div id=&quot;leftmenujournal&quot;&gt;[img[img/random/journal.png]]&lt;/div&gt;
			&lt;div id=&quot;leftmenuinventory&quot;&gt;[img[img/random/inventory.png]]&lt;/div&gt;
			&lt;div id=&quot;leftmenumap&quot;&gt;[img[img/random/map.png]]&lt;/div&gt;
			&lt;&lt;if $moveshortcut&gt;&gt;&lt;div id=&quot;leftmenumove&quot;&gt;[img[img/random/movemenu.png]]&lt;/div&gt;&lt;&lt;/if&gt;&gt;			
		&lt;/div&gt;	


	&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
/*This widget constructs the move section in the right sidebar. It is also used to activate widgets when no one is at home when you visit them or when the location is locked.*/
&lt;&lt;widget locationmove&gt;&gt;
&lt;&lt;link &quot;Wait 30 min&quot; $location.target&gt;&gt;&lt;&lt;timepass 30&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;hr&gt;
&lt;&lt;switch $location.id&gt;&gt;
&lt;&lt;case &quot;Hallway&quot;&gt;&gt;
	&lt;&lt;move $home_kitchen 1&gt;&gt;
	&lt;&lt;move $home_livingroom 1&gt;&gt;
	&lt;&lt;if $Mom.location is &quot;Bathroom&quot;&gt;&gt;&lt;&lt;link &quot;Bathroom&quot;&gt;&gt;&lt;&lt;dialog &quot;&quot; &quot;event&quot; true&gt;&gt;&lt;&lt;mombathroomoccupied&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;move $home_bathroom 1&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;move $your_bedroom 1&gt;&gt;
	&lt;&lt;if $Mom.location is &quot;Moms bedroom&quot;&gt;&gt;&lt;&lt;link &quot;Moms bedroom&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mombedroomoccupied&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;move $moms_bedroom 1&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;move $home_attic 1&gt;&gt;&lt;hr&gt;
	&lt;&lt;link &quot;Go outside&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to  $marlowe_street&gt;&gt;&lt;&lt;timepass 5&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;case &quot;Kitchen&quot; &quot;Livingroom&quot; &quot;Bathroom&quot; &quot;Your bedroom&quot; &quot;Moms bedroom&quot; &quot;Attic&quot;&gt;&gt;
	&lt;&lt;move $home_hallway 1&gt;&gt;
&lt;&lt;case &quot;Marlowe Street&quot;&gt;&gt;
	&lt;&lt;set _jsmhm to $Jasmin.callname + &quot;s home&quot;&gt;&gt;
	&lt;&lt;link &quot;Your home&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;set $location to $home_hallway&gt;&gt;&lt;&lt;timepass 5&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;if $Jasmin.location isnot &quot;Jasmins livingroom&quot;&gt;&gt;&lt;&lt;link _jsmhm&gt;&gt;&lt;&lt;dialog &quot;&quot; &quot;event&quot; true&gt;&gt; &lt;&lt;jasminisnothome&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;else&gt;&gt;&lt;&lt;link _jsmhm &quot;Jasmins home&quot;&gt;&gt;&lt;&lt;set $location to $jasmins_livingroom&gt;&gt;&lt;&lt;timepass 5&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;hr&gt;
	&lt;&lt;move $apartment_outside 10&gt;&gt; 	
	&lt;&lt;move $baker_street 10&gt;&gt;
	&lt;&lt;move $main_street 15&gt;&gt;
&lt;&lt;case &quot;Jasmins livingroom&quot;&gt;&gt;
	&lt;&lt;if $Jasmin.location is &quot;Jasmins livingroom&quot;&gt;&gt;&lt;&lt;link $jasmins_bedroom.name&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;&lt;&lt;jasminbedroomthere&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;elseif $Jasmin.location is &quot;Jasmins bedroom&quot;&gt;&gt;&lt;&lt;link $jasmins_bedroom.name&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;&lt;&lt;jasminbedroomin&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;else&gt;&gt;&lt;&lt;link $jasmins_bedroom.name &quot;Jasmins home&quot;&gt;&gt;&lt;&lt;set $location to $jasmins_bedroom&gt;&gt;&lt;&lt;timepass 1&gt;&gt;&lt;&lt;link&gt;&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;link &quot;Go outside&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $marlowe_street&gt;&gt;&lt;&lt;timepass 5&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;case &quot;Jasmins bedroom&quot;&gt;&gt;&lt;&lt;link $jasmins_livingroom.name &quot;Jasmins home&quot;&gt;&gt;&lt;&lt;set $location to $jasmins_livingroom&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;case &quot;Baker Street&quot;&gt;&gt;
	&lt;&lt;if $Henry.location is &quot;Henrys home&quot; or $keys[2].owned&gt;&gt;&lt;&lt;move $henrys_home 5&gt;&gt;
	&lt;&lt;else&gt;&gt;&lt;&lt;link $henrys_home.name&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;henrynothome&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;if $Brian.location is &quot;Brians home&quot; or $keys[6].owned&gt;&gt;&lt;&lt;move $brians_home 5&gt;&gt;
	&lt;&lt;else&gt;&gt;&lt;&lt;link $brians_home.name&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;briannothome&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;hr&gt;
	&lt;&lt;move $mall 15&gt;&gt;&lt;&lt;move $marlowe_street 10&gt;&gt;
&lt;&lt;case &quot;Henrys home&quot; &quot;Brians home&quot;&gt;&gt;&lt;&lt;link &quot;Go outside&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $baker_street&gt;&gt;&lt;&lt;timepass 5&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;case &quot;Apt. building&quot;&gt;&gt;&lt;&lt;move $marlowe_street 10&gt;&gt;
&lt;&lt;case &quot;Foyer&quot;&gt;&gt;
	&lt;&lt;if $Lisa.location is &quot;Lisas apt&quot;&gt;&gt;
		&lt;&lt;if $Lisa.status is 0&gt;&gt;&lt;&lt;link &quot;Lisas apt&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;lisahomeangry&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt; 
		&lt;&lt;else&gt;&gt;&lt;&lt;move $lisas_apartment 5&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;elseif not $keys[3].owned&gt;&gt;&lt;&lt;link &quot;Lisas apt&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;lisanothome&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;else&gt;&gt;&lt;&lt;link $lisas_apartment.name &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $lisas_apartment&gt;&gt;&lt;&lt;/link&gt;&gt; 
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Mom.location is &quot;Andreas apt&quot; and $Andrea.location is &quot;Andreas apt&quot;&gt;&gt;
		&lt;&lt;link $andreas_apartment.name&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;momatandreas&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;elseif $Andrea.location is &quot;Andreas apt&quot;&gt;&gt;
		&lt;&lt;if $Andrea.status is 0&gt;&gt;&lt;&lt;link $andreas_apartment.name&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;andreahomeangry&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;else&gt;&gt;&lt;&lt;move $andreas_apartment 5&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;elseif not $keys[4].owned&gt;&gt;&lt;&lt;link $andreas_apartment.name&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;andreanothome&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;else&gt;&gt;&lt;&lt;link $andreas_apartment.name &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $andreas_apartment&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;hr&gt;
	&lt;&lt;link &quot;Go outside&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $apartment_outside&gt;&gt;&lt;&lt;timepass 3&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;case &quot;Lisas apt&quot; &quot;Andreas apt&quot;&gt;&gt;&lt;&lt;move $apartment_foyer 5&gt;&gt;
&lt;&lt;case &quot;Springvale Mall&quot;&gt;&gt;&lt;&lt;move $gym 5&gt;&gt;&lt;&lt;move $cafe 5&gt;&gt;&lt;&lt;move $bookstore 5&gt;&gt;&lt;&lt;move $sexshop 5&gt;&gt;&lt;hr&gt;&lt;&lt;move $baker_street 15&gt;&gt;
&lt;&lt;case &quot;Gym&quot; &quot;Bookstore&quot; &quot;Sexshop&quot;&gt;&gt;&lt;&lt;link &quot;Exit&quot; &quot;Mall&quot;&gt;&gt;&lt;&lt;set $location to $mall&gt;&gt;&lt;&lt;timepass 5&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;case &quot;Cafe&quot;&gt;&gt;&lt;&lt;move $cafe_office 1&gt;&gt;&lt;&lt;link &quot;Exit&quot; &quot;Mall&quot;&gt;&gt;&lt;&lt;set $location to $mall&gt;&gt;&lt;&lt;timepass 5&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;case &quot;Cafe Office&quot;&gt;&gt;&lt;&lt;link &quot;Exit&quot; &quot;Mall&quot;&gt;&gt;&lt;&lt;set $location to $cafe&gt;&gt;&lt;&lt;timepass 1&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;case &quot;Main Street&quot;&gt;&gt;
	&lt;&lt;if $hour lte 19&gt;&gt;&lt;&lt;link &quot;Joes Tavern&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;barisclosed&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;else&gt;&gt;&lt;&lt;move $bar 5&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;hr&gt;&lt;&lt;move $marlowe_street 15&gt;&gt;&lt;&lt;move $back_street 10&gt;&gt;
&lt;&lt;case &quot;Back Streets&quot;&gt;&gt;&lt;&lt;move $main_street 10&gt;&gt;
&lt;&lt;case &quot;Joes Tavern&quot;&gt;&gt;&lt;&lt;link &quot;Exit&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $main_street&gt;&gt;&lt;&lt;timepass 5&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget options&gt;&gt;
	@@.choice;
	&lt;&lt;if $faces is true&gt;&gt;&lt;&lt;link &quot;Disable face pictures in sidebar&quot; $location.target&gt;&gt;&lt;&lt;set $faces to false&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;options&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;else&gt;&gt;&lt;&lt;link &quot;Enable face pictures in sidebar&quot; $location.target&gt;&gt;&lt;&lt;set $faces to true&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;options&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;hr&gt;
	&lt;&lt;link &quot;Cheats&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;cheats&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;hr&gt;
	&lt;&lt;link &quot;Force sidemenu to appear&quot; $location.target&gt;&gt;&lt;&lt;set $sidemenu to true&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;options&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;hr&gt;
	&lt;&lt;if not $moveshortcut&gt;&gt;&lt;&lt;link &quot;Show shortcut to movemenu in the sidebar&quot; $location.target&gt;&gt;&lt;&lt;set $moveshortcut to true&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;options&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;else&gt;&gt;&lt;&lt;link &quot;Hide shortcut to move menu in the sidebar&quot; $location.target&gt;&gt;&lt;&lt;set $moveshortcut to false&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;options&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;hr&gt;
	&lt;&lt;link &quot;Stats (mainly for debugging)&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;statscheck&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;hr&gt;
	&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget travelmap&gt;&gt;
&lt;&lt;if $location.target is not &quot;Mall&quot;&gt;&gt;
	&lt;&lt;link &quot;Mall&quot; &quot;Mall&quot;&gt;&gt;&lt;&lt;set $location to $mall&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;ul&gt;
		&lt;li&gt;Cafe&lt;/li&gt;
		&lt;li&gt;Gym&lt;/li&gt;
		&lt;li&gt;Bookstore&lt;/li&gt;
		&lt;li&gt;Sex Shop&lt;/li&gt;
	&lt;/ul&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $location.target is not &quot;Apartment complex&quot;&gt;&gt;
	&lt;&lt;link &quot;Apartment complex&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $apartment_outside&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;ul&gt;
		&lt;li&gt;
			&lt;&lt;if $keys[4].owned and $keys[5].owned&gt;&gt;
				&lt;&lt;link &#96;$Andrea.callname+&quot;s apartment&quot;&#96; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $andreas_apartment&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;=$Andrea.callname&gt;&gt;s apartment
			&lt;&lt;/if&gt;&gt;
		&lt;/li&gt;
		&lt;li&gt;
			&lt;&lt;if $keys[3].owned and $keys[5].owned&gt;&gt;
				&lt;&lt;link &#96;$Lisa.callname+&quot;s apartment&quot;&#96; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $lisas_apartment&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;= $Lisa.callname&gt;&gt;s apartment
			&lt;&lt;/if&gt;&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $location.name is not &quot;Marlowe Street&quot;&gt;&gt;
	&lt;&lt;link &quot;Marlowe Street&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $marlowe_street&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;ul&gt;
		&lt;&lt;if $location.target is not &quot;Home&quot;&gt;&gt;&lt;li&gt;&lt;&lt;link &quot;Your home&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;set $location to $home_hallway&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/li&gt;&lt;&lt;/if&gt;&gt;
		&lt;li&gt;&lt;&lt;if $keys[1].owned&gt;&gt;&lt;&lt;link &#96;$Jasmin.callname+&quot;s home&quot;&#96; &quot;Jasmins home&quot;&gt;&gt;&lt;&lt;set $location to $jasmins_livingroom&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;= $Jasmin.callname&gt;&gt;s home&lt;&lt;/if&gt;&gt;&lt;/li&gt;
	&lt;/ul&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $location.name is not &quot;Baker Street&quot;&gt;&gt;
	&lt;&lt;link &quot;Baker Street&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $baker_street&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;ul&gt;
		&lt;li&gt;&lt;&lt;if $keys[6].owned&gt;&gt;&lt;&lt;link &#96;$Brian.callname+&quot;s home&quot;&#96; &quot;Brians home&quot;&gt;&gt;&lt;&lt;set $location to $brians_home&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;= $Brian.callname&gt;&gt;s home&lt;&lt;/if&gt;&gt;&lt;/li&gt;
		&lt;li&gt;&lt;&lt;if $keys[2].owned&gt;&gt;&lt;&lt;link &#96;$Henry.callname+&quot;s home&quot;&#96; &quot;Henrys home&quot;&gt;&gt;&lt;&lt;set $location to $henrys_home&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;= $Henry.callname&gt;&gt;s home&lt;&lt;/if&gt;&gt;&lt;/li&gt;
	&lt;/ul&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $location.name is not &quot;Main Street&quot;&gt;&gt;
	&lt;&lt;link &quot;Main Street&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $main_street&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;ul&gt;
		&lt;li&gt;Joes Tavern&lt;/li&gt;
	&lt;/ul&gt;
&lt;&lt;/if&gt;&gt;
@@.choice;&lt;&lt;link &quot;Close Map&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@

&lt;&lt;/widget&gt;&gt;




</tw-passagedata><tw-passagedata pid="26" name="Sex widgets" tags="widget nobr" position="2600,225" size="100,100">/*==================================================================*/
/*This widget counts up your fatigue and arousal with every step. It also controls who your orgasm will hit. It also outputs some generic indicator how close to orgasm you are.*/
&lt;&lt;widget youarousal&gt;&gt; /*args[0] is with whom*/
	&lt;&lt;set $orgasm to $args[0]&gt;&gt;
	&lt;&lt;set $You.arousal++&gt;&gt;
	&lt;&lt;if $Lisa.event is &quot;lisasubmissivefirst&quot;&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set $You.fatigue++&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $You.arousal gte 10&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;orgasm $orgasm&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
/*This widget controls the orgasm menu and which options you have to cum on/into. $orgasm is the npcs that gets send over from the youarousal widget.*/
&lt;&lt;widget orgasm&gt;&gt; 
	You have an orgasm.
		@@.choice;
		&lt;&lt;link &quot;Cum on her face&quot;&gt;&gt;&lt;&lt;dialog &#39;Cumshot&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;cumshot $orgasm&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
		&lt;&lt;if $orgasm.id is &quot;Brian&quot;&gt;&gt;
			&lt;&lt;if $orgasm.act is &quot;boundpussy&quot; or $orgasm.act is &quot;boundanal&quot;&gt;&gt;&lt;&lt;link &quot;Cum inside her pussy&quot;&gt;&gt;&lt;&lt;dialog &#39;Creampie&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;creampie $orgasm&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;
			&lt;&lt;if $orgasm.act is &quot;boundanal&quot; or $orgasm.act is &quot;analtraining&quot;&gt;&gt;&lt;&lt;link &quot;Cum inside her ass&quot;&gt;&gt;&lt;&lt;dialog &#39;Anal creampie&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;analcreampie $orgasm&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;if $orgasm.status gte 2 and $orgasm.act isnot &quot;blowjob&quot;&gt;&gt;&lt;&lt;link &quot;Cum inside her pussy&quot;&gt;&gt;&lt;&lt;dialog &#39;Creampie&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;creampie $orgasm&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;
			&lt;&lt;if $orgasm.status is 3 and $orgasm.act isnot &quot;blowjob&quot;&gt;&gt;&lt;&lt;link &quot;Cum inside her ass&quot;&gt;&gt;&lt;&lt;dialog &#39;Anal creampie&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;analcreampie $orgasm&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		@@
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
/*These widgets control the result of your ejaculation. It also adjusts for transformed characters.*/
&lt;&lt;widget cumshot&gt;&gt;
		&lt;&lt;set $You.arousal to 0&gt;&gt;&lt;&lt;set $You.fatigue ++&gt;&gt;&lt;&lt;set $orgasm to &quot;none&quot;&gt;&gt;
		&lt;&lt;if $args[0].status is 1&gt;&gt;&lt;&lt;msg $args[0] &quot;Be careful, my eyes!&quot;&gt;&gt;
		&lt;&lt;else&gt;&gt;&lt;&lt;msg $args[0] &quot;I WANT TO FEEL YOU ON MY FACE! PAINT ME!&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;sexmp4 $args[0].id &quot;cumshot&quot;&gt;&gt;&lt;br&gt;&lt;&lt;ui update&gt;&gt;
		&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget creampie&gt;&gt;
		&lt;&lt;set $You.arousal to 0&gt;&gt;&lt;&lt;set $You.fatigue ++&gt;&gt;&lt;&lt;set $orgasm to &quot;none&quot;&gt;&gt;
		You ram your cock deep inside her and squirt your seed into her welcoming pussy.
		&lt;&lt;msg $args[0] &quot;OH GOD! CUM INSIDE ME! BREED ME!&quot;&gt;&gt;
		&lt;&lt;sexmp4 $args[0].id &quot;creampie&quot;&gt;&gt;&lt;br&gt;&lt;&lt;ui update&gt;&gt;
		&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget analcreampie&gt;&gt;
		&lt;&lt;set $You.arousal to 0&gt;&gt;&lt;&lt;set $You.fatigue ++&gt;&gt;&lt;&lt;set $orgasm to &quot;none&quot;&gt;&gt;
		You pull your cock back ,almost out of her, but then you push with a lot of force and bury it completely inside her ass. 
		&lt;&lt;msg $args[0] &quot;YES! CUM IN MY ASS!&quot;&gt;&gt;		
		&lt;&lt;sexmp4 $args[0].id &quot;anal_creampie&quot;&gt;&gt;&lt;br&gt;&lt;&lt;ui update&gt;&gt;
		&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*====================================================================*/
/*This widget controls your fatigue and ends the encounter when you run out.*/
&lt;&lt;widget fatigued&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&quot;You are out of stamina for now and decide to end it right here and now.
		@@.choice;&lt;&lt;link &quot;Continue&quot; $location.target&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
		&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;set $sidemenu to true&gt;&gt;
		&lt;&lt;for _i to 0; _i lt $npcs.length; _i++&gt;&gt;&lt;&lt;set $npcs[_i].act to &quot;none&quot;&gt;&gt;&lt;&lt;set $npcs[_i].arousal to 0&gt;&gt;&lt;&lt;/for&gt;&gt;			
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="27" name="Home" tags="nobr" position="400,0" size="200,100">&lt;&lt;switch $location.name&gt;&gt;
&lt;&lt;case &quot;Livingroom&quot;&gt;&gt;&lt;&lt;home_livingroom&gt;&gt;
&lt;&lt;case &quot;Kitchen&quot;&gt;&gt;&lt;&lt;kitchen&gt;&gt;
&lt;&lt;case &quot;Your bedroom&quot;&gt;&gt;&lt;&lt;your_bedroom&gt;&gt;
&lt;&lt;case &quot;Bathroom&quot;&gt;&gt;&lt;&lt;bathroom&gt;&gt;
&lt;&lt;case &quot;Moms bedroom&quot;&gt;&gt;&lt;&lt;mom_bedroom&gt;&gt;
&lt;&lt;case &quot;Hallway&quot;&gt;&gt;&lt;&lt;hallway&gt;&gt;
&lt;&lt;case &quot;Attic&quot;&gt;&gt;&lt;&lt;home_attic&gt;&gt;
&lt;&lt;default&gt;&gt;Error, no location set (Home) Location is: $location.name
&lt;&lt;/switch&gt;&gt;
</tw-passagedata><tw-passagedata pid="28" name="livingroom attic hallway kitchen widgets" tags="widget nobr" position="625,0" size="100,100">&lt;&lt;widget hallway&gt;&gt;
	&lt;&lt;if $Mom.event is &quot;apology&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_apology&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;elseif $Mom.event is &quot;surrender&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_surrender&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;elseif $Mom.event is &quot;mommasturbation&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_masturbation&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;elseif $Mom.event is &quot;momhornyfirst&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_horny_first&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;jpg &quot;locations&quot; &quot;home_hallway&quot;&gt;&gt;&lt;br&gt;
	You are standing in the hallway.&lt;br&gt;
	&lt;&lt;hallwaythoughts&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==============================================================*/
&lt;&lt;widget hallwaythoughts&gt;&gt; 
	&lt;&lt;switch $Mom.location&gt;&gt;&lt;&lt;case &quot;Livingroom&quot; &quot;Kitchen&quot; &quot;Hallway&quot; &quot;Bathroom&quot; &quot;Moms bedroom&quot; &quot;Your bedroom&quot;&gt;&gt;&lt;&lt;set _at to &quot;home&quot;&gt;&gt;&lt;&lt;case &quot;Springvale Mall&quot; &quot;Gym&quot; &quot;Andreas apt&quot;&gt;&gt;&lt;&lt;set _at to &quot;out&quot;&gt;&gt;&lt;&lt;/switch&gt;&gt;
	&lt;&lt;if $Mom.status gt 0&gt;&gt;&lt;&lt;set _j to &quot;, again&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Mom.location is &quot;Moms bedroom&quot;&gt;&gt;&lt;&lt;set _i to &quot;her bedroom&quot;&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set _i to (&quot;the &quot; + $Mom.location)&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Mom.status lt 3&gt;&gt;
		&lt;&lt;switch _at&gt;&gt;
		&lt;&lt;case &quot;home&quot;&gt;&gt;&lt;&lt;thought &quot;I can hear Mom in _i. That might be the chance to use the spell on her&quot; + _j + &quot;.&quot;&gt;&gt;
		&lt;&lt;case &quot;out&quot;&gt;&gt;&lt;&lt;thought &quot;I can&#39;t hear Mom anywhere. She must have gone out. Maybe shopping.&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;	
	&lt;&lt;elseif $Mom.status is 3&gt;&gt;
		&lt;&lt;switch _at&gt;&gt;
		&lt;&lt;case &quot;home&quot;&gt;&gt;&lt;&lt;thought &quot;It sounds like Mom is in _i. Maybe I should go and fool around with her.&quot;&gt;&gt;
		&lt;&lt;case &quot;out&quot;&gt;&gt;&lt;&lt;thought &quot;I can&#39;t hear Mom anywhere. She must have gone out. Maybe shopping.&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===========================================================*/
&lt;&lt;widget home_attic&gt;&gt;
&lt;&lt;jpg &quot;locations&quot; &quot;home_attic&quot;&gt;&gt;&lt;br&gt;
You enter the dusty attic. It is full of ... stuff. Stuff that accumulated over the last 10 to 20 years.&lt;br&gt;
&lt;&lt;if $andreas_bag.owned is false&gt;&gt;
@@.choice;&lt;&lt;link &quot;Search the place&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;timepass 30&gt;&gt;
&lt;&lt;dialog &#39;&#39;&gt;&gt;
	&lt;&lt;set _ran to random(1,4)&gt;&gt;
	&lt;&lt;if _ran is 1&gt;&gt;
		[img[img/random/items/andreas_bag.png]]&lt;br&gt;
		You find a bag with &lt;&lt;=$Andrea.callname&gt;&gt;s name on it. Inside are some clothes, an old mp3 player, a little jewelry and a photo album.
		&lt;&lt;thought &quot;I bet she would love to have that. Maybe that&#39;s an opening to get to her.&quot;&gt;&gt;
		&lt;&lt;set $andreas_bag.owned to true&gt;&gt;
	&lt;&lt;else&gt;&gt;You don&#39;t find anything interesting.
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/dialog&gt;&gt;
&lt;&lt;/link&gt;&gt;@@
&lt;&lt;else&gt;&gt;&lt;&lt;thought &quot;I already thoroughly searched the place. There is nothing left to find here.&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===========================================================*/
&lt;&lt;widget home_livingroom&gt;&gt;
	&lt;&lt;if $Mom.event is &quot;sandwich&quot; and $Mom.location is &quot;Livingroom&quot; and $Mom.status gt 0&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;sandwich&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $You.sandwich is &quot;nothing yet&quot;&gt;&gt;&lt;&lt;set $You.sandwich to &quot;grilled cheese&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Mom.location isnot &quot;Livingroom&quot;&gt;&gt;
		&lt;&lt;jpg &quot;locations&quot; &quot;home_livingroom&quot;&gt;&gt;&lt;br&gt;
		There is no one here.&lt;br&gt;
		&lt;&lt;thought &quot;I could waste some time. Is there something on the TV?&quot;&gt;&gt;
		@@.choice;&lt;&lt;link &quot;Watch TV&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;timepass 30&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;You spend some time switching through some channels.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	 &lt;&lt;else&gt;&gt;
		&lt;&lt;locpic $Mom&gt;&gt;
		&lt;&lt;switch $Mom.status&gt;&gt;
		&lt;&lt;case 0&gt;&gt;
			You sit down next to Mom. She turns to you with a sneer on her face.
			&lt;&lt;msg $Mom &quot;Can&#39;t you see I&#39;m trying to watch some TV? Go be annoying somewhere else.&quot;&gt;&gt;
			&lt;&lt;thought &quot;I can&#39;t believe she is actually my mother.&quot;&gt;&gt;
			&lt;&lt;msg $Mom &quot;What are you waiting for? Get lost!&quot;&gt;&gt;
			&lt;&lt;thought &quot;I should go. This is insane.&quot;&gt;&gt;
		&lt;&lt;case 1&gt;&gt;
			As you sit down next to your mom she turns to you.
			&lt;&lt;msg $Mom &quot;I was just watching a soap opera, but I know you don&#39;t like those. I think there is a crime drama on. Let&#39;s switch the channel to that.&quot;&gt;&gt;
			You just nod take the remote control from her.
			&lt;&lt;msg $Mom &quot;Do you want some sandwiches? A soda or a beer?&quot;&gt;&gt;
			She stands up and walks to the kitchen. You can hear her making the sandwiches. 
			&lt;&lt;thought &quot;She would have never done that before I used the spell on her. Amazing!&quot;&gt;&gt;
			&lt;&lt;msg $Mom &quot;Here you go. I&#39;ll let you watch TV while I go and clean the kitchen, ok?&quot;&gt;&gt;
			&lt;&lt;thought &quot;She is actually pleasant to be around now. Maybe I could even get her to blow me?&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;I&#39;d rather you stay.&quot;&gt;&gt;
			&lt;&lt;msg $Mom &quot;If that&#39;d make you happy, of course I&#39;ll stay.&quot;&gt;&gt;
			&lt;&lt;thought &quot;Perfect&quot;&gt;&gt;
		&lt;&lt;case 2&gt;&gt;
			&lt;&lt;msg $Mom &quot;Hi cutie! Let me just give you a little space.&quot;&gt;&gt;
			She scoots over in a way that makes her skirt ride up her legs.
			&lt;&lt;msg $Mom &quot;Oops! I&#39;m such a clutz.&quot;&gt;&gt;
			But she doesn&#39;t adjust it. On the contrary she sits in a way that gives you a good view of her ass and the fact that she is not wearing any panties.
			&lt;&lt;thought &quot;Nice.&quot;&gt;&gt;
			You sit next to each other for a little time. You hear a little moan. Looking at her, you notice that she rubs her legs together trying to stimulate her needy cunt. She has a spacy look on her face 
			and is stealing glances at you more than the TV.
			&lt;&lt;thought &quot;She is so horny, it would be quite easy to get her to fuck.&quot;&gt;&gt;
		&lt;&lt;case 3&gt;&gt;
			She quickly glides of the couch, kneeling before you with her legs spread wide. Her pussy glistens with juice.
			&lt;&lt;msg $Mom &quot;&lt;&lt;yourname $Mom&gt;&gt;! Please use me however you want!&quot;&gt;&gt;
			You look at your slave and feel a mix of emotions.
			&lt;&lt;thought &quot;I should really feel bad for having done this to her, but she looks happy. And having a sexslave is nice.&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
		&lt;&lt;if $Mom.status gt 0&gt;&gt;
		@@.choice;&lt;&lt;link &quot;Watch TV with her&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;You spend some quality time with Mom, watching some of your favorite shows.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;timepass 30&gt;&gt;&lt;&lt;/link&gt;&gt;@@
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==============================================================*/
&lt;&lt;widget kitchen&gt;&gt;
	&lt;&lt;if $Mom.location is &quot;Kitchen&quot;&gt;&gt;
		&lt;&lt;locpic $Mom&gt;&gt;
		&lt;&lt;switch $Mom.status&gt;&gt;
			&lt;&lt;case 0&gt;&gt;
				Mom is here.&lt;br&gt; She is ignoring you.
				&lt;&lt;msg $You &quot;Is there some cereal left?&quot;&gt;&gt;
				&lt;&lt;msg $Mom &quot;I just ate the last bowl. If you want some, buy your own.&quot;&gt;&gt;
				&lt;&lt;thought &quot;I actually bought that box, but she just doesn&#39;t care. It&#39;s as if I don&#39;t exist.&quot;&gt;&gt;
				&lt;&lt;msg $Mom &quot;When you&#39;re done staring holes into the air, make yourself useful and clean the attic.&quot;&gt;&gt;
				&lt;&lt;thought &quot;This can&#39;t go on like this. I have to try the spell. What is the worst that could happen?&quot;&gt;&gt;
			&lt;&lt;case 1&gt;&gt;
				Mom is making herself some cupcakes.
				&lt;&lt;msg $Mom &quot;Hey &lt;&lt;yourname $Mom&gt;&gt;. Should I make you something to eat, too?&quot;&gt;&gt;
				&lt;&lt;msg $You &quot;Yeah. These cupcakes would be nice.&quot;&gt;&gt;
				&lt;&lt;msg $Mom &quot;I did originally make them for myself, but since you had to put up with my horrible behaviour for so long I think you deserve them more than me.&quot;&gt;&gt;
				She hands you the plate.
				&lt;&lt;thought &quot;They look delicious.&quot;&gt;&gt;
				&lt;&lt;msg $You &quot;Here, take one. You made them, you should at least get one of them.&quot;&gt;&gt;
				She smiles at you warmly and pulls you into a thight embrace.
				&lt;&lt;msg $Mom &quot;Thank you so much &lt;&lt;yourname $Mom&gt;&gt;. You are such a good son.&quot;&gt;&gt;
			&lt;&lt;case 2&gt;&gt;
				Your mom quickly pulls her fingers out of her panties. It is obvious that she was fingering herself.
				&lt;&lt;msg $Mom &quot;Oh! You&#39;re here. I was ... I was ... making	a $You.sandwich sandwich ... for you. Do you want it?&quot;&gt;&gt; 
			&lt;&lt;case 3&gt;&gt;
				&lt;&lt;msg $Mom &quot;&lt;&lt;yourname $Mom&gt;&gt;! How may I please you today?&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;			
	&lt;&lt;else&gt;&gt;
		&lt;&lt;jpg &quot;locations&quot; &quot;home_kitchen_clean&quot;&gt;&gt;&lt;br&gt;
		The kitchen is empty at this time of the day.&lt;br&gt;&lt;br&gt;	
	&lt;&lt;/if&gt;&gt;

	@@.choice;
		&lt;&lt;link &quot;Raid the fridge&quot;&gt;&gt;&lt;&lt;timepass 5&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;fridgeraiding&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;if $Mom.location isnot &quot;Kitchen&quot;&gt;&gt;		
			&lt;&lt;switch $hour&gt;&gt;
				&lt;&lt;case 8 9&gt;&gt;&lt;&lt;link &quot;Have breakfast&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;You quickly eat a bowl of cereals.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;timepass 15&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
				&lt;&lt;case 11 12 13&gt;&gt;&lt;&lt;link &quot;Have lunch&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;You make yourself a quick lunch.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;timepass 30&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
				&lt;&lt;case 17 18 19&gt;&gt;&lt;&lt;link &quot;Have dinner&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;You prepare a tasty dinner for yourself.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;timepass 30&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
				&lt;&lt;default&gt;&gt;&lt;&lt;link &quot;Have a snack&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;You get yourself something a little snack to eat.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;timepass 10&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
			&lt;&lt;/switch&gt;&gt;
		&lt;&lt;/if&gt;&gt;			
	@@
&lt;&lt;/widget&gt;&gt;
/*==============================================================*/
&lt;&lt;widget fridgeraiding&gt;&gt;
	&lt;&lt;if $fridge.raidedtoday lt $fridge.raidspossible&gt;&gt;
		&lt;&lt;set _ran to random(0,3)&gt;&gt;
		&lt;&lt;set _item to $consumables_fatigue[_ran]&gt;&gt;
		&lt;&lt;if _ran lte 1&gt;&gt;&lt;&lt;set _name to &quot;a &quot;+_item.name&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set _name to &quot;an &quot;+_item.name&gt;&gt;&lt;&lt;/if&gt;&gt;
		[img[_item.pic]]&lt;br&gt;
		Mom has been shopping. You search the fridge and you find &lt;&lt;link _name&gt;&gt;&lt;&lt;set _item.amount++&gt;&gt;&lt;&lt;set $fridge.raidedtoday++&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;fridgeraiding&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
		&lt;&lt;if $fridge.raidedtoday lt $fridge.raidspossible-1&gt;&gt;
			&lt;&lt;thought &quot;There might be even more stuff here. I should look again.&quot;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;thought &quot;I&#39;m pretty sure I searched everywhere. There is nothing useful left.&quot;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;

























</tw-passagedata><tw-passagedata pid="29" name="Andrea sex widgets" tags="widget nobr" position="1875,0" size="100,100">/*===================================================================*/
/*================================SEX================================*/
/*===================================================================*/
&lt;&lt;widget andreaorgasm&gt;&gt;
	&lt;&lt;sexmp4 &quot;Andrea&quot; &quot;orgasm&quot;&gt;&gt;&lt;br&gt;
	&lt;&lt;msg $Andrea &quot;I&#39;M CUMMING! CUMMING! OHHHHHHHH!&quot;&gt;&gt;
	&lt;&lt;set $Andrea.arousal to 0&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget andreaarousal&gt;&gt;
&lt;&lt;set $Andrea.arousal ++&gt;&gt;
&lt;&lt;switch $Andrea.arousal&gt;&gt;
&lt;&lt;case 1&gt;&gt;
	&lt;&lt;timepass 3&gt;&gt;
	&lt;&lt;switch $Andrea.act&gt;&gt;
	&lt;&lt;case &quot;blowjob&quot;&gt;&gt;Your sister takes your cock into her hands. She smiles mischieviously.&lt;&lt;msg $Andrea &quot;This is soooo naughty.&quot;&gt;&gt;
	&lt;&lt;case &quot;fuck&quot;&gt;&gt;$Andrea.callname looks at you, questions in her eyes. &lt;&lt;msg $Andrea &quot;This is really hot, &lt;&lt;yourname $Andrea&gt;&gt;.&quot;&gt;&gt;
	&lt;&lt;case &quot;anal&quot;&gt;&gt;$Andrea.callname smiles at you while she spreads her cheeks. &lt;&lt;msg $Andrea &quot;Come on! Before I change my mind!&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;case 2 3&gt;&gt;
	&lt;&lt;timepass 3&gt;&gt;
	&lt;&lt;switch $Andrea.act&gt;&gt;
	&lt;&lt;case &quot;blowjob&quot;&gt;&gt;She flicks the tip your cock with her tongue and looks up at you with a glimmer in her eyes.&lt;&lt;msg $Andrea &quot;Does this arouse you?&quot;&gt;&gt;
	&lt;&lt;case &quot;fuck&quot;&gt;&gt;You draw your cock along her slit, applying only a little pressure. &lt;&lt;msg $Andrea &quot;Please &lt;&lt;yourname $Andrea&gt;&gt;, use my fuckhole!&quot;&gt;&gt;
	&lt;&lt;case &quot;anal&quot;&gt;&gt;You press your cock against her tight entrance. &lt;&lt;msg $Andrea &quot;Be gentle, please!&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;		
&lt;&lt;case 4 5&gt;&gt;
	&lt;&lt;timepass 3&gt;&gt;
	&lt;&lt;switch $Andrea.act&gt;&gt;
	&lt;&lt;case &quot;blowjob&quot;&gt;&gt;&gt;$Andrea.callname wraps her lips around your cock and slowly begins to suck it. She also begins to rub her clit.&lt;&lt;msg $Andrea &quot;You got such a nice cock! I could suck it all day.&quot;&gt;&gt;
	&lt;&lt;case &quot;fuck&quot;&gt;&gt;You push forward, slipping your cock into her wetness. &lt;&lt;msg $Andrea &quot;Ohhhhhhh!&quot;&gt;&gt;
	&lt;&lt;case &quot;anal&quot;&gt;&gt;With a quick motion you force yourself in. &lt;&lt;msg $Andrea &quot;Aaargh! Be careful!&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;	
&lt;&lt;case 6 7&gt;&gt;
	&lt;&lt;timepass 3&gt;&gt;
	&lt;&lt;switch $Andrea.act&gt;&gt;
	&lt;&lt;case &quot;blowjob&quot;&gt; Her breathing quickens and you can see her face getting flushed. &lt;&lt;msg $Andrea &quot;This gets me soo hot!&quot;&gt;&gt;
	&lt;&lt;case &quot;fuck&quot;&gt;&gt;You begin fucking her in earnest, pushing in and out of her forcefully. &lt;&lt;msg $Andrea &quot;Harder! Please!&quot;&gt;&gt;
	&lt;&lt;case &quot;anal&quot;&gt;&gt;You begin to move, slowly for now. In and out. &lt;&lt;msg $Andrea &quot;This is not bad. You can go faster, if you want!&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;	
&lt;&lt;case 8 9&gt;&gt;
	&lt;&lt;timepass 3&gt;&gt;
	&lt;&lt;switch $Andrea.act&gt;&gt;
	&lt;&lt;case &quot;blowjob&quot;&gt;&gt;Your sister gulps down your cock, forcing her nose into your stomach while furiously masturbating.&lt;&lt;msg $Andrea &quot;Mmmmmmmmmmmmm! Sooooooo goood!&quot;&gt;&gt;
	&lt;&lt;case &quot;fuck&quot;&gt;&gt;$Andrea.callname moans and writhes as you fuck her hard. &lt;&lt;msg $Andrea &quot;Oh GOD! More! Fuck me more!&quot;&gt;&gt;
	&lt;&lt;case &quot;anal&quot;&gt;&gt;You plow her ass faster now, ramming your cock into her with abandon. &lt;&lt;msg $Andrea &quot;OH GOD! &lt;&lt;yourname $Andrea&gt;&gt;, you feel amazing in my ass!&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;case 10&gt;&gt;
	&lt;&lt;timepass 10&gt;&gt;
	&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;andreaorgasm&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;switch $Andrea.act&gt;&gt;
	&lt;&lt;case &quot;blowjob&quot;&gt;&gt;She bucks her hips with her fingers deep in her pussy and your cock in her throat. &lt;&lt;msg $Andrea &quot;AHHHHRGGG!&quot;&gt;&gt;
	&lt;&lt;case &quot;fuck&quot;&gt;&gt;$Andrea.callname spasms around your cock, gripping your cock tightly with her pussy. &lt;&lt;msg $Andrea &quot;OH! OH! OH! OH!&quot;&gt;&gt;
	&lt;&lt;case &quot;anal&quot;&gt;&gt;$Andrea.callname flops to the ground as her twitching legs can&#39;t hold her up any more.&lt;&lt;msg $Andrea &quot;OHHHHHHHHHHHHHHHHHHHHHH&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget sexmenuAndrea&gt;&gt;
	&lt;&lt;link &quot;Have her blow you&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Andrea.act to &quot;blowjob&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;if $Andrea.status gte 4&gt;&gt;&lt;&lt;link &quot;Fuck her pussy&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Andrea.act to &quot;fuck&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Andrea.status gte 3&gt;&gt;&lt;&lt;link &quot;Fuck her ass&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Andrea.act to &quot;anal&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &quot;Stop fucking her&quot; $location.target&gt;&gt;&lt;&lt;set $sidemenu to true&gt;&gt;&lt;&lt;set $Andrea.arousal to 0&gt;&gt;&lt;&lt;set $Andrea.act to &quot;none&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget andreasex&gt;&gt; /*args[0] is $Andrea.act*/
	&lt;&lt;switch $args[0]&gt;&gt;&lt;&lt;case &quot;blowjob&quot;&gt;&gt;&lt;&lt;andreabj&gt;&gt;&lt;&lt;case &quot;fuck&quot;&gt;&gt;&lt;&lt;andreafuck&gt;&gt;&lt;&lt;case &quot;anal&quot;&gt;&gt;&lt;&lt;andreaanal&gt;&gt;&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
/*==================================================================*/
&lt;&lt;widget andreabj&gt;&gt;
	&lt;&lt;xxxjpg &quot;Andrea&quot; $location.id &quot;blowjob&quot;&gt;&gt;	
	&lt;&lt;if $Andrea.bj is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;andreabjfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
 	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Andrea&quot; &quot;blowjob&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;andreaarousal&gt;&gt;&lt;&lt;youarousal $Andrea&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget andreabjfirst&gt;&gt;
	&lt;&lt;switch $Andrea.status&gt;&gt;
		&lt;&lt;case 3&gt;&gt;
			&lt;&lt;msg $You &quot;Hey Sis, I could really need one of your blowjobs.&quot;&gt;&gt;
			&lt;&lt;msg $Andrea &quot;Ugh! I can&#39;t believe I agreed to blowing you.&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;But you did...&quot;&gt;&gt;
			She nods.
			&lt;&lt;msg $You &quot;And you enjoyed it.&quot;&gt;&gt;
			She stares at the floor.
			&lt;&lt;msg $You &quot;Didn&#39;t you?&quot;&gt;&gt;
			&lt;&lt;msg $Andrea &quot;...&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;Didn&#39;t you?&quot;&gt;&gt;
			&lt;&lt;msg $Andrea &quot;YES! Godamit! I loved it! It felt amazing!&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;So you&#39;ll blow me again?&quot;&gt;&gt;
			$Andrea.callname sighs.
			&lt;&lt;msg $Andrea &quot;Just drop your pants. And hurry up, I&#39;m practically salivating here.&quot;&gt;&gt;
		&lt;&lt;case 4&gt;&gt;
			You look at your sister with a cheery smile.
			&lt;&lt;msg $You &quot;Hey Sis, blowjob time!&quot;&gt;&gt;
			She drops to her knees and quickly scoots over to you.
			&lt;&lt;msg $Andrea &quot;Thank god! I&#39;ve missed having your dick down my throat so much!&quot;&gt;&gt;
		&lt;&lt;default&gt;&gt;
			Status is: $Andrea.status
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
		&lt;&lt;set $Andrea.bj to true&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget andreafuck&gt;&gt;
	&lt;&lt;xxxjpg &quot;Andrea&quot; $location.id &quot;fuck&quot;&gt;&gt;
	&lt;&lt;if $Andrea.fuck is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;andreafuckfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
	&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Andrea&quot; &quot;fuck&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;	
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;andreaarousal&gt;&gt;&lt;&lt;youarousal $Andrea&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget andreafuckfirst&gt;&gt;
	&lt;&lt;msg $You &quot;It&#39;s time to fuck you!&quot;&gt;&gt;
	She turns around and spreads her asscheeks.
	&lt;&lt;msg $You &quot;No, not your ass. I&#39;ll fuck your pussy.&quot;&gt;&gt;
	$Andrea.callname gulps and looks at you unsure.
	&lt;&lt;msg $Andrea &quot;Really? I mean we are brother and sister and this would be incest...&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Do you want me to go?&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;NO!&quot;&gt;&gt;
	She screams and jumps at you, pawing at the zipper of your pants.
	&lt;&lt;msg $Andrea &quot;Please, don&#39;t go!&quot;&gt;&gt;
	She manages to release your cock and looks at it longingly.
	&lt;&lt;msg $You &quot;Then tell me what you want!&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;I want you to put this majestic thing in me. I want you to use me like your little slut. Like I&#39;m your fucktoy, your sexslave. Use my every hole for your pleasure! Use me however you want.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Then get yourself wet for me.&quot;&gt;&gt;
	She smiles seductively.
	&lt;&lt;msg $Andrea &quot;Already done!&quot;&gt;&gt;
	&lt;&lt;set $Andrea.fuck to true&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
/*===================================================================*/
&lt;&lt;widget andreaanal&gt;&gt;
	&lt;&lt;xxxjpg &quot;Andrea&quot; $location.id &quot;anal&quot;&gt;&gt;
	&lt;&lt;if $Andrea.anal is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;andreaanalfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Andrea&quot; &quot;anal&quot;&gt;&gt;&lt;br&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;andreaarousal&gt;&gt;&lt;&lt;youarousal $Andrea&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget andreaanalfirst&gt;&gt;
	&lt;&lt;switch $Andrea.status&gt;&gt;
	&lt;&lt;case 3&gt;&gt;
		&lt;&lt;msg $You &quot;Hey $Andrea.callname. Remember what you said after you gave me that blowjob?&quot;&gt;&gt;
		&lt;&lt;msg $Andrea &quot;You mean anal?&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Wanna do it?&quot;&gt;&gt;
		She smirks.
		&lt;&lt;msg $Andrea &quot;Take the lead, bro.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Loose the panties and bend over!&quot;&gt;&gt;
	&lt;&lt;case 4&gt;&gt;
		&lt;&lt;msg $You &quot;How about a good assfuck?&quot;&gt;&gt;
		$Andrea.callname spits into her hand and begins lubing up her asshole.
		&lt;&lt;msg $Andrea &quot;Ready when you are, bro.&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;set $Andrea.anal to true&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;





</tw-passagedata><tw-passagedata pid="30" name="desk widgets" tags="widget nobr" position="2725,1150" size="100,100">&lt;&lt;widget computer&gt;&gt;
	[img[img/locations/home_computer.jpg]]&lt;br&gt;
	You boot up your computer.&lt;br&gt;
	&lt;div id=&quot;streamoverview&quot;&gt;
		&lt;&lt;for _i to 0;_i lt $npcs.length;_i++&gt;&gt;	
			&lt;&lt;if $npcs[_i].streaming&gt;&gt;
				&lt;&lt;capture _i, _name&gt;&gt;
					@@.choice;&lt;&lt;link &#96;&quot;View &quot;+$npcs[_i].callname+&quot;s Stream&quot;&#96;&gt;&gt;&lt;&lt;dialog &#39;&#39;&gt;&gt;&lt;&lt;mp4 $npcs[_i].id &quot;streaming&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
				&lt;&lt;/capture&gt;&gt;				
			&lt;&lt;/if&gt;&gt;	
		&lt;&lt;/for&gt;&gt;	
	&lt;/div&gt;
	@@.choice;&lt;&lt;link &quot;Gamble some money&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;gamble&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;link &quot;Log off&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;	@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget gamble&gt;&gt; 
[img[img/random/online_casino.jpg]]
You enter a online casino.&lt;br&gt;How much do you want to gamble?
&lt;&lt;listbox &quot;_gamble&quot;&gt;&gt;&lt;&lt;option &quot;10$&quot; 10 selected&gt;&gt;&lt;&lt;if $You.money gte 25&gt;&gt;&lt;&lt;option &quot;25$&quot; 25&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;if $You.money gte 100&gt;&gt;&lt;&lt;option &quot;100$&quot; 100&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;option &quot;all&quot; $You.money&gt;&gt;&lt;&lt;/listbox&gt;&gt;
@@.choice;&lt;&lt;link &quot;Gamble&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;
&lt;&lt;mp4 &quot;random&quot; &quot;roulette&quot;&gt;&gt;
&lt;br&gt;You gamble _gamble dollar and &lt;&lt;if random (1,5) lt 3&gt;&gt; win. &lt;&lt;addmoney _gamble&gt;&gt;&lt;&lt;else&gt;&gt;lose. &lt;&lt;losemoney _gamble&gt;&gt;&lt;&lt;/if&gt;&gt;@@.choice;&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;&lt;&lt;gamble&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Back&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget book&gt;&gt;
	[img[img/locations/book.jpg]]&lt;br&gt;The book contains a lot of pages in the weird code that uncle Albert wrote of. There are also his notes on this code.&lt;br&gt;  
	@@.choice;&lt;&lt;link &quot;Study the book&quot;&gt;&gt;&lt;&lt;dialog &#39;research&#39; &#39;research&#39;&gt;&gt;&lt;&lt;contenttable&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;link &quot;Close the book&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===============================================*/ 
&lt;&lt;widget bookshelf&gt;&gt;
	&lt;div id=&quot;bookshelf&quot;&gt;@@.book;[img[img/random/thebook_bookshelf.jpg]]@@
	&lt;&lt;for _i to 0; _i lt $bookstore_languages.length; _i++&gt;&gt;&lt;&lt;if $bookstore_languages[_i].owned&gt;&gt;@@.book;[img[$bookstore_languages[_i].pic]]@@&lt;&lt;/if&gt;&gt;&lt;&lt;/for&gt;&gt;&lt;/div&gt;
	@@.choice;&lt;&lt;link &quot;Back&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/</tw-passagedata><tw-passagedata pid="31" name="desk" tags="nobr home" position="2600,1150" size="100,100">&lt;&lt;switch $desk&gt;&gt;
&lt;&lt;case &quot;book&quot;&gt;&gt;&lt;&lt;book&gt;&gt;
&lt;&lt;case &quot;computer&quot;&gt;&gt;&lt;&lt;computer&gt;&gt;
&lt;&lt;case &quot;bookshelf&quot;&gt;&gt;&lt;&lt;bookshelf&gt;&gt;
&lt;&lt;case &quot;onlineshop&quot;&gt;&gt;&lt;&lt;onlineshop&gt;&gt;
&lt;&lt;/switch&gt;&gt;</tw-passagedata><tw-passagedata pid="32" name="sex" tags="nobr" position="2300,0" size="100,100">&lt;&lt;switch $fucked&gt;&gt;
&lt;&lt;case &quot;Mom&quot;&gt;&gt;
	&lt;&lt;if $Mom.act is &quot;none&quot;&gt;&gt;&lt;&lt;locpic $Mom&gt;&gt;&lt;&lt;elseif $You.fatigue gte $You.stamina&gt;&gt;&lt;&lt;fatigued&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;momsex $Mom.act&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;br&gt;	
	What do you want to do?@@.choice;&lt;&lt;sexmenuMom&gt;&gt;@@
	
&lt;&lt;case &quot;Jasmin&quot;&gt;&gt;
	&lt;&lt;if $Jasmin.act is &quot;none&quot;&gt;&gt;&lt;&lt;locpic $Jasmin&gt;&gt;&lt;&lt;elseif $You.fatigue gte $You.stamina&gt;&gt;&lt;&lt;fatigued&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;jasminsex $Jasmin.act&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;br&gt;
	What do you want to do?@@.choice;&lt;&lt;sexmenuJasmin&gt;&gt;@@
	
&lt;&lt;case &quot;Andrea&quot;&gt;&gt;
	&lt;&lt;if $Andrea.act is &quot;none&quot;&gt;&gt;&lt;&lt;locpic $Andrea&gt;&gt;&lt;&lt;elseif $You.fatigue gte $You.stamina&gt;&gt;&lt;&lt;fatigued&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;andreasex $Andrea.act&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;br&gt;
	What do you want to do?	@@.choice;&lt;&lt;sexmenuAndrea&gt;&gt;@@
	
&lt;&lt;case &quot;Henry&quot;&gt;&gt;
	&lt;&lt;if $Henry.act is &quot;none&quot;&gt;&gt;&lt;&lt;locpic $Henry&gt;&gt;&lt;&lt;elseif $You.fatigue gte $You.stamina&gt;&gt;&lt;&lt;fatigued&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;henrysex $Henry.act&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;br&gt;
	What do you want to do?@@.choice;&lt;&lt;sexmenuHenry&gt;&gt;@@
	
&lt;&lt;case &quot;Brian&quot;&gt;&gt;
	&lt;&lt;if $Brian.act is &quot;none&quot;&gt;&gt;&lt;&lt;locpic $Brian&gt;&gt;&lt;&lt;elseif $You.fatigue gte $You.stamina&gt;&gt;&lt;&lt;fatigued&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;briansex $Brian.act&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;br&gt;
	@@.choice;&lt;&lt;sexmenuBrian&gt;&gt;@@
	
&lt;&lt;case &quot;Lisa&quot;&gt;&gt;	
	&lt;&lt;if $Lisa.act is &quot;none&quot;&gt;&gt;&lt;&lt;locpic $Lisa&gt;&gt;&lt;&lt;elseif $You.fatigue gte $You.stamina&gt;&gt;&lt;&lt;fatigued&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;lisasex $Lisa.act&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;br&gt;
	@@.choice;&lt;&lt;sexmenuLisa&gt;&gt;@@
&lt;&lt;/switch&gt;&gt;</tw-passagedata><tw-passagedata pid="33" name="talk widgets" tags="widget nobr" position="2600,475" size="100,100">&lt;&lt;widget talk&gt;&gt;
		&lt;&lt;switch $args[0].id&gt;&gt;
			&lt;&lt;case &quot;Mom&quot;&gt;&gt;&lt;&lt;talktomom&gt;&gt;
			&lt;&lt;case &quot;Jasmin&quot;&gt;&gt;&lt;&lt;talktojasmin&gt;&gt;
			&lt;&lt;case &quot;Henry&quot;&gt;&gt;&lt;&lt;talktohenry&gt;&gt;
			&lt;&lt;case &quot;Andrea&quot;&gt;&gt;&lt;&lt;talktoandrea&gt;&gt;
			&lt;&lt;case &quot;Brian&quot;&gt;&gt;&lt;&lt;talktobrian&gt;&gt;
			&lt;&lt;case &quot;Lisa&quot;&gt;&gt;&lt;&lt;talktolisa&gt;&gt;
			&lt;&lt;default&gt;&gt; NO CASE GIVEN ($args[0])
		&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;

/*===================================================================*/
/*This controls the menu of how you want to be called. It is dependend on the status of the npc*/
&lt;&lt;widget callme&gt;&gt; /*args[0] is who*/
&lt;&lt;code &quot;_help&quot;&gt;&gt;
	&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;msg $args[0] &quot;As you wish, &lt;&lt;=$args[0].callsyou&gt;&gt;.&quot;&gt;&gt;@@.talklink;&lt;&lt;link &quot;Very good.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talk $args[0]&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@&lt;&lt;/replace&gt;&gt;
&lt;&lt;/code&gt;&gt;
@@.talklink;
	&lt;&lt;link &quot;My name&quot;&gt;&gt;&lt;&lt;set $args[0].callsyou to $You.callname&gt;&gt;&lt;&lt;wiki _help&gt;&gt;&lt;&lt;/link&gt;&gt;	
	&lt;&lt;if $args[0].status gte 2&gt;&gt; 
		&lt;&lt;link &quot;Sir&quot;&gt;&gt;&lt;&lt;set $args[0].callsyou to &quot;Sir&quot;&gt;&gt;&lt;&lt;wiki _help&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Daddy&quot;&gt;&gt;&lt;&lt;set $args[0].callsyou to &quot;Daddy&quot;&gt;&gt;&lt;&lt;wiki _help&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $args[0].status gte 3&gt;&gt;
		&lt;&lt;link &quot;Master&quot;&gt;&gt;&lt;&lt;set $args[0].callsyou to &quot;Master&quot;&gt;&gt;&lt;&lt;wiki _help&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Lord&quot;&gt;&gt;&lt;&lt;set $args[0].callsyou to &quot;My Lord&quot;&gt;&gt;&lt;&lt;wiki _help&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;God&quot;&gt;&gt;&lt;&lt;set $args[0].callsyou to &quot;My God&quot;&gt;&gt;&lt;&lt;wiki _help&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &quot;Don&#39;t change anything&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talk $args[0]&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/</tw-passagedata><tw-passagedata pid="34" name="itemdef" tags="" position="25,650" size="100,100">&lt;&lt;set $bookstore_languages to [
{name: &quot;Latin for beginners&quot;, cost: 25, owned: false, effect: 1, pic: &quot;img/random/books/latin_1.png&quot;},
{name: &quot;Intermediate Latin&quot;, cost: 50, owned: false, effect: 2, pic: &quot;img/random/books/latin_2.png&quot;},
{name: &quot;Advanced Latin&quot;, cost: 75, owned: false, effect: 3, pic: &quot;img/random/books/latin_3.png&quot;},
{name: &quot;Greek for beginners&quot;, cost: 25, owned: false, effect: 1, pic: &quot;img/random/books/greek_1.png&quot;},
{name: &quot;Intermediate Greek&quot;, cost: 50, owned: false, effect: 2, pic: &quot;img/random/books/greek_2.png&quot;},
{name: &quot;Advanced Greek&quot;, cost: 75, owned: false, effect: 3, pic: &quot;img/random/books/greek_3.png&quot;}, 
{name: &quot;Arabic for beginners&quot;, cost: 25, owned: false, effect: 1, pic: &quot;img/random/books/arabic_1.png&quot;},
{name: &quot;Intermediate Arabic&quot;, cost: 50, owned: false, effect: 2, pic: &quot;img/random/books/arabic_2.png&quot;},
{name: &quot;Advanced Arabic&quot;, cost: 75, owned: false, effect: 3, pic: &quot;img/random/books/arabic_3.png&quot;}]&gt;&gt;

&lt;&lt;set $keys to [
{name:&quot;Your home&quot;, owned:true},
{name:&quot;Jasmins home&quot;, owned:false},
{name:&quot;Henrys home&quot;, owned:false},
{name:&quot;Lisas flat&quot;, owned:false},
{name:&quot;Andreas flat&quot;, owned:false},
{name:&quot;Apartment building&quot;, owned:false},
{name:&quot;Brians home&quot;,owned:false}
]&gt;&gt;

&lt;&lt;set $consumables_fatigue to [
{name:&quot;Can of Coke&quot;,amount:1,pic:&quot;img/random/items/can_of_coke.png&quot;,effect:1, cost:5},
{name:&quot;Can of Coffee&quot;,amount:0,pic:&quot;img/random/items/can_of_coffee.png&quot;,effect:2, cost:8},
{name:&quot;Energy drink&quot;,amount:0,pic:&quot;img/random/items/energy_drink.png&quot;,effect:3, cost:12},
{name:&quot;Energy bar&quot;,amount:0,pic:&quot;img/random/items/energy_bar.png&quot;,effect:4, cost:16},
{name:&quot;Caffein pills&quot;,amount:0,pic:&quot;img/random/items/caffein_pills.png&quot;,effect:5, cost:20}
]&gt;&gt;

&lt;&lt;set $sextoys to [
{name:&quot;Bondage rope&quot;,amount:0, pic:&quot;img/random/items/rope.png&quot;, cost:20},
{name:&quot;Ballgag&quot;,amount:0, pic:&quot;img/random/items/ballgag.png&quot;, cost:20},
{name:&quot;Nipple clamps&quot;,amount:0, pic:&quot;img/random/items/clamps.png&quot;, cost:30},
{name:&quot;Dildo&quot;,amount:0,pic:&quot;img/random/items/dildo.png&quot;,cost:30},
{name:&quot;Plug&quot;,amount:0,pic:&quot;img/random/items/plug.png&quot;,cost:30},
{name:&quot;Fucking machine&quot;,amount:0,pic:&quot;img/random/items/fuckmachine.png&quot;,cost:100}
]&gt;&gt;

/*====================QUEST ITEMS===========================*/
&lt;&lt;set $letter to {owned:true, name:&quot;Uncle Alberts letter&quot;, pic:&quot;img/random/letter.png&quot;}&gt;&gt;
&lt;&lt;set $andreas_bag to {owned:false, name:&quot;Andreas bag&quot;,pic:&quot;img/random/items/andreas_bag.png&quot;}&gt;&gt;
&lt;&lt;set $apron to {owned:false, name:&quot;Busy Bean apron&quot;,pic:&quot;img/random/items/apron.png&quot;}&gt;&gt;
&lt;&lt;set $dropped_photo to {owned:false, name:&quot;Mysterious photo&quot;,pic:&quot;img/random/items/dropped_photo.png&quot;}&gt;&gt;</tw-passagedata><tw-passagedata pid="35" name="timetable widgets" tags="widget nobr" position="2725,475" size="100,100">/*===================================================================*/
/*This widget includes all the different timetable widgets.*/
&lt;&lt;widget timetables&gt;&gt;
	&lt;&lt;timetablemom&gt;&gt;&lt;&lt;timetablejasmin&gt;&gt;&lt;&lt;timetableandrea&gt;&gt;&lt;&lt;timetablebrian&gt;&gt;&lt;&lt;timetablehenry&gt;&gt;&lt;&lt;timetablelisa&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*=============================================================*/
&lt;&lt;widget timetablemom&gt;&gt;
	&lt;&lt;switch $hour&gt;&gt;
	&lt;&lt;case 8 12 18&gt;&gt;&lt;&lt;set $Mom.location to &quot;Kitchen&quot;&gt;&gt;
	&lt;&lt;case 22 23 24&gt;&gt;&lt;&lt;set $Mom.location to &quot;Moms bedroom&quot;&gt;&gt;
	&lt;&lt;default&gt;&gt;
		&lt;&lt;if $Mom.movecd is 0&gt;&gt;
			&lt;&lt;if $Mom.stayathome is false&gt;&gt;
				&lt;&lt;set _ran to random(1,7)&gt;&gt;
				&lt;&lt;switch _ran&gt;&gt;
				&lt;&lt;case 1&gt;&gt;&lt;&lt;set $Mom.location to &quot;Kitchen&quot;&gt;&gt;&lt;&lt;set $Mom.movecd to random(5,20)&gt;&gt;
				&lt;&lt;case 2&gt;&gt;&lt;&lt;set $Mom.location to &quot;Livingroom&quot;&gt;&gt;&lt;&lt;set $Mom.movecd to random(10, 60)&gt;&gt;
				&lt;&lt;case 3&gt;&gt;&lt;&lt;set $Mom.location to &quot;Bathroom&quot;&gt;&gt;&lt;&lt;set $Mom.movecd to random(5,15)&gt;&gt;
				&lt;&lt;case 4&gt;&gt;&lt;&lt;set $Mom.location to &quot;Moms bedroom&quot;&gt;&gt;&lt;&lt;set $Mom.movecd to random(20,45)&gt;&gt;
				&lt;&lt;case 5&gt;&gt;&lt;&lt;set $Mom.location to &quot;Springvale Mall&quot;&gt;&gt;&lt;&lt;set $Mom.movecd to random(45,60)&gt;&gt; 
				&lt;&lt;case 6&gt;&gt;&lt;&lt;set $Mom.location to &quot;Gym&quot;&gt;&gt;&lt;&lt;set $Mom.movecd to random(55,70)&gt;&gt;
				&lt;&lt;case 7&gt;&gt;&lt;&lt;set $Mom.location to &quot;Andreas apt&quot;&gt;&gt;&lt;&lt;set $Mom.movecd to random(30,60)&gt;&gt;
				&lt;&lt;/switch&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;set _ran to random (1,4)&gt;&gt;
			  	&lt;&lt;switch _ran&gt;&gt;
			  	&lt;&lt;case 1&gt;&gt;&lt;&lt;set $Mom.location to &quot;Kitchen&quot;&gt;&gt;&lt;&lt;set $Mom.movecd to random(5,20)&gt;&gt;
			  	&lt;&lt;case 2&gt;&gt;&lt;&lt;set $Mom.location to &quot;Livingroom&quot;&gt;&gt;&lt;&lt;set $Mom.movecd to random(10, 60)&gt;&gt;
			  	&lt;&lt;case 3&gt;&gt;&lt;&lt;set $Mom.location to &quot;Bathroom&quot;&gt;&gt;&lt;&lt;set $Mom.movecd to random(5,15)&gt;&gt;
			 	&lt;&lt;case 4&gt;&gt;&lt;&lt;set $Mom.location to &quot;Moms bedroom&quot;&gt;&gt;&lt;&lt;set $Mom.movecd to random(20,45)&gt;&gt;	
			 	&lt;&lt;/switch&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt; 
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*=============================================================*/
&lt;&lt;widget timetablejasmin&gt;&gt;
&lt;&lt;if $Jasmin.stayathome is false&gt;&gt;
	&lt;&lt;switch $hour&gt;&gt;
	&lt;&lt;case 8 20 21&gt;&gt;&lt;&lt;set $Jasmin.location to &quot;Jasmins livingroom&quot;&gt;&gt;
	&lt;&lt;case 22 23 24&gt;&gt;&lt;&lt;if $Jasmin.movecd is 0&gt;&gt;&lt;&lt;set $Jasmin.location to &quot;Jasmins bedroom&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;case 11 13 14 15 16&gt;&gt;&lt;&lt;set $Jasmin.location to &quot;Bookstore&quot;&gt;&gt;
	&lt;&lt;case 12&gt;&gt;&lt;&lt;set $Jasmin.location to &quot;Cafe&quot;&gt;&gt;
	&lt;&lt;default&gt;&gt;
		&lt;&lt;if $Jasmin.movecd is 0&gt;&gt;
			&lt;&lt;set _ran to random(1,5)&gt;&gt;
			&lt;&lt;switch _ran&gt;&gt;
			&lt;&lt;case 1&gt;&gt;&lt;&lt;set $Jasmin.location to &quot;Springvale Mall&quot;&gt;&gt;&lt;&lt;set $Jasmin.movecd to random(15, 30)&gt;&gt;
			&lt;&lt;case 2&gt;&gt;&lt;&lt;set $Jasmin.location to &quot;Gym&quot;&gt;&gt;&lt;&lt;set $Jasmin.movecd to random(40,60)&gt;&gt;
			&lt;&lt;case 3&gt;&gt;&lt;&lt;set $Jasmin.location to &quot;Jasmins bedroom&quot;&gt;&gt;&lt;&lt;set $Jasmin.movecd to random(10,20)&gt;&gt;
			&lt;&lt;case 4 5&gt;&gt;&lt;&lt;set $Jasmin.location to &quot;Jasmins livingroom&quot;&gt;&gt;&lt;&lt;set $Jasmin.movecd to random(20,30)&gt;&gt;
			&lt;&lt;/switch&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;if $Jasmin.movecd is 0&gt;&gt;
		&lt;&lt;set _ran to random (1,3)&gt;&gt;
		&lt;&lt;switch _ran&gt;&gt;
		&lt;&lt;case 1&gt;&gt;&lt;&lt;set $Jasmin.location to &quot;Jasmins bedroom&quot;&gt;&gt;&lt;&lt;set $Jasmin.movecd to random(10,20)&gt;&gt;
		&lt;&lt;case 2 3&gt;&gt;&lt;&lt;set $Jasmin.location to &quot;Jasmins livingroom&quot;&gt;&gt;&lt;&lt;set $Jasmin.movecd to random(20,30)&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*=============================================================*/
&lt;&lt;widget timetableandrea&gt;&gt;
&lt;&lt;if $Andrea.stayathome is false&gt;&gt;
	&lt;&lt;if $Mom.location is &quot;Andreas apt&quot;&gt;&gt;&lt;&lt;set $Andrea.location to &quot;Andreas apt&quot;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;switch $hour&gt;&gt;
		&lt;&lt;case 8 9 19 20 21 22 23 24&gt;&gt;&lt;&lt;set $Andrea.location to &quot;Andreas apt&quot;&gt;&gt;
		&lt;&lt;case 10 11 12 14 15 16&gt;&gt;&lt;&lt;set $Andrea.location to &quot;Gym&quot;&gt;&gt;
		&lt;&lt;case 13&gt;&gt;&lt;&lt;set $Andrea.location to &quot;Cafe&quot;&gt;&gt;
		&lt;&lt;case 17 18 19&gt;&gt;
		&lt;&lt;if $Andrea.movecd is 0&gt;&gt;
			&lt;&lt;switch random(1,5)&gt;&gt;
			&lt;&lt;case 1&gt;&gt;&lt;&lt;set $Andrea.location to &quot;Springvale Mall&quot;&gt;&gt;&lt;&lt;set $Andrea.movecd to random(15,25)&gt;&gt;
			&lt;&lt;case 2 3 4&gt;&gt;&lt;&lt;set $Andrea.location to &quot;Lisas apt&quot;&gt;&gt;&lt;&lt;set $Andrea.movecd to random(10,45)&gt;&gt;
			&lt;&lt;case 5&gt;&gt;&lt;&lt;set $Andrea.location to &quot;Sexshop&quot;&gt;&gt;&lt;&lt;set $Andrea.movecd to random(20,25)&gt;&gt;
			&lt;&lt;/switch&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;set $Andrea.location to &quot;Andreas apt&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*=============================================================*/
&lt;&lt;widget timetablebrian&gt;&gt;
&lt;&lt;if $Brian.stayathome is false&gt;&gt;
	&lt;&lt;switch $hour&gt;&gt;
	&lt;&lt;case 8 9 10 17 18&gt;&gt;&lt;&lt;set $Brian.location to &quot;Brians home&quot;&gt;&gt;
	&lt;&lt;case 11 12 14 15 16&gt;&gt;&lt;&lt;set $Brian.location to &quot;Gym&quot;&gt;&gt;
	&lt;&lt;case 13&gt;&lt;&lt;set $Brian.location to &quot;Cafe&quot;&gt;&gt;
	&lt;&lt;case 19 20 21 22 23&gt;&gt;
	&lt;&lt;if $Brian.movecd is 0&gt;&gt;
		&lt;&lt;switch random(1,3)&gt;&gt;
		&lt;&lt;case 1&gt;&gt;&lt;&lt;set $Brian.location to &quot;Brians home&quot;&gt;&gt;&lt;&lt;set $Brian.movecd to random(15,30)&gt;&gt;
		&lt;&lt;case 2 3&gt;&gt;&lt;&lt;set $Brian.location to &quot;Joes Tavern&quot;&gt;&gt;&lt;&lt;set $Brian.movecd to 300&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;set $Brian.location to &quot;Brians home&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*=============================================================*/
&lt;&lt;widget timetablehenry&gt;&gt;
&lt;&lt;if $Henry.stayathome is false&gt;&gt;	
	&lt;&lt;switch $hour&gt;&gt;
	&lt;&lt;case 11 12 13 14 15 16 17&gt;&gt;
		&lt;&lt;if $Henry.movecd is 0&gt;&gt;
			&lt;&lt;switch random(1,3)&gt;&gt;
			&lt;&lt;case 1&gt;&gt;&lt;&lt;set $Henry.location to &quot;Mall&quot;&gt;&gt;&lt;&lt;set $Henry.movecd to random (15,30)&gt;&gt;
			&lt;&lt;case 2&gt;&gt;&lt;&lt;set $Henry.location to &quot;Cafe&quot;&gt;&gt;&lt;&lt;set $Henry.movecd to random (20,25)&gt;&gt;
			&lt;&lt;case 3&gt;&gt;&lt;&lt;set $Henry.location to &quot;Henrys home&quot;&gt;&gt;&lt;&lt;set $Henry.movecd to random (30,60)&gt;&gt;
			&lt;&lt;/switch&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;default&gt;&gt;&lt;&lt;set $Henry.location to &quot;Henrys home&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;else&gt;&gt;&lt;&lt;set $Henry.location to &quot;Henrys home&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*=============================================================*/
&lt;&lt;widget timetablelisa&gt;&gt;
	&lt;&lt;if $Lisa.stayathome is false&gt;&gt;

			&lt;&lt;switch $hour&gt;&gt;
				&lt;&lt;case 10 11&gt;&gt;&lt;&lt;set $Lisa.location to &quot;Lisas apt&quot;&gt;&gt;
				&lt;&lt;case 12 17&gt;&gt;&lt;&lt;set $Lisa.location to &quot;Cafe&quot;&gt;&gt;
				&lt;&lt;case 20 21 22&gt;&gt;
					&lt;&lt;if $Lisa.movecd is 0&gt;&gt;
						&lt;&lt;switch random(1,3)&gt;&gt;
							&lt;&lt;case 1 2&gt;&gt;&lt;&lt;set $Lisa.location to &quot;Lisas apt&quot;&gt;&gt;&lt;&lt;set $Lisa.movecd to random(15,45)&gt;&gt;
							&lt;&lt;case 3&gt;&gt;&lt;&lt;set $Lisa.location to &quot;Joes Tavern&quot;&gt;&gt;&lt;&lt;set $Lisa.movecd to random (45,90)&gt;&gt;
						&lt;&lt;/switch&gt;&gt;
					&lt;&lt;/if&gt;&gt;
				&lt;&lt;default&gt;&gt;&lt;&lt;set $Lisa.location to &quot;Lisas apt&quot;&gt;&gt;
			&lt;&lt;/switch&gt;&gt;
	&lt;&lt;else&gt;&gt;&lt;&lt;set $Lisa.location to &quot;Lisas apt&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="36" name="locationdef" tags="" position="150,650" size="100,100">&lt;&lt;set $location&gt;&gt;
&lt;&lt;set $home_kitchen to {id: &quot;Kitchen&quot;, name: &quot;Kitchen&quot;, target: &quot;Home&quot;}&gt;&gt;
&lt;&lt;set $home_livingroom to {id: &quot;Livingroom&quot;, name: &quot;Livingroom&quot;, target: &quot;Home&quot;}&gt;&gt;
&lt;&lt;set $home_bathroom to {id: &quot;Bathroom&quot;, name: &quot;Bathroom&quot;, target: &quot;Home&quot;,}&gt;&gt;
&lt;&lt;set $your_bedroom to {id: &quot;Your bedroom&quot;, name: &quot;Your bedroom&quot;, target: &quot;Home&quot;}&gt;&gt;
&lt;&lt;set $moms_bedroom to {id: &quot;Moms bedroom&quot;, name: &quot;Moms bedroom&quot;, target: &quot;Home&quot;}&gt;&gt;
&lt;&lt;set $home_hallway to {id: &quot;Hallway&quot;, name: &quot;Hallway&quot;, target: &quot;Home&quot;}&gt;&gt;
&lt;&lt;set $home_attic to {id: &quot;Attic&quot;, name: &quot;Attic&quot;, target: &quot;Home&quot;}&gt;&gt;
&lt;&lt;set $marlowe_street to {id: &quot;Marlowe Street&quot;, name: &quot;Marlowe Street&quot;, target: &quot;Streets&quot;}&gt;&gt;
&lt;&lt;set $baker_street to {id: &quot;Baker Street&quot;, name: &quot;Baker Street&quot;, target: &quot;Streets&quot;}&gt;&gt;
&lt;&lt;set $main_street to {id: &quot;Main Street&quot;, name: &quot;Main Street&quot;, target: &quot;Streets&quot;}&gt;&gt;
&lt;&lt;set $back_street to {id: &quot;Back Streets&quot;, name: &quot;Back Streets&quot;, target: &quot;Streets&quot;}&gt;&gt;
&lt;&lt;set $jasmins_livingroom to {id: &quot;Jasmins livingroom&quot;, name: &quot;Jasmins livingroom&quot;, target: &quot;Jasmins home&quot;}&gt;&gt;
&lt;&lt;set $jasmins_bedroom to {id: &quot;Jasmins livingroom&quot;, name: &quot;Jasmins bedroom&quot;, target: &quot;Jasmins home&quot;}&gt;&gt;
&lt;&lt;set $henrys_home to {id: &quot;Henrys home&quot;, name: &quot;Henrys home&quot;, target: &quot;Henrys home&quot;}&gt;&gt;
&lt;&lt;set $mall to {id: &quot;Springvale Mall&quot;,name: &quot;Springvale Mall&quot;, target: &quot;Mall&quot;}&gt;&gt;
&lt;&lt;set $bookstore to {id: &quot;Bookstore&quot;, name: &quot;Bookstore&quot;, target: &quot;Mall&quot;}&gt;&gt;
&lt;&lt;set $cafe to {id: &quot;Cafe&quot;, name: &quot;Cafe&quot;, target: &quot;Mall&quot;}&gt;&gt;
&lt;&lt;set $cafe_office to {id: &quot;Cafe Office&quot;, name:&quot;Cafe Office&quot;,target: &quot;Mall&quot;}&gt;&gt;
&lt;&lt;set $gym to {id: &quot;Gym&quot;, name: &quot;Gym&quot;, target: &quot;Mall&quot;}&gt;&gt;
&lt;&lt;set $sexshop to {id: &quot;Sexshop&quot;, name: &quot;Sexshop&quot;, target: &quot;Mall&quot;}&gt;&gt;
&lt;&lt;set $apartment_outside to {id: &quot;Apt. building&quot;, name: &quot;Apt. building&quot;, target: &quot;Apartment complex&quot;}&gt;&gt;
&lt;&lt;set $lisas_apartment to {id: &quot;Lisas apt&quot;, name: &quot;Lisas apt&quot;, target: &quot;Apartment complex&quot;}&gt;&gt;
&lt;&lt;set $andreas_apartment to {id: &quot;Andreas apt&quot;, name: &quot;Andreas apt&quot;, target: &quot;Apartment complex&quot;}&gt;&gt;
&lt;&lt;set $apartment_foyer to {id: &quot;Foyer&quot;, name: &quot;Foyer&quot;, target: &quot;Apartment complex&quot;}&gt;&gt;
&lt;&lt;set $brians_home to {id: &quot;Brians home&quot;, name: &quot;Brians home&quot;, target: &quot;Brians home&quot;}&gt;&gt;
&lt;&lt;set $bar to {id: &quot;Joes Tavern&quot;, name: &quot;Joes Tavern&quot;,target: &quot;Bar&quot;}&gt;&gt;</tw-passagedata><tw-passagedata pid="37" name="Jasmins home widgets" tags="widget nobr" position="625,125" size="100,100">&lt;&lt;widget jasmin_livingroom&gt;&gt;
	&lt;&lt;if $Jasmin.location is &quot;Jasmins livingroom&quot;&gt;&gt;
		&lt;&lt;if $Jasmin.event is &quot;movie&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasminmovienight&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;locpic $Jasmin&gt;&gt;
		&lt;&lt;switch $Jasmin.status&gt;&gt;
			&lt;&lt;case 0&gt;&gt;$Jasmin.callname lets you in. She smiles at you. &lt;&lt;msg $Jasmin &quot;Hi &lt;&lt;yourname $Jasmin&gt;&gt;! Nice of you to visit. What&#39;s up?&quot;&gt;&gt;
			&lt;&lt;case 1&gt;&gt;
				&lt;&lt;msg $Jasmin &quot;Oh, it&#39;s you. Come in please.&quot;&gt;&gt;
				You enter the house and give her a warm hug. She freezes for a millisecond but then melts into your embrace. After a short while she pushes away from you.
				&lt;&lt;msg $Jasmin &quot;Huh? What&#39;s gotten into you?&quot;&gt;&gt;
				&lt;&lt;msg $You &quot;Nothing, you just looked so huggable there.&quot;&gt;&gt;
				She punshes your arm playfully.
				&lt;&lt;msg $Jasmin &quot;You idiot!&quot;&gt;&gt;
				She bends over to fix her shoelace and her wide wool sweater slips to side, revealing a beautiful, firm breast.
				&lt;&lt;thought &quot;That was no accident. Also, she is not wearing a bra.&quot;&gt;&gt;
			&lt;&lt;case 2&gt;&gt;
				She bounces a little as she opens the door with a wide smile.
				&lt;&lt;msg $Jasmin &quot;&lt;&lt;yourname $Jasmin&gt;&gt;, I&#39;m glad you&#39;re here.&quot;&gt;&gt;
				&lt;&lt;msg $You &quot;I&#39;m happy to see you too.&quot;&gt;&gt;
				She throws embraces you and pulls you down into a passionate kiss.
				&lt;&lt;msg $Jasmin &quot;I missed you.&quot;&gt;&gt;
				Suddenly she remembers something.
				&lt;&lt;msg $Jasmin &quot;Wait here, I&#39;ve got to show you something.&quot;&gt;&gt;
				She runs out of the room, but returns quickly, now wearing a very erotic combination of black underwear.
				&lt;&lt;msg $Jasmin &quot;I bought this just for you. Do you like it?&quot;&gt;&gt;
			&lt;&lt;case 3&gt;&gt; 
				$Jasmin.callname notices you entering and quickly gets naked. She drops to the floor submissively and looks up at you.
				&lt;&lt;msg $Jasmin &quot;&lt;&lt;greetings&gt;&gt;, &lt;&lt;yourname $Jasmin&gt;&gt;. I hoped you&#39;d come.&quot;&gt;&gt;
				&lt;&lt;thought &quot;She is so cute. And eager.&quot;&gt;&gt;
				She spreads her legs so you see her better.
				&lt;&lt;msg $Jasmin &quot;I&#39;m very horny. See? I&#39;m almost dripping.&quot;&gt;&gt;
				She spreads her pussy to show you. Then she smiles seductively.
				&lt;&lt;msg $Jasmin &quot;Do you think we can do something about that?&quot;&gt;&gt;
				&lt;&lt;msg $You &quot;Jasmin, you are always horny.&quot;&gt;&gt;
				&lt;&lt;msg $Jasmin &quot;And? Do we fuck now, or not?&quot;&gt;&gt;
			&lt;&lt;/switch&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;jpg &quot;locations&quot; &quot;jasmin_livingroom&quot;&gt;&gt;&lt;br&gt;You are standing in Jasmins livingroom. It is rather girly. &lt;&lt;thought &quot;Too much pink.&quot;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===============================================================*/

&lt;&lt;widget wakeupjasmin&gt;&gt;
&lt;&lt;if $hour gte 22&gt;&gt;
	$Jasmin.callname opens the door looking sleepy. 
	&lt;&lt;msg $Jasmin &quot;You woke me up!&quot;&gt;&gt;
	She steps aside to let you in.
	&lt;&lt;switch $Jasmin.status&gt;&gt;
	&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Jasmin &quot;This better be important! We are friends, but I got to go to work tomorrow!&quot;&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Jasmin &quot;What do you need? Thought I sleep naked and wanted to catch a glimpse?&quot;&gt;&gt; She laughs and winks at you. &lt;&lt;msg $Jasmin &quot;Pervert!&quot;&gt;&gt;
	&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Jasmin &quot;Come in! I&#39;ve been dreaming about you... or beeter what I want you to do ... to me!&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Jasmin &quot;Oh god! I need you! Please! Fuck me!&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;else&gt;&gt;
	$Jasmin.callname opens the door and flashes her brilliant smile at you.
	&lt;&lt;msg $Jasmin &quot;Hey &lt;&lt;yourname $Jasmin&gt;&gt;! Come in!&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===============================================================*/

&lt;&lt;widget jasminisnothome&gt;&gt;
&lt;&lt;set _linkhelp&gt;&gt;
&lt;&lt;set _bedroom to false&gt;&gt;
&lt;&lt;if $Jasmin.location is &quot;Jasmins bedroom&quot;&gt;&gt;
	&lt;&lt;set _bedroom to true&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;code &quot;_linkhelp&quot;&gt;&gt;&lt;&lt;set $location to $jasmins_livingroom&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;wakeupjasmin&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;set $Jasmin.location to &quot;Jasmins livingroom&quot;&gt;&gt;&lt;&lt;set $Jasmin.movecd to 10&gt;&gt;&lt;&lt;/code&gt;&gt;
@@.left;&lt;&lt;jpg &quot;random&quot; &quot;outdoor&quot;&gt;&gt;@@
&lt;&lt;if _bedroom is true&gt;&gt;
	&lt;&lt;if $hour gte 22&gt;&gt;At this time of day $Jasmin.callname is surely sleeping.&lt;&lt;set _asleep to true&gt;&gt;&lt;&lt;else&gt;&gt;You can see movement behind the bedroom curtains.&lt;&lt;set _asleep to false&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	$Jasmin.callname doesn&#39;t seem to be at home.
&lt;&lt;/if&gt;&gt;
@@.choice;
&lt;&lt;if _bedroom is true and _asleep is true&gt;&gt;&lt;&lt;link &quot;Wake her up&quot; &quot;Jasmins home&quot;&gt;&gt;&lt;&lt;wiki _linkhelp&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;elseif _bedroom is true and _asleep is false&gt;&gt;&lt;&lt;link &quot;Ring&quot; &quot;Jasmins home&quot;&gt;&gt;&lt;&lt;wiki _linkhelp&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;if $keys[1].owned is true&gt;&gt;&lt;&lt;link &quot;Use her key&quot; &quot;Jasmins home&quot;&gt;&gt;&lt;&lt;set $location to $jasmins_livingroom&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;link &quot;Leave&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
@@
&lt;&lt;/widget&gt;&gt;

/*=============================================================*/
&lt;&lt;widget jasminbedroom&gt;&gt;
&lt;&lt;if $Jasmin.location is &quot;Jasmins bedroom&quot;&gt;&gt;
&lt;&lt;locpic $Jasmin&gt;&gt;
&lt;&lt;switch $Jasmin.status&gt;&gt;
&lt;&lt;case 2&gt;&gt;$Jasmin.callname sits down on her bed and begins to take of the sexy lingerie she was wearing.&lt;&lt;msg $Jasmin &quot;Do you want to play with me, &lt;&lt;yourname $Jasmin&gt;&gt;?&quot;&gt;&gt;
&lt;&lt;case 3&gt;&gt;$Jasmin.callname, naked as she always is at home, lifts her legs high up in the air. Her pussy glistens with wetness and she seductivly licks her lips.
	&lt;&lt;msg $Jasmin &quot;&lt;&lt;yourname $Jasmin&gt;&gt;! Let&#39;s fuck! I need your thick hard cock in my aching holes! All of them!&quot;&gt;&gt;
&lt;&lt;/switch&gt;&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;jpg &quot;locations&quot; &quot;jasmin_bedroom&quot;&gt;&gt;&lt;br&gt;
You stand in $Jasmin.callname bedroom.
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*=============================================================*/
&lt;&lt;widget jasminbedroomthere&gt;&gt;
  &lt;&lt;switch $Jasmin.status&gt;&gt;
	&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Jasmin &quot;Hey! That&#39;s my bedroom. That&#39;s private.&lt;&lt;thought &#39;Better leave it be, for now.&#39;&gt;&gt;&lt;&lt;continueon&gt;&gt;&quot;&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Jasmin &quot;That&#39;s my bedroom. The room where the magic happens. I bet you wanna know how it looks.&quot;&gt;&gt;
	  She smiles mischieviously.&lt;&lt;msg $Jasmin &quot;Maybe you&#39;ll get there someday.&quot;&gt;&gt;&lt;&lt;thought &quot;She sounds very different than before. She would never even hint at anything sexual.&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;
	&lt;&lt;case 2 3&gt;&gt;&lt;&lt;msg $Jasmin &quot;Sure, come in.&quot;&gt;&gt;
    @@.choice;
      &lt;&lt;link &quot;Enter&quot; &quot;Jasmins home&quot;&gt;&gt;&lt;&lt;set $location to $jasmins_bedroom&gt;&gt;&lt;&lt;set $Jasmin.location to &quot;Jasmins bedroom&quot;&gt;&gt;&lt;&lt;set $Jasmin.movecd to 30&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
      &lt;&lt;link &quot;Leave&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
    @@
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*=============================================================*/
&lt;&lt;widget jasminbedroomin&gt;&gt;
  &lt;&lt;if $hour gte 22&gt;&gt; You can hear $Jasmin.callname slow breathing. She is obviously sleeping.
  &lt;&lt;else&gt;&gt;
    &lt;&lt;if $Jasmin.status is 0&gt;&gt;You hear some rustling in there. She might be cleaning up or doing some other housework.&lt;&lt;else&gt;&gt;You hear some muffled moans. &lt;&lt;thought &quot;She is obviously masturbating.&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  @@.choice;
    &lt;&lt;link &quot;Knock&quot;&gt;&gt;&lt;&lt;set $knocked.jasmins_bedroom to true&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasminbedroomenter&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
    &lt;&lt;link &quot;Open the door.&quot;&gt;&gt;&lt;&lt;set $knocked.jasmins_bedroom to false&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasminbedroomenter&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
  @@
&lt;&lt;/widget&gt;&gt;
/*=============================================================*/
&lt;&lt;widget jasminbedroomenter&gt;&gt;
&lt;&lt;if $knocked.jasmins_bedroom is false&gt;&gt;
  &lt;&lt;switch $Jasmin.status&gt;&gt;
	&lt;&lt;case 0&gt;&gt;&lt;&lt;set $end to &quot;angeredjasmin&quot;&gt;&gt;&lt;&lt;goto &quot;end&quot;&gt;&gt;&lt;&lt;dialog &quot;&quot; true&gt;&gt;$Jasmin.callname is lying on the bed when you enter. As you are unfamiliar with her room, you bump against a chair and make a noice.
		&lt;&lt;msg $Jasmin &quot;WHAT THE FUCK?! GET OUT OF MY ROOM YOU CREEP!&quot;&gt;&gt;@@.choice;&lt;&lt;link &quot;THE END&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;case 1&gt;&gt;$Jasmin.callname is napping on the bed with a big smile on her face. She whispers your name and moans a little.&lt;&lt;thought &quot;She is dreaming about me.&quot;&gt;&gt; 
		You bump against a chair that stands in the way. She jolts up. &lt;&lt;msg $Jasmin &quot;Huh? What are you doing in here? Have you been peeping, you creep?&quot;&gt;&gt;&lt;&lt;thought &quot;She doesn&#39;t sound angry. Is she teasing me?&quot;&gt;&gt;
    	&lt;&lt;msg $Jasmin &quot;You could have just asked for a little show. What are friends for, eh?&quot;&gt;&gt; She pushes her arms together, thus lifting her tits up and wiggles them in your direction.
	&lt;&lt;case 2&gt;&gt;
		$Jasmin.callname is lying on the bed, half naked. She is sleeping. &lt;&lt;msg $You &quot;Jasmin?&quot;&gt;&gt; She slowly opens her eyes and smiles as she sees you. 
		&lt;&lt;msg $Jasmin &quot;&lt;&lt;yourname $Jasmin&gt;&gt;, come. Lets cuddle a little.&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt; $Jasmin.callname is sleeping naked, as she always does since you turned her into your loveslave. &lt;&lt;msg $You &quot;Wake up!&quot;&gt;&gt; 
			She jumps awakes, realizes you are in her room and quickly presents her naked form to you. &lt;&lt;msg $Jasmin &quot;&lt;&lt;yourname $Jasmin&gt;&gt;. What a nice surprise. Let&#39;s fuck!&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
  &lt;&lt;if $Jasmin.status gt 0&gt;&gt;
    @@.choice;
    &lt;&lt;link &quot;Enter&quot; &quot;Jasmins home&quot;&gt;&gt;&lt;&lt;set $location to $jasmins_bedroom&gt;&gt;&lt;&lt;set $Jasmin.location to &quot;Jasmins bedroom&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
    &lt;&lt;link &quot;Leave&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
    @@
  &lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;switch $Jasmin.status&gt;&gt;
  &lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Jasmin &quot;What do you want? Why are you even still here? You&#39;re not supposed to be here when I sleep, you creep.&quot;&gt;&gt;&lt;&lt;thought &quot;She seems to be seriously pissed. I&#39;d better go.&quot;&gt;&gt;
  	@@.choice;&lt;&lt;link &quot;Leave&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $marlowe_street&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
  &lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Jasmin &quot;I was sleeping.&quot;&gt;&gt;She is wearing quite sexy sleepwear. You can&#39;t help but admire her body. &lt;&lt;msg $Jasmin &quot;Do you see anything you like?&quot;&gt;&gt; She strikes a pose. 
    &lt;&lt;msg $Jasmin &quot;But seriously, although I take your staring as a compliment... What do you want? You can hang out and watch some of my movies if you want, but I need to sleep!&quot;&gt;&gt;
    @@.choice;&lt;&lt;link &quot;Let her sleep&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
  &lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Jasmin &quot;&lt;&lt;greetings&gt;&gt;, &lt;&lt;yourname $Jasmin&gt;&gt;. Do you want to come in? We can fool around a little.&quot;&gt;&gt;
  &lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Jasmin &quot;Hellooooo sexy! Do you wanna fuck?&quot;&gt;&gt;
  &lt;&lt;/switch&gt;&gt;
  &lt;&lt;if $Jasmin.status gte 2&gt;&gt;
  @@.choice;&lt;&lt;link &quot;Enter&quot; &quot;Jasmins home&quot;&gt;&gt;&lt;&lt;set $location to $jasmins_bedroom&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
  &lt;&lt;link &quot;Leave&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;














</tw-passagedata><tw-passagedata pid="38" name="TO DO" tags="" position="1700,800" size="200,200">Redesign events (new philosophy: No more than 1 picture per event part)

Design the SHOPS!!!!
Design the Book



Add Storyevent

Write more of the backstory in the book

Add events for Jasmin
Add events for Henry





Possible other npcs
Nina Hartley (Old) Neighbour who wants to be enchanted
Kelly Scott (Hairy, Mature) Maybe make younger with spell
Kylie Quinn (Cute, Teen) 
Alison Tyler (Brunette Milf with big tits)
Simone Sonay (Blond Milf)
Veruca James (Black hair)
Cherry DeVille (Blond Milf)
Dani Daniels (Brunette)
Jodi Taylor (Redhead)
Jessa Rhodes (Blond)
Jade Kush (Asian)
Demi Sutra (Ebony)
Misty Stone (Ebony)
Violet Starr (Black hair)
Zoey Monroe (blond)
Julia Ann (blond, big tits) Maybe Moms assistant
Ella Nova (blond, perverted, beautiful)
Cody Vore (blond, giant natural tits)
Nia Nacci (ebony, cute)




CASTING:
You: Brad Knight
Brenda: Corey Chase
Andrea: Casey Calvert
Jasmin: Adriana Chechik
Mom: India Summer
Henry: Ricky Johnson
Henrietta: Ana Foxxx
Brian: Ramon Nomar
Brianna: Roxy Raye
Lisa: Carter Cruise
Lucy: Mia Li
Christina: Amirah Adara
Victoria: Bobbi STarr</tw-passagedata><tw-passagedata pid="39" name="Mall" tags="nobr mall public" position="400,500" size="200,100">&lt;&lt;set $peoplepresent++&gt;&gt;
&lt;&lt;switch $location.id&gt;&gt;
&lt;&lt;case &quot;Springvale Mall&quot;&gt;&gt;
&lt;&lt;if $hour gte 20&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;The mall closes. You have to leave now./*&lt;&lt;msg $Unknown &quot;Dear customer. The mall will close soon. Please finish your shopping.&quot;&gt;&gt;@@.choice;&lt;&lt;link &quot;Leave the mall&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $baker_street&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@&lt;&lt;/dialog&gt;&gt;*/&lt;&lt;/if&gt;&gt;
&lt;&lt;mall&gt;&gt;
&lt;&lt;case &quot;Cafe&quot;&gt;&gt;&lt;&lt;cafe&gt;&gt;
&lt;&lt;case &quot;Cafe Office&quot;&gt;&gt;&lt;&lt;cafe_office&gt;&gt;
&lt;&lt;case &quot;Gym&quot;&gt;&gt;&lt;&lt;gym&gt;&gt;
&lt;&lt;case &quot;Bookstore&quot;&gt;&gt;&lt;&lt;bookstore&gt;&gt;
&lt;&lt;case &quot;Sexshop&quot;&gt;&gt;&lt;&lt;sexshop&gt;&gt;
&lt;&lt;default&gt;&gt; ERROR IN LOCATION SETTING FOR MALL
&lt;&lt;/switch&gt;&gt;</tw-passagedata><tw-passagedata pid="40" name="Mall widgets" tags="widget nobr" position="625,500" size="100,100">&lt;&lt;widget mall&gt;&gt;
&lt;&lt;jpg &quot;locations&quot; &quot;mall&quot;&gt;&gt;&lt;br&gt;
The Springvale Mall. There is a (rather uninteresting) grocery store, a cafe, a gym, a sexshop and the bookstore, where $Jasmin.callname works.
&lt;&lt;if $hour gt 10 and $hour lt 17&gt;&gt;&lt;&lt;thought &quot;$Jasmin.callname might be working. I could visit her.&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

/*=======================================================*/
/*=======================================================*/
/*=======================================================*/
&lt;&lt;widget gym&gt;&gt;
&lt;&lt;jpg &quot;locations&quot; &quot;gym&quot;&gt;&gt;&lt;br&gt;
$Andrea.callname works here sometimes as a personal trainer. $Brian.callname also often frequents the gym.
&lt;&lt;/widget&gt;&gt;


/*=======================================================*/
/*=======================================================*/
/*=======================================================*/
&lt;&lt;widget bookstore&gt;&gt;
&lt;&lt;jpg &quot;locations&quot; &quot;bookstore&quot;&gt;&gt;&lt;br&gt;
This is &lt;&lt;=$Brenda.callname&gt;&gt;s Books. The local bookstore, in which $Jasmin.callname works as a clerk.
@@.choice;&lt;&lt;link &quot;Browse the language section&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;shop&#39;&gt;&gt;&lt;&lt;bookstore_languages&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Browse the history section&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;shop&#39;&gt;&gt;NOTHING YET&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;link &quot;Browse the occult section&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;shop&#39;&gt;&gt;NOTHING YET&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

/*=======================================================*/
/*=======================================================*/
/*=======================================================*/












</tw-passagedata><tw-passagedata pid="41" name="Apartment complex" tags="nobr" position="400,625" size="200,100">&lt;&lt;switch $location.id&gt;&gt;
&lt;&lt;case &quot;Apt. building&quot;&gt;&gt;&lt;&lt;apartment_outside&gt;&gt;
&lt;&lt;case &quot;Foyer&quot;&gt;&gt;&lt;&lt;apartment_foyer&gt;&gt;
&lt;&lt;case &quot;Lisas apt&quot;&gt;&gt;&lt;&lt;lisas_apartment&gt;&gt;
&lt;&lt;case &quot;Andreas apt&quot;&gt;&gt;&lt;&lt;andreas_apartment&gt;&gt;
&lt;&lt;default&gt;&gt;ERROR IN LOCATION SWITCH APARTMENT COMPLEX
&lt;&lt;/switch&gt;&gt;</tw-passagedata><tw-passagedata pid="42" name="a. complex widgets" tags="widget nobr" position="625,625" size="100,100">&lt;&lt;widget apartment_outside&gt;&gt;
&lt;&lt;jpg &quot;locations&quot; &quot;apartment_complex_outside&quot;&gt;&gt;&lt;br&gt;
This is the apartment complex where $Andrea.callname, your sister and $Lisa.callname, your &lt;&lt;if $Lisa.status lt 2&gt;&gt;ex-girlfriend&lt;&lt;else&gt;&gt;your bimbo&lt;&lt;/if&gt;&gt; lives.
&lt;&lt;if $keys[5].owned is false&gt;&gt;The door to the apartment complex is locked. 
		@@.choice;&lt;&lt;link &quot;Wait for someone to open the door.&quot;&gt;&gt;
			&lt;&lt;timepass 30&gt;&gt;
			&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;
				&lt;&lt;set _ran to random(1,5)&gt;&gt;
				&lt;&lt;if _ran is 1&gt;&gt;
					Someone opens the door and you wait until the last moment and quickly grab the door. 
					@@.choice;&lt;&lt;link &quot;Enter&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $apartment_foyer&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
				&lt;&lt;else&gt;&gt;
					You wait for half an hour, but no one enters or leaves the building.&lt;br&gt;&lt;&lt;continueon&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;unset _ran&gt;&gt;
			&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;/link&gt;&gt;@@
		@@.choice;&lt;&lt;link &quot;Ring a random apartment.&quot;&gt;&gt;
			&lt;&lt;timepass 5&gt;&gt;
			&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;
				&lt;&lt;set _ran to random(1,8)&gt;&gt;
				&lt;&lt;if _ran is 1&gt;&gt;
					The bell rings and someone asks over the speaker what you want.
					You mumble something barely comprehensible and to your surprise they actually buzz you in.
					@@.choice;&lt;&lt;link &quot;Enter&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $apartment_foyer&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
				&lt;&lt;elseif _ran gt 1 and _ran lte 7&gt;&gt;
					The bell rings and someone asks over the speaker what you want.
					You mumble something barely comprehensible, but they don&#39;t seem convinced and just end the conversation.&lt;br&gt;
					&lt;&lt;continueon&gt;&gt;
				&lt;&lt;else&gt;&gt;
					No one answers. They don&#39;t seem to be at home.&lt;br&gt;&lt;&lt;continueon&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;unset _ran&gt;&gt;
			&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;/link&gt;&gt;@@
&lt;&lt;else&gt;&gt;Since you have the key you can just enter the building if you want. @@.choice;&lt;&lt;link &quot;Enter&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $apartment_foyer&gt;&gt;&lt;&lt;/link&gt;&gt;@@&lt;&lt;/if&gt;&gt;
		&lt;&lt;set _rngand to &quot;Ring &quot;+$Andrea.callname+&quot;s apartment&quot;&gt;&gt;
		@@.choice;&lt;&lt;link _rngand&gt;&gt;
			&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;
				&lt;&lt;if $Andrea.location is &quot;Andreas apt&quot;&gt;&gt; 
				The speaker creaks to life.
				&lt;&lt;msg $Andrea &quot;Who is there?&quot;&gt;&gt;
				&lt;&lt;msg $You &quot;It&#39;s me, &lt;&lt;= $You.callname&gt;&gt;.&quot;&gt;&gt;
				&lt;&lt;switch $Andrea.status&gt;&gt;
				&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Andrea &quot;Fuck off.&quot;&gt;&gt; The speaker creaks again as she turns it off.&lt;br&gt;&lt;&lt;continueon&gt;&gt;				
				&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Andrea &quot;... Alright. Come in!&quot;&gt;&gt;She buzzes you in.@@.choice;&lt;&lt;link &quot;Enter&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $apartment_foyer&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
				&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Andrea &quot;Come in, little bro.&quot;&gt;&gt;She buzzes you in.@@.choice;&lt;&lt;link &quot;Enter&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $apartment_foyer&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
				&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Andrea &quot;I was just about to take a shower. Wanna join?&quot;&gt;&gt;&lt;&lt;msg $You &quot;Sure!&quot;&gt;&gt;&lt;&lt;msg $Andrea &quot;Come up then, pervert!&quot;&gt;&gt;
					She buzzes you in.@@.choice;&lt;&lt;link &quot;Enter&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $apartment_foyer&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
				&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Andrea &quot;Thank fuck you&#39;re here. I need your cock!&quot;&gt;&gt;
					She buzzes you in.@@.choice;&lt;&lt;link &quot;Enter&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $apartment_foyer&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
				&lt;&lt;/switch&gt;&gt;
				&lt;&lt;else&gt;&gt; There is no reaction. She doesn&#39;t seem to be at home.&lt;&lt;continueon&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;/link&gt;&gt;@@
		&lt;&lt;set _rngli to &quot;Ring &quot;+$Lisa.callname+&quot;s apartment&quot;&gt;&gt;
		@@.choice;&lt;&lt;link _rngli&gt;&gt;
			&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;
				&lt;&lt;if $Lisa.location is &quot;Lisas apt&quot;&gt;&gt;
				The speaker creaks to life.
				&lt;&lt;msg $Lisa &quot;Who is there&quot;&gt;&gt;&lt;&lt;if $Lisa.event is &quot;depressed&quot;&gt;&gt;It sounds like she had been crying.&lt;&lt;/if&gt;&gt;
				&lt;&lt;msg $You &quot;It&#39;s me, &lt;&lt;= $You.callname&gt;&gt;.&quot;&gt;&gt;
				&lt;&lt;switch $Lisa.status&gt;&gt;
					&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Lisa &quot;What do you want? Everything is said. You are a loser and I don&#39;t want to talk to you ever again. Leave me alone or I&#39;ll call Brian to beat you up!&quot;&gt;&gt;
						She turns off the speaker and ignores you.&lt;br&gt;&lt;&lt;continueon&gt;&gt;
					&lt;&lt;case 1&gt;&gt;
						&lt;&lt;switch $Lisa.event&gt;&gt;
							&lt;&lt;case &quot;depressed&quot;&gt;&gt;She begins crying again.&lt;&lt;msg $You &quot;What&#39;s going on?&quot;&gt;&gt;&lt;&lt;msg $Lisa &quot;...&quot;&gt;&gt;&lt;&lt;msg $You &quot;Come on, you can tell me.&quot;&gt;&gt;&lt;&lt;msg $Lisa &quot;... Brian left me.&quot;&gt;&gt;
							&lt;&lt;msg $You &quot;Oh! Do you wanna talk about it?&quot;&gt;&gt;&lt;&lt;msg $Lisa &quot;...&quot;&gt;&gt;
							&lt;&lt;case &quot;convinced&quot;&gt;&gt;She sighs.&lt;&lt;msg $You &quot;Can I come in?&quot;&gt;&gt;&lt;&lt;msg $Lisa &quot;I have no idea what you did to $Andrea.callname, but I promised her to at least listen to you.&quot;&gt;&gt;
							&lt;&lt;default&gt;&gt;&lt;&lt;msg $Lisa &quot;Hmph! Fine! Come in.&quot;&gt;&gt;
						&lt;&lt;/switch&gt;&gt;
						She buzzes you in.@@.choice;&lt;&lt;link &quot;Enter&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $apartment_foyer&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
					&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Lisa &quot;Hi, do you want to come in?&quot;&gt;&gt;
						@@.choice;&lt;&lt;link &quot;Enter&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $apartment_foyer&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
					&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Lisa &quot;Hi! Do you want to &lt;&lt;lisabimbotalk &#39;&#39; &#39;like&#39;&gt;&gt; come in?&quot;&gt;&gt;She buzzes you in.
						@@.choice;&lt;&lt;link &quot;Enter&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $apartment_foyer&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
					&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Lisa &quot;Oh goody! Are you, like, going to fuck &lt;&lt;=$Lisa.callname&gt;&gt;? She&#39;s, umm, really horny!&quot;&gt;&gt;Nothing happens.&lt;&lt;msg $You &quot;You have to open the door.&quot;&gt;&gt;
						&lt;&lt;msg $Lisa &quot;Oh my! $Lisa.callname forgot! She&#39;s so silly!&quot;&gt;&gt;She buzzes you in.&lt;br&gt;@@.choice;&lt;&lt;link &quot;Enter&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $apartment_foyer&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
				&lt;&lt;/switch&gt;&gt;
				&lt;&lt;else&gt;&gt; There is no reaction. She doesn&#39;t seem to be at home.&lt;br&gt;&lt;&lt;continueon&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/

&lt;&lt;widget apartment_foyer&gt;&gt;
&lt;&lt;jpg &quot;locations&quot; &quot;apartment_complex_foyer&quot;&gt;&gt;&lt;br&gt;
You are standing in the hall of the apartment building in front of the elevators. $Lisa.callname lives here, as does &lt;&lt;=$Andrea.callname&gt;&gt;. There are many more apartments, but you don&#39;t know anyone else.
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
</tw-passagedata><tw-passagedata pid="43" name="Brians home" tags="nobr" position="400,750" size="200,100">&lt;&lt;brians_home&gt;&gt;
</tw-passagedata><tw-passagedata pid="44" name="PassageFooter" tags="nobr" position="250,1200" size="200,100"></tw-passagedata><tw-passagedata pid="45" name="changelog" tags="widget" position="1920,700" size="100,100">&lt;&lt;widget changelog&gt;&gt;
Changelog Version 0.3.9


Additions:
*Wrote Lisas first and second encantment events.
*Wrote the journal entries for Lisa.
*Wrote the last parts of Brians dialog when punishing him in his house.
*Wrote the end if you angered Lisa.
*You can now interact with Lisa.
*Added a map, accessible via the button in the left sidemenu that lets you fast-travel to the major locations. Some of the locations will turn to links once you own the relevant keys to enter the locations unimpeded.
*Finished the enslavement based events for Brian
*You can talk to Mom and get her to buy more stuff to stock the fridge each day (needs at least first enslavement level). You&#39;ll have to give her a one time payment to allow her to do it. Further upgrades increase the cost and the number of items you get per day, but it the item itself is still randomized.

Changes:
*You are now able to customize the names not only of the MC, but also of all enslaveable characters. You can set the names for the female versions in each transformation event and the names of the formerly unknown characters when meeting them for the first time.
*You can change the names in play in the cheats menu.
*Changed the design of some of the intro links.
*Changed some of the events based on the idea that every page should have only one picture, to avoid needless scrolling.
*You can now only raid the fridge a certain amount of times per day (Starts at 1, but upgradeable).


&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="46" name="phone" tags="nobr" position="2600,900" size="100,100">&lt;div&gt;&lt;/div&gt;
&lt;div id=&quot;phone_content&quot;&gt;
	&lt;div id=&quot;phone_display&quot;&gt;
		&lt;&lt;link &quot;Contacts&quot;&gt;&gt;&lt;&lt;replace &#39;#phone_display&#39;&gt;&gt;
			&lt;&lt;for _i to 0; _i lt $npcs.length;_i++&gt;&gt;&lt;&lt;if $npcs[_i].known is true&gt;&gt;&lt;&lt;capture _i&gt;&gt;&lt;&lt;link &#96;&quot;Call &quot;+$npcs[_i].callname&#96;&gt;&gt;&lt;&lt;call $npcs[_i]&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/capture&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/for&gt;&gt;
		&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
		
	&lt;/div&gt;
&lt;div id=&quot;phone_back&quot;&gt;[img[img/random/back_arrow.png]]&lt;/div&gt;	
&lt;/div&gt;

&lt;div id=&quot;phone_exit&quot;&gt;&lt;/div&gt;
</tw-passagedata><tw-passagedata pid="47" name="inventory" tags="nobr" position="2600,1025" size="100,100">&lt;&lt;if $You.fatigue lt 0&gt;&gt;&lt;&lt;set $You.fatigue to 0&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;div id=&quot;inventorymenu&quot;&gt;
&lt;&lt;link &quot;Consumables&quot;&gt;&gt;&lt;&lt;replace &#39;#inventoryspace&#39;&gt;&gt;&lt;&lt;consumables&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Sextoys&quot;&gt;&gt;&lt;&lt;replace &#39;#inventoryspace&#39;&gt;&gt;&lt;&lt;sextoys&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Quest Items&quot;&gt;&gt;&lt;&lt;replace &#39;#inventoryspace&#39;&gt;&gt;&lt;&lt;questitems&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Close Inventory&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/div&gt;
&lt;div id=&quot;inventoryspace&quot;&gt;
&lt;&lt;consumables&gt;&gt;
&lt;/div&gt;


</tw-passagedata><tw-passagedata pid="48" name="store widgets" tags="widget nobr" position="2848.3333333333335,348.3333333333333" size="100,100">&lt;&lt;widget bookstore_languages&gt;&gt;
&lt;h3&gt;Translation and Languages&lt;/h3&gt;
&lt;div id=&quot;store&quot;&gt;
&lt;&lt;for _i to 0;_i lt $bookstore_languages.length;_i++&gt;&gt;
	&lt;div class=&quot;item&quot;&gt;
		[img[$bookstore_languages[_i].pic]]
		&lt;span class=&quot;price&quot;&gt;
			&lt;&lt;if $bookstore_languages[_i].owned is true&gt;&gt;
				Already owned
			&lt;&lt;elseif $bookstore_languages[_i].cost gt $You.money&gt;&gt;
				Too expensive
			&lt;&lt;else&gt;&gt;
				&lt;&lt;capture _i&gt;&gt;
				&lt;&lt;set _effect to $bookstore_languages[_i].effect&gt;&gt;
				&lt;&lt;link &#96;&quot;Buy &quot;+$bookstore_languages[_i].name+&quot;&lt;br&gt; for &quot;+$bookstore_languages[_i].cost+&quot;$&quot;&#96;&gt;&gt;&lt;&lt;set $bookstore_languages[_i].owned to true&gt;&gt;&lt;&lt;losemoney $bookstore_languages[_i].cost&gt;&gt;
				&lt;&lt;set $You.studyefficiency += _effect&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;shopping&#39; true&gt;&gt;&lt;&lt;bookstore_languages&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
				&lt;&lt;unset _i&gt;&gt;
				&lt;&lt;/capture&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;/span&gt;
	&lt;/div&gt;
&lt;&lt;/for&gt;&gt;&lt;br&gt;
	@@.event;.choice;&lt;&lt;link &quot;Close&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*=====================================*/
&lt;&lt;widget coffee_store&gt;&gt;
	&lt;div id=&quot;store&quot;&gt;
		&lt;&lt;for _i to 0;_i lt $consumables_fatigue.length;_i++&gt;&gt;
			&lt;div class=&quot;item&quot;&gt;
				[img[$consumables_fatigue[_i].pic]]
				&lt;span class=&quot;price&quot;&gt;
				&lt;&lt;if $consumables_fatigue[_i].cost gt $You.money&gt;&gt;
					Too expensive
				&lt;&lt;else&gt;&gt;
					&lt;&lt;capture _i&gt;&gt;
					&lt;&lt;link &#96;&quot;Buy &quot;+$consumables_fatigue[_i].name+&quot; for &quot;+$consumables_fatigue[_i].cost+&quot;$&quot;&#96;&gt;&gt;&lt;&lt;set $consumables_fatigue[_i].amount++&gt;&gt;&lt;&lt;losemoney $consumables_fatigue[_i].cost&gt;&gt;
					&lt;&lt;dialog &#39;&#39; &#39;shopping&#39; true&gt;&gt;&lt;&lt;coffee_store&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
					&lt;&lt;/capture&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;/span&gt;
			&lt;/div&gt;
		&lt;&lt;/for&gt;&gt;
	&lt;/div&gt;
	@@.event;.choice;&lt;&lt;link &quot;Close&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

/*=====================================*/
&lt;&lt;widget streamingshop&gt;&gt;
&lt;h3&gt;You can buy streaming equipment for:&lt;/h3&gt;&lt;br&gt;
&lt;&lt;for _i to 0; _i lt $npcs.length;_i++&gt;&gt;
	&lt;&lt;if $npcs[_i].status gte $npcs[_i].maxstatus&gt;&gt;
		&lt;&lt;if $You.money gte 100&gt;&gt;
			&lt;&lt;capture _i&gt;&gt;
			&lt;&lt;if $npcs[_i].streaming is false&gt;&gt;
				@@.choice;&lt;&lt;link &#96;&quot;Buy streaming equipment for &quot;+$npcs[_i].callname&#96;&gt;&gt;&lt;&lt;set $npcs[_i].streaming to true&gt;&gt;&lt;&lt;losemoney 100&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;streamingshop&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@&lt;br&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;set _price to $npcs[_i].streamingmod*50&gt;&gt;
				&lt;&lt;capture _price&gt;&gt;
				&lt;&lt;if $You.money gte _price&gt;&gt;
					@@.choice;
					&lt;&lt;link &#96;&quot;Upgrade &quot;+$npcs[_i].callname+&quot;s streaming equipment for &quot;+_price+&quot;$&quot;&#96;&gt;&gt;
						&lt;&lt;set $You.money -= _price&gt;&gt;&lt;&lt;set $npcs[_i].streamingmod++&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;streamingshop&gt;&gt;&lt;&lt;ui update&gt;&gt;&lt;&lt;/dialog&gt;&gt;
					&lt;&lt;/link&gt;&gt;@@(Already upgraded &lt;&lt;= $npcs[_i].streamingmod-1&gt;&gt; times.)&lt;hr&gt;
				&lt;&lt;else&gt;&gt;
					You don&#39;t have enought money to upgrade &lt;&lt;= $npcs[_i].name&gt;&gt;s equipment. You need &lt;&lt;= _price&gt;&gt;$.&lt;hr&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;/capture&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;/capture&gt;&gt;
		&lt;&lt;else&gt;&gt; You don&#39;t have enough money to buy any equipment &lt;&lt;break&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/for&gt;&gt;
	@@.event;.choice;&lt;&lt;link &quot;Close&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*=====================================*/
&lt;&lt;widget sextoy_store&gt;&gt;
&lt;h3&gt;Sextoys&lt;/h3&gt;
&lt;div id=&quot;store&quot;&gt;
	&lt;&lt;for _i to 0;_i lt $sextoys.length;_i++&gt;&gt;
		&lt;div class=&quot;item&quot;&gt;
			[img[$sextoys[_i].pic]]
			&lt;span class=&quot;price&quot;&gt;
				&lt;&lt;if $You.money lt $sextoys[_i].cost&gt;&gt;
					Too expensive
				&lt;&lt;else&gt;&gt;
					&lt;&lt;capture _i&gt;&gt;
						&lt;&lt;link &#96;&quot;Buy &quot;+$sextoys[_i].name+&quot; for &quot;+$sextoys[_i].cost+&quot;$&quot;&#96;&gt;&gt;&lt;&lt;set $sextoys[_i].amount++&gt;&gt;&lt;&lt;losemoney $sextoys[_i].cost&gt;&gt;
						&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;sextoy_store&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
					&lt;&lt;/capture&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;/span&gt;
		&lt;/div&gt;
	&lt;&lt;/for&gt;&gt;
&lt;/div&gt;&lt;br&gt;
	@@.event;.choice;&lt;&lt;link &quot;Close&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="49" name="phone widgets" tags="widget nobr" position="2725,900" size="100,100">&lt;&lt;widget call&gt;&gt;
&lt;&lt;switch $args[0].location&gt;&gt;
&lt;&lt;case &quot;Springvale Mall&quot; &quot;Cafe&quot; &quot;Gym&quot; &quot;Sexshop&quot; &quot;Apt. building&quot;&gt;&gt;&lt;&lt;set _l to &quot;at the &quot;+$args[0].location&gt;&gt;
&lt;&lt;case &quot;Baker Street&quot; &quot;Marlowe Street&quot;&gt;&gt;&lt;&lt;set _l to &quot;on &quot;+$args[0].location&gt;&gt;
&lt;&lt;default&gt;&gt;
	&lt;&lt;switch $args[0].id&gt;&gt;
		&lt;&lt;case &quot;Mom&quot;&gt;&gt;
			&lt;&lt;switch $args[0].location&gt;&gt;
			&lt;&lt;case &quot;Hallway&quot; &quot;Livingroom&quot; &quot;Kitchen&quot; &quot;Bathroom&quot; &quot;Moms bedroom&quot; &quot;Your bedroom&quot;&gt;&gt;&lt;&lt;set _l to &quot;at home&quot;&gt;&gt;
			&lt;&lt;case &quot;Andreas apt&quot;&gt;&gt;&lt;&lt;set _l to &quot;visiting Andrea&quot;&gt;&gt;&lt;&lt;case &quot;Bookstore&quot;&gt;&gt;&lt;&lt;set _l to &quot; at the &quot;+$args[0].location&gt;&gt;&gt;&lt;&lt;/switch&gt;&gt;
		&lt;&lt;case &quot;Jasmin&quot;&gt;&gt;&lt;&lt;switch $args[0].location&gt;&gt;&lt;&lt;case &quot;Jasmins livingroom&quot; &quot;Jasmins bedroom&quot;&gt;&gt;&lt;&lt;set _l to &quot;at home&quot;&gt;&gt;&lt;&lt;case &quot;Bookstore&quot;&gt;&gt;&lt;&lt;set _l to &quot;at work&quot;&gt;&gt;&lt;&lt;/switch&gt;&gt;
		&lt;&lt;case &quot;Andrea&quot;&gt;&gt;&lt;&lt;switch $args[0].location&gt;&gt;&lt;&lt;case &quot;Andreas apt&quot;&gt;&gt;&lt;&lt;set _l to &quot;at home&quot;&gt;&gt;&lt;&lt;/switch&gt;&gt; 
		&lt;&lt;case &quot;Lisa&quot;&gt;&gt;&lt;&lt;switch $args[0].location&gt;&gt;&lt;&lt;case &quot;Lisas apt&quot;&gt;&gt;&lt;&lt;set _l to &quot;at home&quot;&gt;&gt;&lt;&lt;/switch&gt;&gt; 
		&lt;&lt;case &quot;Brian&quot;&gt;&gt;&lt;&lt;switch $args[0].location&gt;&gt;&lt;&lt;case &quot;Brians home&quot;&gt;&gt;&lt;&lt;set _l to &quot;at home&quot;&gt;&gt;&lt;&lt;case &quot;Joes Tavern&quot;&gt;&gt;&lt;&lt;set _l to &quot;in the bar&quot;&gt;&gt;&lt;&lt;/switch&gt;&gt;
		&lt;&lt;case &quot;Henry&quot;&gt;&gt;&lt;&lt;switch $args[0].location&gt;&gt;&lt;&lt;case &quot;Henrys home&quot;&gt;&gt;&lt;&lt;set _l to &quot;at home&quot;&gt;&gt;&lt;&lt;/switch&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;/switch&gt;&gt;

&lt;&lt;replace &quot;#phone_display&quot;&gt;&gt;
@@.You;.text;Where are you?@@&lt;br&gt;
&lt;&lt;= &quot;@@.&quot;+$args[0].callname+&quot;;.text;I&#39;m &quot;+ _l + &quot;. @@&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="50" name="Henrys home widgets" tags="widget nobr" position="625,250" size="100,100">&lt;&lt;widget henrys_home&gt;&gt;
&lt;&lt;if $Henry.location isnot &quot;Henrys home&quot;&gt;&gt;
	&lt;&lt;jpg &quot;locations&quot; &quot;henry_livingroom&quot;&gt;&gt;&lt;br&gt;
	With the key you enter &lt;&lt;= $Henry.callname&gt;&gt;s home. There is no one here. The room is full of movie and comic collections.
	@@.choice;&lt;&lt;link &quot;Wait&quot;&gt;&gt;&lt;&lt;timepass 30&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;You wait for half an hour.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;else&gt;&gt;
	&lt;&lt;locpic $Henry&gt;&gt;
	&lt;&lt;switch $Henry.status&gt;&gt;
	&lt;&lt;case 0&gt;&gt;
		$Henry.callname sits on the couch, playing some video game on his console.
		&lt;&lt;msg $Henry &quot;Yo &lt;&lt;yourname $Henry&gt;&gt;! Wanna join me in pwning some noobs? I&#39;m on a streak!&quot;&gt;&gt;
	&lt;&lt;case 1&gt;&gt;
		$Henry.callname quickly gets up as you enter his home. He lowers his eyes.
		&lt;&lt;msg $Henry &quot;&lt;&lt;greetings&gt;&gt; &lt;&lt;yourname $Henry&gt;&gt;. Have you come to play some video games? What do you want to play? I&#39;m game for anything you want.&quot;&gt;&gt;
	&lt;&lt;case 2&gt;&gt;
		$Henry.callname is looking at you expectantly.
		&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_transform&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;case 3&gt;&gt;
		$Henry.callname quickly bows down.
		&lt;&lt;msg $Henry &quot;&lt;&lt;yourname $Henry&gt;&gt;! How can this lowly servant be of use to you?&quot;&gt;&gt;
	&lt;&lt;case 4&gt;&gt;
		$Henry.callname drops to her knees and begins to worship you.
		&lt;&lt;msg $Henry &quot;&lt;&lt;yourname $Henry&gt;&gt;! Although I&#39;m just a lowly woman, please accept my humble prayers and let me worship your divine body.&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget henrynothome&gt;&gt;
	@@.left;&lt;&lt;jpg &quot;random&quot; &quot;outdoor&quot;&gt;&gt;@@ &lt;&lt;= $Henry.callname&gt;&gt;&#39;s door is locked, there is no way in, except breaking in, but why would you do that?
	@@.choice;&lt;&lt;link &quot;Leave&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="51" name="Lisa sex widgets" tags="widget nobr" position="2125,0" size="100,100">/*===================================================================*/
/*================================SEX================================*/
/*===================================================================*/
&lt;&lt;widget lisaorgasm&gt;&gt;
	
	&lt;&lt;if $quests[5].progress is 1&gt;&gt;&lt;&lt;set $quests[5].progress++&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Lisa.status is 3 and $Lisa.iqdrop lt 3&gt;&gt;&lt;&lt;set $Lisa.iqdrop++&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;sexmp4 &quot;Lisa&quot; &quot;orgasm&quot;&gt;&gt;&lt;br&gt;
	&lt;&lt;msg $Lisa &quot;I&#39;M CUMMING! CUMMING! OHHHHHHHH!&quot;&gt;&gt;
	&lt;&lt;set $Lisa.arousal to 0&gt;&gt;
	&lt;&lt;if $Lisa.event is &quot;lisasubmissivefirst&quot;&gt;&gt;&lt;&lt;set $Lisa.event to &quot;none&quot;&gt;&gt;
		$Lisa.callname just passed out. She is not reacting, just smiling blissfully.
		@@.choice;&lt;&lt;link &quot;Better leave her alone for a while&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $Lisa.act to &quot;none&quot;&gt;&gt;&lt;&lt;set $Lisa.arousal to 0&gt;&gt;&lt;&lt;set $sidemenu to true&gt;&gt;&lt;&lt;set $location to $apartment_foyer&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;else&gt;&gt;&lt;&lt;continueon&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisaarousal&gt;&gt;
	&lt;&lt;set $Lisa.arousal++&gt;&gt;
	&lt;&lt;set _im to &quot;I&#39;m&quot;&gt;&gt;
	&lt;&lt;set _is to $Lisa.callname+&quot; is&quot;&gt;&gt;
	&lt;&lt;switch $Lisa.arousal&gt;&gt;
	&lt;&lt;case 1&gt;&gt;
		&lt;&lt;timepass 3&gt;&gt;
		&lt;&lt;switch $Lisa.act&gt;&gt;
		&lt;&lt;case &quot;blowjob&quot;&gt;&gt;$Lisa.callname eyes your cock hungrily.&lt;&lt;msg $Lisa &quot;&lt;&lt;lisabimbotalk &#39;I&#39; $Lisa.callname&gt;&gt; always liked your cock.&quot;&gt;&gt;
		&lt;&lt;case &quot;fuck&quot;&gt;&gt;She uses her fingers to spread her pussylips apart.&lt;&lt;msg $Lisa &quot;&lt;&lt;lisabimbotalk &#39;I&#39; $Lisa.callname&gt;&gt; want your &lt;&lt;lisabimbotalk &#39;dick&#39; &#39;cock&#39;&gt;&gt; in my &lt;&lt;lisabimbotalk &#39;pussy&#39; &#39;vajayjay&#39;&gt;&gt;.&quot;&gt;&gt;
		&lt;&lt;case &quot;anal&quot;&gt;&gt;She spits in her hand and rubs it around her asshole.&lt;&lt;msg $Lisa &quot;Put it in &lt;&lt;lisabimbotalk &#39;my&#39; ´$Lisa.callname+&#39;s&#39;´&gt;&gt; &lt;&lt;lisabimbotalk &#39;ass&#39; &#39;bum&#39;&gt;&gt;.&quot;&gt;&gt;	
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;case 2 3&gt;&gt;
		&lt;&lt;timepass 3&gt;&gt;
		&lt;&lt;switch $Lisa.act&gt;&gt;
		&lt;&lt;case &quot;blowjob&quot;&gt;&gt;$Lisa.callname gives your cock a little lick while looking at you with a smile.&lt;&lt;msg $Lisa &quot;Do you like that?&quot;&gt;&gt;
		&lt;&lt;case &quot;fuck&quot;&gt;&gt;$Lisa.callname moans as you slowly push your cock in and out of her pussy.&lt;&lt;msg $Lisa &quot;Do it! Fuck &lt;&lt;lisabimbotalk &#39;me&#39; $Lisa.callname&gt;&gt;!&quot;&gt;&gt;
		&lt;&lt;case &quot;anal&quot;&gt;&gt;$Lisa.callname spreads her asscheeks, giving you free view of her asshole.&lt;&lt;msg $Lisa &quot;&lt;&lt;lisabimbotalk _im _is&gt;&gt; ready!&quot;&gt;&gt;	
		&lt;&lt;/switch&gt;&gt;		
	&lt;&lt;case 4 5&gt;&gt;
		&lt;&lt;timepass 3&gt;&gt;
		&lt;&lt;switch $Lisa.act&gt;&gt;
		&lt;&lt;case &quot;blowjob&quot;&gt;&gt;She licks the whole length of your cock up and down.&lt;&lt;msg $Lisa &quot;&lt;&lt;lisabimbotalk &#39;Wow, you are hard!&#39; &#39;&lt;i&gt;Hihihi&lt;/i&gt;, like a popsicle!&#39;&gt;&gt;&quot;&gt;&gt;
		&lt;&lt;case &quot;fuck&quot;&gt;&gt;You pick up some speed, reaching deeper into her.&lt;&lt;msg $Lisa &quot;Harder! Fuck &lt;&lt;lisabimbotalk &#39;me&#39; $Lisa.callname&gt;&gt; harder!&quot;&gt;&gt;
		&lt;&lt;case &quot;anal&quot;&gt;&gt;Slowly you push the tip of your cock past her sphincter.&lt;&lt;msg $Lisa &quot;Uhhhhh! It barely fits!&quot;&gt;&gt;	
		&lt;&lt;/switch&gt;&gt;	
	&lt;&lt;case 6 7 8&gt;&gt;
		&lt;&lt;timepass 3&gt;&gt;
		&lt;&lt;switch $Lisa.act&gt;&gt;
		&lt;&lt;case &quot;blowjob&quot;&gt;&gt;$Lisa.callname takes your cock into her wet, warm mouth and begins to bob her head up and down.&lt;&lt;msg $Lisa &quot;You don&#39;t taste half bad, you know that?&quot;&gt;&gt;
		&lt;&lt;case &quot;fuck&quot;&gt;&gt;You ram your cock into her fast and hard. Cute little moans escape her mouth every time you hit her most sensitive spots.&lt;&lt;msg $Lisa &quot;Ohhhhh, more of that! Do it again.&quot;&gt;&gt;
		&lt;&lt;case &quot;anal&quot;&gt;&gt;You begin fucking her ass as she yelps, enjoying the tightness of her ass.&lt;&lt;msg $Lisa &quot;Ughh! Sooo full! Slow down please!&quot;&gt;&gt;	
		&lt;&lt;/switch&gt;&gt;	
	&lt;&lt;case 9 10&gt;&gt;
		&lt;&lt;switch $Lisa.act&gt;&gt;
		&lt;&lt;case &quot;blowjob&quot;&gt;&gt;You grab her head and push her down on your cock. Hard! She gags.&lt;&lt;msg $Lisa &quot;Hkgrr!&quot;&gt;&gt;
		&lt;&lt;case &quot;fuck&quot;&gt;&gt;You grab her hips and speed up again, ramming your cock deep inside her, filling her pussy completely, then leaving it empty when almost pulling your cock out.
			&lt;&lt;msg $Lisa &quot;&lt;&lt;lisabimbotalk &#39;Oh god, _im soo close&#39; ´$Lisa.callname+&#39; feels sooo good in her pussy&#39;´&gt;&gt;!&quot;&gt;&gt;
		&lt;&lt;case &quot;anal&quot;&gt;&gt;You quicken your pace, ramming your hard cock into her tight, warm, constricting ass. $Lisa.callname moans in pleasure.
			&lt;&lt;msg $Lisa &quot;Oh god! &lt;&lt;lisabimbotalk _im _is&gt;&gt; close! More!&quot;&gt;&gt;	
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;case 11&gt;&gt;
		&lt;&lt;timepass 10&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;lisaorgasm&gt;&gt;&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;switch $Lisa.act&gt;&gt;
			&lt;&lt;case &quot;blowjob&quot;&gt;&gt;$Lisa.callname shudders with an orgasm. Her moans are muffled by your cock deep in her throat.&lt;&lt;msg $Lisa &quot;Mmmgrh! Ngh!&quot;&gt;&gt;
			&lt;&lt;case &quot;fuck&quot;&gt;&gt;$Lisa.callname howls with pleasure as a strong orgasm washes over her.&lt;&lt;msg $Lisa &quot;&lt;&lt;lisabimbotalk _im _is&gt;&gt; cumming!&quot;&gt;&gt;
			&lt;&lt;case &quot;anal&quot;&gt;&gt;&lt;&lt;=$Lisa.callname&gt;&gt;s ass constricts around your dick as her whole body convulses from pleasure.&lt;&lt;msg $Lisa &quot;Ooooooohhhh... YES!&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget sexmenuLisa&gt;&gt;
	&lt;&lt;link &quot;Have her blow you&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Lisa.act to &quot;blowjob&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Fuck her pussy&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Lisa.act to &quot;fuck&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Fuck her ass&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $Lisa.act to &quot;anal&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;if $Lisa.event is &quot;lisasubmissivefirst&quot;&gt;&gt;
		&lt;&lt;link &quot;Stop fucking her&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;You need to at least bring her to an orgasm. Otherwise it would completely derail your progress in enslaving her.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;link &quot;Stop fucking her&quot; $location.target&gt;&gt;&lt;&lt;set $sidemenu to true&gt;&gt;&lt;&lt;set $Lisa.arousal to 0&gt;&gt;&lt;&lt;set $Lisa.act to &quot;none&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisasex&gt;&gt; /*args[0] is $Lisa.act*/
	&lt;&lt;switch $args[0]&gt;&gt;&lt;&lt;case &quot;blowjob&quot;&gt;&gt;&lt;&lt;lisabj&gt;&gt;&lt;&lt;case &quot;fuck&quot;&gt;&gt;&lt;&lt;lisafuck&gt;&gt;&lt;&lt;case &quot;anal&quot;&gt;&gt;&lt;&lt;lisaanal&gt;&gt;&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
/*==================================================================*/
&lt;&lt;widget lisabj&gt;&gt;
	&lt;&lt;xxxjpg &quot;Lisa&quot; $location.id &quot;blowjob&quot;&gt;&gt; 
	&lt;&lt;if $Lisa.bj is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;lisabjfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Lisa&quot; &quot;blowjob&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;lisaarousal&gt;&gt;&lt;br&gt;&lt;&lt;youarousal $Lisa&gt;&gt;	
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisabjfirst&gt;&gt;
	&lt;&lt;msg $You &quot;Blow me!&quot;&gt;&gt;
	&lt;&lt;switch $Lisa.status&gt;&gt;
		&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Lisa &quot;What? I&#39;m no stupid bimbo you can just order around to do your bidding. If you ask nicely, then maybe, MAYBE, I&#39;ll think about it.&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;Would you please be so kind, as to put my penis into your oral cavity?&quot;&gt;&gt;
			&lt;&lt;msg $Lisa &quot;...&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;Please?&quot;&gt;&gt;
			She explodes into laughter.
			&lt;&lt;msg $Lisa &quot;Fine, you asshole! Get your penis over here!&quot;&gt;&gt;
		&lt;&lt;case 3&gt;&gt;
			She abstentmindedly licks her lips.
			&lt;&lt;msg $Lisa &quot;It wasn&#39;t that bad, the last time...&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;What&#39;s keeping you then?&quot;&gt;&gt;
			She seems to argue with herself in her head. Then she drops to her knees, a vacant smile forming in her face.
			&lt;&lt;msg $Lisa &quot;Ok. Come over here.&quot;&gt;&gt;
		&lt;&lt;case 4&gt;&gt;
			She jumps up and down while clapping her hands.
			&lt;&lt;msg $Lisa &quot;Oh goody! $Lisa.callname really, like, loves licking your yummy cock!&quot;&gt;&gt;
		&lt;&lt;default&gt;&gt;
			ERROR in lisabjfirst widget: Lisas status is: $Lisa.status
		&lt;&lt;/switch&gt;&gt;
		&lt;&lt;continueon&gt;&gt;
		&lt;&lt;set $Lisa.bj to true&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisafuck&gt;&gt;
	&lt;&lt;xxxjpg &quot;Lisa&quot; $location.id &quot;fuck&quot;&gt;&gt;
	&lt;&lt;if $Lisa.fuck is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;lisafuckfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Lisa&quot; &quot;fuck&quot;&gt;&gt;&lt;br&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;lisaarousal&gt;&gt;&lt;&lt;youarousal $Lisa&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisafuckfirst&gt;&gt;
	&lt;&lt;msg $You &quot;Let&#39;s fuck!&quot;&gt;&gt;
	&lt;&lt;switch $Lisa.status&gt;&gt;
	&lt;&lt;case 2&gt;&gt;
		&lt;&lt;msg $Lisa &quot;Why?&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;You owe me!&quot;&gt;&gt;
		She looks you up and down.
		&lt;&lt;msg $Lisa &quot;Why?&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;You&#39;ve been the most bitchy and shitty woman I&#39;ve ever met.&quot;&gt;&gt;
		She stays silent.
		&lt;&lt;msg $Lisa &quot;...&quot;&gt;&gt;
		&lt;&lt;msg $Lisa &quot;Ugh! Fine!&quot;&gt;&gt;
		&lt;&lt;msg $Lisa &quot;But only out of pity!&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;I&#39;m fine with that!&quot;&gt;&gt;
		&lt;&lt;thought &quot;If you only knew...&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;
		She laughs a content, happy laugh.
		&lt;&lt;msg $Lisa &quot;That&#39;s funny. I wanted to propose the same to you.&quot;&gt;&gt;
	&lt;&lt;case 4&gt;&gt;
		She drops to her knees and sensually crawls towards you.
		&lt;&lt;msg $Lisa &quot;Jippee! $Lisa.callname can&#39;t wait...&quot;&gt;&gt;
	&lt;&lt;default&gt;&gt;
		ERROR in lisafuckfirst widget: Lisas status is $Lisa.status
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;set $Lisa.fuck to true&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
/*===================================================================*/
&lt;&lt;widget lisaanal&gt;&gt;
	&lt;&lt;xxxjpg &quot;Lisa&quot; $location.id &quot;anal&quot;&gt;&gt;
	&lt;&lt;if $Lisa.anal is false&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;lisaanalfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;sexmp4 &quot;Lisa&quot; &quot;anal&quot;&gt;&gt;&lt;br&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;lisaarousal&gt;&gt;&lt;br&gt;&lt;&lt;youarousal $Lisa&gt;&gt;	
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisaanalfirst&gt;&gt;
	&lt;&lt;msg $You &quot;I want to fuck your ass.&quot;&gt;&gt;
	&lt;&lt;switch $Lisa.status&gt;&gt;
	&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Lisa &quot;I don&#39;t care what you want.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;But you always liked it...&quot;&gt;&gt;
		&lt;&lt;msg $Lisa &quot;True.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;So, can I?&quot;&gt;&gt;
		&lt;&lt;msg $Lisa &quot;Fine! But not because you want to, but because I want to.&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;
		$Lisa.callname laughs happily.
		&lt;&lt;msg $Lisa &quot;Please do that! I want to feel that amazing again.&quot;&gt;&gt;
	&lt;&lt;case 4&gt;&gt;
		$Lisa.callname quickly turns around.
		&lt;&lt;msg $Lisa &quot;Stick it &lt;&lt;= $Lisa.callname&gt;&gt;s booty.&quot;&gt;&gt;
		She laughs.
	&lt;&lt;default&gt;&gt;
		ERROR in lisaanalfirst widget: Lisas status is $Lisa.status
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;set $Lisa.anal to true&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="52" name="jobdef" tags="" position="25,775" size="100,100">&lt;&lt;set $cafejob to {
hired:false,
name:&quot;dishwasher&quot;,
pay:10,
hoursworked: 0,
}&gt;&gt;</tw-passagedata><tw-passagedata pid="53" name="inventory widgets" tags="widget nobr" position="2725,1025" size="100,100">&lt;&lt;widget consumables&gt;&gt;
	&lt;&lt;for _i to 0;_i lt $consumables_fatigue.length;_i++&gt;&gt;
		&lt;&lt;if $consumables_fatigue[_i].amount gt 0&gt;&gt;
			&lt;div class=&quot;item&quot;&gt;
			[img[$consumables_fatigue[_i].pic]] 
			@@.amount;&lt;&lt;=$consumables_fatigue[_i].amount&gt;&gt;@@
			&lt;&lt;capture _i&gt;&gt; 
			&lt;&lt;link &quot;Consume&quot;&gt;&gt;&lt;&lt;set $You.fatigue -= $consumables_fatigue[_i].effect&gt;&gt;&lt;&lt;set $consumables_fatigue[_i].amount --&gt;&gt;&lt;&lt;replace &quot;#inventoryspace&quot;&gt;&gt;&lt;&lt;consumables&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;ui update&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
			&lt;&lt;/capture&gt;&gt;
			 &lt;&lt;= $consumables_fatigue[_i].name&gt;&gt; 
			&lt;/div&gt;
		&lt;&lt;/if&gt;&gt;	
	&lt;&lt;/for&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget sextoys&gt;&gt;
	&lt;&lt;for _i to 0;_i lt $sextoys.length;_i++&gt;&gt;
		&lt;&lt;if $sextoys[_i].amount gt 0&gt;&gt;
			&lt;div class=&quot;item&quot;&gt;
				[img[$sextoys[_i].pic]] @@.amount;&lt;&lt;=$sextoys[_i].amount&gt;&gt;@@
				&lt;&lt;=$sextoys[_i].name&gt;&gt;
			&lt;/div&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/for&gt;&gt;
&lt;&lt;/widget&gt;&gt; 

&lt;&lt;widget questitems&gt;&gt;
	&lt;div class=&quot;item&quot;&gt;[img[img/random/items/keys.png]]&lt;&lt;=&quot;You got keys for:&quot;&gt;&gt;&lt;br&gt;&lt;&lt;for _i to 0; _i lt $keys.length;_i++&gt;&gt;&lt;&lt;if $keys[_i].owned is true&gt;&gt;&lt;&lt;= $keys[_i].name&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/for&gt;&gt;&lt;/div&gt;
	&lt;&lt;if $letter.owned&gt;&gt;&lt;div class=&quot;item&quot;&gt;[img[$letter.pic]] &lt;&lt;link &quot;Read the letter&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;&#39;&gt;&gt;&lt;&lt;letter&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/div&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $andreas_bag.owned&gt;&gt;&lt;div class=&quot;item&quot;&gt;[img[$anderas_bag.pic]]&lt;&lt;=&quot;A bag full of Andreas stuff&quot;&gt;&gt;&lt;/div&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $apron.owned&gt;&gt;&lt;div class=&quot;item&quot;&gt;[img[$apron.pic]]&lt;&lt;=&quot;The Busy Bean apron&quot;&gt;&gt;&lt;/div&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $dropped_photo.owned&gt;&gt;&lt;div class=&quot;item&quot;&gt;[img[$dropped_photo.pic]]The photo that &lt;&lt;if $Victoria.known is true&gt;&gt;Victoria&lt;&lt;else&gt;&gt;the mysterious woman&lt;&lt;/if&gt;&gt; dropped.&lt;/div&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="54" name="text widgets" tags="widget nobr" position="2600,600" size="100,100">&lt;&lt;widget yourname&gt;&gt;&lt;&lt;= $args[0].callsyou&gt;&gt;&lt;&lt;/widget&gt;&gt; /*args[0] is who*/
/*===================================================================*/
&lt;&lt;widget continueon&gt;&gt;@@.choice;&lt;&lt;link &quot;Continue&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget thought&gt;&gt;&lt;div id=&quot;thought&quot;&gt;$args[0]&lt;/div&gt;&lt;&lt;/widget&gt;&gt; /*args[0] is what*/
/*==================================================================*/
&lt;&lt;widget msg&gt;&gt;
&lt;&lt;if $args[0].known&gt;&gt;&lt;&lt;set _nm to $args[0].id&gt;&gt;&lt;&lt;set _cnm to $args[0].callname&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set _nm to &quot;Stranger&quot;&gt;&gt;&lt;&lt;set _cnm to &quot;Stranger&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;set _pic to $args[0].facepic&gt;&gt;&lt;&lt;= &#39;&lt;div class=&quot;msg &#39; + _nm + &#39;&quot;&gt;&lt;div class=&quot;msg-pic&quot;&gt; [img[&#39; + _pic + &#39;]]&lt;/div&gt;
&lt;div class=&quot;msg-nonpic&quot;&gt;&lt;div class=&quot;msg-name&quot;&gt;&#39; + _cnm + &#39;&lt;/div&gt;&lt;div class=&quot;msg-text&quot;&gt;&#39; + $args[1] + &#39;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#39;&gt;&gt;&lt;&lt;/widget&gt;&gt; /*args[0] is who, args[1] is what*/
/*==================================================================*/
&lt;&lt;widget greetings&gt;&gt;&lt;&lt;switch $hour&gt;&gt;&lt;&lt;case 8 9 10 11&gt;&gt;Good morning&lt;&lt;case 12 13 14 15 16 17&gt;&gt;Good afternoon&lt;&lt;case 18 19 20 21 22 23 24&gt;&gt;Good evening&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget heshe&gt;&gt;&lt;&lt;if $args[0].gender is &quot;male&quot;&gt;&gt;&lt;&lt;if $args[1] is 0&gt;&gt;He&lt;&lt;else&gt;&gt;he&lt;&lt;/if&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;if $args[1] is 1&gt;&gt;She&lt;&lt;else&gt;&gt;she&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt; /*args[0] is who, args[1] is 0 for H and 1 for h*/

&lt;&lt;widget hisher&gt;&gt;&lt;&lt;if $args[0].gender is &quot;male&quot;&gt;&gt;&lt;&lt;if $args[1] is 0&gt;&gt;His&lt;&lt;else&gt;&gt;his&lt;&lt;/if&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;if $args[1] is 0&gt;&gt;Her&lt;&lt;else&gt;&gt;her&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt; /*args[0] is who, args[1] is 0 for H and 1 for h*/

&lt;&lt;widget himher&gt;&gt;&lt;&lt;if $args[0].gender is &quot;male&quot;&gt;&gt;&lt;&lt;if $args[1] is 0&gt;&gt;Him&lt;&lt;else&gt;&gt;him&lt;&lt;/if&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;if $args[1] is 0&gt;&gt;Her&lt;&lt;else&gt;&gt;her&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/widget&gt;&gt;/*args[0] is who, args[1] is 0 for H and 1 for h*/

&lt;&lt;widget himselfherself&gt;&gt;
	&lt;&lt;if $args[0].gender is &quot;male&quot;&gt;&gt;
		&lt;&lt;if $args[1] is 0&gt;&gt;
			Himself
		&lt;&lt;else&gt;&gt;
			himself
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;if $args[1] is 0&gt;&gt;
			Herself
		&lt;&lt;else&gt;&gt;
			herself
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

/*==================================================================*/
&lt;&lt;widget bimbo&gt;&gt;
	&lt;&lt;if $Lisa.status gte 2&gt;&gt;
		&lt;&lt;switch random(1,3)&gt;&gt;
			&lt;&lt;case 1&gt;&gt;, &lt;i&gt;giggle&lt;/i&gt;,
			&lt;&lt;case 2&gt;&gt;, like,
			&lt;&lt;case 3&gt;&gt;, umm,
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget lisabimbotalk&gt;&gt; 
	/*This widget takes 2 arguments: args[0] is normal Lisa, args[1] is bimbo. It compares a random number to Lisas iq drop and decides wether to use the bimbo line or the normal line.*/
	&lt;&lt;set _ran to random(0,3)&gt;&gt;
	&lt;&lt;if _ran gte $Lisa.iqdrop&gt;&gt;
		$args[0]
	&lt;&lt;else&gt;&gt;
		$args[1]
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="55" name="eventdef" tags="" position="150,775" size="100,100">&lt;&lt;event &#39;click&#39; &#39;#leftmenuinventory&#39;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;inventory&#39;&gt;&gt;&lt;&lt;include &quot;inventory&quot;&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/event&gt;&gt;
&lt;&lt;event &#39;click&#39; &#39;#leftmenujournal&#39;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;journal&#39;&gt;&gt;&lt;&lt;journal&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/event&gt;&gt;
&lt;&lt;event &#39;click&#39; &#39;#leftmenuphone&#39;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;phone&#39;&gt;&gt;&lt;&lt;include &quot;phone&quot;&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/event&gt;&gt;
&lt;&lt;event &#39;click&#39; &#39;#leftmenuoptions&#39;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;options&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/event&gt;&gt;
&lt;&lt;event &#39;click&#39; &#39;#leftmenumap&#39;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;travelmap&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/event&gt;&gt;
&lt;&lt;event &#39;click&#39; &#39;#leftmenumove&#39;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;@@.choice;&lt;&lt;locationmove&gt;&gt;@@&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/event&gt;&gt;
&lt;&lt;event &#39;click&#39; &#39;#phone_back&#39;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;phone&#39;&gt;&gt;&lt;&lt;include &quot;phone&quot;&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/event&gt;&gt;
&lt;&lt;event &#39;click&#39; &#39;#phone_exit&#39;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/event&gt;&gt;
&lt;&lt;event &#39;dblclick&#39; &#39;.lbl-toggle&#39;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;@@.choice;&lt;&lt;locationmove&gt;&gt;&lt;br&gt;&lt;br&gt;&lt;&lt;link &quot;Close&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@&lt;&lt;/dialog&gt;&gt;&lt;&lt;/event&gt;&gt;
&lt;&lt;event &#39;keyup&#39;&gt;&gt;
	&lt;&lt;which 171&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;changelog&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;which 173&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;
	&lt;&lt;which 163&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;statscheck&gt;&gt;&lt;&lt;/dialog&gt;&gt;
&lt;&lt;/event&gt;&gt;
</tw-passagedata><tw-passagedata pid="56" name="PassageDone" tags="nobr" position="475,1200" size="200,100">&lt;&lt;set $propmana to $You.mana/$You.maxmana&gt;&gt;
&lt;&lt;=&#39;&lt;&lt;script&gt;&gt;setup.updateStatusBar(&quot;showmana&quot;,&#39;+$propmana+&#39;);&lt;&lt;/script&gt;&gt;&#39;&gt;&gt;

&lt;&lt;set $propfatigue to $You.fatigue/$You.stamina&gt;&gt;
&lt;&lt;=&#39;&lt;&lt;script&gt;&gt;setup.updateStatusBar(&quot;showfatigue&quot;,&#39;+$propfatigue+&#39;);&lt;&lt;/script&gt;&gt;&#39;&gt;&gt;

&lt;&lt;set $proparousal to $You.arousal/10&gt;&gt;
&lt;&lt;=&#39;&lt;&lt;script&gt;&gt;setup.updateStatusBar(&quot;showarousal&quot;,&#39;+$proparousal+&#39;);&lt;&lt;/script&gt;&gt;&#39;&gt;&gt;

</tw-passagedata><tw-passagedata pid="57" name="Bar" tags="nobr Bar public" position="400,875" size="200,100">&lt;&lt;bar&gt;&gt;	

</tw-passagedata><tw-passagedata pid="58" name="Bar widgets" tags="widget nobr" position="625,875" size="100,100">&lt;&lt;widget bar&gt;&gt;
	&lt;&lt;jpg &quot;locations&quot; &quot;bar&quot;&gt;&gt;&lt;br&gt;
	&lt;&lt;if $Brian.location is &quot;Joes Tavern&quot;&gt;&gt;&lt;&lt;brianbar&gt;&gt;&lt;&lt;/if&gt;&gt;
	You stand inside Joes Tavern, the local bar.&lt;br&gt;
	&lt;&lt;switch $hour&gt;&gt;
	&lt;&lt;case 20&gt;&gt;
	This early in the evening there is not much of a crowd here.
	&lt;&lt;case 21 22&gt;&gt;
	The bar is filled nicely with many people coming and going and enjoying a nice drink.
	&lt;&lt;case 23&gt;&gt;
	The bar is slowly clearing out as more and more people are leaving.
	&lt;&lt;/switch&gt;&gt;

&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget brianbar&gt;&gt;
&lt;&lt;if $Brian.status is 0&gt;&gt;
	&lt;&lt;if $Brian.drunk lt 3&gt;&gt;
		$Brian.callname is at the bar, drinking with some of his (idiot) buddys. He is &lt;&lt;switch $Brian.drunk&gt;&gt;&lt;&lt;case 0&gt;&gt;sober&lt;&lt;case 1&gt;&gt;tipsy&lt;&lt;case 2&gt;&gt;drunk&lt;&lt;/switch&gt;&gt;.
		&lt;&lt;thought &quot; I could make him drunk, then he would be easier to influence. But I&#39;d have to buy for everyone lest he get suspicious.&quot;&gt;&gt;
		&lt;&lt;if $You.money gte 25&gt;&gt;@@.choice;&lt;&lt;link &quot;Buy a round of drinks.&quot; &quot;Bar&quot;&gt;&gt;&lt;&lt;set $Brian.drunk++&gt;&gt;&lt;&lt;losemoney 25&gt;&gt;&lt;&lt;timepass 30&gt;&gt;&lt;&lt;/link&gt;&gt;@@&lt;&lt;/if&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_leaving_bar&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	$Brian.callname is drinking at the bar. There is nothing you can do except letting &lt;&lt;himher $Brian 1&gt;&gt; enjoy it while &lt;&lt;heshe $Brian 1&gt;&gt;still can.
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget barisclosed&gt;&gt;
&lt;&lt;jpg &quot;random&quot; &quot;outdoor&quot;&gt;&gt;&lt;br&gt;
The bar is closed. 
@@.choice;&lt;&lt;link &quot;Come back later&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="59" name="under construction" tags="widget nobr" position="1600,700" size="100,100"></tw-passagedata><tw-passagedata pid="60" name="questdef" tags="" position="25,900" size="100,100">&lt;&lt;set $quests to [
/*0*/
{unlocked: true, name: &quot;Honor your uncles request&quot;, progress: 0, steps: 3, rewardtype:&quot;magic&quot;, rewardchosen: false, descriptions : [&quot;Try the spell on your Mom.&quot;,&quot;Deepen your control on Mom.&quot;,&quot;Enslave your Mom.&quot;,&quot;Done!&quot;],char: &quot;Mom&quot;},
/*1*/
{unlocked: true, name: &quot;Childhood crush&quot;, progress: 0, steps: 3, rewardtype:&quot;magic&quot;, rewardchosen: false, descriptions: [&quot;Enchant your childhood friend.&quot;,&quot;Get into a relationship with her.&quot;,&quot;Make her your loveslave.&quot;,&quot;Done!&quot;],char:&quot;Jasmin&quot;},
/*2*/
{unlocked: true, name: &quot;Helping a friend&quot;, progress: 0, steps: 4, rewardtype:&quot;magic&quot;, rewardchosen: false, descriptions: [&quot;Enchant your buddy.&quot;,&quot;Make him more servile.&quot;,&quot;Transform him into a woman.&quot;,&quot;Make her worship you.&quot;,&quot;Done!&quot;],char:&quot;Henry&quot;},
/*3*/
{unlocked: true, name: &quot;Attitude adjustment&quot;,progress: 0, steps: 4, rewardtype:&quot;magic&quot;, rewardchosen: false, descriptions:[&quot;Find a way to reconect with your sister.&quot;,&quot;Enchant her.&quot;,&quot;Make her horny.&quot;,&quot;Make her your slave&quot;,&quot;Done!&quot;],char:&quot;Andrea&quot;},
/*4*/
{unlocked: true, name: &quot;Payback is a bitch&quot;,progress: 0, steps: 4, rewardtype:&quot;magic&quot;, rewardchosen: false, descriptions:[&quot;Get the drop on the bully.&quot;,&quot;Make him submit.&quot;,&quot;Turn him into a woman.&quot;,&quot;Claim her.&quot;,&quot;Done!&quot;],char:&quot;Brian&quot;},
/*5*/
{unlocked: true, name: &quot;Revenge best served cold&quot;,progress: 0, steps:4, rewardtype:&quot;magic&quot;,rewardchosen: false, descriptions:[&quot;Get your ex to talk to you again&quot;, &quot;Fuck her silly.&quot;, &quot;Dumb her down.&quot;, &quot;Get yourself a bimbo.&quot;,&quot;Done!&quot;],char:&quot;Lisa&quot;},
/*6*/
{unlocked: true, name: &quot;Money makes the world go round&quot;,progress:0,steps:1, rewardtype:&quot;money&quot;,rewardchosen: false, descriptions:[&quot;Get a job.&quot;,&quot;Done!&quot;],char:&quot;miscellaneous&quot;},
/*7*/
{unlocked: false, name: &quot;The mysterious stranger&quot;,progress:0,steps:3,rewardtype:&quot;magic&quot;,rewardchosen: false, descriptions:[&quot;Find out more about the woman.&quot;,&quot;Find out more about the photo.&quot;,&quot;To be continued&quot;],char:&quot;Victoria&quot;}
]&gt;&gt;</tw-passagedata><tw-passagedata pid="61" name="Mom talking widgets" tags="widget nobr" position="1500,125" size="100,100">
/*===================================================================*/
/*===================================TALK============================*/
/*===================================================================*/
&lt;&lt;widget talktomom&gt;&gt;
&lt;div id=&quot;talkouter&quot;&gt;
@@.talklink;
	&lt;&lt;link &quot;What do you think about me?&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;momaboutme&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Tell me about yourself.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;momaboutyou&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Tell me about dad.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;momaboutdad&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &#96;&quot;Tell me about &quot;+ $Albert.callname+&quot;.&quot;&#96;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;momaboutuncle&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;You should stack the fridge more.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;mombuymore&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;if $dropped_photo.owned is true and $Mom.status gt 0&gt;&gt;&lt;&lt;link &quot;What do you know about this photo?&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;momaboutphoto&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Mom.stayathome is false&gt;&gt;&lt;&lt;link &quot;You should stay at home.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;momstayathome&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;else&gt;&gt;&lt;&lt;link &quot;You can go out again&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;momstayathome&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &quot;You should call me...&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;callme $Mom&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Nothing&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
@@
&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget mombuymore&gt;&gt;
	&lt;&lt;if $Mom.status is 0&gt;&gt;
		&lt;&lt;msg $Mom &quot;No way! If you want something, buy it yourself you ungrateful loser. And you&#39;ll better keep your dirty paws from MY groceries!&quot;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;msg $Mom &quot;Of course, &lt;&lt;yourname $Mom&gt;&gt;. But I&#39;d need a little money to do that.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;How much?&quot;&gt;&gt;
		&lt;&lt;msg $Mom &quot;&lt;&lt;=$fridge.upgradecost&gt;&gt;$&quot;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	@@.talklink;
		&lt;&lt;if $Mom.status gt 0&gt;&gt;	
			&lt;&lt;if $money lt $fridge.upgradecost&gt;&gt;
				&lt;&lt;&lt;link &quot;I don&#39;t have enough money right now.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktomom&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;link &quot;Here you go.&quot;&gt;&gt;&lt;&lt;losemoney $fridge.upgradecost&gt;&gt;&lt;&lt;set $fridge.raidspossible++&gt;&gt;&lt;&lt;set $fridge.upgradecost+=100&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktomom&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;link &quot;That&#39;s all I wanted to say.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktomom&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget momaboutphoto&gt;&gt;
&lt;&lt;msg $You &quot;What do you know about this photo?&quot;&gt;&gt;
&lt;&lt;msg $Mom &quot;Where did you get that?&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Doesn&#39;t matter. Just tell me about it.&quot;&gt;&gt;
&lt;&lt;msg $Mom &quot;This is an older photo. I haven&#39;t seen it in ages.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Where did you see it last?&quot;&gt;&gt;
&lt;&lt;msg $Mom &quot;I think it was one that I sent your uncle.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;$Albert.callname?&quot;&gt;&gt;
&lt;&lt;msg $Mom &quot;Yes, I sent him a picture of you once a year, so he wouldn&#39;t bug me about it.&quot;&gt;&gt;
&lt;&lt;thought &quot;Strange.&quot;&gt;&gt;
&lt;&lt;msg $Mom &quot;Do you want to know more?&quot;&gt;&gt;
@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted from you&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktomom&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget momstayathome&gt;&gt;
&lt;&lt;if $Mom.stayathome is false&gt;&gt;
	&lt;&lt;msg $You &quot;You should stay at home. I don&#39;t want you to leave.&quot;&gt;&gt;
	&lt;&lt;switch $Mom.status&gt;&gt;
	&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Mom &quot;Hahaha! If I had to stay here any longer with you I&#39;d go insane and murder you! No way!&quot;&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Mom &quot;But honey, I need to get out to buy food and daily supplies. As much as I&#39;d like to stay at home and be a good mommy for you full time, I can&#39;t.&quot;&gt;&gt;
	&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Mom &quot;Spend more time with my ... sexy ... son? Of course! I&#39;ll just order online whatever you need.&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Mom &quot;Your wish is my command, &lt;&lt;yourname $Mom&gt;&gt;!&quot;&gt;&gt;
	&lt;&lt;default&gt;&gt;ERROR IN STATUS COMPARISON (MOM STAY AT HOME DIALOG)
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;if $Mom.status gt 1&gt;&gt;&lt;&lt;set $Mom.stayathome to true&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;msg $You &quot;You should go out again. I need my privacy.&quot;&gt;&gt;
	&lt;&lt;switch $Mom.status&gt;&gt;
	&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Mom &quot;Oh. Don&#39;t you like my company? But I&#39;m a good mother and I should give you all the space you need. Okay, I&#39;ll go out more.&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Mom &quot;Your wish is my command, &lt;&lt;yourname $Mom&gt;&gt;!&quot;&gt;&gt;
	&lt;&lt;default&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;set $Mom.stayathome to false&gt;&gt;
&lt;&lt;/if&gt;&gt;
@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted from you&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktomom&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget momaboutdad&gt;&gt;
	&lt;&lt;msg $You &quot;Tell me about dad.&quot;&gt;&gt;
	&lt;&lt;switch $Mom.status&gt;&gt;
	&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Mom &quot;You want to know about your father? Do you? Well, he was a loser, just like you!&quot;&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Mom &quot;I&#39;m so sorry. I know you needed your Dad. Growing up without him must have been so horrible for you. I&#39;m so sorry I pushed him away. It is all my fault. Can you forgive me?&quot;&gt;&gt;
	&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Mom &quot;You Dad was a fine man when I met him. He was hot! Just like you! So strong and powerful, so erotic...&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Mom! Stay focused!&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;Sorry. So, he was also very rich, which was the main reason I married him. I&#39;m so sorry, but I was a golddigger then and I regret it so much. Anyway, your father changed. He became obsessed with something his brother found on one of his expeditions. He spent a lot of money on it, but never told me what it was. He stopped ... paying attention to me. I got upset and was very nasty to him&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Mom &quot;Of course &lt;&lt;yourname $Mom&gt;&gt;. I set him an ultimatum. Me or whatever he obsessed about. He didn&#39;t chose me, so I made his life a living hell. He didn&#39;t fight, he just left. I had him declared dead as soon as possible and took the rest of the money for me. But you are much better than him. I never submitted to him in the way I submit to you. You own me!&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to know&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktomom&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget momaboutuncle&gt;&gt;
	&lt;&lt;msg $You &quot;What can you tell me about $Albert.callname?&quot;&gt;&gt;
	&lt;&lt;switch $Mom.status&gt;&gt;
	&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Mom &quot;If you want to continue living here, don&#39;t ever mention this name again.&quot;&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Mom &quot;I don&#39;t really want to talk about him.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Please?&quot;&gt;&gt;&lt;&lt;msg $Mom &quot;Okay, &lt;&lt;yourname $Mom&gt;&gt;. He was always strange. I always had the feeling he undressed me with his eyes. He made lewd and inapropriate comments towards me and women in general. I hate him. He was always nice to you though.&quot;&gt;&gt;
	&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Mom &quot;Your Dad loved him, but was a nasty, evil man. I think he hated mee, because he saw through my gold digging. One day he showed something to your father and he got obsessed with it. Your dad visited his brother more and more and I don&#39;t know what they did.&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Mom &quot;I suspect he wanted to fuck me &lt;&lt;yourname $Mom&gt;&gt;. But that would never have happened. You&#39;re the only one that can fuck me.&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to know&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktomom&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget momaboutyou&gt;&gt;
	&lt;&lt;msg $You &quot;Tell me about yourself.&quot;&gt;&gt;
	&lt;&lt;switch $Mom.status&gt;&gt;
	&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Mom &quot;You want to know something about me? I&#39;m annoyed. Leave me alone!&quot;&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Mom &quot;I just recently realized what a bad mother I&#39;ve been and I vowed to make it up to you. So if I can do anything for you, let me know.&quot;&gt;&gt;
	&lt;&lt;case 2&gt;&gt;
		&lt;&lt;msg $Mom &quot;Lately I&#39;ve been feeling ... strange.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Explain.&quot;&gt;&gt;
		&lt;&lt;msg $Mom &quot;I don&#39;t know. All I can think about is how ... attractive ... sexy ... arousing...&quot;&gt;&gt;
		&lt;&lt;msg $Mom &quot;Mmm... ... ...&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Mom?!&quot;&gt;&gt;
		&lt;&lt;msg $Mom &quot;Oh! Sorry, &lt;&lt;yourname $Mom&gt;&gt;. I was just daydreaming a little. What did you want?&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Mom &quot;I&#39;m your sexslave. My duty is to pleasure you in any way I can. I live for your pleasure. My body, mind and soul are yours to command.&quot;&gt;&gt;
	&lt;&lt;default&gt;&gt;ERROR in momaboutyou. Case not found
	&lt;&lt;/switch&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to know&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktomom&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget momaboutme&gt;&gt;
	&lt;&lt;msg $You &quot;What do you think about me?&quot;&gt;&gt;
	&lt;&lt;switch $Mom.status&gt;&gt;
	&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Mom &quot;You are useless. If you weren&#39;t my son I would kick you out to live under a bridge.&quot;&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Mom &quot;You are my beloved son. I&#39;ve treated you so badly. But this will chance. You are now my top priority and I&#39;ll support you in every way I can.&quot;&gt;&gt;
	&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Mom &quot;You are the most attractive and arousing man I&#39;ve ever met. I don&#39;t know why, but everything I can think about in your presence is how I&#39;d love to do ... things ... with you.&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Mom &quot;You are my master. I&#39;m your slave.&quot;&gt;&gt;
	&lt;&lt;default&gt;&gt;ERROR in momaboutyou. Case not found
	&lt;&lt;/switch&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to know&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktomom&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="62" name="Mom event widgets" tags="widget nobr" position="1500,250" size="100,100">/*===================================================================*/
&lt;&lt;widget sandwich&gt;&gt;
&lt;&lt;set $Mom.eventcd++&gt;&gt;
&lt;&lt;if $You.sandwich is &quot;nothing yet&quot;&gt;&gt;
	&lt;&lt;set $Mom.event to &quot;apology&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
	@@.left;[img[img/random/sandwich.jpg]]@@
	&lt;&lt;switch $Mom.status&gt;&gt;	
	&lt;&lt;case 1&gt;&gt;
		Your Mom enters the room with a plate of sandwiches in her hand.
		&lt;&lt;msg $Mom &quot;Hey, darling. I made you sandwiches. &lt;&lt;= $You.sandwich&gt;&gt;, right?&quot;&gt;&gt;
	&lt;&lt;case 2&gt;&gt;
		Your Mom enters the room with a plate of sandwiches in her hand. As she lays eyes on you a sudder runs over her and you can clearly see the enormous strength it costs her not to start rubbing herself then
		and there.
		&lt;&lt;msg $Mom &quot;I... I made some ... Mmmmh ... some sandwiches. And I thought you might ...love... some. It&#39;s &lt;&lt;= $You.sandwich&gt;&gt;, just like you prefer.&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;
		Your Mom enters the room with a plate of sandwiches. She kneels down besides you and patiently awaits your permission to speak.
		&lt;&lt;msg $You &quot;You may speak now, slave.&quot;&gt;&gt;
		&lt;&lt;msg $Mom &quot;Master, I made sandwiches. I thought you might be hungry.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Thank you slave. Good thinking. How can I reward you?&quot;&gt;&gt;
		&lt;&lt;msg $Mom &quot;Your praise is reward enough.&quot;&gt;&gt;
		She looks down shyly.
		&lt;&lt;msg $Mom &quot;But if you want to I would love being fucked by you.&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;set $Mom.event to &quot;none&quot;&gt;&gt;
@@.choice;&lt;&lt;link &quot;Eat the sandwiches&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget mom_masturbation&gt;&gt;
&lt;&lt;set $Mom.eventcd++&gt;&gt;&lt;&lt;set $Mom.event to &quot;none&quot;&gt;&gt;
&lt;&lt;switch $Mom.status&gt;&gt;
&lt;&lt;case 2&gt;&gt;
	As you leave the room you hear a noice coming from the stairs. You hear a wet, slushing sound intermixed with panting and moaning. Mom is playing with a dildo.&lt;br&gt;
	&lt;&lt;xxxjpg &quot;Mom&quot; &quot;Event&quot; &quot;Masturbation_stairs&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;Oh god!&quot;&gt;&gt;
	She licks the dildo, running her tongue up and down the cold glass shaft.
	&lt;&lt;msg $Mom &quot;This is so wrong!&quot;&gt;&gt;
	She takes the dildo in her mouth, fellating it desperatly.
	&lt;&lt;msg $Mom &quot;But I need it soo much!&quot;&gt;&gt;
	She uses the dildo to trace her pussy lips. At first slowly. Up and down, then gradually faster and faster.
	&lt;&lt;msg $Mom &quot;I can&#39;t stand it any longer!&quot;&gt;&gt;
	She plunges the dildo deep into her longing, wet pussy.
	&lt;&lt;msg $Mom &quot;Ohhhh!&quot;&gt;&gt;
	Then she suddenly stops as she realizes you are watching her.
	&lt;&lt;msg $Mom &quot;OH! NO!&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;How much have you seen?&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Everything&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_masturbation_horny_1&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;case 3&gt;&gt;
	Your mom waits on the stairs for you as you exit the room. She suggestively licks the glass dildo she has brought.
	&lt;&lt;xxxjpg &quot;Mom&quot; &quot;Event&quot; &quot;Masturbation_stairs&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;Hello Master! Look what I found.&quot;&gt;&gt;
	She toys with the dildo. Licking it, rubbing it. All the while she looks at you with lust filled eyes.
	&lt;&lt;msg $Mom &quot;It doesn&#39;t compare to you, of course!&quot;&gt;&gt;
	She slowly spreads her legs, revealing her wet and glistening pussy. She trails the dilso down her body towards it, leaving a trail of saliva over her breasts, her stomach, circeling her navel and finally
	down to her private parts.
	&lt;&lt;msg $Mom &quot;I wish it was you, Master!&quot;&gt;&gt;
	She spreads her pussylips and rubs the glass rod over her clitoris.
	&lt;&lt;msg $Mom &quot;Thes feels good! ... But it&#39;s not enough!&quot;&gt;&gt;
	She looks at you desperately.
	&lt;&lt;msg $Mom &quot;May I continue, &lt;&lt;yourname $Mom&gt;&gt;?&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;You may!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_masturbation_1&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget mom_masturbation_horny_1&gt;&gt;
	&lt;&lt;sexmp4 &quot;Mom&quot; &quot;squirting&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;My son saw me mastur...AAAARRGHH!!!&quot;&gt;&gt;
	With a feral scream mom cums in a giant geyser and falls to the floor thrashing her limbs, as the reality of the situation hits her and forces her to an incredible orgasm.

	@@.choice;&lt;&lt;link &quot;Let her continue&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@	
&lt;&lt;/widget&gt;&gt;


&lt;&lt;widget mom_masturbation_1&gt;&gt;
	&lt;&lt;msg $Mom &quot;You fuck me sooo good.&quot;&gt;&gt;
	Pressing the head of the dildo against her wetness, slowly spreading it, she finally pushes it in, moaning deeply.
	&lt;&lt;msg $Mom &quot;Like no one ever has fucked me before.&quot;&gt;&gt;
	She begins to plunge the toy in and out of her.
	@@.right;&lt;&lt;sexmp4 &quot;Mom&quot; &quot;dildo&quot;&gt;&gt;@@
	Mom quickens the pace, making slushing, wet sounds as her juices drip out of her pussy onto the stairs. The smell fills the room, adding to eroticism of the scene.&lt;br&gt;
	She looks at you, pleadingly.
	&lt;&lt;msg $Mom &quot;Please, Master. May I come?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Not yet!&quot;&gt;&gt;
	She is clearly flustered, but accepts your order without complaints.
	&lt;&lt;msg $Mom &quot;Please? I can&#39;t hold it much longer.&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Fine! Cum!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_masturbation_2&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Not yet!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_masturbation_3&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget mom_masturbation_2&gt;&gt;
	The instant you give her the permission she explodes in a flood of juices and screams.&lt;br&gt;
	&lt;&lt;sexmp4 &quot;Mom&quot; &quot;squirting&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Let her recover&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget mom_masturbation_3&gt;&gt;
Your Mom rams the dildo quickly in and out of her pussy, splattering her juices all over the stairs. She howls with barely constrained pleasure.
&lt;&lt;msg $Mom &quot;Oh god! Please! Have mercy!&quot;&gt;&gt;
@@.right;&lt;&lt;sexmp4 &quot;Mom&quot; &quot;dildo&quot;&gt;&gt;@@
&lt;&lt;msg $Mom &quot;Let me cum? I need to cum! I&#39;m exploding!&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Fine! Cum!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_masturbation_2&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Not yet!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_masturbation_3&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;

/*===================================================================*/
&lt;&lt;widget mom_roomvisit&gt;&gt;
&lt;&lt;set $Mom.eventcd++&gt;&gt;&lt;&lt;set $Mom.event to &quot;none&quot;&gt;&gt;
&lt;&lt;switch $Mom.status&gt;&gt;
&lt;&lt;case 2&gt;&gt;
	As you open the door to your room you stop in your tracks. Mom is sitting on your desk, masturbating with a big, thick dildo. She licks it and guides it into her waiting, gaping asshole.&lt;br&gt;
	&lt;&lt;xxxjpg &quot;Mom&quot; &quot;Event&quot; &quot;Masturbation_room&quot;&gt;&gt;&lt;br&gt;
	&lt;&lt;msg $Mom &quot;Oh god! I shouldn&#39;t be doing that.&quot;&gt;&gt;
	She moans and groans from pleasure. Pressing the words out, as if she were trying to convince her to stop.
	&lt;&lt;msg $Mom &quot;But it feels sooo good.&quot;&gt;&gt;
	@@.choice;
		&lt;&lt;link &quot;Continue watching&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_roomvisit_horny_masturbation&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Carefully close the door&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;set $location to $home_hallway&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;case 3&gt;&gt;
	You can hear your Mom even through the closed door. She is moaning and screaming with pleasure. As you open the door you are greeted by the sight of her, ramming a dildo into her asshole.
	She looks up at you.	
	&lt;&lt;xxxjpg &quot;Mom&quot; &quot;Event&quot; &quot;masturbation_room&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;Master! I didn&#39;t know you would be back so soon.&quot;&gt;&gt;
	But it is very clear that she was waiting for you to give you a show.
	&lt;&lt;msg $Mom &quot;But now that you are allready here, should I continue?&quot;&gt;&gt;
	You nod, as seeing her pleasuring herself like that is very arousing.
	&lt;&lt;msg $Mom &quot;I wish it was you, Master!&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Nod in encouragement&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_roomvisit_slave_masturbation&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/switch&gt;&gt;	
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget mom_roomvisit_horny_masturbation&gt;&gt;
	In and out the thick unliving lump goes.
	@@.right;&lt;&lt;sexmp4 &quot;Mom&quot; &quot;roomvisit&quot;&gt;&gt;@@
	&lt;&lt;msg $Mom &quot;And he is soo hot.&quot;&gt;&gt;
	She rams it deep, up to the hilt.
	&lt;&lt;msg $Mom &quot;Oh god! If he would fuck me? I would go insane!&quot;&gt;&gt;
	With this thought, she throws her head back and howls in the grip of a mind shattering orgasm.&lt;br&gt;
	@@.choice;
		&lt;&lt;link &quot;Watch her orgasm&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_roomvisit_horny_orgasm&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Carefully close the door&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;set $location to $home_hallway&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget mom_roomvisit_horny_orgasm&gt;&gt;
	&lt;&lt;sexmp4 &quot;Mom&quot; &quot;squirting_dildo&quot;&gt;&gt;&lt;br&gt;
	After calming down, the convulsions calmed to a little shudder here and there your Mom looks around and sees the puddle, she left on the desk.
	&lt;&lt;msg $Mom &quot;Ups. Gotta clean that up quickly, before he comes back.&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Close the door.&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget mom_roomvisit_slave_masturbation&gt;&gt;
	She looks at you longingly.
	&lt;&lt;msg $Mom &quot;This dildo just can&#39;t compare to your magnificent cock!&quot;&gt;&gt;
	She eagerly uses the toy to, in equal parts, give you a show and pleasure herself.
	@@.right;&lt;&lt;sexmp4 &quot;Mom&quot; &quot;roomvisit&quot;&gt;&gt;&lt;br&gt;@@
	Soon she begins to get close. Through gritted teeth and light spasms she begs you.
	&lt;&lt;msg $Mom &quot;May I cum, Master?&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Yes, you may.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_roomvisit_slave_orgasm&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget mom_roomvisit_slave_orgasm&gt;&gt;
	&lt;&lt;msg $You &quot;I feel gracious today. You may.&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;ThankyouThankyouThankyou!&quot;&gt;&gt;
	@@.right;&lt;&lt;mp4 &quot;Mom&quot; &quot;squirting_dildo_1&quot;&gt;&gt;&lt;br&gt;@@
	She cums with a violent spasm and squirts all over your room.
	&lt;&lt;msg $You &quot;Now clean that up, slave!&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;Y... Yes Master! As... as... as soon as I am able to stand up again.&quot;&gt;&gt;
	&lt;&lt;set $Mom.event to &quot;none&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Let her clean up&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;set $location to $home_hallway&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/

&lt;&lt;widget mom_apology&gt;&gt;
	&lt;&lt;set $Mom.eventcd ++&gt;&gt;
	As you leave your room, your mom stops you. She must&#39;ve been waiting for you to leave. She seems unsure, almost shy, nervously wringing her hands.
	&lt;&lt;msg $Mom &quot;Do you have a minute? I have something important to tell you.&quot;&gt;&gt;
	&lt;&lt;thought &quot;This behaviour isn&#39;t normal. That has to be the effect of the spell. Lets test it a little more.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Not much. Make it short!&quot;&gt;&gt;
	&lt;&lt;thought &quot;She would never accept this way of talking.&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;Of course. Whatever you say.&quot;&gt;&gt;
	&lt;&lt;thought &quot;Bingo!&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;I&#39;ve done some thinking and I realized how bad of a mother I&#39;ve been to you. I feel terrible because of that and I decided to make up for it. From now on it is your happiness that comes first. If 
	that is alright with you?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Yes it is. Now go, make me a sandwich.&quot;&gt;&gt;
	Your mom just nods and hurries in the direction of the kitchen. Then she stops herself and turns around.
	&lt;&lt;msg $Mom &quot;I don&#39;t even know how you like your sandwiches. I&#39;m such a bad mother.&quot;&gt;&gt;
	She lowers her gaze and almost cries.
	&lt;&lt;msg $You &quot;Yes, you are. But let&#39;s leave that behind us. From now on our relationship will be much better, right?&quot;&gt;&gt;
	You step up to her and lift her head by her chin.
	&lt;&lt;msg $Mom &quot;Of course. You are such a good son. I don&#39;t deserve you.&quot;&gt;&gt;
	&lt;&lt;thought &quot;Oh, if you just knew how much you deserve what is coming for you.&quot;&gt;&gt;&lt;br&gt;
	@@.talklink;
	&lt;&lt;link &quot;I like ham and cheese&quot;&gt;&gt;&lt;&lt;set $You.sandwich to &quot;ham and cheese&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;I like tuna and mayo&quot;&gt;&gt;&lt;&lt;set $You.sandwich to &quot;tuna and mayo&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
	&lt;&lt;set $Mom.event to &quot;none&quot;&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget mom_horny_first&gt;&gt;
	&lt;&lt;set $Mom.event to &quot;none&quot;&gt;&gt;&lt;&lt;set $Mom.eventcd++&gt;&gt;
	@@.right;&lt;&lt;jpg &quot;Mom/Event&quot; &quot;momhornyfirst_1&quot;&gt;&gt;@@
	&lt;&lt;msg $Mom &quot;Oh, &lt;&lt;yourname $Mom&gt;&gt;. I didn&#39;t see you there.&quot;&gt;&gt;
	She looks you up and down.
	&lt;&lt;msg $Mom &quot;How much you have grown up. You&#39;ve become quite the ... attactive young man.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Mom?&quot;&gt;&gt;
	You act shocked, also you are quite amused on the inside. The spell is clearly working.
	&lt;&lt;msg $Mom &quot;Oh, don&#39;t worry. It&#39;s only natural that a woman appreciates a hot guy.&quot;&gt;&gt;
	She walks over to you and takes your hand.
	&lt;&lt;msg $Mom &quot;You have such a strong hands. And such a powerful grip. Every girl could be happy, if you were to touch her with them.&quot;&gt;&gt;
	Her fingers wander along your arms.
	&lt;&lt;msg $Mom &quot;Such strong arms. I bet you can hold a woman really good with them.&quot;&gt;&gt;
	Her breathing quickens a little, a slow blush is appearing on her face.
	@@.choice;
		&lt;&lt;link &quot;Let her continue&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_horny_first_kiss&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Push her away&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_horny_first_after_kiss&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget mom_horny_first_kiss&gt;&gt;
	&lt;&lt;mp4 &quot;Mom&quot; &quot;lipbiting&quot;&gt;&gt;&lt;br&gt;
	&lt;&lt;msg $Mom &quot;Such a beautiful, manly face. I bet you are a great kisser.&quot;&gt;&gt;
	She subconsciously moves closer to you, almost leaning in for a kiss.
	@@.talklink;&lt;&lt;link &quot;Mom?&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_horny_first_after_kiss&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget mom_horny_first_after_kiss&gt;&gt;
	@@.right;&lt;&lt;jpg &quot;Mom/Event&quot; &quot;momhornyfirst_2&quot;&gt;&gt;@@
	&lt;&lt;msg $Mom &quot;Oh!&quot;&gt;&gt;
	She quickly takes a step back, but remains in your personal space.
	&lt;&lt;msg $Mom &quot;So commanding.&quot;&gt;&gt;
	She sighs and the blushing increases.	
	&lt;&lt;msg $Mom &quot;Oh and your chest. So broad, so strong.&quot;&gt;&gt;
	Her hand shyly snakes forward as if waiting for a word from you. You stay silent.
	&lt;&lt;msg $Mom &quot;I could rest my head on it for hours, just enjoying your warmth and presence.&quot;&gt;&gt;
	She turns her gaze towards your crotch, then suddenly steps back.
	&lt;&lt;msg $You &quot;What&#39;s the matter?&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;Do you think I&#39;m beautiful?&quot;&gt;&gt;
	She strikes a pose, that really shows her body, although she is still clothed.
	@@.talklink;&lt;&lt;link &quot;Yes, you are.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_horny_first_offer&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget mom_horny_first_offer&gt;&gt;	
	@@.right;&lt;&lt;jpg &quot;Mom/Event&quot; &quot;momhornyfirst_3&quot;&gt;&gt;@@	
	&lt;&lt;msg $You &quot;You are sexy as well.&quot;&gt;&gt;
	Mom smiles at your compliment.
	&lt;&lt;msg $Mom &quot;Do you think you could ... I mean ... if I wouldn&#39;t be your mother ... I don&#39;t know ...&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;If you weren&#39;t my mother I would fuck you on the spot!&quot;&gt;&gt;
	She smiles proudly and lifts the hem of her dress, showing you that she is not wearing any panties.&lt;br&gt;
	&lt;&lt;msg $Mom &quot;You are ... extremely sexy ... as well. Look how wet you make Mommy.&quot;&gt;&gt;
	She runs her finger along her slit and shows you. It&#39;s glistening with her lovejuice.
	&lt;&lt;msg $You &quot;Mom!&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;Oh don&#39;t worry. You&#39;re an adult now. And you are attracted to me and I&#39;m attracted to you. If you are fine with it, I don&#39;t care if we are related.&quot;&gt;&gt;
	You pretend to think about it.
	&lt;&lt;msg $Mom &quot;I know that young man like you have certain needs, and since it&#39;s my responsibility as your mother to take care of you, why not combine the duty with some fun?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Are you saying that we should fuck?&quot;&gt;&gt;
	&lt;&lt;msg $Mom &quot;All I&#39;m saying is that if you ever feel a certain need ... don&#39;t hesitate to call on me.&quot;&gt;&gt;
	She winks at you and saunters into her bedroom.
	&lt;&lt;set $Mom.location to &quot;Moms bedroom&quot;&gt;&gt;
	&lt;&lt;set $Mom.movecd to 25&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget mom_surrender&gt;&gt;
&lt;&lt;set $Mom.event to &quot;none&quot;&gt;&gt;&lt;&lt;set $Mom.eventcd++&gt;&gt;
As you open the door you are greeted by the sight of your Mom waiting for you. She has put on a shiny black leather outfit, including a collar with a leash.&lt;br&gt;
@@.right;&lt;&lt;jpg &quot;Mom/Event&quot; &quot;surrender_1&quot;&gt;&gt;@@
&lt;&lt;msg $Mom &quot;May I speak?&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Speak!&quot;&gt;&gt;
&lt;&lt;msg $Mom &quot;Thank you. I have thought long and hard about our relationship as mother and son and I&#39;ve come to the conclusion that it is time for me to accept my feelings.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;And what are your feelings?&quot;&gt;&gt;
&lt;&lt;msg $Mom &quot;I feel like I have to be your sexslave, to make sure that I&#39;m there for you to make use of however you like.&quot;&gt;&gt; 
&lt;&lt;msg $You &quot;That sounds good to me.&quot;&gt;&gt;
&lt;&lt;msg $Mom &quot;I&#39;m glad to hear that. Will you accept me as your slave? Will you be my Master?&quot;&gt;&gt;
She presents the leash to you.
@@.choice;&lt;&lt;link &quot;Take her as your slave&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_surrender_1&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget mom_surrender_1&gt;&gt;
You grab the leash and pull it hard. She loses her balance and falls to her knees.
&lt;&lt;msg $You &quot;Service me.&quot;&gt;&gt;
&lt;&lt;msg $Mom &quot;Gladly.&quot;&gt;&gt;
She quickly crawls over to you and frees your cock from your pants.
&lt;&lt;msg $You &quot;Hands behind your back!&quot;&gt;&gt;
Mom complies and you grab her head, holding her tight and ramming your cock deep into her throat. &lt;br&gt;
She readily accepts your cock, deepthroating you without complaint.&lt;br&gt;
@@.right;&lt;&lt;mp4 &quot;Mom&quot; &quot;surrender_blowjob_1&quot;&gt;&gt;@@
&lt;&lt;msg $Mom &quot;Mmmmmmmhmmmm.&quot;&gt;&gt;
She moans with pleasure and the vibrations travel through her throat right into your body.&lt;br&gt;
You continue to mercilessly fuck her throat.
&lt;&lt;msg $You &quot;Oh god! Mom! This feels amazing! I&#39;m close.&quot;&gt;&gt;
You grab her and force her closer to you, ramming your cock all the way into her mouth up to the base. Her face is crushed against your body and you can clearly see she has trouble breathing. But still she doesn&#39;t complain, taking it all like the good slave she is. She increases your pleasure even more by using her tongue to massage your shaft and contracting her throat around the tip of your cock, coaxing out even the last bit of pleasure.&lt;br&gt;
@@.choice;&lt;&lt;link &quot;Cum down her throat.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_surrender_2&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget mom_surrender_2&gt;&gt;
&lt;&lt;msg $You &quot;Here it comes. Swallow it all!&quot;&gt;&gt;&lt;&lt;timepass 30&gt;&gt;
@@.left;&lt;&lt;mp4 &quot;Mom&quot; &quot;surrender_blowjob_2&quot;&gt;&gt;@@&lt;br&gt;
Your explode into her mouth, shooting rope after rope of hot cum into her hungry throat. You feel her orgasming at the same time, shaking from her own pleasure and her bodys need to get air. After a seemingly endless time of pleasure you release your grip and she falls backwards, her face red, drawing deep breaths that finally get the oxygen back into her body. 
After she regains her composure she looks up at you lovingly.
&lt;&lt;msg $Mom &quot;Thanks for using me, Master!&quot;&gt;&gt;
&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="63" name="Mom enslave widgets" tags="widget nobr" position="1500,375" size="100,100">
/*===================================================================*/
/*=============================ENCHANTMENT===========================*/
/*===================================================================*/

&lt;&lt;widget momenslavesub&gt;&gt;
	&lt;br&gt;Nervously you watch her reaction and indeed, after a short moment her breathing slows down and her eyes glaze over. &lt;br&gt;
	&lt;&lt;thought &quot;It&#39;s now or never!&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Mom, you were a very bad mother to me. You realize that now. And you feel sorry for it. You want to make up for it. And since you were such a bad domineering mother for all these years you decide
	that to make up for it you will from now on be the opposite. You will be submissive and obedient to me. You will do everything in your power to make me happy and always have my best interest and happiness in 
	mind. And since serving me means you are a good mother, serving me will make you happy. From now on my happiness is your happiness. You will never do anything that will hurt or inconvenience me.&quot;&gt;&gt;
	&lt;&lt;set $Mom.event to &quot;apology&quot;&gt;&gt;&lt;&lt;set $Mom.status to 1&gt;&gt;&lt;&lt;set $Mom.events.pushUnique(&quot;sandwich&quot;)&gt;&gt;
	&lt;&lt;set $Mom.facepic to &quot;img/Mom/face/submissive.jpg&quot;&gt;&gt;&lt;&lt;set $Mom.callsyou to &quot;Honey&quot;&gt;&gt;&lt;&lt;set $momgallery.pictures.pushUnique(&quot;img/Mom/mom_submissive.jpg&quot;)&gt;&gt;
	&lt;&lt;set $Mom.bj to false&gt;&gt;&lt;&lt;set $Mom.fuck to false&gt;&gt;&lt;&lt;set $Mom.anal to false&gt;&gt;&lt;&lt;set $quests[0].progress ++&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget momenslavehorny&gt;&gt;
	&lt;br&gt;Still a little nervous you wait for her to show the signs she showed last time. 
	&lt;&lt;thought &quot;Slow breathing and glazed over eyes. Lets go!&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Mom, being obedient to me has awakened your submissive side. You will find that serving me makes you horny.	My presence alone is enough to make you incredibly horny. But you will not be able to
	have an orgasm without me being involved. When you masturbate you will find your thoughts wandering to me. When you have an erotic dream, it will be about me. When you have a sexual fantasy, it
	will be about me. And you know that all the orgasms you had before will pale in comparison to the orgasms you might have with me. You will be able to control yourself in public, but in privat it will be 
	almost unbearable. You will strife to turn me on any way you can. You hope and wish that I&#39;d just throw you down and ravage you where ever you&#39;re standing and you&#39;ll try to incite this from me. You don&#39;t care 
	that we are related.&quot;&gt;&gt;
	&lt;&lt;set $Mom.event to &quot;momhornyfirst&quot;&gt;&gt;&lt;&lt;set $Mom.status to 2&gt;&gt;
	&lt;&lt;set $Mom.facepic to &quot;img/Mom/face/horny.jpg&quot;&gt;&gt;&lt;&lt;set $momgallery.pictures.pushUnique(&quot;img/Mom/mom_horny.jpg&quot;)&gt;&gt;
	&lt;&lt;set $Mom.bj to false&gt;&gt;&lt;&lt;set $Mom.fuck to false&gt;&gt;&lt;&lt;set $Mom.anal to false&gt;&gt;
	&lt;&lt;set $Mom.events.pushUnique(&quot;mommasturbation&quot;, &quot;momroomvisit&quot;)&gt;&gt;&lt;&lt;set $quests[0].progress ++&gt;&gt;
	&lt;&lt;set $Mom.event to &quot;momhornyfirst&quot;&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget momenslaveslave&gt;&gt;
	&lt;&lt;msg $You &quot;Mom, since you are already obedient to me and you are constantly sexually aroused around me and by serving me, you decide that it would be best for you to become my slave. To submit your body, 
	mind and heart completely to my will. You will gladly do whatever you can to make me happy and you will love every moment of it, because you are happy when I am happy. In public you will keep up the 
	masquerade of being my mom, but in private you will be my devoted slave. In the house you will only wear either sexy lingerie or be totally naked, to be pleasing to my eye. You will also keep your pussy wet 
	and your asshole clean, to be available to me all the time.&quot;&gt;&gt;
	&lt;&lt;set $Mom.facepic to &quot;img/Mom/face/slave.jpg&quot;&gt;&gt;&lt;&lt;set $Mom.callsyou to &quot;Master&quot;&gt;&gt;&lt;&lt;set $Mom.status to 3&gt;&gt;&lt;&lt;set $momgallery.pictures.pushUnique(&quot;img/Mom/mom_slave.jpg&quot;)&gt;&gt;
	&lt;&lt;set $Mom.bj to false&gt;&gt;&lt;&lt;set $Mom.fuck to false&gt;&gt;&lt;&lt;set $Mom.anal to false&gt;&gt;
	&lt;&lt;set $Mom.event to &quot;surrender&quot;&gt;&gt;&lt;&lt;set $quests[0].progress ++&gt;&gt;
&lt;&lt;/widget&gt;&gt;


</tw-passagedata><tw-passagedata pid="64" name="Jasmin talking widgets" tags="widget nobr" position="1625,125" size="100,100">/*===================================================================*/
/*===================================TALK============================*/
/*===================================================================*/
&lt;&lt;widget talktojasmin&gt;&gt;
	&lt;div id=&quot;talkouter&quot;&gt;
	@@.talklink;
	&lt;&lt;link &quot;I have a gift for you.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;jasmingift&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;if not $keys[1].owned&gt;&gt;&lt;&lt;link &quot;Give me your key.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;jasmingivekey&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &quot;What do you think about me?&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;jasminaboutme&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Tell me about yourself.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;jasminaboutyou&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;if not $Jasmin.stayathome&gt;&gt;&lt;&lt;link &quot;You should stay at home.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;jasminstayathome&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;else&gt;&gt;&lt;&lt;link &quot;You may leave the house again.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;jasminstayathome&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &quot;You should call me...&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;callme $Jasmin&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Flash me!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;jasminflash&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Nothing&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
	@@
	&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasmingift&gt;&gt;
	&lt;&lt;msg $You &quot;There is something I want to give to you.&quot;&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;What is it?&quot;&gt;&gt;
	&lt;div id=&quot;giftmenu&quot;&gt;
	@@.talklink;
		&lt;&lt;if $sextoys[3].amount gt 0 and not $Jasmin.dildo&gt;&gt;&lt;&lt;link &quot;A dildo&quot;&gt;&gt;&lt;&lt;replace &quot;#giftmenu&quot;&gt;&gt;&lt;&lt;jasmingiftdildo&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;set $Jasmin.dildo to true&gt;&gt;&lt;&lt;set $sextoys[3].amount--&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;link &quot;Nothing&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktojasmin&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
	&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasmingiftdildo&gt;&gt;
	&lt;&lt;msg $You &quot;This dildo!&quot;&gt;&gt;
	&lt;&lt;switch $Jasmin.status&gt;&gt;
		&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Jasmin &quot;Ha ha, very funny. Because I don&#39;t have a boyfriend? Didn&#39;t have to rub in, did you?&quot;&gt;&gt;&lt;&lt;msg $You &quot;Sorry...&quot;&gt;&gt;&lt;&lt;msg $Jasmin &quot;You better be...&quot;&gt;&gt;
		&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Jasmin &quot;Thank you?&quot;&gt;&gt;&lt;&lt;msg $You &quot;Aren&#39;t you going to try it out?&quot;&gt;&gt;&lt;&lt;msg $Jasmin &quot;You&#39;d like to see that?&quot;&gt;&gt;&lt;&lt;msg $You &quot;Sure, your&#39;re hot as fuck&quot;&gt;&gt;&lt;&lt;msg $Jasmin &quot;Don&#39;t make me blush.&quot;&gt;&gt;
		&lt;&lt;case 2 3&gt;&gt;&lt;&lt;msg $Jasmin &quot;Thank you, &lt;&lt;yourname $Jasmin&gt;&gt;. Let&#39;s try it out.&quot;&gt;&gt;&lt;&lt;msg $You &quot;Hell yeah!&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;That&#39;s all.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktojasmin&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

/*===================================================================*/
&lt;&lt;widget jasminstayathome&gt;&gt;
	&lt;&lt;if not $Jasmin.stayathome&gt;&gt;
		&lt;&lt;msg $You &quot;You should really stay at home in case I need to see you.&quot;&gt;&gt;
		&lt;&lt;switch $Jasmin.status&gt;&gt;
		&lt;&lt;case 0 1&gt;&gt;&lt;&lt;msg $Jasmin &quot;We are friends and all, but I got to work, so: No.&quot;&gt;&gt;
		&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Jasmin &quot;We are a couple, and you are the most important person in my life, but you need to understand, that I have a life of my own. I&#39;ll gladly share it with you, but...&quot;&gt;&gt;
		&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Jasmin &quot;Anything for you, &lt;&lt;yourname $Jasmin&gt;&gt;!&quot;&gt;&gt;
			&lt;&lt;set $Jasmin.stayathome to true&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;msg $You &quot;You may go outside again.&quot;&gt;&gt;
		&lt;&lt;msg $Jasmin &quot;Thank you, &lt;&lt;yourname $Jasmin&gt;&gt;&quot;&gt;&gt;
		&lt;&lt;set $Jasmin.stayathome to false&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to say.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktojasmin&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasminflash&gt;&gt;
	&lt;&lt;msg $You &quot;I&#39;d really love for you to flash me.&quot;&gt;&gt;
	&lt;&lt;if $Jasmin.status gte 1 and $Jasmin.privacy.includes($location.name)&gt;&gt;
		&lt;&lt;if $Jasmin.status is 1&gt;&gt;
			&lt;&lt;sexmp4 &quot;Jasmin&quot; &quot;flashing&quot;&gt;&gt;
			&lt;&lt;msg $Jasmin &quot;You are one naughty boy. But ... why not!&quot;&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;msg $Jasmin &quot;Wouldn&#39;t you much rather see me naked?&quot;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;switch $Jasmin.status&gt;&gt;
		&lt;&lt;case 0&gt;&gt;&lt;&lt;set $end to &quot;angeredjasmin&quot;&gt;&gt;&lt;&lt;goto &quot;end&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;
		&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Jasmin &quot;You would like that?&quot;&gt;&gt; She looks around nervously. &lt;&lt;msg $Jasmin &quot;No! Even if there weren&#39;t so many people here, I&#39;d never do that.&quot;&gt;&gt;
		&lt;&lt;case 2&gt;&gt;&lt;&lt;sexmp4 &quot;Jasmin&quot; &quot;flashing&quot;&gt;&gt;&lt;&lt;msg $Jasmin &quot;You naughty boy. But just a peek.&quot;&gt;&gt;
		&lt;&lt;case 3&gt;&gt;&lt;&lt;sexmp4 &quot;Jasmin&quot; &quot;flashing&quot;&gt;&gt;&lt;&lt;msg $Jasmin &quot;Of course! My body is for your pleasure only, after all!&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;That&#39;s enough.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktojasmin&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasmingivekey&gt;&gt;
	&lt;&lt;msg $You &quot;You should give me a key to your house.&quot;&gt;&gt;
	&lt;&lt;switch $Jasmin.status&gt;&gt;
	&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Jasmin &quot;You are a good friend, but I don&#39;t see why you need my key.&quot;&gt;&gt;@@.talklink;&lt;&lt;link &quot;Ok.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktojasmin&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Jasmin &quot;My key? I don&#39;t know... You might catch me at inapropriate times...&quot;&gt;&gt;@@.talklink;&lt;&lt;link &quot;Ok.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktojasmin&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;case 2 3&gt;&gt;&lt;&lt;msg $Jasmin &quot;Here you go, &lt;&lt;yourname $Jasmin&gt;&gt;.&quot;&gt;&gt;&lt;&lt;set $keys[1].owned to true&gt;&gt;@@.talklink;&lt;&lt;link &quot;Thank you.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktojasmin&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasminaboutyou&gt;&gt;
	&lt;&lt;msg $You &quot;Tell me about yourself.&quot;&gt;&gt;
	&lt;&lt;switch $Jasmin.status&gt;&gt;
	&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Jasmin &quot;I was born here in Springvale. I grew up and went to the highschool. But you already know that, because you were there. I dream of becoming a nurse. Why do you ask?&quot;&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Jasmin &quot;I really treasure the fact that we are friends. You are the best friend I could wish for.&quot;&gt;&gt;
	&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Jasmin &quot;I&#39;m so happy to finally be your girlfriend. It is much better than I could have imagined. Although I thought about it a lot since we met as little children.&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Jasmin &quot;I am very proud to be your loveslave. I love you more than my life. I am incredibly proud to have a perfect master, like you. I hope I am able to please you as much as it pleases me 
		to finally be yours with body, heart, mind and soul.&quot;&gt;&gt;
	&lt;&lt;default&gt;&gt;ERROR in jasminaboutyou. Case not found
	&lt;&lt;/switch&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to know&quot;&gt;&gt;&lt;&lt;dialog &#39;Talking with Jasmin&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktojasmin&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasminaboutme&gt;&gt;
	&lt;&lt;switch $Jasmin.status&gt;&gt;
	&lt;&lt;msg $You &quot;What do you think about me?&quot;&gt;&gt;
	&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Jasmin &quot;You are my childhood friend. I know I can always depend on you. Thank you for not being weird and always being there when I need you.&quot;&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Jasmin &quot;We know each other for ever now. I always liked you and I always thought you were funny and a little sexy. It feels good to hang out with you.&quot;&gt;&gt;
	&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Jasmin &quot;You are my boyfriend. The best boyfriend I could ever wish for. I would do anything for you.&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Jasmin &quot;You are my lover, my best friend and my Master. You are the best thing that ever happened to me. You are amazing in every way possible.&quot;&gt;&gt;
	&lt;&lt;default&gt;&gt;ERROR in jasminaboutyou. Case not found
	&lt;&lt;/switch&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to know&quot;&gt;&gt;&lt;&lt;dialog &#39;Talking with Jasmin&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktojasmin&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="65" name="Jasmin event widgets" tags="widget nobr" position="1625,250" size="100,100">/*===================================================================*/
/*=================================EVENTS============================*/
/*===================================================================*/
&lt;&lt;widget jasminmovienight&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;Wanna watch a movie with me?&quot;&gt;&gt;
	She points towards the flatscreen on the wall.
	@@.talklink;
		&lt;&lt;link &quot;Sure&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasminmovienight_1&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Not today&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasminmovienight_1&gt;&gt;	
	&lt;&lt;msg $You &quot;What do you want to watch?&quot;&gt;&gt;
	&lt;&lt;switch $Jasmin.status&gt;&gt;
	&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Jasmin &quot;I got this really terrible new b-movie. Interested?&quot;&gt;&gt;&lt;&lt;msg $You &quot;Sounds good.&quot;&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Jasmin &quot;How about this new horror movie. I heard it gets your blood pumping.&quot;&gt;&gt;&lt;&lt;msg $You &quot;Won&#39;t it be to scary for you?&quot;&gt;&gt;
		&lt;&lt;msg $Jasmin &quot;Then you&#39;ll just need to hold my hand.&quot;&gt;&gt;She winks at you.
	&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Jasmin &quot;Let&#39;s watch a porn parody. I found this one that sounds really hot and kinda funny.&quot;&gt;&gt;&lt;&lt;msg $You &quot;You just want an excuse to make out.&quot;&gt;&gt;&lt;&lt;msg $Jasmin &quot;Is that a bad thing?&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Not at all, honey.&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Jasmin &quot;I found this porn movie that is centered around women submitting to their masters. Would you like to watch that?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Good choice. Although I&#39;m sure we will not pay too much attention to the movie, don&#39;t you think?&quot;&gt;&gt;&lt;&lt;msg $Jasmin &quot;I hoped so.&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	@@.choice;
		&lt;&lt;link &quot;Watch the movie with her&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasminmovienight_2&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Decline&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget jasminmovienight_2&gt;&gt;
&lt;&lt;set _vid to &quot;movienight_&quot;+$Jasmin.status&gt;&gt;
The two of you sit down on &lt;&lt;=$Jasmin.callname&gt;&gt;s comfy sofa and she starts the movie.
&lt;br&gt;&lt;&lt;mp4 &quot;Jasmin&quot; _vid&gt;&gt;&lt;br&gt;
&lt;&lt;switch $Jasmin.status&gt;&gt;
	&lt;&lt;case 0&gt;&gt;The movie is really terrible and you both have a blast watching and riffing it.
	&lt;&lt;case 1&gt;&gt;The movie is scary at after a short while you feel &lt;&lt;=$Jasmin.callname&gt;&gt;s hand sneaking into yours.&lt;br&gt;&lt;&lt;mp4 &quot;Jasmin&quot; &quot;movienight_holdinghands&quot;&gt;&gt;&lt;br&gt;You look over and see her happy smile.
	&lt;&lt;case 2 3&gt;&gt;The movie has barely started when she fishes your cock out of your pants and begins rubbing it. You quickly return the favor and begin fingering her pussy.
		&lt;br&gt;&lt;&lt;mp4 &quot;Jasmin&quot; &quot;movienight_handjob&quot;&gt;&gt;&lt;br&gt;
&lt;&lt;/switch&gt;&gt;
@@.choice;&lt;&lt;link &quot;Finish the movie&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;timepass 120&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

/*===================================================================*/
&lt;&lt;widget jasminhornyfirst&gt;&gt;
	&lt;&lt;set $Jasmin.event to &quot;none&quot;&gt;&gt;&lt;&lt;set $Jasmin.eventcd++&gt;&gt;
	You enter &lt;&lt;=$Jasmin.callname&gt;&gt;s livingroom and see her leaning against the doorframe, letting her eyes roam up and down your body.
	&lt;&lt;msg $You &quot;Hi, $Jasmin.callname.&quot;&gt;&gt;
	She twirls a strand of hair between her fingers.
	&lt;&lt;msg $Jasmin &quot;Hey there, cutie.&quot;&gt;&gt;
	&lt;&lt;thought &quot;She wants to play a game? Let&#39;s play a game.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Cutie?&quot;&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;Just kidding! Although, I have to admit, you have become quite the looker...&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;In that case, I can freely admit that you are quite attractive as well.&quot;&gt;&gt;
	She looks at you with big eyes.
	&lt;&lt;msg $Jasmin &quot;Do you really think so?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Hell yeah! You have a killer body, a cute face and a great ass. What more could a man want?&quot;&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;You flatterer!&quot;&gt;&gt;
	You smile and wink at her. She blushes.
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
/*===================================================================*/
&lt;&lt;widget jasmin_confession&gt;&gt;
&lt;&lt;set $Jasmin.event to &quot;none&quot;&gt;&gt;&lt;&lt;set $Jasmin.eventcd++&gt;&gt;
	As you enter the room, $Jasmin.callname jumps up from the couch. 
	&lt;&lt;msg $Jasmin &quot;&lt;&lt;yourname $Jasmin&gt;&gt;! I&#39;ve been waiting for you.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;You have?&quot;&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;Yes! I have something very important to aks of you.&quot;&gt;&gt;
	&lt;&lt;thought &quot;Lets have a little fun and play dumb.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Have you got a new movie?&quot;&gt;&gt;
	She looks at you a little annoyed.
	&lt;&lt;msg $Jasmin &quot;No. Please. Shut up! This is not helping.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Okay. No more joking. What is it?&quot;&gt;&gt;
	Jasmin looks at you nervously.
	&lt;&lt;msg $Jasmin &quot;We know each other for a long time now, right?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Yes.&quot;&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;And we always got along very well, right?&quot;&gt;&gt;
	You nod.
	&lt;&lt;msg $Jasmin &quot;So I ... I ... wanted to ask you ...&quot;&gt;&gt;
	She gulps nervously.
	&lt;&lt;msg $Jasmin &quot;Oh damn! IlikeyouverymuchandIwouldlovetobeyourgirlfriend!&quot;&gt;&gt;
	She spoke so fast you almost didn&#39;t understand.
	&lt;&lt;msg $You &quot;What? You have to speak slower!&quot;&gt;&gt;
	Jasmin is fidgeting.
	&lt;&lt;msg $Jasmin &quot;I ... I wanted to ask you ... if we could ... Only if you are okay with it, of course ... be together, maybe?&quot;&gt;&gt;
	&lt;&lt;thought &quot;She is so cute. I can&#39;t torture her any longer.&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;That would be nice.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasmin_confession1&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/		
&lt;&lt;widget jasmin_confession1&gt;&gt;
	&lt;&lt;msg $You &quot;That would be nice.&quot;&gt;&gt;
	She takes a second to process your answer, then her eyes widen and a big, bright smile wipes away all the uncertainty and nervousness that was written in her face.
	&lt;&lt;msg $You &quot;I always liked ...&quot;&gt;&gt;
	You can&#39;t finish that sentence, as $Jasmin.callname jumps you and begins kissing you passionatly.&lt;br&gt;
	@@.right;&lt;&lt;mp4 &quot;Jasmin&quot; &quot;kiss&quot;&gt;&gt;@@&lt;br&gt;
	You make out for what feels like a small eternity, only sometimes pulling back to breath, bus diving back into the embrace of the other as soon as possible.
	Your tongues dance and intertwine as you slowly steer her over to the couch.
	&lt;&lt;msg $Jasmin &quot;I dreamt about this for... ages. Since I first saw you.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;I also always wanted you. You are so beautiful.&quot;&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;Do you want to know a secret?&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Yes&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasmin_confession2&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/	
&lt;&lt;widget jasmin_confession2&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;You are my favourite masturbation fantasy.&quot;&gt;&gt;
	Although you knew that, you implanted that fantasy yourself, you almost choke on your words when she says it, her voice full of trust, love and desire.
	&lt;&lt;msg $You &quot;Really? Show me!&quot;&gt;&gt;
	She moans a little as she lets herself fall back onto the couch. She strips out of her clothings, desperately running her hands all over her body.&lt;br&gt;
	@@.right;&lt;&lt;jpg &quot;Jasmin/Events&quot; &quot;confession_1&quot;&gt;&gt;@@
	&lt;&lt;msg $Jasmin &quot;Mmmmmhmmmm, oh &lt;&lt;yourname $Jasmin&gt;&gt;.&quot;&gt;&gt;
	Her fingers dance over her clit and along her pussy, drawing small circles and brushing lightly here and there, everytime accompanied by delightful little moans.
	It doesn&#39;t take long for her to get dripping wet.
	@@.talklink;&lt;&lt;link &quot;Continue&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasmin_confession3&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasmin_confession3&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;Oh god! You are soooo hot!&quot;&gt;&gt;
	She looks at you, lust in her eyes.&lt;br&gt;
	@@.right;&lt;&lt;jpg &quot;Jasmin/Events&quot; &quot;confession_2&quot;&gt;&gt;@@&lt;br&gt;
	At the beginning her attention was mainly focussed on you and your reactions to her, but as she gets more and more aroused she begins to lose focus and concentrate more on herself.
	&lt;&lt;msg $You &quot;Yes! Grab your tits! Put those fingers to work, girl!&quot;&gt;&gt;
	She moans even louder, from feeling the combined pleasure of her fingers in her pussy and from obeying your order.
	&lt;&lt;msg $Jasmin &quot;YES! YES! YES! I&#39;M ABOUT TO...&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Don&#39;t cum yet!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasmin_confession4&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget jasmin_confession4&gt;&gt;
	@@.right;&lt;&lt;jpg &quot;Jasmin/Events&quot; &quot;confession_3&quot;&gt;&gt;@@
	Although she is very close she obeys. Small spasms rock her body, but she holds off the big orgasm.
	&lt;&lt;msg $Jasmin &quot;Please?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;No! Continue masturbating!&quot;&gt;&gt;
	She picks up speed again.
	&lt;&lt;msg $Jasmin &quot;Please? Please? Please?&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Not yet, honey!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasmin_confession5&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasmin_confession5&gt;&gt;
	@@.right;&lt;&lt;sexmp4 &quot;Jasmin&quot; &quot;pussyplay&quot;&gt;&gt;@@
	She continues to masturbate, faster and faster.
	&lt;&lt;msg $You &quot;Noooot yet!&quot;&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;Please????&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Wait!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasmin_confession6&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasmin_confession6&gt;&gt;
	@@.right;&lt;&lt;sexmp4 &quot;Jasmin&quot; &quot;pussyplay&quot;&gt;&gt;@@
	&lt;&lt;msg $You &quot;Waaaaaait.&quot;&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;Please? Please? Let me cum. Please!&quot;&gt;&gt;
	@@.talklink;
	&lt;&lt;link &quot;Wait.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasmin_confession6&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Okay, CUM!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasmin_confession7&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/	
&lt;&lt;widget jasmin_confession7&gt;&gt;&gt;
	@@.right;&lt;&lt;mp4 &quot;Jasmin&quot; &quot;squirting&quot;&gt;&gt;@@
	&lt;&lt;msg $Jasmin &quot;Thankyouthankyouthankyou!&quot;&gt;&gt;
	She explodes in a gigantic flood and flops off the couch, almost hitting her head on the glass table.
	&lt;&lt;msg $You &quot;Oh my god! Are you okay?&quot;&gt;&gt;
	You rush over and are greeted by the sight of $Jasmin.callname, still spasming, wedged between the couch and the glass table.
	&lt;&lt;msg $Jasmin &quot;Hahaha ... I&#39;m hahaha ... I&#39;m fine.&quot;&gt;&gt;
	You help her up, pull her close and kiss her again.
	&lt;&lt;msg $You &quot;That was awesome!&quot;&gt;&gt;
	&lt;&lt;msg $Jasmin &quot;All thanks to you. It wouldn&#39;t have been half as good if I&#39;d came the first time around. Please do that again.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;I will, don&#39;t worry.&quot;&gt;&gt;
	&lt;&lt;thought &quot;And I will do much more!&quot;&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
/*===================================================================*/
&lt;&lt;widget jasminslave&gt;&gt;
&lt;&lt;set $Jasmin.event to &quot;none&quot;&gt;&gt;&lt;&lt;set $Jasmin.eventcd++&gt;&gt;
$Jasmin.callname has been waiting for you. She quickly comes up to you and gives you a deep kiss. Then she looks at you with big eyes.
&lt;&lt;msg $Jasmin &quot;&lt;&lt;yourname $Jasmin&gt;&gt;? I have a request.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;A request? What is it?&quot;&gt;&gt;
She smiles shyly.
&lt;&lt;msg $Jasmin &quot;I love you, you know that.&quot;&gt;&gt;
You nod and give her a quick kiss.
&lt;&lt;msg $Jasmin &quot;I love you with all my heart and soul. More than I ever though I could love anyone or anything.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;I love you, too.&quot;&gt;&gt;
She takes a steps towards you and leans her head against your chest.
&lt;&lt;msg $Jasmin &quot;I love you so much, that there is only one way for me to express this love.&quot;&gt;&gt; 
&lt;&lt;msg $You &quot;And that is?&quot;&gt;&gt;
She goes on her knees before you and takes a small velvet box from out of her pocket.
&lt;&lt;msg $Jasmin &quot;This is for you.&quot;&gt;&gt;
&lt;br&gt;@@.right;&lt;&lt;jpg &quot;Jasmin/Events&quot; &quot;ring_box&quot;&gt;&gt;@@
&lt;&lt;msg $Jasmin &quot;This is for you.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Are you proposing to me?&quot;&gt;&gt;
&lt;&lt;msg $Jasmin &quot;Kinda. It&#39;s difficult to explain, just open it.&quot;&gt;&gt;
@@.choice;&lt;&lt;link &quot;Open it&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;jasminslave1&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget jasminslave1&gt;&gt;
You open the box. In there is an elegant steel ring inside.
&lt;br&gt;@@.right;&lt;&lt;jpg &quot;Jasmin/Events&quot; &quot;slave_ring&quot;&gt;&gt;@@
&lt;&lt;msg $You &quot;A ring? For me?&quot;&gt;&gt;
She rapidly shakes her head.
&lt;&lt;msg $Jasmin &quot;No ... Yes ... Kinda ...&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Tell me, my love.&quot;&gt;&gt;
She sighs.
&lt;&lt;msg $Jasmin &quot;This ring is for you to claim me as your slave, if you want to.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;A slave?&quot;&gt;&gt;
&lt;&lt;msg $Jasmin &quot;Oh yes, my love! It&#39;s the only way to express all the love and adoration I feel for you.&quot;&gt;&gt;
You take the ring and let the cold metal run through your hands.
&lt;&lt;msg $You &quot;Give me your hand.&quot;&gt;&gt;
She complies.&lt;br&gt;
You slip the ring over her finger.
&lt;&lt;msg $You &quot;With this I, &lt;&lt;= $You.callname&gt;&gt;, claim you, $Jasmin.callname as my slave.&quot;&gt;&gt;
&lt;&lt;msg $Jasmin &quot;Thank you, Master. I swear, by my life, that I will serve you with all my heart and soul, with my mind and my body.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Stand up, slave.&quot;&gt;&gt;
She gracefully gets up, her head lowered, looking at the floor before your feet.
&lt;&lt;msg $You &quot;Look at me, slave!&quot;&gt;&gt;
She looks up, her eyes full of love and adoration.
&lt;&lt;msg $You &quot;I love you. I don&#39;t want you to act afraid. You are still my girlfriend and I highly value your charm, your humor and your mind. Don&#39;t be afraid to speak, if you have an idea.&quot;&gt;&gt;
$Jasmin.callname smiles thankfully.
&lt;&lt;msg $Jasmin &quot;You are the best Master I could have ever wished for.&quot;&gt;&gt;
She fishes a key out of her pockets and gives it to you.
&lt;&lt;msg $Jasmin &quot;All I own is yours.&quot;&gt;&gt;
&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="66" name="Jasmin enslave widgets" tags="widget nobr" position="1625,375" size="100,100">/*===================================================================*/
/*=============================ENCHANTMENT===========================*/
/*===================================================================*/

&lt;&lt;widget jasminenslavesub&gt;&gt;
	&lt;&lt;msg $You &quot;$Jasmin.callname, you have always had a crush on me and it has only grown stronger with time. You also have always had a strong submissive streak. Since we were little kids you had this deep seated
	attraction towards me. You tried to suppress it, because you didn&#39;t want to lose the friendship we have going, but it has become too strong for that. You just had to admit to yourself that I am the most  
	attractive and desirable man you have ever met. You have developed a fetish for sexual submission and in your fantasies you imagine yourself as a slave and me as your master. If you get the chance to obey 
	me you&#39;ll take it and you&#39;ll feel a sexual thrill while doing it.&quot;&gt;&gt;
	&lt;&lt;set $Jasmin.status to 1&gt;&gt;&lt;&lt;set $Jasmin.facepic to &quot;img/Jasmin/face/submissive.jpg&quot;&gt;&gt;&lt;&lt;set $Jasmin.event to &quot;jasminhornyfirst&quot;&gt;&gt;&lt;&lt;set $jasmingallery.pictures.pushUnique(&quot;img/Jasmin/jasmin_submissive.jpg&quot;)&gt;&gt;
	&lt;&lt;set $Jasmin.bj to false&gt;&gt;&lt;&lt;set $Jasmin.fuck to false&gt;&gt;&lt;&lt;set $Jasmin.anal to false&gt;&gt;&lt;&lt;set $Jasmin.pussyplay to false&gt;&gt;&lt;&lt;set $Jasmin.analplay to false&gt;&gt;&lt;&lt;set $quests[1].progress++&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget jasminenslavehorny&gt;&gt;
	&lt;&lt;msg $You &quot;$Jasmin.callname, you just realized that you are not only attracted to me, but also madly in love with me. You desperately want to be my girlfriend. I am the most important person in your life. 
	You know in your heart that the way to happiness is to be at my side, as my loving girlfriend. You want to live out your fantasies with me, you want to do whatever makes me happy, no matter how naughty, 
	perverted or strange they may seem to you. You will never be jealous, you will never be demanding, you will never be self-centered. In fact you want to fuck other women with me. All you want to be is my 
	perfect, loving girlfriend, the best girlfriend any man could ever ask for.&quot;&gt;&gt;
	&lt;&lt;set $Jasmin.status to 2&gt;&gt;&lt;&lt;set $Jasmin.facepic to &quot;img/Jasmin/face/horny.jpg&quot;&gt;&gt;&lt;&lt;set $Jasmin.callsyou to &quot;My lover&quot;&gt;&gt;&lt;&lt;set $Jasmin.event to &quot;confession&quot;&gt;&gt;
	&lt;&lt;set $jasmingallery.pictures.pushUnique(&quot;img/Jasmin/jasmin_horny.jpg&quot;)&gt;&gt;
	&lt;&lt;set $Jasmin.bj to false&gt;&gt;&lt;&lt;set $Jasmin.fuck to false&gt;&gt;&lt;&lt;set $Jasmin.anal to false&gt;&gt;&lt;&lt;set $Jasmin.pussyplay to false&gt;&gt;&lt;&lt;set $Jasmin.analplay to false&gt;&gt;&lt;&lt;set $quests[1].progress++&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget jasminenslaveslave&gt;&gt;
	&lt;&lt;msg $You &quot;$Jasmin.callname, you love me so much, you don&#39;t want to be my girlfriend anymore, you want to be my loveslave. Your love for me is universal, selfless and allencompassing. Nothing in this 
	world matters more than making me happy. You will hide the intensity of this feeling from others, but in private you will be my obedient, loyal, perverted loveslave. You love the fact that you are my slave and
	you want to add other beautiful women to my harem as well.&quot;&gt;&gt;
	&lt;&lt;set $Jasmin.status to 3&gt;&gt;&lt;&lt;set $Jasmin.facepic to &quot;img/Jasmin/face/slave.jpg&quot;&gt;&gt;&lt;&lt;set $Jasmin.callsyou to &quot;Master&quot;&gt;&gt;&lt;&lt;set $Jasmin.event to &quot;jasminslave&quot;&gt;&gt;
	&lt;&lt;set $jasmingallery.pictures.pushUnique(&quot;img/Jasmin/jasmin_slave.jpg&quot;)&gt;&gt;
	&lt;&lt;set $Jasmin.bj to false&gt;&gt;&lt;&lt;set $Jasmin.fuck to false&gt;&gt;&lt;&lt;set $Jasmin.anal to false&gt;&gt;&lt;&lt;set $Jasmin.pussyplay to false&gt;&gt;&lt;&lt;set $Jasmin.analplay to false&gt;&gt;&lt;&lt;set $quests[1].progress++&gt;&gt;
&lt;&lt;/widget&gt;&gt;


</tw-passagedata><tw-passagedata pid="67" name="Henry talk widgets" tags="widget nobr" position="1750,125" size="100,100">/*===================================================================*/
/*===================================TALK============================*/
/*===================================================================*/
&lt;&lt;widget talktohenry&gt;&gt;
&lt;div id=&quot;talkouter&quot;&gt;
@@.talklink;
	&lt;&lt;if not $keys[2].owned&gt;&gt;&lt;&lt;link &quot;Give me your key.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;henrygivekey&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &quot;What do you think about me?&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;henryaboutme&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Tell me about yourself.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;henryaboutyou&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;	 
	&lt;&lt;if not $Henry.stayathome&gt;&gt;&lt;&lt;link &quot;You should stay at home.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;henrystayathome&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;else&gt;&gt;&lt;&lt;link &quot;You should go out again.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;henrystayathome&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &quot;You should call me...&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;callme $Henry&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Nothing&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
@@
&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget henrygivekey&gt;&gt;
&lt;&lt;msg $You &quot;You should give me the key to your house.&quot;&gt;&gt;
&lt;&lt;if $Henry.status is 0&gt;&gt;
	&lt;&lt;msg $Henry &quot;No way! You would steal my gaming rig. I know you&#39;ve always been jealous!&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;I would never steal from you.&quot;&gt;&gt;
	&lt;&lt;msg $Henry &quot;Just kidding. But still, no way!&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;As if...&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktohenry&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;else&gt;&gt;
	&lt;&lt;msg $Henry &quot;That is a great idea! Use whatever you like, doesn&#39;t matter if I&#39;m here or not.&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Thank you&quot;&gt;&gt;&lt;&lt;set $keys[2].owned to true&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktohenry&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget henrystayathome&gt;&gt;
	&lt;&lt;if not $Henry.stayathome&gt;&gt;
		&lt;&lt;msg $You &quot;You should spend all your time at home.&quot;&gt;&gt;
		&lt;&lt;switch $Henry.status&gt;&gt;
		&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Henry &quot;Lol! I&#39;m at home almost all the time. I need some sunlight once in a while. Just call before if you want to hang out.&quot;&gt;&gt;
		&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Henry &quot;If you think that is a good idea, I will do it.&quot;&gt;&gt;&lt;&lt;set $Henry.stayathome to true&gt;&gt;
		&lt;&lt;case 2 3&gt;&gt;&lt;&lt;msg $Henry &quot;You always know best &lt;&lt;yourname $Henry&gt;&gt;. I&#39;ll stay at home from now on.&quot;&gt;&gt;&lt;&lt;set $Henry.stayathome to true&gt;&gt;
		&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Henry &quot;This unworthy servant will gladly fulfill your wishes.&quot;&gt;&gt;&lt;&lt;set $Henry.stayathome to true&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;msg $Henry &quot;That is a great idea, &lt;&lt;yourname $Henry&gt;&gt;! I&#39;ll do that.&quot;&gt;&gt;&lt;&lt;set $Henry.stayathome to false&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to say&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktohenry&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget henryaboutyou&gt;&gt;
&lt;&lt;msg $You &quot;&lt;&lt;=$Henry.callname&gt;&gt;, tell me about yourself?&quot;&gt;&gt;
&lt;&lt;switch $Henry.status&gt;&gt;
&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Henry &quot;Have you hit your head, idiot? You know me. We&#39;ve been friends for a long time now!&quot;&gt;&gt;
&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Henry &quot;I am your loyal friend. I&#39;m super glad you are my friend.&quot;&gt;&gt;
&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Henry &quot;I am just a simple follower. I aspire to be useful to you, with all my body, mind and soul.&quot;&gt;&gt;
&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Henry &quot;I am thankful for being turned into a woman. I&#39;ll do whatever I can to be of use to you.&quot;&gt;&gt;
&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Henry &quot;I&#39;m just a humble, worthless servant of you, &lt;&lt;yourname $Henry&gt;&gt;. Use me however you please.&quot;&gt;&gt;
&lt;&lt;/switch&gt;&gt;
@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to know right now.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktohenry&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget henryaboutme&gt;&gt;
&lt;&lt;msg $You &quot;Who am I to you?&quot;&gt;&gt;
&lt;&lt;switch $Henry.status&gt;&gt;
&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Henry &quot;That&#39;s a weird question. Are you stoned?&quot;&gt;&gt;&lt;&lt;msg $You &quot;Please, just answer.&quot;&gt;&gt;&lt;&lt;msg $Henry &quot;Well, we have been buddies for a long time now, so yeah, I would say we are friends.&quot;&gt;&gt;
&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Henry &quot;You are my role model. You always know what to do.&quot;&gt;&gt;
&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Henry &quot;You are the most important person I know. I strife to please you and I would give everything to be able to please you even more.&quot;&gt;&gt;
&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Henry &quot;You are the most powerful being I know and you are kind enough to let me use my new body to pleasure you.&quot;&gt;&gt; /*Transformed*/
&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Henry &quot;You are my one and only god! You own my life, my body and my soul.&quot;&gt;&gt;
&lt;&lt;/switch&gt;&gt;
@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to know right now.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktohenry&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/

















</tw-passagedata><tw-passagedata pid="68" name="Henry event widgets" tags="widget nobr" position="1750,250" size="100,100">/*==================================================================*/
/*==========================EVENTS==================================*/
/*==================================================================*/

&lt;&lt;widget henry_submission&gt;&gt;
	$Henry.callname opens the door after you knocked.
	&lt;&lt;msg $Henry &quot;Oh, hey &lt;&lt;yourname $Henry&gt;&gt;!&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Hi $Henry.callname.&quot;&gt;&gt;
	Instead of the usual ribbing, he just leads you into the living room.
	&lt;&lt;msg $Henry &quot;Have a seat.&quot;&gt;&gt;
	He gestures towards his gaming chair.
	&lt;&lt;msg $You &quot;In your chair?&quot;&gt;&gt;
	&lt;&lt;msg $Henry &quot;Yes. I thought about how you were always the better one of us both and how you deserve a much better friend than me. But since you have pity on me and still are my friend the least I could do
	is letting you use my equipment.&quot;&gt;&gt;
	You sit down in the very comfortable chair. $Henry.callname drops down on the couch, where you had always sat before.
	&lt;&lt;msg $You &quot;That&#39;s very smart of you.&quot;&gt;&gt;
	&lt;&lt;msg $Henry &quot;Thank you.&quot;&gt;&gt;
	The two of you sit around and talk about this and that. $Henry.callname is very focussed on your words and seems very eager to agree.
	@@.talklink;&lt;&lt;link &quot;Could you get me a drink?&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_submission_1&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;	

&lt;&lt;widget henry_submission_1&gt;&gt;
	He jumps up.
	&lt;&lt;msg $Henry &quot;Of course. What do you want?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Do you have ginger ale?&quot;&gt;&gt;
	&lt;&lt;msg $Henry &quot;No... But I&#39;ll get some. Please wait while I&#39;ll drive to the shop. I&#39;ll be back asap.&quot;&gt;&gt;
	$Henry.callname grabs his car keys from the wall hanger and rushes towards the entry door to his house.
	&lt;&lt;msg $You &quot;I&#39;ll play some games while I wait.&quot;&gt;&gt;
	&lt;&lt;msg $Henry &quot;Sure! Enjoy yourself. I&#39;ll hurry.&quot;&gt;&gt;
	He slams the door shut behind him and drives off. You grab the controller and play some games to pass the time.
	@@.choice;&lt;&lt;link &quot;Pass the time.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_submission_2&gt;&gt;&lt;&lt;timepass 20&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget henry_submission_2&gt;&gt;
	20 minutes later you hear him pulling up into the driveway. He quickly enters the house and presents you with a bottle of ginger ale.
	&lt;&lt;msg $Henry &quot;Here you go. I also got some snacks. Would you like some?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Sure, just put it on the table.&quot;&gt;&gt;
	&lt;&lt;msg $Henry &quot;Okay.&quot;&gt;&gt;
	After preparing the snacks he sits down on the sofa and watches you play.
	&lt;&lt;msg $You &quot;Do you wanna go for a multiplayer session?&quot;&gt;&gt;
	He perks up and smiles.
	&lt;&lt;msg $Henry &quot;If you want to have me in a team, yes! Happily!&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Play for a while&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;timepass 120&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;set $Henry.event to &quot;none&quot;&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget henry_transform&gt;&gt;
	&lt;&lt;if $Henry.askedfortransformation is false&gt;&gt;
		$Henry.callname has an unsure look on his face. He opens his mouth as if to say something, but closes it again before a sound comes out. This repeats a few times, before you intervene.
		&lt;&lt;msg $You &quot;Spit it out! What&#39;s up?&quot;&gt;&gt;
		&lt;&lt;thought &quot;It&#39;s going to be interesting how he runs with the suggestions I made.&quot;&gt;&gt;
		&lt;&lt;msg $Henry &quot;Well... You know ...&quot;&gt;&gt;
		He takes a deep breath, gathering all his resolve.
		&lt;&lt;msg $Henry &quot;You are pretty smart, right?&quot;&gt;&gt;
		You nod.
		&lt;&lt;msg $Henry &quot;And you know a lot of things, right?&quot;&gt;&gt;
		You nod again.
		&lt;&lt;msg $Henry &quot;You know, lately, I&#39;ve been feeling ...&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Go on!&quot;&gt;&gt;
		&lt;&lt;msg $Henry &quot;I&#39;ve been feeling really proud to be your friend, right?&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Where is this going?&quot;&gt;&gt;
		&lt;&lt;msg $Henry &quot;And I&#39;ve decided it is time for me to take it to the next level.&quot;&gt;&gt;
		@@.talklink;&lt;&lt;link &quot;And that means...?&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_transform_1&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;else&gt;&gt;
		&lt;&lt;henry_prove_prompt&gt;&gt;
	&lt;&lt;/if&gt;&gt;	
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget henry_transform_1&gt;&gt;
	&lt;&lt;msg $Henry &quot;I want to offer my body to you, but since you are not gay... Are you gay?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;No.&quot;&gt;&gt;
	&lt;&lt;msg $Henry &quot;I thought so. So since you are not gay, I&#39;ve decided that I need to change to offer myself to you.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Change?&quot;&gt;&gt;
	He has tears in his eyes as he continues.
	&lt;&lt;msg $Henry &quot;I need to become a woman. It&#39;s the only way for me to be useful to you and fulfill my destiny. I can feel it deep in my heart.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;If you want to do that, I won&#39;t stand in your way.&quot;&gt;&gt;
	&lt;&lt;msg $Henry &quot;So ... I wanted to ask ... If you knew a way to do that? I&#39;m afraid of surgery. And it would take much too long. And I can&#39;t wait much longer. My happiness depends on it.&quot;&gt;&gt;
	He looks at the floor, tears running down his cheeks.
	@@.talklink;&lt;&lt;link &quot;I might know a way&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_transform_2&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget henry_transform_2&gt;&gt;
	Henry looks up at you, hope in his eyes.
	&lt;&lt;msg $You &quot;But you need to trust me.&quot;&gt;&gt;
	He vigorously nods his head.
	&lt;&lt;msg $You &quot;I&#39;ve recently come into possession of a certain spellbook that contains a spell that would allow me to make you into a real, genetically correct woman.&quot;&gt;&gt;
	He looks sceptical.
	&lt;&lt;msg $Henry &quot;Really?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Trust me!&quot;&gt;&gt;
	&lt;&lt;msg $Henry &quot;I know you are really smart and wouldn&#39;t lie to me, but that is hard to believe. Magic?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;The spell needs your willing participation. Would you be willing to let me cast it on you?&quot;&gt;&gt;
	He thinks for a long time. Then he shakes his head. Then he nods.
	&lt;&lt;msg $Henry &quot;If you prove to me that you have magic powers. I&#39;ll do it!&quot;&gt;&gt;
	&lt;&lt;set $Henry.askedfortransformation to true&gt;&gt;
	&lt;&lt;if $Mom.status gte 2 and $mutarisknown is true&gt;&gt;
		@@.choice;&lt;&lt;link &quot;Prove it to him&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_transformation_prove&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;continueon&gt;&gt;	
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget henry_prove_prompt&gt;&gt;
	&lt;&lt;msg $Henry &quot;Have you found a way to prove that you can do it yet?&quot;&gt;&gt;
	@@.talklink;
	&lt;&lt;if $Mom.status gte 2 and $mutarisknown is true&gt;&gt;
		&lt;&lt;link &quot;Yes, I have!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_transformation_prove&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &quot;Not yet. But soon.&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget henry_transformation_prove&gt;&gt;
	You take out your phone and write a short message to your mom, requesting a nude picture from her.&lt;br&gt;
	&lt;&lt;png &quot;Henry/Events&quot; &quot;transformation_phone&quot;&gt;&gt;&lt;br&gt;
	You show it to $Henry.callname.
	&lt;&lt;msg $You &quot;I used my magic powers to turn her into my slave. She will do anything I tell her to.&quot;&gt;&gt;
	$Henry.callname stares at the screen with disbelieve.
	&lt;&lt;msg $Henry &quot;She would&#39;ve killed you for that text.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Mhm!&quot;&gt;&gt;
	&lt;&lt;msg $Henry &quot;I... I ... I believe you. Cast the spell!&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Now?&quot;&gt;&gt;
	&lt;&lt;msg $Henry &quot;I can&#39;t wait any longer! Do it! Turn me into your woman!&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Cast the mutaris spell.&quot; &quot;Henrys home&quot;&gt;&gt;
		&lt;&lt;set $Henry.gender to &quot;female&quot;&gt;&gt;
		&lt;&lt;set $Henry.status to 3&gt;&gt;
		&lt;&lt;set $quests[2].progress++&gt;&gt;
		&lt;&lt;set $Henry.facepic to &quot;img/Henry/face/female_horny.jpg&quot;&gt;&gt;
		&lt;&lt;set $henrygallery.pictures.pushUnique(&quot;img/Henry/henry_female_horny.jpg&quot;)&gt;&gt;
		&lt;&lt;set Dialog.close()&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_transformation_flash&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget henry_transformation_flash&gt;&gt;
&lt;&lt;mp4 &quot;Henry&quot; &quot;flash&quot;&gt;&gt;&lt;br&gt;
There is a blinding flash of light. $Henry.callname moans, a strange sound, that is rather high pitched for his usually deep voice.
@@.choice;&lt;&lt;link &quot;Concentrate&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_after_transformation&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget henry_after_transformation&gt;&gt;
&lt;&lt;msg $Henry &quot;What the fuck?&quot;&gt;&gt;
His voice is higher, he is smaller and more petit. His hair has suddenly grown a lot longer. Strangely enough even his clothes are different now. In short: In front of you there stands a beautiful black woman.&lt;br&gt;
@@.right;&lt;&lt;jpg &quot;Henry/Events&quot; &quot;transformation_female&quot;&gt;&gt;@@
&lt;&lt;msg $Henry &quot;Oh wow! It worked!&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Of course it worked. I told you, I&#39;m a powerful wizard.&quot;&gt;&gt;
He ... She looks excited.
&lt;&lt;msg $Henry &quot;It feels ... I don&#39;t know ... AMAZING!&quot;&gt;&gt;
Her hands begin to roam around her body.
&lt;&lt;msg $Henry &quot;Incredible.&quot;&gt;&gt;
@@.talklink;
&lt;&lt;link &quot;Show me your tits!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_tits&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Show me your pussy!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_pussy&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Present your body!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_body&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Enough.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_close_inspection&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget henry_tits&gt;&gt;
@@.right;&lt;&lt;jpg &quot;Henry/Events&quot; &quot;transformation_tits&quot;&gt;&gt;@@
She reaches up to her chest and grins.
&lt;&lt;msg $Henry &quot;I GOT TITS?!&quot;&gt;&gt;
She rips her shirt down.&lt;br&gt;
&lt;&lt;msg $Henry &quot;Do you like them?&quot;&gt;&gt;
&lt;&lt;msg $You &quot;I do. They are beautiful&quot;&gt;&gt;
@@.talklink;
&lt;&lt;link &quot;Show me your pussy!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_pussy&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Present your body!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_body&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Enough.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_close_inspection&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget henry_pussy&gt;&gt;
@@.right;&lt;&lt;jpg &quot;Henry/Events&quot; &quot;transformation_pussy&quot;&gt;&gt;@@
Her hands quickly move downwards.
&lt;&lt;msg $Henry &quot;MY? PUSSY?!&quot;&gt;&gt;
She pulls down her pants and turns around. She bends over and spreads her pussy lips. &lt;br&gt;
&lt;&lt;msg $You &quot;Nice!&quot;&gt;&gt;
&lt;&lt;msg $Henry &quot;It feels very nice.&quot;&gt;&gt;
She begins to fondle it.
&lt;&lt;msg $Henry &quot;Mmmmmmm!&quot;&gt;&gt;
@@.talklink;
&lt;&lt;link &quot;Show me your tits!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_tits&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Present your body!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_body&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Enough.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_close_inspection&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget henry_body&gt;&gt;
@@.right;&lt;&lt;jpg &quot;Henry/Events&quot; &quot;transformation_presenting&quot;&gt;&gt;@@
She strips and presents her new body to you.&lt;br&gt;
&lt;&lt;msg $Henry &quot;Is this body to your liking?&quot;&gt;&gt;
&lt;&lt;msg $You &quot;You are very hot!&quot;&gt;&gt;
She smiles happily.
&lt;&lt;msg $You &quot;I&#39;ll let you explore it alone for a while, so you are better prepared when it comes to serving me with it.&quot;&gt;&gt;
&lt;&lt;msg $Henry &quot;Thank you, &lt;&lt;yourname $Henry&gt;&gt;! I won&#39;t dissapoint you.&quot;&gt;&gt;
@@.talklink;
&lt;&lt;link &quot;Show me your tits!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_tits&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Show me your pussy!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_pussy&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Enough.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_close_inspection&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget henry_close_inspection&gt;&gt;
	&lt;&lt;code &#39;_henrynewname&#39;&gt;&gt;&lt;&lt;textbox &quot;$Henry.callname&quot; &quot;Henrietta&quot;&gt;&gt;&lt;&lt;/code&gt;&gt;
&lt;&lt;msg $You &quot;Oh, and when someone asks, you are &lt;&lt;wiki &#39;_henrynewname&#39;&gt;&gt;, your cousin. He had to move out of state for a job and you are housesitting. You can figure out the details on your own. We don&#39;t want anyone to ask difficult questions.&quot;&gt;&gt;
@@.choice;&lt;&lt;link &quot;Leave her alone&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $baker_street&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;




</tw-passagedata><tw-passagedata pid="69" name="Henry enslave widgets" tags="widget nobr" position="1750,375" size="100,100">/*===================================================================*/
/*=============================ENCHANTMENT===========================*/
/*===================================================================*/

&lt;&lt;widget henryenslavesub&gt;&gt;
&lt;&lt;thought &quot;Should I feel bad for making a black man my slave?&quot;&gt;&gt;
...&lt;br&gt;...
&lt;&lt;thought &quot;Nah! I&#39;m not a racist. I&#39;m just a pervert with mind control powers.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;$Henry.callname, you brag too much, because you have low self esteem. You feel weak and worthless, that&#39;s why you compensate so much. You actually look up to me as a much stronger human being, who is worth so much more than you. In comparison you feel small and meaningless. That&#39;s why you have decided to tie your fate to mine by being my loyal companion. You try to be useful to me in thought and action.&quot;&gt;&gt;
&lt;&lt;set $Henry.status to 1&gt;&gt;
&lt;&lt;set $Henry.callsyou to $You.callname&gt;&gt;&lt;&lt;set $Henry.event to &quot;submission&quot;&gt;&gt;&lt;&lt;set $henrygallery.pictures.pushUnique(&quot;img/Henry/henry_submissive.jpg&quot;)&gt;&gt;
&lt;&lt;set $Henry.facepic to &quot;img/Henry/face/male_submissive.jpg&quot;&gt;&gt;&lt;&lt;set $quests[2].progress++&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget henryenslavehorny&gt;&gt;
&lt;&lt;msg $You &quot;$Henry.callname, you want to become even more useful to me, that&#39;s why you want to become a woman. As a woman you can not only be useful by acting in my interests, but also by using your body as a tool for my satisfaction. Since you know that I am very powerful, you will ask me for guidance and how to become a woman that is attractive to me.&quot;&gt;&gt;
&lt;&lt;set $Henry.status to 2&gt;&gt;
&lt;&lt;set $Henry.facepic to &quot;img/Henry/face/male_horny.jpg&quot;&gt;&gt;&lt;&lt;set $henrygallery.pictures.pushUnique(&quot;img/Henry/henry_male_horny.jpg&quot;)&gt;&gt;
&lt;&lt;set $Henry.callsyou to &quot;Sir&quot;&gt;&gt;&lt;&lt;set $quests[2].progress++&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget henryenslaveslave&gt;&gt;
&lt;&lt;msg $You &quot;I am your living god. You worship me and everything I do. You are fanatic in your devotion to me. Nothing can shake this devotion and no one can convince you of anything than my divine power. Your worship me by offering me your body and soul. Your reward is the pleasure you feel when you serve me right. Since many people don&#39;t understand my divine mandate yet, you will keep your devotion secret from anyone who is not serving me. My other servants might not see me as a god, but they all serve my interests in different ways.&quot;&gt;&gt;
&lt;&lt;set $Henry.status to 4&gt;&gt;
&lt;&lt;set $Henry.facepic to &quot;img/Henry/face/female_slave.jpg&quot;&gt;&gt;
&lt;&lt;set $Henry.callsyou to &quot;My Lord&quot;&gt;&gt;&lt;&lt;set $quests[2].progress++&gt;&gt;&lt;&lt;set $henrygallery.pictures.pushUnique(&quot;img/Henry/henry_slave.jpg&quot;)&gt;&gt;
&lt;&lt;set $Henry.bj to false&gt;&gt;&lt;&lt;set $Henry.fuck to false&gt;&gt;&lt;&lt;set $Henry.anal to false&gt;&gt;
&lt;&lt;/widget&gt;&gt;


</tw-passagedata><tw-passagedata pid="70" name="Andrea talk widgets" tags="widget nobr" position="1875,125" size="100,100">/*===================================================================*/
/*===================================TALK============================*/
/*===================================================================*/
&lt;&lt;widget talktoandrea&gt;&gt;
&lt;div id=&quot;talkouter&quot;&gt;
	&lt;&lt;if $Andrea.status is 0&gt;&gt;
		&lt;&lt;msg $Andrea &quot;Go away, I don&#39;t want to talk with you right now.&quot;&gt;&gt;
		&lt;&lt;thought &quot;I need to talk to her if I want to use the spell on her.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Maybe later.&quot;&gt;&gt;
		&lt;&lt;msg $Andrea &quot;Probably not.&quot;&gt;&gt;
		@@.talklink;&lt;&lt;link &quot;Fine!&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;else&gt;&gt;
		@@.talklink;
		&lt;&lt;if $keys[4].owned is false&gt;&gt;&lt;&lt;link &quot;Give me the key to your apartment.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;andreagiveflatkey&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $keys[5].owned is false&gt;&gt;&lt;&lt;link &quot;Give me the key to the main door.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;andreagivehousekey&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $Lisa.status is 0&gt;&gt;&lt;&lt;link &quot;Can you talk to Lisa for me?&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;andreatalktolisa&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;link &quot;What do you think about me?&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;andreaaboutme&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Tell me about yourself.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;andreaaboutyou&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;if $Andrea.stayathome is false&gt;&gt;&lt;&lt;link &quot;You should stay at home.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;andreastayathome&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;else&gt;&gt;&lt;&lt;link &quot;You should go out again.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;andreastayathome&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;link &quot;You should call me...&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;callme $Andrea&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Nothing&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
		@@
	&lt;&lt;/if&gt;&gt;
&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget andreatalktolisa&gt;&gt;
	&lt;&lt;switch $Andrea.status&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $You &quot;Could you maybe talk to $Lisa.callname for me? She won&#39;t listen to me. I&#39;d like to speak to her.&quot;&gt;&gt;
		&lt;&lt;msg $Andrea &quot;Come on, bro! Move on! She gets laughing fits whenever your name is mentioned.&quot;&gt;&gt;
	&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $You &quot;Could you maybe talk to $Lisa.callname for me? She won&#39;t listen to me. I&#39;d like to speak to her.&quot;&gt;&gt;
		&lt;&lt;msg $Andrea &quot;Is it that important to you?&quot;&gt;&gt;&lt;&lt;msg $You &quot;Yes. I really need to talk to her.&quot;&gt;&gt;&lt;&lt;msg $Andrea &quot;I don&#39;t think it&#39;s a good idea. For some reason, she loathes you.&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $You &quot;Can you tell $Lisa.callname that I want to talk to her. I would be very thankful...&quot;&gt;&gt;
		&lt;&lt;msg $Andrea &quot;How thankful?&quot;&gt;&gt;&lt;&lt;msg $You &quot;Thankful enough to have some fun...&quot;&gt;&gt;&lt;&lt;msg $Andrea &quot;Ok, I&#39;ll try to convince her.&quot;&gt;&gt;&lt;&lt;set $Lisa.status to 1&gt;&gt;&lt;&lt;set $Lisa.event to &quot;convinced&quot;&gt;&gt;
		&lt;&lt;set $Lisa.reasontotalk to &quot;Andrea&quot;&gt;&gt;
	&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $You &quot;Get $Lisa.callname to talk to me again. I don&#39;t care how.&quot;&gt;&gt;
		&lt;&lt;msg $Andrea &quot;You want to fuck her again, right?&quot;&gt;&gt;&lt;&lt;msg $You &quot;Of course!&quot;&gt;&gt;&lt;&lt;msg $Andrea &quot;Oh...&quot;&gt;&gt;&lt;&lt;msg $You &quot;Don&#39;t worry, you&#39;ll get your share of my cock no matter what.&quot;&gt;&gt;
		&lt;&lt;msg $Andrea &quot;I&#39;ll call her.&quot;&gt;&gt;&lt;&lt;set $Lisa.status to 1&gt;&gt;&lt;&lt;set $Lisa.event to &quot;convinced&quot;&gt;&gt;
		&lt;&lt;set $Lisa.reasontotalk to &quot;Andrea&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to say&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktoandrea&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget andreastayathome&gt;&gt;
&lt;&lt;if $Andrea.stayathome is false&gt;&gt;
	&lt;&lt;msg $You &quot;You should stay in your apartment. I don&#39;t want to go looking for you all the time.&quot;&gt;&gt;
	&lt;&lt;switch $Andrea.status&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Andrea &quot;Don&#39;t make me regret speaking with you again.&quot;&gt;&gt;
	&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Andrea &quot;No way! I mean, I like teasing you and stuff, but my social life is far more important.&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Andrea &quot;Ok, I&#39;ll stay at home ... under the condition that you come over every once awhile and fuck me senseless!&quot;&gt;&gt;&lt;&lt;set $Andrea.stayathome to true&gt;&gt;
	&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Andrea &quot;Of course &lt;&lt;yourname $Andrea&gt;&gt;! I&#39;ll keep myself ready for you at all times.&quot;&gt;&gt;&lt;&lt;set $Andrea.stayathome to true&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;msg $Andrea &quot;It might get in the way of all the fucking. But if that is what you wish, I&#39;ll do it.&quot;&gt;&gt;&lt;&lt;set $Andrea.stayathome to false&gt;&gt;
&lt;&lt;/if&gt;&gt;
@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to say&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktoandrea&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget andreagiveflatkey&gt;&gt;
&lt;&lt;msg $You &quot;It might be a good idea to give me a key for your apartment.&quot;&gt;&gt;
&lt;&lt;switch $Andrea.status&gt;&gt;
&lt;&lt;case 0 1&gt;&gt;&lt;&lt;msg $Andrea &quot;WHAT? Have you gone insane? Get lost!&quot;&gt;&gt;@@.talklink;&lt;&lt;link &quot;Nevermind, bitch!&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@ 
&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Andrea &quot;Nah. I mean, you&#39;re not as bad as in the past, but I don&#39;t want you perv to go through my panty drawers.&quot;&gt;&gt;@@.talklink;&lt;&lt;link &quot;At least you didn&#39;t scream at me.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktoandrea&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Andrea &quot;So you can catch me naked?&quot;&gt;&gt;You smile a naughty smile.&lt;&lt;msg $Andrea &quot;Sounds hot! Here you go!&quot;&gt;&gt;&lt;&lt;set $keys[4].owned to true&gt;&gt;@@.talklink;&lt;&lt;link &quot;Thank you, sis.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktoandrea&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Andrea &quot;Of course, &lt;&lt;yourname $Andrea&gt;&gt;! It will make it much more convenient for you to enjoy our special relationship.&quot;&gt;&gt;&lt;&lt;set $keys[4].owned to true&gt;&gt;@@.talklink;&lt;&lt;link &quot;Damn right!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktoandrea&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget andreagivehousekey&gt;&gt;
&lt;&lt;msg $You &quot;It is super annoying to always have to ring you up. Give me the key to the front door.&quot;&gt;&gt;
&lt;&lt;switch $Andrea.status&gt;&gt;
&lt;&lt;case 0 1&gt;&gt;&lt;&lt;msg $Andrea &quot;WHAT? Have you gone insane? Get lost!&quot;&gt;&gt;@@.talklink;&lt;&lt;link &quot;Nevermind, bitch!&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@ 
&lt;&lt;case 2 3&gt;&gt;&lt;&lt;msg $Andrea &quot;Sorry, can&#39;t do that. I&#39;m not allowed to give the key to third parties.&quot;&gt;&gt;@@.talklink;&lt;&lt;link &quot;I understand.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktoandrea&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Andrea &quot;Anything for you, &lt;&lt;yourname $Andrea&gt;&gt;!&quot;&gt;&gt;@@.talklink;&lt;&lt;link &quot;That&#39;s a good slave&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktoandrea&gt;&gt;&lt;&lt;set $keys[5].owned to true&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget andreaaboutme&gt;&gt;
&lt;&lt;msg $You &quot;What do you think about me?&quot;&gt;&gt;
&lt;&lt;switch $Andrea.status&gt;&gt;
&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Andrea &quot;You are my brother. Sadly, you are a loser and I really don&#39;t like it. I only talk to you, because you brought my bag back and maybe that means you aren&#39;t as bad as I thought.&quot;&gt;&gt;
&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Andrea &quot;You are my brother and it&#39;s really funny to tease you. You are such an easy target.&quot;&gt;&gt;
&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Andrea &quot;You are soo fun to play with. I love that you are my brother and that you think I&#39;m sexy.&quot;&gt;&gt;
&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Andrea &quot;You are my master! You may use me however you like, as long as you fuck me good!&quot;&gt;&gt;
&lt;&lt;/switch&gt;&gt;
@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to know.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktoandrea&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

/*===================================================================*/

&lt;&lt;widget andreaaboutyou&gt;&gt;
&lt;&lt;msg $You &quot;Tell me about yourself.&quot;&gt;&gt;
&lt;&lt;switch $Andrea.status&gt;&gt;
&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Andrea &quot;I&#39;m your sister, you dumbass. Your older, smarter and all around better sister.&quot;&gt;&gt;
&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Andrea &quot;I&#39;m your sexy sister and I have a killer body. I bet you want some of that, huh? Too bad! Get a good look so you can masturbate to the sight, you little pervert.&quot;&gt;&gt;
&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Andrea &quot;I&#39;m getting addicted to your cock in my throat and ass. By the way, do you want to have another go?&quot;&gt;&gt;
&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Andrea &quot;I&#39;m desperate for your cock. I need you to fuck me raw. I love, no I need it.&quot;&gt;&gt;
&lt;&lt;/switch&gt;&gt;
@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to know.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktoandrea&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;




















</tw-passagedata><tw-passagedata pid="71" name="Andrea event widgets" tags="widget nobr" position="1875,250" size="100,100">/*===================================================================*/
/*================================EVENTS=============================*/
/*===================================================================*/
&lt;&lt;widget andrea_submission&gt;&gt;
	&lt;&lt;set $Andrea.event to &quot;none&quot;&gt;&gt;
	As she opens the door for you $Andrea.callname embraces you into a great hug. You can clearly feel her tits pressed against your chest.
	&lt;&lt;msg $Andrea &quot;Hey bro! Nice of you to come over. Have a seat.&quot;&gt;&gt;
	You sit down on the sofa as does she. Suddenly she perks up.
	&lt;&lt;msg $Andrea &quot;Have you heard that?&quot;&gt;&gt;
	She jumps up and looks out of the window. She leans over to get a better look and her dress rides up.
	@@.right;[img[img/Andrea/events/submission_1.jpg]]@@
	You can&#39;t help but stare at her round bubblebutt and her sexy black panties.
	&lt;&lt;msg $Andrea &quot;Oops&quot;&gt;&gt;
	She has turned around and noticed you, quickly sitting back down and crossing her legs.
	&lt;&lt;msg $Andrea &quot;Tsk Tsk Tsk! Are you staring at my panties, you perv?&quot;&gt;&gt;
	&lt;&lt;thought &quot;Busted! Hopefully the spell works.&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Yeah, but you were flaunting them pretty aggressively.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;andrea_submission_1&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget andrea_submission_1&gt;&gt;
	$Andrea.callname sticks her tongue out at you and slowly uncrosses her legs, letting you see her panties again. 
	&lt;&lt;msg $Andrea &quot;You can look all you want, but no touching. If you get hard you&#39;ll have to get yourself off. Thinking about your sexy sexy sister. God you are pathetic...&quot;&gt;&gt;
	@@.left;[img[img/Andrea/events/submission_2.jpg]]@@
	&lt;&lt;msg $You &quot;That&#39;s unfair. You are the one flashing me.&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;No one forces you to stare. I should kick you out.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;We are siblings. If I&#39;m a pervert, you are as well.&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;I bet you like it, when I stare at you.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;andrea_submission_2&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget andrea_submission_2&gt;&gt;
	She thinks for a while.
	&lt;&lt;msg $Andrea &quot;You are right. It is nice to be appreciated for once. I work hard for this killer body. &quot;&gt;&gt;
	She spreads her legs and at the same time lifts up the hem of her dress showing off her midriff.
	&lt;&lt;msg $Andrea &quot;Look all you want. But touching is out of the picture. We are siblings after all! Do you understand!&quot;&gt;&gt;
	@@.right;[img[img/Andrea/events/submission_3.jpg]]@@
	&lt;&lt;msg $You &quot;I understand. No touching...&quot;&gt;&gt;
	&lt;&lt;thought &#39;For now!&#39;&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget andrea_horny&gt;&gt;
	&lt;&lt;set $Andrea.event to &quot;none&quot;&gt;&gt;
	@@.right;[img[img/Andrea/events/horny_1.jpg]]@@
	$Andrea.callname opens the door. Your eyes almost pop out of your head. She is wearing a matching set of sexy black lingerie.
	&lt;&lt;msg $You &quot;Wow!&quot;&gt;&gt;
	She pulls you into the apartment and shuts the door behind you.
	&lt;&lt;msg $Andrea &quot;Do you like what you see?&quot;&gt;&gt;
	You nod your head.
	&lt;&lt;msg $You &quot;Hell yeah!&quot;&gt;&gt;
	She reaches behind her and with a snap she opens the clasp of her bra.
	&lt;&lt;msg $Andrea &quot;Do you want to see more, you naughty boy?&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Yes!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;andrea_horny_1&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;	

&lt;&lt;widget andrea_horny_1&gt;&gt;
	&lt;&lt;msg $You &quot;Yes!&quot;&gt;&gt;
	She lets the straps of her bra slip down her arms and reaches up to the cups. She smiles at you with a mixture of arousal and the desire to tease you.
	&lt;&lt;msg $Andrea &quot;Are you sure you could handle it?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Try me!&quot;&gt;&gt;
	She lets her bra drop to the floor and presents her tits. Slowly she crawls unto her bed.
	&lt;&lt;msg $Andrea &quot;I bet you would love a blowjob.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Of course!&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;You perv. Wanting a blowjob from his sister.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Well, you are just too sexy. I can&#39;t help myself&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;You&#39;ll have to masturbate then. Because even if I offered you would be too much a wimp to actually take me up on the offer.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Are you offering me a bj?&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;Oh what the hell, why not. You are to scared to take the offer anyway.&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Call her bluff&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;andrea_horny_2&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget andrea_horny_2&gt;&gt;
	You open your pants and drop your pants. Her eyes widen in shock.
	&lt;&lt;msg $Andrea &quot;What are you doing?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Taking you up on your offer.&quot;&gt;&gt;
	She looks a little bewildered.
	&lt;&lt;msg $Andrea &quot;What?&quot;&gt;&gt;
	@@.left;[img[img/Andrea/events/horny_2.jpg]]@@
	&lt;&lt;msg $You &quot;Are you chickening out?&quot;&gt;&gt;
	She shakes her head.
	&lt;&lt;msg $Andrea &quot;No. I offered and I&#39;ll deliver.&quot;&gt;&gt;
	She climbs on her bead and beckons you over.
	&lt;&lt;msg $Andrea &quot;Come here and lets get this over with.&quot;&gt;&gt;
	She grabs your cock and begins giving you a blowjob. Reluctantly at first, but after a few licks you get hard and the suggestions kick in. 
	She begins to moan with pleasure, putting more and more effort into the blowjob.
	@@.talklink;&lt;&lt;link &quot;Wow sis, you seem to be into it.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;andrea_horny_3&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget andrea_horny_3&gt;&gt;
	&lt;&lt;msg $Andrea &quot;This isn&#39;t half bad.&quot;&gt;&gt;
	@@.right;&lt;&lt;sexmp4 &quot;Andrea&quot; &quot;blowjob&quot;&gt;&gt;@@&lt;br&gt;
	She puts more and more effort into it, bobbing up and down on your cock. Your sister seems to be pretty good at blowjobs. 
	&lt;&lt;msg $You &quot;You are pretty good at sucking dick.&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;I haven&#39;t had any complains. Now shut up and enjoy.&quot;&gt;&gt;
	It doesn&#39;t take you long to get to the edge of orgasm.
	@@.choice;&lt;&lt;link &quot;Cum on her face&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;andrea_horny_4&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget andrea_horny_4&gt;&gt;
	@@.left;&lt;&lt;sexmp4 &quot;Andrea&quot; &quot;cumshot&quot;&gt;&gt;@@
	&lt;&lt;msg $You &quot;Phew! That was amazing!&quot;&gt;&gt;
	$Andrea.callname licks wipes your cum from her face. Then she licks it from her fingers.
	&lt;&lt;msg $Andrea &quot;Yeah, that was a lot of fun.&quot;&gt;&gt;
	She is panting slightly and her face is flushed.
	&lt;&lt;thought &quot;She is clearly aroused.&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Lets do that again sometime.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;andrea_horny_5&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget andrea_horny_5&gt;&gt;
	@@.right;[img[img/Andrea/events/horny_3.jpg]]@@
	&lt;&lt;msg $Andrea &quot;Yeah... Maybe...&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;What?&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;Maybe we can go even further...&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;You mean fucking?&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;Ewww! NO! That would be incest!&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;You are confusing.&quot;&gt;&gt;
	She smirks and sings.
	&lt;&lt;msg $Andrea &quot;It&#39;s only incest if it&#39;s in the pussy.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Do you mean what I think you mean?&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;Of course I mean anal, you numbnut. Only one hole is off limits. That leaves two ready to go...&quot;&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget andrea_slave&gt;&gt;
	&lt;&lt;set $Andrea.event to &quot;none&quot;&gt;&gt;
	You enter the room and $Andrea.callname looks at you with arousal written all over her face.
	&lt;&lt;msg $Andrea &quot;Bro, I have a question.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Spit it out.&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;I really want you to fuck me.&quot;&gt;&gt;
	You open your pants.
	&lt;&lt;msg $You &quot;&#39;kay. Get your asshole ready.&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;No, not my ass. I want you to fuck me for real!&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;But you said the pussy was off limits.&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;I changed my mind. Please! Bro! I really want to feel you inside me.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Under one condition!&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;Anything you want!&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Become my slave!&quot;&gt;&gt;
	She laughs.
	&lt;&lt;msg $Andrea &quot;Is that all, Master?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Yes, that&#39;s all.&quot;&gt;&gt;
	@@.right;&lt;&lt;mp4 &quot;Andrea&quot; &quot;spreading&quot;&gt;&gt;@@
	&lt;&lt;msg $Andrea &quot;Then fuck the shit out of me, Master!&quot;&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="72" name="Andrea enslave widgets" tags="widget nobr" position="1875,375" size="100,100">/*===================================================================*/
/*=============================ENCHANTMENT===========================*/
/*===================================================================*/
&lt;&lt;widget andreaenslavesub&gt;&gt;
&lt;&lt;msg $You &quot;$Andrea.callname, you like to annoy your brother. So you decided to start flirting with your brother, flashing your brother, doing everything you can to arouse your brother. To do this, you have to make up with your brother, to let him get near to you. The thought of him getting horny because of you, but not being able to get you, because that would be incest, is very arousing for you. It gets you all wet and horny thinking about how he will be forced to masturbate because of you. You will masturbate more frequently and you will think about your brother, how he masturbates to you and how arousing it is. You will only have an orgasm when you imagine your brother cumming. Nothing else will get you off.&quot;&gt;&gt;
&lt;&lt;set $Andrea.status to 2&gt;&gt;&lt;&lt;set $Andrea.facepic to &quot;img/Andrea/face/submissive.jpg&quot;&gt;&gt;&lt;&lt;set $Andrea.callsyou to &quot;Bro&quot;&gt;&gt;&lt;&lt;set $Andrea.event to &quot;submission&quot;&gt;&gt;&lt;&lt;set $quests[3].progress++&gt;&gt;
&lt;&lt;set $andreagallery.pictures.pushUnique(&quot;img/Andrea/andrea_submissive.jpg&quot;)&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget andreaenslavehorny&gt;&gt;
&lt;&lt;msg $You &quot;Tormenting your brother with your sexy body feels amazing. So amazing in fact, that you want to, no you need to, take it to the next level. You will offer your brother blowjobs, sure that he is too much of a coward to actually take you up on that offer. But when he actually does, you will comply. Reluctantly at first, but since it is not actually incest if you don&#39;t fuck, you will do it. And when you realize how much this gets him turned on, and in turn gets you even hornier than before you realize, that this is what you always wanted. You will offer him to fuck your ass and the thought of doing it will get you off. From then on you will only be able to have an orgasm when having sex with your brother. You will get hornier and hornier, but the only way to get release is by getting your brother to fuck your mouth or your ass.&quot;&gt;&gt;
&lt;&lt;set $Andrea.status to 3&gt;&gt;&lt;&lt;set $Andrea.facepic to &quot;img/Andrea/face/horny.jpg&quot;&gt;&gt;&lt;&lt;set $Andrea.event to &quot;horny&quot;&gt;&gt;&lt;&lt;set $quests[3].progress++&gt;&gt;&lt;&lt;set $andreagallery.pictures.pushUnique(&quot;img/Andrea/andrea_horny.jpg&quot;)&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget andreaenslaveslave&gt;&gt;
&lt;&lt;msg $You &quot;Your brother dominates you and it feels amazing. It has become the most important part of your life to turn your brother on, to be a sex toy for him, to have him use you. You are his sister-slave, his toy, his tool for getting off. You will freely give up your pussy for him and happily do anything he wants. You will be wet and willing to be used whenever he decides to. Nothing makes you happier and hornier than being a slut for him and for him alone. Getting fucked by your brother is bliss. It is the most fulfilling, arousing and erotic thing you ever done and ever will do. You will keep this relationship secret, since the world is to intolerant to accept this wonderful relationship as Master and slave you have going and you don&#39;t want it to ever end.&quot;&gt;&gt;
&lt;&lt;set $Andrea.status to 4&gt;&gt;&lt;&lt;set $Andrea.facepic to &quot;img/Andrea/face/slave.jpg&quot;&gt;&gt;&lt;&lt;set $Andrea.anal to false&gt;&gt;&lt;&lt;set $Andrea.bj to false&gt;&gt;&lt;&lt;set $Andrea.callsyou to &quot;Master&quot;&gt;&gt;&lt;&lt;set $Andrea.event to &quot;slave&quot;&gt;&gt;&lt;&lt;set $quests[3].progress++&gt;&gt;&lt;&lt;set $andreagallery.pictures.pushUnique(&quot;img/Andrea/andrea_slave.jpg&quot;)&gt;&gt;
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="73" name="Brian talk widgets" tags="widget nobr" position="2000,125" size="100,100">&lt;&lt;widget talktobrian&gt;&gt;
&lt;div id=&quot;talkouter&quot;&gt;
&lt;&lt;if $Brian.status is 0&gt;&gt;
	&lt;&lt;msg $Brian &quot;If you don&#39;t want to get a black eye, you better get lost, faggot.&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;All right! All right!&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;else&gt;&gt;
	@@.talklink;
		&lt;&lt;link &quot;I have something for you&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;briangift&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;if $Brian.status gt 0 and $Lisa.status is 0&gt;&gt;&lt;&lt;link &quot;Break up with Lisa.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;brianbreakuplisa&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $keys[6].owned is false&gt;&gt;&lt;&lt;link &quot;Give me your key.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;briangivekey&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $Brian.stayathome is false&gt;&gt;&lt;&lt;link &quot;You should stay at home!&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;brianstayathome&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;else&gt;&gt;&lt;&lt;link &quot;You may go outside again!&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;brianstayathome&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;		
		&lt;&lt;link &quot;What do you think about me?&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;brianaboutme&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Tell me about yourself.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;brianaboutyou&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;if $Brian.gender is &quot;female&quot; and $Brian.plug&gt;&gt;
			&lt;&lt;link &quot;Show me the buttplug!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;brianshowplug&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;link &quot;You should call me...&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;callme $Brian&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Nothing&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
	@@
&lt;&lt;/if&gt;&gt;
&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget briangift&gt;&gt;
	&lt;&lt;msg $You &quot;You will take this!&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;If you want to... What is it?&quot;&gt;&gt;
	&lt;div id=&quot;briangift&quot;&gt;
	@@.talklink;
	&lt;&lt;if $sextoys[4].amount gt 0&gt;&gt;&lt;&lt;link &quot;A buttplug&quot;&gt;&gt;&lt;&lt;replace &quot;#briangift&quot;&gt;&gt;&lt;&lt;briangiftplug&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;set $Brian.plug to true&gt;&gt;&lt;&lt;set $sextoys[4].amount--&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &quot;Nothing&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktobrian&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
	&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget briangiftplug&gt;&gt;
	&lt;&lt;msg $You &quot;This!&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;What is that?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;This... is a plug. You will keep it in your ass at all times! You are allowed to take it out to go to the toilet and clean it regularly.&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;In my ass?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Yes!&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;Won&#39;t it hurt?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Of course! That&#39;s the point! But you&#39;ll get used to it in no time. There is a big anal slut hidden inside you.&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;That&#39;s all!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktobrian&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget brianbreakuplisa&gt;&gt;
	&lt;&lt;msg $You &quot;Break up with $Lisa.callname!&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;Yes, &lt;&lt;yourname $Brian&gt;&gt;.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Make it hurt.&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;If you wish.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;I wouldn&#39;t have said so if I hadn&#39;t, you stupid idiot.&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;I&#39;m sorry.&quot;&gt;&gt;
	&lt;&lt;set $Lisa.status to 1&gt;&gt;&lt;&lt;set $Lisa.reasontotalk to &quot;Brian&quot;&gt;&gt;&lt;&lt;set $Lisa.event to &quot;depressed&quot;&gt;&gt;&lt;&lt;set $quests[5].progress++&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Do it!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktobrian&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@ 
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget brianshowplug&gt;&gt;
	&lt;&lt;msg $You &quot;Show me the buttplug!&quot;&gt;&gt;
	&lt;&lt;if $Brian.status is 3&gt;&gt;/*Brian is female, but not fully enslaved*/
		&lt;&lt;if $Brian.privacy.includes($location.name)&gt;&gt; /*Check if we are at her home*/
			$Brian.callname quickly obeys and spreads her asscheeks, letting you have a good view at the end of the plug that sticks out of her ass.
			&lt;br&gt;&lt;&lt;mp4 &quot;Brian&quot; &quot;flashplug_home&quot;&gt;&gt;&lt;br&gt;
			&lt;&lt;msg $Brian &quot;Are you happy now?&quot;&gt;&gt;
			She seems ashamed and humiliated and is not able to look you in the eye.
			&lt;&lt;msg $You &quot;Yes, you did good.&quot;&gt;&gt;
			She shivers in pleasure.
			&lt;&lt;msg $You &quot;Are you wet?&quot;&gt;&gt;
			She doesn&#39;t answer.
			&lt;&lt;msg $You &quot;I asked you a question...&quot;&gt;&gt;
			&lt;&lt;msg $Brian &quot;No, &lt;&lt;yourname $Brian&gt;&gt;.&quot;&gt;&gt;
			You grab her ass and let your finger slide over her pussy. It is sopping wet.
			&lt;&lt;msg $You &quot;Liar!&quot;&gt;&gt;
			You slap her hard on her ass.
			&lt;br&gt;&lt;&lt;mp4 &quot;Brian&quot; &quot;spank&quot;&gt;&gt;&lt;br&gt;
		&lt;&lt;else&gt;&gt; /*If we are not at home*/
			&lt;&lt;msg $Brian &quot;I would really like to, &lt;&lt;yourname $Brian&gt;&gt;, but it is too public. I can&#39;t do it.&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;You reject my order?&quot;&gt;&gt;
			She is almost crying out of fear.
			&lt;&lt;msg $Brian &quot;I&#39;m so sorry, but I can&#39;t &lt;&lt;yourname $Brian&gt;&gt;.&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;I&#39;ll have to punish you later, you know that?&quot;&gt;&gt;
			Her face lights up a little.
			&lt;&lt;msg $Brian &quot;Of course, &lt;&lt;yourname $Brian&gt;&gt;. Whatever you whish to do to me, I will accept it gladly.&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;Fine then.&quot;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;else&gt;&gt; /*Brian is fully enslaved and will do it everywhere you want.*/
		&lt;&lt;msg $Brian &quot;Of course, &lt;&lt;yourname $Brian&gt;&gt;!&quot;&gt;&gt;
		&lt;&lt;if $location.name is &quot;Brians home&quot;&gt;&gt;&lt;&lt;mp4 &quot;Brian&quot; &quot;flashplug_home&quot;&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;mp4 &quot;Brian&quot; &quot;flashplug&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;br&gt;
		She quickly pulls up her skirt and bends over for your viewing pleasure.
	&lt;&lt;/if&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;That&#39;s enough!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktobrian&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget briangivekey&gt;&gt;
	&lt;&lt;msg $You &quot;You should give me the key to your house.&quot;&gt;&gt;
	&lt;&lt;switch $Brian.status&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Brian &quot;...no, I can&#39;t...&quot;&gt;&gt;&lt;&lt;msg $You &quot;Are you disobeying me?&quot;&gt;&gt;He flinches.&lt;&lt;msg $Brian &quot;No!&quot;&gt;&gt;&lt;&lt;msg $You &quot;Then give me your key!&quot;&gt;&gt;He hangs his head in defeat and gives his key to you.
	&lt;&lt;case 2 3&gt;&gt;&lt;&lt;msg $Brian &quot;Yes, &lt;&lt;yourname $Brian&gt;&gt;. Please, come in whenever you like and punish me.&quot;&gt;&gt;
	&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Brian &quot;Of course, &lt;&lt;yourname $Brian&gt;&gt;. Whatever you desire!&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Good!&quot;&gt;&gt;&lt;&lt;set $keys[6].owned to true&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktobrian&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget brianstayathome&gt;&gt;
&lt;&lt;if $Brian.stayathome is false&gt;&gt;
		&lt;&lt;msg $You &quot;You should spend all your time at home, so I can punish you whenever I feel the need to.&quot;&gt;&gt;
		&lt;&lt;switch $Brian.status&gt;&gt;
		&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Brian &quot;I can&#39;t they would ask for me at work! Please, I really can&#39;t.&quot;&gt;&gt;&lt;&lt;msg $You &quot;Fine! You can go to work... For now!&quot;&gt;&gt;
		&lt;&lt;case 2 3&gt;&gt;&lt;&lt;msg $Brian &quot;Yes! Punish me whenever you like, &lt;&lt;yourname $Brian&gt;&gt;. I deserve it!&quot;&gt;&gt;&lt;&lt;set $Brian.stayathome to true&gt;&gt;
		&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Brian &quot;I look forward to whatever punishment you deem neccessary for me.&quot;&gt;&gt;&lt;&lt;set $Brian.stayathome to true&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;msg $Brian &quot;Whatever you order, &lt;&lt;yourname $Brian&gt;&gt;!&quot;&gt;&gt;&lt;&lt;set $Brian.stayathome to false&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to say&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktobrian&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget brianaboutme&gt;&gt;
&lt;&lt;msg $You &quot;What do you think about me?&quot;&gt;&gt;
&lt;&lt;switch $Brian.status&gt;&gt;
&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Brian &quot;I always thought you are a wimp and a faggot, but ... I&#39;m not sure anymore.&quot;&gt;&gt;
&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Brian &quot;To be honest, I&#39;m afraid of you.&quot;&gt;&gt;
&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Brian &quot;You are incredibly scary and incredibly arousing at the same time. I tremble in fear and arousal at the mere thought of you.&quot;&gt;&gt;
&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Brian &quot;You are my master! You are the source of my pain, my fear, my pleasure and my devotion!&quot;&gt;&gt;
&lt;&lt;/switch&gt;&gt;
@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to say.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktobrian&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget brianaboutyou&gt;&gt;
&lt;&lt;msg $You &quot;Tell me about yourself.&quot;&gt;&gt;
NOT WRITTEN YET
&lt;&lt;switch $Brian.status&gt;&gt;
&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Brian &quot;&quot;&gt;&gt;
&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Brian &quot;&quot;&gt;&gt;
&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Brian &quot;&quot;&gt;&gt;
&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Brian &quot;&quot;&gt;&gt;
&lt;&lt;/switch&gt;&gt;
@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted to say.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktobrian&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

</tw-passagedata><tw-passagedata pid="74" name="Brian event widgets" tags="widget nobr" position="2000,250" size="100,100">&lt;&lt;widget brian_leaving_bar&gt;&gt;
	$Brian.callname is wobbling on his feet.
	&lt;&lt;msg $Brian &quot;I ha&#39; a lill too mush. I&#39;m goin hom.&quot;&gt;&gt;
	He staggers to the door, tries to open it but fails.
	&lt;&lt;msg $Brian &quot;SHIT! Stupid door!&quot;&gt;&gt;
	He kicks it, which forces it open. He laughs drunkenly and stumbles out.
	@@.choice;
	&lt;&lt;link &quot;Follow him!&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $main_street&gt;&gt;&lt;&lt;set $Brian.location to &quot;Back Streets&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_main_street&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Ignore him.&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;
/*=============================================*/
&lt;&lt;widget brian_main_street&gt;&gt;
	You follow $Brian.callname outside. It takes you a while to wheave through all the other guests, so when you finally get out, you just see him disappear into the back alleys.
	@@.choice;
	&lt;&lt;link &quot;Follow him.&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $back_street&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_back_street&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Nah, it&#39;s too dangerous.&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;
/*=============================================*/
&lt;&lt;widget brian_back_street&gt;&gt;
	You quickly enter the dark alley and see $Brian.callname standing there, urinating against the wall while resting his head on the cold bricks that comprise it.
	@@.choice;
	&lt;&lt;link &quot;Talk to him.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_back_street_talk&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Attack him.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_back_street_attack&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Use Rego-Te on him.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_back_street_enchant&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Go away.&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $main_street&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;
/*=============================================*/
&lt;&lt;widget brian_back_street_talk&gt;&gt;
	&lt;&lt;msg $You &quot;Hey $Brian.callname!&quot;&gt;&gt;
	He turns around and looks at you out of red eyes.
	&lt;&lt;msg $Brian &quot;Oi &lt;&lt;yourname $Brian&gt;&gt;! Waddaya want? Wanna speak to my fist?&quot;&gt;&gt;
	He takes a swing at you, but because he is drunk he misses you by a mile.
	&lt;&lt;msg $Brian &quot;You just lucky! I get you!&quot;&gt;&gt;
	He swings again, this time much closer.
	@@.choice;&lt;&lt;link &quot;Run away&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $main_street&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*=============================================*/
&lt;&lt;widget brian_back_street_attack&gt;&gt;
	You sneak up on $Brian.callname, which is not hard, since he is very drunk and not really observant of his surroundings.
	&lt;&lt;msg $You &quot;Fuck you, asshole!&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;Huh?&quot;&gt;&gt;
	You hit him in the head, he stumbles foreward and hits his head on the brick wall. Hard. $Brian.callname crumbles to the floor.
	@@.choice;
	&lt;&lt;link &quot;Enchant him!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brianenslavesub&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Leave&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $main_street&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;
/*=============================================*/
&lt;&lt;widget brian_back_street_enchant&gt;&gt;
	&lt;&lt;msg $You &quot;Rego Te!&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;Wha?&quot;&gt;&gt;
	He turns around, clearly not affected by the spell.
	&lt;&lt;thought &quot;It didn&#39;t work! Why didn&#39;t it work?&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;I&#39;m pissin. Fuck off, faggot!&quot;&gt;&gt;
	He looks at you aggressively.
	&lt;&lt;thought &quot;I better leave now. He looks really pissed. Maybe his mind is to resilient? I might need to weaken him first. Alcohol alone doesnt&#39;t seem to do the trick.&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Leave&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $main_street&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
 /*===================================================*/
&lt;&lt;widget brian_submits&gt;&gt;
	&lt;&lt;set $Brian.event to &quot;none&quot;&gt;&gt;
	$Brian.callname nervously leads you inside his home.
	&lt;&lt;msg $Brian &quot;Please... Come in &lt;&lt;yourname $Brian&gt;&gt;&quot;&gt;&gt;
	&lt;&lt;thought &quot;It is really uplifting to see him so submissive.&quot;&gt;&gt;
	You enter the house with an energetic step.&lt;br&gt;
	He slowly, carefully steps aside out of your path.
	&lt;&lt;msg $You &quot;Don&#39;t you have to say something?&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;I&#39;m sorry.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;I didn&#39;t hear that clearly. Repeat it. Louder!&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;I&#39;m sorry.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;For what exactly?&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;Do I have to spell it out? This is rather embarassing.&quot;&gt;&gt;
	You look at him cruelly.
	&lt;&lt;msg $You &quot;Yes, you have to, asshole!&quot;&gt;&gt;
	He flinches as you take a menacing step towards him.
	&lt;&lt;msg $Brian &quot;I&#39;m sorry for treating you like shit. I&#39;m sorry for being an asshole. I&#39;m sorry for everything bad or cruel or humiliating I&#39;ve ever done to you.&quot;&gt;&gt;
	You laugh.
	&lt;&lt;msg $You &quot;That&#39;s nice to hear.&quot;&gt;&gt;
	He sighs with relief.
	&lt;&lt;msg $You &quot;But it won&#39;t save you the just punishment.&quot;&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt; 
/*===================================================*/
&lt;&lt;widget brian_horny&gt;&gt;
	&lt;&lt;set $Brian.event to &quot;none&quot;&gt;&gt;
	$Brian.callname looks at you and bites his lower lip.
	&lt;&lt;msg $Brian &quot;Are you here to punish me again?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Of course! Why else would I visit a worthless idiot like you?&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;Yes, of course! I deserve the punishment. If you need to, punish me.&quot;&gt;&gt;
	He looks at you with desire in his eyes.
	&lt;&lt;msg $You &quot;You want to be punished?&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;...no...&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;And yet you ask me for punishment.&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;...yes...&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Why?&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;... I deserve it ...&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Is that all?&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;...yes...&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Slap him!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_horny_1&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget brian_horny_1&gt;&gt;
	&lt;&lt;mp4 &quot;Brian&quot; &quot;faceslap&quot;&gt;&gt;
	You slap him across the face. Hard.
	&lt;&lt;msg $You &quot;Don&#39;t lie to me!&quot;&gt;&gt;
	His cry of surprise and pain quickly turns into a moan of pleasure.
	&lt;&lt;msg $You &quot;Why do you want to be punished?&quot;&gt;&gt;
	He squirms emberassed. You are about to slap him again as he finally answers.
	&lt;&lt;msg $Brian &quot;...it feels good...&quot;&gt;&gt;
	You laugh at his discomfort.
	&lt;&lt;msg $You &quot;You masochistic slut!&quot;&gt;&gt;
	He moans in pleasure as you hurl humiliating insults at him.
	&lt;&lt;msg $You &quot;Getting off on humiliation. You disgust me!&quot;&gt;&gt;
	$Brian.callname moans more, his eyes shut, clearly lost in pleasure.
	@@.choice;&lt;&lt;link &quot;Kick him in the nuts.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_horny_2&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget brian_horny_2&gt;&gt;	
	@@.right;&lt;&lt;mp4 &quot;Brian&quot; &quot;ballkick&quot;&gt;&gt;@@
	He cries, though in pain or in pleasure is hard to tell, collapses to the floor and a wet stain appears in the front of his pants.
	&lt;&lt;msg $You &quot;Did you just cum from that?&quot;&gt;&gt;
	He weakly nods.
	&lt;&lt;msg $You &quot;That&#39;s pathetic!&quot;&gt;&gt;
	&lt;&lt;thought &quot;He can just lie there. I&#39;ll focus on more important things.&quot;&gt;&gt;
&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================*/
&lt;&lt;widget brian_transform&gt;&gt;
	&lt;&lt;msg $You &quot;I have decided for your next punishment.&quot;&gt;&gt;
	He looks at you with fear and aroused anticipation.
	&lt;&lt;msg $Brian &quot;What is it?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;You will become a woman!&quot;&gt;&gt;
	He looks shocked.
	&lt;&lt;msg $Brian &quot;What?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;You heard me alright!&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;But... how? Do you want me to crossdress?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;No, I want you to become a woman!&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;Like a sex change procedure?&quot;&gt;&gt;
	You laugh.
	&lt;&lt;msg $You &quot;Hell no! There is no possibility an ugly guy like you can ever become a beautiful woman.&quot;&gt;&gt;
	He moans at the insult and humiliation.
	&lt;&lt;msg $You &quot;Just be ready for whatever I decide to do to you.&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;...ok...&quot;&gt;&gt;
	@@.choice;
	&lt;&lt;link &quot;Cast the mutaris spell&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_transform_flash&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Don&#39;t cast it yet&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================*/
&lt;&lt;widget brian_transform_flash&gt;&gt;
	&lt;&lt;mp4 &quot;Henry&quot; &quot;flash&quot;&gt;&gt;&lt;br&gt;
	There is a blinding flash of light. $Brian.callname moans in pleasure as the magic runs through his body, changing it in previously unfelt ways.
	@@.choice;&lt;&lt;link &quot;Concentrate&quot; $location.target&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_after_transformation&gt;&gt;&lt;&lt;set $Brian.facepic to &quot;img/Brian/face/female_horny.jpg&quot;&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================*/
&lt;&lt;widget brian_after_transformation&gt;&gt;
	&lt;&lt;set $Brian.status to 3&gt;&gt;
	&lt;&lt;set $Brian.gender to &quot;female&quot;&gt;&gt;
	&lt;&lt;set $briangallery.pictures.pushUnique(&quot;img/Brian/female_horny.jpg&quot;)&gt;&gt;
	&lt;&lt;set $insultnoun.pushUnique(&quot;cunt&quot;,&quot;cunt on legs&quot;,&quot;twat&quot;,&quot;pussy&quot;,&quot;whore&quot;)&gt;&gt;
	&lt;&lt;msg $Brian &quot;Ugh... I feel ...  weak.&quot;&gt;&gt;
	Before you stands a surprised looking, beautiful, brunette woman.
	@@.right;&lt;&lt;jpg &quot;Brian/Events&quot; &quot;transformation_surprise&quot;&gt;&gt;@@
	&lt;&lt;msg $You &quot;Shut up, slut!&quot;&gt;&gt;
	Her head whips up and she looks at you with fearful eyes.
	&lt;&lt;msg $You &quot;Strip!&quot;&gt;&gt;
	She quickly complies.
	&lt;&lt;msg $You &quot;Nice tits for a useless cunt like you.&quot;&gt;&gt;
	She moans as your insults hit her.
	&lt;&lt;msg $You &quot;That ass is also very nice. I think I&#39;ll use that a lot in the future.&quot;&gt;&gt;
	Her legs get shakey as a wave of pleasure runs through her.
	@@.talklink;&lt;&lt;link &quot;On your knees!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_transformation_kneel&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================*/
&lt;&lt;widget brian_transformation_kneel&gt;&gt;
	@@.left;&lt;&lt;jpg &quot;Brian/Events&quot; &quot;transformation_submissive&quot;&gt;&gt;@@
	She quickly gets to the floor.
	&lt;&lt;msg $You &quot;Now that you are more to my liking, I can punish you even more.&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;Oh yes! Punish me!&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;You are not allowed to orgasm without my explicit permission. You will masturbate every morning and every evening until you are almost ready to cum, then you will stop!&quot;&gt;&gt;
	She cries in pleasure as she realizes the cruelty of your orders.
	&lt;&lt;msg $You &quot;Your name will also not be Brian anymore. You will destroy everything that you were proud of. Smash those trophies, burn these tricots, destroy everything. You may keep the fitness machines, because you will keep yourself fit and beautiful for my pleasure. Also, give away all your clothing.&quot;&gt;&gt;
	She is breathing heavily.
	&lt;&lt;msg $Brian &quot;...yes&quot;&gt;&gt;
	&lt;&lt;code &#39;_txtbx&#39;&gt;&gt;&lt;&lt;textbox &quot;$Brian.callname&quot; &quot;Brianna&quot;&gt;&gt;&lt;&lt;/code&gt;&gt;
	&lt;&lt;msg $You &quot;From now on, you&#39;re name is &lt;&lt;wiki &#39;_txtbx&#39;&gt;&gt;. There are some rules you will follow!&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;Yes!&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;You will never wear clothes in your home, except the occasional erotic lingerie. When you go outside, you are only allowed to wear slutty, degrading outfits to show the world what a classless, cheap slut you are! You&#39;ll also always have at least a small buttplug in your ass when you are not at home.&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;If I must!&quot;&gt;&gt;
	&lt;&lt;mp4 &quot;brian&quot; &quot;faceslap_female&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Do you question my orders?&quot;&gt;&gt;
	She quivers in fear.
	&lt;&lt;msg $Brian &quot;No! Of course not!&quot;&gt;&gt;
	&lt;&lt;set $Brian.event to &quot;briantransformed&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Then do as I ordered!&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================*/
&lt;&lt;widget brian_transformed&gt;&gt;
	&lt;&lt;set $Brian.event to &quot;none&quot;&gt;&gt;
	@@.right;&lt;&lt;jpg &quot;Brian/Events&quot; &quot;brian_transformed_1&quot;&gt;&gt;@@
	$Brian.callname looks at you like a deer into the headlights. She seems to be torn between trying to appease you and running away.
	In the end, the need for your punishment wins out and she demurely lowers her head.
	&lt;&lt;msg $Brian &quot;&lt;&lt;yourname $Brian&gt;&gt;&quot;&gt;&gt;
	Behind her, you see dressers with open drawers and stuffed boxes.
	&lt;&lt;msg $You &quot;What are you doing?&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;I&#39;m packing all the stuff you wanted me to get rid of.&quot;&gt;&gt;
	You walk over to the boxes, grab a random item. It&#39;s a trophy.
	You give it to her.
	@@.talklink;&lt;&lt;link &quot;What is this?&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_transformed_1&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget brian_transformed_1&gt;&gt;
	@@.right;&lt;&lt;jpg &quot;Brian/Events&quot; &quot;brian_transformed_2&quot;&gt;&gt;@@
	She takes the trophy.
	&lt;&lt;msg $Brian &quot;It&#39;s a trophy I won last year for outstanding achievments in the field of football.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Are you proud of it.&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;...&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Answer me, slut!&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;... yes.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Piss on it.&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;What?&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;I said: Piss on it!&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_transformed_2&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget brian_transformed_2&gt;&gt;
	&lt;&lt;msg $Brian &quot;Are you serious?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Do you really think questioning me will change my mind?&quot;&gt;&gt;
	She hangs her head low.
	&lt;&lt;msg $Brian &quot;No&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Then get to it, you stupid slut!&quot;&gt;&gt;
	With tears in her eyes she puts the trophy on the ground, squats over it and lets out a stream of piss.
	&lt;&lt;mp4 &quot;Brian&quot; &quot;pissing_1&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;When your&#39;re done, clean the piss up.&quot;&gt;&gt;
	She nods silently, tears of humiliation running down her face.
	&lt;&lt;msg $Brian &quot;Yes, &lt;&lt;yourname $Brian&gt;&gt;.&quot;&gt;&gt;
	You turn around and walk towards the door. In the last moment you turn around again.
	&lt;&lt;msg $You &quot;Use your tongue!&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Laugh maniacally and leave.&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $baker_street&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

/*===================================================*/
&lt;&lt;widget brian_slave&gt;&gt;
	&lt;&lt;set $Brian.event to &quot;none&quot;&gt;&gt;
	@@.right;&lt;&lt;jpg &quot;Brian/Events&quot; &quot;brian_enslaved_1&quot;&gt;&gt;@@
	As you enter the room, $Brian.callname quickly drops to her knees. She is wearing a sexy set of lingerie, just as you ordered.
	&lt;&lt;msg $Brian &quot;Have you come to punish me, &lt;&lt;yourname $Brian&gt;&gt;?&quot;&gt;&gt;
	Her voice is trembling with need and lust.
	&lt;&lt;msg $You &quot;Yes.&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;What will you do to me?&quot;&gt;&gt;
	She sounds scared and aroused at the same time.
	&lt;&lt;msg $You &quot;Maybe I&#39;ll spank you...&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;Ohh...&quot;&gt;&gt;
	She wiggles her butt at you.
	&lt;&lt;thought &quot;She is reacting to my words. Is it subconciously? Or is she doing it on purpose?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Maybe I&#39;ll let you lick my shoes clean...&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;Mhmm...&quot;&gt;&gt;
	She licks her lips.
	&lt;&lt;msg $You &quot;Or maybe I&#39;ll stick something up your ass!&quot;&gt;&gt;
	&lt;&lt;msg $Brian &quot;That sounds horrible...&quot;&gt;&gt;
	The words should sound disgusted, but from the panting and moaning it is very clear that she is getting off on imagining the punishments you might bestow on her.
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;










</tw-passagedata><tw-passagedata pid="75" name="Brian enslave widgets" tags="widget nobr" position="2000,375" size="100,100">/*===================================================================*/
/*=============================ENCHANTMENT===========================*/
/*===================================================================*/
&lt;&lt;widget brianenslavesub&gt;&gt;
&lt;&lt;msg $You &quot;$Brian.callname, you have always been afraid of me. That&#39;s why you bullied me in school. To keep me weak, because you knew that I would be much stronger and more powerful than you if I ever realized how strong I could be. As you clearly see now, it didn&#39;t work. I&#39;m far stronger and more powerful then you will ever be. You are afraid of me. You fear me and you feel the need to placate me, to do everything you can to escape my wrath. You will therefore be very submissive to my ideas, to my demands. You will do whatever you can to stay on my good side, to keep me from becoming angry and punishing you. You might not like what I tell you to do, but will do it nevertheless, because you know that it is your only chance!&quot;&gt;&gt;
&lt;&lt;set $Brian.facepic to &quot;img/Brian/face/male_submissive.jpg&quot;&gt;&gt;&lt;&lt;set $Brian.callsyou to $You.callname&gt;&gt;&lt;&lt;set $Brian.status to 1&gt;&gt;&lt;&lt;set $quests[4].progress++&gt;&gt;&lt;&lt;set $Brian.event to &quot;briansubmits&quot;&gt;&gt;
&lt;&lt;set $briangallery.pictures.pushUnique(&quot;img/Brian/brian_submissive.jpg&quot;)&gt;&gt;
@@.choice;
&lt;&lt;link &quot;Let the mana work&quot; &quot;Streets&quot;&gt;&gt;&lt;&lt;set $location to $main_street&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget brianenslavehorny&gt;&gt;
&lt;&lt;msg $You &quot;$Brian.callname, not only are you afraid of me and submissive to me, but to your horror you realized that the fear, submission and humiliation turn you on massively. You are not able to withstand the pleasure. You desire to be dominated by me, you crave to be humiliated by me. You need to be punished by me. You will be extremely submissive to me and accept, even welcome, any punishment I chose to heap on you, no matter how humiliating, how painful and how depraved they are. The more you hate what I make you do or do to you, the more it will arouse you and turn you on even more, which will increase your desire for total submission. In fact you will only be able to have the release of an orgasm when being humiliated or dominated by me.&quot;&gt;&gt; 
&lt;&lt;set $Brian.facepic to &quot;img/Brian/face/male_horny.jpg&quot;&gt;&gt;&lt;&lt;set $Brian.callsyou to &quot;Sir&quot;&gt;&gt;&lt;&lt;set $Brian.status to 2&gt;&gt;&lt;&lt;set $quests[4].progress++&gt;&gt;&lt;&lt;set $briangallery.pictures.pushUnique(&quot;img/Brian/brian_male_horny.jpg&quot;)&gt;&gt;&lt;&lt;set $Brian.event to &quot;brianhorny&quot;&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget brianenslaveslave&gt;&gt;
&lt;&lt;msg $You &quot;$Brian.callname, you decided to leave everything you were behind and embrace the painslut lifestyle. You will be my willing, devoted, submissive slave, ready to do anything to please me, hoping I will punish or humiliate you more, letting you have the release you so desperately need. You are always horny, always wet, you can only find the orgasm you so desperately need through serving me, humiliating yourself or being humiliated by me, being punished by me. You will always think about new and creative ways of humiliation and you will suggest these to me. You will never intentionally misbehave or anger me to get punishment.&quot;&gt;&gt;
&lt;&lt;set $Brian.facepic to &quot;img/Brian/face/female_slave.jpg&quot;&gt;&gt;&lt;&lt;set $Brian.callsyou to &quot;Master&quot;&gt;&gt;&lt;&lt;set $Brian.status to 4&gt;&gt;&lt;&lt;set $quests[4].progress++&gt;&gt;&lt;&lt;set $briangallery.pictures.pushUnique(&quot;img/Brian/brian_slave.jpg&quot;)&gt;&gt;&lt;&lt;set $Brian.event to &quot;brianslave&quot;&gt;&gt;
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="76" name="Lisa talk widgets" tags="widget nobr" position="2125,125" size="100,100">&lt;&lt;widget talktolisa&gt;&gt;
&lt;div id=&quot;talkouter&quot;&gt;
@@.talklink;
	&lt;&lt;link &quot;What do you think about me?&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;lisaaboutme&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Tell me about yourself.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;lisaaboutyou&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;if $Lisa.stayathome is false&gt;&gt;&lt;&lt;link &quot;You should stay at home.&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;lisastayathome&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;else&gt;&gt;&lt;&lt;link &quot;You can go out again&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;lisastayathome&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &quot;You should call me...&quot;&gt;&gt;&lt;&lt;replace &quot;#talkouter&quot;&gt;&gt;&lt;&lt;callme $Lisa&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Nothing&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
@@
&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;
/*=======================================================*/
&lt;&lt;widget lisastayathome&gt;&gt;
&lt;&lt;if $Lisa.stayathome is false&gt;&gt;
	&lt;&lt;msg $You &quot;You should stay at home. It is safer there.&quot;&gt;&gt;
	&lt;&lt;switch $Lisa.status&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Lisa &quot;What kind of stupid, sexist bullshit is this? Don&#39;t make me regret talking to you again.&quot;&gt;&gt;
	&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Lisa &quot;Stop being like that. You fuck like a god, but don&#39;t think you can order me around like some stupid bimbo.&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Lisa &quot;&lt;&lt;lisabimbotalk &#39;If you say so.&#39; &#39;$Lisa.callname loves to be, like, safe and stuff.&#39;&gt;&gt;&quot;&gt;&gt;
	&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Lisa &quot;$Lisa.callname will, like, stay at home and stuff.&quot;&gt;&gt;
	&lt;&lt;default&gt;&gt;ERROR IN STATUS COMPARISON (LISA STAY AT HOME DIALOG)
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;if $Lisa.status gt 2&gt;&gt;&lt;&lt;set $Lisa.stayathome to true&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;msg $You &quot;You should go out again.&quot;&gt;&gt;
	&lt;&lt;switch $Lisa.status&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;msg $Lisa &quot;&lt;&lt;lisabimbotalk &#39;Maybe I will do that. If I want to.&#39; &#39;$Lisa.callname will totally do that. Go out and have tons of funsies.&#39;&gt;&gt;&quot;&gt;&gt;
	&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Lisa &quot;That&#39;s, like, a really great idea.&quot;&gt;&gt;
	&lt;&lt;default&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;set $Lisa.stayathome to false&gt;&gt;
&lt;&lt;/if&gt;&gt;
@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted from you&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktolisa&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*=======================================================*/
&lt;&lt;widget lisaaboutme&gt;&gt;
	&lt;&lt;msg $You &quot;What do you think about me?&quot;&gt;&gt;
	NOTHING WRITTEN YET
	&lt;&lt;switch $Lisa.status&gt;&gt;
	&lt;&lt;case 1&gt;&gt;
	&lt;&lt;case 2&gt;&gt;
	&lt;&lt;case 3&gt;&gt;
	&lt;&lt;case 4&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted from you&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktolisa&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*=======================================================*/
&lt;&lt;widget lisaaboutyou&gt;&gt;
	&lt;&lt;msg $You &quot;What can you tell me about yourself?&quot;&gt;&gt;
	NOTHING WRITTEN YET
	&lt;&lt;switch $Lisa.status&gt;&gt;
	&lt;&lt;case 1&gt;&gt;
	&lt;&lt;case 2&gt;&gt;
	&lt;&lt;case 3&gt;&gt;
	&lt;&lt;case 4&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;That&#39;s all I wanted from you&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktolisa&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="77" name="Lisa event widgets" tags="widget nobr" position="2125,250" size="100,100">&lt;&lt;widget lisadepressed&gt;&gt;
	&lt;&lt;set $Lisa.event to &quot;none&quot;&gt;&gt;&lt;&lt;set $quests[5].progress++&gt;&gt;
	@@.right;[img[img/Lisa/Events/depressed_1.jpg]]@@
	As $Lisa.callname opens the door you can clearly see that she has been crying.
	&lt;&lt;msg $Lisa &quot;What do you want?&quot;&gt;&gt;
	She looks upset.
	&lt;&lt;msg $You &quot;I wanted to talk to you.&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;About what?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;It wasn&#39;t that important.&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;What do you want then?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Believe it or not, I came here to make up with you.&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;You did?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Yes. But now it seems you might want some alone time.&quot;&gt;&gt;
	You turn around to leave.
	&lt;&lt;msg $Lisa &quot;Wait...&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;What?&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;I could really need someone to talk to right now.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;I have a little time.&quot;&gt;&gt;
	She takes out a tissue and whipes away her tears.
	&lt;&lt;msg $Lisa &quot;Come in.&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Enter&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;lisadepressed_2&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisadepressed_2&gt;&gt;
	She leads you into her livingroom and gestures you to sit down.
	&lt;&lt;msg $You &quot;So, what happened?&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;Brian broke up with me!&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Huh?&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;He didn&#39;t even talk to me. He just texted.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;That&#39;s tough!&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;He is such an asshole.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;You don&#39;t say...&quot;&gt;&gt;
	She looks up at you, with an upset look on her face. 
	&lt;&lt;msg $Lisa &quot;...&quot;&gt;&gt;
	Then she begins to laugh desperately.
	&lt;&lt;msg $Lisa &quot;Hahaha.&quot;&gt;&gt;
	She shakes with laughter.
	&lt;&lt;msg $Lisa &quot;Stop that.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Or what? Will you fall for me again?&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;No! And if you want us to have some kind of friendly relationship you better stop thinking about that.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;It was just a joke.&quot;&gt;&gt;
	She looks very annoyed.
	&lt;&lt;msg $Lisa &quot;Yeah! Let&#39;s leave it at that.&quot;&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisaconvinved&gt;&gt;
	$Lisa.callname opens the door to her apartment. She has a look of dismay on her face.
	&lt;&lt;msg $Lisa &quot;What do you want?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;I want to talk with you.&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;I don&#39;t know why I do this, but I promised to at least give you a chance.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Thank you.&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;Don&#39;t make me regret that decision.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;I won&#39;t.&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;...&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;Come in.&quot;&gt;&gt;
&lt;&lt;continueon&gt;&gt;
&lt;&lt;set $Lisa.event to &quot;none&quot;&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisasubmissivefirst&gt;&gt;
	@@.right;[img[img/Lisa/Events/lisasubmissivefirst_1.jpg]]@@
	$Lisa.callname looks at you after opening the door. She has a much softer expression than before.
	&lt;&lt;msg $Lisa &quot;&lt;&lt;yourname $Lisa&gt;&gt;, come in.&quot;&gt;&gt;
	She turns around and lets you follow inside her apartment.
	&lt;&lt;msg $Lisa &quot;I wanted to talk with you for some time now.&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Follow her&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;lisasubmissivefirst_2&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;/widget&gt;&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisasubmissivefirst_2&gt;&gt;
	@@.right;[img[img/Lisa/Events/lisasubmissivefirst_2.jpg]]@@
	She sits down on the chair.
	&lt;&lt;msg $Lisa &quot;I&#39;ve been a little harsh on you.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;You think so?&quot;&gt;&gt;
	She smiles at your sarcasm.
	&lt;&lt;msg $Lisa &quot;Yes, I actually do. And I&#39;m sorry.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Well, thanks, I guess!&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;Can you forgive me?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;I don&#39;t know. It was pretty hard on me.&quot;&gt;&gt;
	She opens her legs slightly, showing you a glimpse of her panties. She smiles and licks her lips seductively.
	&lt;&lt;msg $Lisa &quot;Please?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Are you implying what I think you are implying?&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;If you think I of fucking, then yes.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;You want to fuck? I thought we were through?&quot;&gt;&gt;
	She laughs loudly.
	&lt;&lt;msg $Lisa &quot;Come on! One last time! Just think of it as an apology.&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;In that case...&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $fucked to &quot;Lisa&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisahornyfirst&gt;&gt;
	&lt;&lt;set $Lisa.event to &quot;none&quot;&gt;&gt;
	@@.right;[img[img/Lisa/Events/lisahornyfirst_1.jpg]]@@
	$Lisa.callname opens the door ans smiles at you.
	&lt;&lt;msg $Lisa &quot;Come in!&quot;&gt;&gt;
	As soon as you are inside, she strikes a pose.
	&lt;&lt;msg $Lisa &quot;I really, really liked what we did last time.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;I did as well. It was a nice way of finally putting an end to the whole relationship debacle.&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;Yeah...&quot;&gt;&gt;
	She sighs wistfully.
	&lt;&lt;msg $Lisa &quot;Do you ...&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Huh?&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;lisahornyfirst_2&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisahornyfirst_2&gt;&gt;
	@@.right;[img[img/Lisa/Events/lisahornyfirst_2.jpg]]@@
	&lt;&lt;msg $Lisa &quot;Do you think...&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;What?&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;Do you think we could repeat it?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Repeat what?&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;Don&#39;t be dense. I&#39;m talking about fucking!&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Are you sure?&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;lisahornyfirst_3&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisahornyfirst_3&gt;&gt;
	@@.right;[img[img/Lisa/Events/lisahornyfirst_3.jpg]]@@
	She quickly shrugs off her clothes until she stands before you in her underwear.
	&lt;&lt;msg $Lisa &quot;Does this answer your question?&quot;&gt;&gt;
	She has a hungry look in her eyes.
	&lt;&lt;msg $You &quot;Yeah! But didn&#39;t you say it was the last time?&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;Does it matter?&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Not if you&#39;re sure.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;lisahornyfirst_4&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisahornyfirst_4&gt;&gt;
	@@.right;[img[img/Lisa/Events/lisahornyfirst_4.jpg]]@@
	She almost rips off her underwear and climbs on the table.&lt;br&gt;
	She is already wet and ready.
	&lt;&lt;msg $Lisa &quot;Come get it, big boy!&quot;&gt;&gt;
	@@.choice;
		&lt;&lt;link &quot;Fuck her&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $fucked to &quot;Lisa&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Not yet&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisaenslavefirst&gt;&gt;
	@@.right;[img[img/Lisa/Events/lisaenslavefirst_1.jpg]]@@
	$Lisa.callname is chewing gum loudly.
	&lt;&lt;msg $Lisa &quot;Oh goody, you are, like, here. $Lisa.callname despere... desp... really needs to fuck!&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Are you sure?&quot;&gt;&gt;
	She blows a bubble and pops it.
	&lt;&lt;msg $Lisa &quot;Sure? $Lisa.callname is super duper sure! Please fuck her! Pretty please!&quot;&gt;&gt;
	@@.talklink;&lt;&lt;link &quot;Fuck you?&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;lisaenslavefirst_2&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisaenslavefirst_2&gt;&gt;
	[img[img/Lisa/Events/lisaenslavefirst_2.jpg]]
	She kneels on her futon and wiggles her ass in the air. To your surprise she has put a butt plug in it.
	&lt;&lt;msg $Lisa &quot;Pretty please? With a cherry on top!&quot;&gt;&gt;
	@@.choice;
		&lt;&lt;link &quot;Fuck her&quot; &quot;sex&quot;&gt;&gt;&lt;&lt;set $fucked to &quot;Lisa&quot;&gt;&gt;&lt;&lt;set $sidemenu to false&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Maybe later&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
	
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="78" name="Lisa enslave widgets" tags="widget nobr" position="2125,375" size="100,100">&lt;&lt;widget lisaenslavesub&gt;&gt; 
	&lt;&lt;msg $You &quot;$Lisa.callname, you feel bad for having treated me like you did. You want to make up for it. To do this, you&#39;ll offer me to have sex with me one last time. You actually feel the need to to do this, because you&#39;re sure it will give you and me closure and allow a free, new start. But once we have sex you will have the strongest, most powerful orgasm you&#39;ve ever had. It will be so strong, it will leave you in a pink haze of happiness and contentment, that will slowly fade, but never completely disapear. You&#39;ll feel compelled to have sex with me again and again, to feel that happy and carefree again.&quot;&gt;&gt;
	&lt;&lt;set $Lisa.status to 2&gt;&gt;&lt;&lt;set $Lisa.callsyou to $You.callname&gt;&gt;&lt;&lt;set $Lisa.facepic to &quot;img/Lisa/face/submissive.jpg&quot;&gt;&gt;&lt;&lt;set $quests[5].progress++&gt;&gt;
	&lt;&lt;set $lisagallery.pictures.pushUnique(&quot;img/Lisa/lisa_submissive.jpg&quot;)&gt;&gt;&lt;&lt;set $Lisa.event to &quot;lisasubmissivefirst&quot;&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget lisaenslavehorny&gt;&gt;
	&lt;&lt;msg $You &quot;$Lisa.callname, the orgasm you had with me changed something in you. From now on, with every orgasm you have, you&#39;ll feel dumber, hornier and happier. Decisions you once made easily will feel more and more difficult and it will feel natural to let me make these decisions for you. And since you also get hornier and hornier and the sex makes you feel ever more happy it will come naturally to you to have more sex with me. This will in turn increase the horniness, the happyness and the dumbness you feel. The hornier you get, the dumber you become and the more you love me.&quot;&gt;&gt;
	&lt;&lt;set $Lisa.status to 3&gt;&gt;&lt;&lt;set $Lisa.facepic to &quot;img/Lisa/face/horny.jpg&quot;&gt;&gt;&lt;&lt;set $lisagallery.pictures.pushUnique(&quot;img/Lisa/lisa_horny.jpg&quot;)&gt;&gt;&lt;&lt;set $quests[5].progress++&gt;&gt;&lt;&lt;set $Lisa.bj to false&gt;&gt;&lt;&lt;set $Lisa.fuck to false&gt;&gt;&lt;&lt;set $Lisa.anal to false&gt;&gt;&lt;&lt;set $Lisa.event to &quot;lisahornyfirst&quot;&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget lisaenslaveslave&gt;&gt;
	&lt;&lt;code &#39;_txtbxls&#39;&gt;&gt;&lt;&lt;textbox &quot;$Lisa.callname&quot; &quot;Lizzy&quot;&gt;&gt;&lt;&lt;/code&gt;&gt;
	&lt;&lt;msg $You &quot;You are no longer your old self, you are now &lt;&lt;wiki &#39;_txtbxls&#39;&gt;&gt; the ditzy, dumb, slutty bimbo. The only thoughts in your mind are about fashion, make up and how to look even cuter and prettier for me, because you love me that much. And even though you are a slut and you love flirting and teasing, you&#39;ll never have sex with anyone other than me, except when I tell you to. You&#39;ll dedicate all your energy to please me. You are able to play the old Lisa instinctively for a short amount of time to keep up appearances, but you always know that it is just make pretend and you don&#39;t actually understand what you are saying.&quot;&gt;&gt;
	&lt;&lt;set $Lisa.status to 4&gt;&gt;&lt;&lt;set $Lisa.facepic to &quot;img/Lisa/face/slave.jpg&quot;&gt;&gt;&lt;&lt;set $lisagallery.pictures.pushUnique(&quot;img/Lisa/lisa_slave.jpg&quot;)&gt;&gt;&lt;&lt;set $quests[5].progress++&gt;&gt;&lt;&lt;set $Lisa.bj to false&gt;&gt;&lt;&lt;set $Lisa.fuck to false&gt;&gt;&lt;&lt;set $Lisa.anal to false&gt;&gt;&lt;&lt;set $Lisa.event to &quot;lisaenslavefirst&quot;&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="79" name="Brians home widgets" tags="widget nobr" position="625,750" size="100,100">&lt;&lt;widget brians_home&gt;&gt;
&lt;&lt;if $Brian.location isnot &quot;Brians home&quot;&gt;&gt;
	&lt;&lt;jpg &quot;locations&quot; &quot;brian_livingroom&quot;&gt;&gt;&lt;br&gt;
	&lt;&lt;=$Brian.callname&gt;&gt;s home is full of typical jock equipment. There are sports paraphernalia, trophies and home gym equipment. 
&lt;&lt;else&gt;&gt;
	&lt;&lt;switch $Brian.event&gt;&gt;
		&lt;&lt;case &quot;briansubmits&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_submits&gt;&gt;&lt;&lt;/dialog&gt;&gt; 
		&lt;&lt;case &quot;brianhorny&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_horny&gt;&gt;&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;case &quot;briantransformed&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_transformed&gt;&gt;&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;case &quot;brianslave&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_slave&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;locpic $Brian&gt;&gt;
	&lt;&lt;switch $Brian.status&gt;&gt;
	&lt;&lt;case 0&gt;&gt;&lt;&lt;msg $Brian &quot;Get the fuck out, &lt;&lt;yourname $Brian&gt;&gt;&quot;&gt;&gt;
	&lt;&lt;case 1&gt;&gt;He looks nervous. &lt;&lt;msg $Brian &quot;Oh hey ... &lt;&lt;yourname $Brian&gt;&gt;. Do you ...&quot;&gt;&gt;He gulps.&lt;&lt;msg $Brian &quot;Do you want to come in?&quot;&gt;&gt;
	&lt;&lt;case 2&gt;&gt;&lt;&lt;=$Brian.callname&gt;&gt; doesn&#39;t look at you. He just stares on the floor trembling. He presses his legs together in the desperate attempt to hide his boner.
	&lt;&lt;case 3&gt;&gt;&lt;&lt;=$Brian.callname&gt;&gt; looks at you hopefully. &lt;&lt;msg $Brian &quot;Have you come to punish me again?&quot;&gt;&gt;
	&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Brian &quot;&lt;&lt;yourname $Brian&gt;&gt;! I am ready to be punished.&quot;&gt;&gt; She lowers her head in submission.
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Brian.status gt 0 and $Brian.location is &quot;Brians home&quot;&gt;&gt;@@.choice;&lt;&lt;link &#96;&quot;Punish &quot;+$Brian.callname&#96;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;brianpunish&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*============================================================*/
&lt;&lt;widget briannothome&gt;&gt;
	&lt;&lt;jpg &quot;random&quot; &quot;outdoor&quot;&gt;&gt;&lt;br&gt;
	$Brian.callname is not at home.
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*============================================================*/
&lt;&lt;widget brianpunish&gt;&gt;
	&lt;&lt;msg $You &quot;I&#39;m gonna punish you!&quot;&gt;&gt;
	&lt;&lt;switch $Brian.status&gt;&gt;
	&lt;&lt;case 1&gt;&gt;&lt;&lt;=$Brian.callname&gt;&gt; flinches and looks at you pleadingly.&lt;&lt;msg $Brian &quot;I know I deserve it for treating you like I did, but please ...&quot;&gt;&gt;&lt;&lt;msg $You &quot;Stop whining!&quot;&gt;&gt;
	&lt;&lt;case 2 3&gt;&gt;&lt;&lt;hisher $Brian 0&gt;&gt; breathing quickens and a mixture of fear and lust creaps into &lt;&lt;hisher $Brian 1&gt;&gt; eyes. &lt;&lt;msg $Brian &quot;yes ... I deserve it! Punish me!&quot;&gt;&gt;
	&lt;&lt;case 4&gt;&gt;&lt;&lt;msg $Brian &quot;As you wish, &lt;&lt;yourname $Brian&gt;&gt;!&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;	
	@@.choice;
		&lt;&lt;link &#96;&quot;Slap &quot;+$Brian.callname&#96;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;brianslap&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;if $Brian.gender is &quot;male&quot;&gt;&gt;&lt;&lt;link &quot;Kick Brian in the balls&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;briankick&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;else&gt;&gt;&lt;&lt;link &#96;&quot;Slap &quot;+$Brian.callname +&quot;s pussy&quot;&#96;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;brianpussyslap&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;link &#96;&quot;Insult &quot;+$Brian.callname&#96;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;brianinsult&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
	@@.talklink;
		&lt;&lt;link &quot;Never mind&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;
/*============================================================*/
&lt;&lt;widget brianslap&gt;&gt;	
	&lt;&lt;msg $You &quot;Hold still!&quot;&gt;&gt;
	You rear your hand back and slap $Brian.callname hard across the face!
	&lt;br&gt;&lt;&lt;if $Brian.gender is &quot;male&quot;&gt;&gt;&lt;&lt;mp4 &quot;Brian&quot; &quot;faceslap&quot;&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;mp4 &quot;Brian&quot; &quot;faceslap_female&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;br&gt;
	&lt;&lt;switch $Brian.status&gt;&gt;
	&lt;&lt;case 1&gt;&gt;His hands shoot up to his face to cover the reddening area. &lt;&lt;msg $Brian &quot;Ouch!&quot;&gt;&gt; His eyes tear up from the stinging pain.
	&lt;&lt;case 2&gt;&gt;Although he tries to suppress it a moan escapes his mouth as he stumbles backwards and leans against the wall. 
		&lt;&lt;msg $You &quot;You masochistic asshole. You enjoyed that, didn&#39;t you?&quot;&gt;&gt;
		&lt;&lt;msg $Brian &quot;...no...&quot;&gt;&gt;
		You slap him across the face again. He moans again as a red handprint blooms on his face.
		&lt;&lt;msg $You &quot;Be honest!&quot;&gt;&gt;
		He shivers with humiliation and arousal.
		&lt;&lt;msg $Brian &quot;...yes...&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Then thank me for slapping you!&quot;&gt;&gt;
		&lt;&lt;msg $Brian &quot;...thank you for slapping me, &lt;&lt;yourname $Brian&gt;&gt;.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;God! You are pathetic!&quot;&gt;&gt;
	&lt;&lt;case 3&gt;&gt;&lt;&lt;=$Brian.callname&gt;&gt; looks up to you, tears welling up in her lust clouded eyes.
		&lt;&lt;msg $Brian &quot;Thank you.&quot;&gt;&gt;
		She whispers.
		&lt;&lt;msg $You &quot;Thank you... what?&quot;&gt;&gt;
		&lt;&lt;msg $Brian &quot;Thank you,&lt;&lt;yourname $Brian&gt;&gt;!&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Very well!&quot;&gt;&gt;
	&lt;&lt;case 4&gt;&gt;
		&lt;&lt;msg $Brian &quot;Thank you,&lt;&lt;yourname $Brian&gt;&gt;!&quot;&gt;&gt;
		She chews her lower lip as if she wanted to say something.
		&lt;&lt;msg $You &quot;What is it?&quot;&gt;&gt;
		&lt;&lt;msg $Brian &quot;May I have another one, &lt;&lt;yourname $Brian&gt;&gt;?&quot;&gt;&gt;
		&lt;&lt;mp4 &quot;Brian&quot; &quot;faceslap_female&quot;&gt;&gt;
		&lt;&lt;msg $Brian &quot;Thank you,&lt;&lt;yourname $Brian&gt;&gt;!&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;To think that you once bullied me...&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Punish him more&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;brianpunish&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Enough&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*============================================================*/
&lt;&lt;widget briankick&gt;&gt;
	&lt;&lt;msg $You &quot;Get ready!&quot;&gt;&gt;
	You take aim and kick $Brian.callname hard between the legs!
	&lt;br&gt;&lt;&lt;mp4 &quot;Brian&quot; &quot;ballkick&quot;&gt;&gt;&lt;br&gt;
	&lt;&lt;msg $You &quot;That was for fucking my girlfriend.&quot;&gt;&gt;
	&lt;&lt;switch $Brian.status&gt;&gt;
	&lt;&lt;case 1&gt;&gt;He cries out in pain and crumbles to the floor. He sobs in pain as you look down on him and snicker to yourself.
		&lt;&lt;thought &quot;It feels really empowering to see him like that. Payback really is sweet!&quot;&gt;&gt;
	&lt;&lt;case 2&gt;&gt;&lt;&lt;=$Brian.callname&gt;&gt; collapses to the floor moaning with pain and pleasure.
		&lt;&lt;msg $You &quot;It sounds like you really enjoyed that. Do you want another one?&quot;&gt;&gt;
		He looks at you through teary eyes and nods weakly.
		&lt;&lt;msg $You &quot;Speak up, asshole!&quot;&gt;&gt;
		&lt;&lt;msg $Brian &quot;...yes...&quot;&gt;&gt;
		You laugh at him.
		&lt;&lt;msg $You &quot;Beg for it!&quot;&gt;&gt;
		&lt;&lt;msg $Brian &quot;Please, &lt;&lt;yourname $Brian&gt;&gt;. Please kick me again!&quot;&gt;&gt;
		&lt;br&gt;&lt;&lt;mp4 &quot;Brian&quot; &quot;ballkick&quot;&gt;&gt;&lt;br&gt;
		He cries again, and writhes on the floor.
	&lt;&lt;/switch&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Punish him more&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;brianpunish&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Enough&quot;&gt;&gt;&lt;&lt;set Dialog.close&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*============================================================*/
&lt;&lt;widget brianpussyslap&gt;&gt;
	You push her down and give her already glistening pussy a quick, hard slap.
	&lt;br&gt;&lt;&lt;mp4 &quot;Brian&quot; &quot;pussyslap&quot;&gt;&gt;&lt;br&gt;
	&lt;&lt;switch $Brian.status&gt;&gt;
	&lt;&lt;case 3&gt;&gt;
		&lt;&lt;msg $Brian &quot;Ouch!&quot;&gt;&gt;
		She cries and tears begin to well up in her eyes.
		&lt;&lt;msg $You &quot;Prepare for another!&quot;&gt;&gt;
		She quivers in fear and clothes her eyes. Her legs shake, but she doesn&#39;t close them.&lt;br&gt;
		You take aim and let her wait. She begins to whimper in anticipation, her muscles tensed. You wait a little longer. The moment she relaxes a little you strike hard.
		&lt;br&gt;&lt;&lt;mp4 &quot;Brian&quot; &quot;pussyslap&quot;&gt;&gt;&lt;br&gt;
		Her whole body shakes as she howls in pain and pleasure. You&#39;re pretty sure she just had an orgasm.
	&lt;&lt;case 4&gt;&gt;
		You just have to lift your hand a little and she quickly gets into position.
		&lt;&lt;msg $Brian &quot;Please punish your little painslut, &lt;&lt;yourname $Brian&gt;&gt;!&quot;&gt;&gt;
		&lt;br&gt;&lt;&lt;mp4 &quot;Brian&quot; &quot;pussyslap&quot;&gt;&gt;&lt;br&gt;
		&lt;&lt;msg $You &quot;Take that!&quot;&gt;&gt;
		She howls in pleasure.
		&lt;&lt;msg $Brian &quot;Thank you!&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;	
	@@.talklink;&lt;&lt;link &quot;More?&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;brianpussyslap_1&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget brianpussyslap_1&gt;&gt;
	&lt;&lt;msg $Brian &quot;Yes please, &lt;&lt;yourname $Brian&gt;&gt;. I deserve more punishment, &lt;&lt;yourname $Brian&gt;&gt;.&quot;&gt;&gt;
	&lt;br&gt;&lt;&lt;mp4 &quot;Brian&quot; &quot;pussyslap&quot;&gt;&gt;&lt;br&gt;
	&lt;&lt;msg $Brian &quot;More? Please?&quot;&gt;&gt;
	She looks at you, with desire and fear burning in her eyes.
	@@.choice;&lt;&lt;link &quot;Punish her more&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;brianpunish&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Enough&quot;&gt;&gt;&lt;&lt;set Dialog.close&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*============================================================*/
&lt;&lt;widget brianinsult&gt;&gt;
	&lt;&lt;set $Brian.insult to $insultadjective.random() +&quot; &quot;+ $insultnoun.random()&gt;&gt;
	&lt;&lt;msg $You &quot;&lt;&lt;= $Brian.callname&gt;&gt;, you &lt;&lt;= $Brian.insult&gt;&gt;!&quot;&gt;&gt;
	&lt;&lt;switch $Brian.status&gt;&gt;
	&lt;&lt;case 1&gt;&gt;He looks down as your words hit him like a punch.&lt;&lt;msg $You &quot;Repeat that!&quot;&gt;&gt;&lt;&lt;msg $Brian &quot;Yes, &lt;&lt;yourname $Brian&gt;&gt;. I&#39;m a &lt;&lt;= $Brian.insult&gt;&gt;!&quot;&gt;&gt; You laugh, while he hangs his head in shame.
	&lt;&lt;case 2 3&gt;&gt;
		&lt;&lt;hisher $Brian 1&gt;&gt; breathing quickens and &lt;&lt;heshe $Brian 0&gt;&gt; begins to blush. &lt;&lt;msg $You &quot;And you&#39;re getting off on this as well, you pervert!&quot;&gt;&gt;&lt;&lt;msg $Brian &quot;...please!&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Please what?&quot;&gt;&gt;&lt;&lt;msg $Brian &quot;More. Please insult me more, &lt;&lt;yourname $Brian&gt;&gt;!&quot;&gt;&gt;You chuckle.&lt;&lt;msg $You &quot;You &lt;&lt;= $Brian.insult&gt;&gt;!&quot;&gt;&gt;&lt;&lt;heshe $Brian 0&gt;&gt; moans.
		&lt;&lt;msg $You &quot;You &lt;&lt;= $Brian.insult&gt;&gt;!&quot;&gt;&gt;&lt;&lt;heshe $Brian 0&gt;&gt; moans again, louder.&lt;&lt;msg $You &quot;What are you?&quot;&gt;&gt;&lt;&lt;msg $Brian &quot;A &lt;&lt;= $Brian.insult&gt;&gt;! I&#39;m a &lt;&lt;= $Brian.insult&gt;&gt;!&quot;&gt;&gt; 
		You laugh as your former bully debases &lt;&lt;himselfherself $Brian 1&gt;&gt; while getting off.
	&lt;&lt;case 4&gt;&gt;
		She lowers her head, but you see her smiling contently and nodding slightly.
		&lt;&lt;msg $You &quot;Do you have anything to say?&quot;&gt;&gt;
		&lt;&lt;msg $Brian &quot;Yes, &lt;&lt;yourname $Brian&gt;&gt;.&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;What?&quot;&gt;&gt;
		&lt;&lt;msg $Brian &quot;You are right, &lt;&lt;yourname $Brian&gt;&gt;. I&#39;m a &lt;&lt;=$Brian.insult&gt;&gt;!&quot;&gt;&gt;
		&lt;&lt;msg $You &quot;Hahahaha!&quot;&gt;&gt;
		You laugh, while &lt;&lt;=$Brian.callname&gt;&gt; moans from the humiliating pleasure.
	&lt;&lt;/switch&gt;&gt;
	@@.choice;&lt;&lt;link &quot;More Punishment&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;brianpunish&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &quot;Enough&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*============================================================*/























</tw-passagedata><tw-passagedata pid="80" name="Time widgets" tags="widget nobr" position="2850,100" size="100,100">/*==================================================================*/
/*Resets all the npcs cooldown stats, resets your stats, resets time and counts days, Starts the dialog for going to sleep and transitions it into the dayreview*/
&lt;&lt;widget daybreak&gt;&gt;
	&lt;&lt;set _help1 to []&gt;&gt; /*This for loop choses a random event out of the events-array for each character each day.*/
	&lt;&lt;for _i to 0; _i lt $npcs.length; _i++&gt;&gt;
		&lt;&lt;set $npcs[_i].eventcd to 0&gt;&gt;
		&lt;&lt;set _help1 to $npcs[_i].events&gt;&gt;
		&lt;&lt;set _ran to random (0, ($npcs[_i].events.length -1))&gt;&gt;
		&lt;&lt;set $npcs[_i].event to _help1[_ran]&gt;&gt; 
		&lt;&lt;set $npcs[_i].movecd to 0&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;&lt;set $sidemenu to true&gt;&gt;
	&lt;&lt;set $You.mana to $You.maxmana&gt;&gt;&lt;&lt;set $You.fatigue to 0&gt;&gt;&lt;&lt;set $You.arousal to 0&gt;&gt;&lt;&lt;set $fridgeraided to 0&gt;&gt;
	&lt;&lt;set $fridge.raidedtoday to 0&gt;&gt;
	&lt;&lt;set $hour to 8&gt;&gt;&lt;&lt;set $minutes to 0&gt;&gt;&lt;&lt;set $Brian.drunk to 0&gt;&gt;
	&lt;&lt;if $daycount gt 30&gt;&gt;&lt;&lt;set $month++&gt;&gt;&lt;&lt;set $daycount to 0&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set $daycount++&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $day gt 6&gt;&gt;&lt;&lt;set $day to 0&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set $day ++&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $month gt 12&gt;&gt;&lt;&lt;set $month to 0&gt;&gt;&lt;&lt;set $year++&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;dialog &#39;&#39; true&gt;&gt;
	&lt;&lt;mp4 &quot;random&quot; &quot;night&quot;&gt;&gt;
	&lt;br&gt;Night has fallen. You got to tired and went to bed. @@.choice;&lt;&lt;link &quot;Go home&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;set $location to $your_bedroom&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;dailyreview&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@&lt;&lt;/dialog&gt;&gt; 
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
/*Lists all the things that were relevant the day before. Only really interesting once you earn money via your slaves.*/
&lt;&lt;widget dailyreview&gt;&gt;
&lt;&lt;mp4 &quot;random&quot; &quot;sunrise&quot;&gt;&gt;&lt;br&gt;
You feel refreshed and rested.&lt;br&gt;
&lt;div id=&quot;dailythoughts&quot;&gt;
	&lt;&lt;dailythoughts&gt;&gt;
&lt;/div&gt;
@@#dayreviewstreaming;
&lt;&lt;for _i to 0; _i lt $npcs.length; _i++&gt;&gt; /*This loop checks if an npcs is streaming and if yes adds the money you get from them and shows it with a picture of the npc.*/ 
	&lt;&lt;if $npcs[_i].streaming is true&gt;&gt;
		&lt;&lt;set _image to $npcs[_i].facepic&gt;&gt;
		&lt;&lt;set _name to $npcs[_i].callname&gt;&gt;
		&lt;&lt;set _money to $npcs[_i].streamingmod*15&gt;&gt;
		&lt;&lt;set $You.money += _money&gt;&gt;		
		&lt;&lt;capture _money, _image, _name&gt;&gt;@@.border;[img[_image]] _name earned _money&lt;&lt;=&quot;$&quot;&gt;&gt; for you with her streaming.@@&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/if&gt;&gt;	
&lt;&lt;/for&gt;&gt;
@@
@@.choice;&lt;&lt;link &quot;Continue&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;ui update&gt;&gt;&lt;&lt;set Save.autosave.save()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
&lt;&lt;widget dailythoughts&gt;&gt;
	@@.rightlink;&lt;&lt;link &quot;Dismiss your thoughts for the day.&quot;&gt;&gt;&lt;&lt;replace &quot;#dailythoughts&quot;&gt;&gt;&lt;span class=&quot;rightlink&quot;&gt;&lt;&lt;link &quot;Display your thoughts for the day.&quot;&gt;&gt;&lt;&lt;replace &quot;#dailythoughts&quot;&gt;&gt;&lt;&lt;dailythoughts&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;for _i to 0; _i lt $npcs.length;_i++&gt;&gt;
		&lt;&lt;if not $npcs[_i].known&gt;&gt;
		&lt;&lt;else&gt;&gt;		
			&lt;&lt;if $npcs[_i].status is 0&gt;&gt;
				&lt;&lt;thought &quot;I could use the spell to enchant &lt;&lt;= $npcs[_i].callname&gt;&gt;.&quot;&gt;&gt;
			&lt;&lt;elseif $npcs[_i].status lt $npcs[_i].maxstatus&gt;&gt;
				&lt;&lt;thought &quot;I could use the spell on $npcs[_i].callname to deepen the control&quot;&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;&lt;if $book.chaptertranslated lte 4 or mutarisknown is false&gt;&gt;&lt;&lt;thought &quot;I could translate more of the book. I think there is more I can find out.&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
/*This widget passes the time forward for args[0] minutes. It counts up hours, it regenerates mana and fatigue. It also counts down nscs move cooldown and starts daybreak when the hour hits 24*/
&lt;&lt;widget timepass&gt;&gt; /*args[0] is time in minutes*/
	&lt;&lt;set $minutes += $args[0]&gt;&gt;
	&lt;&lt;for $minutes gte 60&gt;&gt;&lt;&lt;set $minutes -= 60&gt;&gt;&lt;&lt;set $hour +=1&gt;&gt;
		&lt;&lt;set $You.mana += $You.manaregen&gt;&gt;&lt;&lt;if $You.mana gt $You.maxmana&gt;&gt;&lt;&lt;set $You.mana to $You.maxmana&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;set $You.fatigue -=1&gt;&gt;&lt;&lt;if $You.fatigue lt 0&gt;&gt;&lt;&lt;set $You.fatigue to 0&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;&lt;set _t to $args[0]&gt;&gt;
	&lt;&lt;for _j to 0; _j lt $npcs.length; _j++&gt;&gt;&lt;&lt;set $npcs[_j].movecd -= _t&gt;&gt;&lt;&lt;if $npcs[_j].movecd lt 0&gt;&gt;&lt;&lt;set $npcs[_j].movecd to 0&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/for&gt;&gt;	
	&lt;&lt;if $hour gte 24&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;daybreak&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;ui update&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
/*The widget appends the correct end to the number of $daycount and prints the date in the normal format.*/
&lt;&lt;widget date&gt;&gt;
	&lt;&lt;set _i&gt;&gt;&lt;&lt;switch $daycount&gt;&gt;&lt;&lt;case 1&gt;&gt;&lt;&lt;set _i to &quot;st&quot;&gt;&gt;&lt;&lt;case 2&gt;&gt;&lt;&lt;set _i to &quot;nd&quot;&gt;&gt;&lt;&lt;case 3&gt;&gt;&lt;&lt;set _i to &quot;rd&quot;&gt;&gt;&lt;&lt;default&gt;&gt;&lt;&lt;set _i to &quot;th&quot;&gt;&gt;&lt;&lt;/switch&gt;&gt;
	&lt;&lt;= $days[$day] + &quot;, &quot; + $daycount + _i + &quot; of &quot; + $months[$month]&gt;&gt;
	&lt;&lt;unset _i&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==================================================================*/
/*The widget constructs a normal hour:minute timestamp out of the $hour and $minutes variables.*/
&lt;&lt;widget timestamp&gt;&gt;&lt;&lt;if $minutes lte 9&gt;&gt;&lt;&lt;set _x to &quot;0&quot;&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set _x to &quot;&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;if $hour lte 9&gt;&gt;&lt;&lt;set _y to &quot;0&quot;&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set _y to &quot;&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;= _y + $hour + &quot;:&quot; + _x + $minutes&gt;&gt;&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="81" name="your bedroom widgets" tags="widget nobr" position="750,0" size="100,100">/*===============================================================*/
&lt;&lt;widget your_bedroom&gt;&gt;
	&lt;&lt;if $introseen is false&gt;&gt;&lt;&lt;dialog &#39;A vivid dream&#39; &#39;dream&#39; true&gt;&gt;&lt;&lt;barbariandream&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $hour gt 8&gt;&gt;&lt;&lt;if $Mom.event is &quot;momroomvisit&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mom_roomvisit&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;jpg &quot;locations&quot; &quot;home_your_bedroom&quot;&gt;&gt;&lt;br&gt;
	This is your bedroom. There is not much here. Your bed, your computer and a bookshelf containint, of course, the mysterious book.
	&lt;&lt;if $hour is 8&gt;&gt;You&#39;ve just woken up. What will this fine $days[$day] bring?&lt;&lt;/if&gt;&gt;
	@@.choice;
	&lt;&lt;if $hour gte 20&gt;&gt;&lt;&lt;link &quot;Go to sleep&quot;&gt;&gt;&lt;&lt;daybreak&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
		&lt;&lt;link &quot;The book&quot; &quot;desk&quot;&gt;&gt;&lt;&lt;set $desk to &quot;book&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Meditate&quot;&gt;&gt;&lt;&lt;timepass 30&gt;&gt;&lt;&lt;manaregen $You.manaregen&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;You meditate about the power of magic and feel your reserves filling up a little again.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Go online&quot; &quot;desk&quot;&gt;&gt;&lt;&lt;set $desk to &quot;computer&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Your bookshelf&quot; &quot;desk&quot;&gt;&gt;&lt;&lt;set $desk to &quot;bookshelf&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;if $hour lt 20&gt;&gt; 
		&lt;&lt;link &quot;Take a nap&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;fatiguereduce 1&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;You take a quick 30 minute nap.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;timepass 30&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &quot;Wait for the night&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;You spend some time reading and playing games until it gets dark outside.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;set $hour to 20&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="82" name="home bathroom widgets" tags="widget nobr" position="875,0" size="100,100">/*==============================================================*/
&lt;&lt;widget bathroom&gt;&gt;
&lt;&lt;if $Mom.location is &quot;Bathroom&quot;&gt;&gt;
	&lt;&lt;locpic $Mom&gt;&gt;
	&lt;&lt;if $knocked.bathroom is false&gt;&gt;
		&lt;&lt;switch $Mom.status&gt;&gt;
		&lt;&lt;case 2&gt;&gt;
			Mom sits on the edge of the bathtub with her hands in her panties, rubbing her clit. Her eyes are closed and she moans with pleasure.
			&lt;&lt;thought &quot;She hasn&#39;t noticed me yet.&quot;&gt;&gt;
			You shut the door behind you audibly. The sudden noise makes her jump up. She looks at you with the shock of the situation and the exhileration of being cought flashing across her face.
			&lt;&lt;msg $Mom &#39;&lt;&lt;yourname $Mom&gt;&gt;? What are you doing here?&#39;&gt;&gt;
			&lt;&lt;msg $You &quot;I heard some moaning in here. Is everything okay?&quot;&gt;&gt;
			For a moment it looks like she might tackle you to the ground and have sex with you right there, but then she regains control.
			&lt;&lt;thought &quot;Phew! That might have escalated. It&#39;d have been quite arousing though.&quot;&gt;&gt;
			&lt;&lt;msg $Mom &quot;Yes... I ... I just stubbed my toe ...  on the bathtub.&quot;&gt;&gt;
			She wraps her arms around herself and slowly begins to massage her breasts.
			&lt;&lt;thought &quot;She is so far gone, she doesn&#39;t even notice or doesn&#39;t care if I see it.&quot;&gt;&gt;
			&lt;&lt;msg $Mom &quot;I was just... about to... take a bath. Do you want to join me?&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;I don&#39;t know.&quot;&gt;&gt;
			She looks at you pleadingly.
			&lt;&lt;msg $Mom &quot;Please? I&#39;ll scrub your back and give you a massage.&quot;&gt;&gt;
			She puts her hand into the water.
			&lt;&lt;msg $Mom &quot;The temperature is perfect. Please?&quot;&gt;&gt;
		&lt;&lt;case 3&gt;&gt;
			You close the door behind you. Mom quickly faces you. Her eyes widen.
			&lt;&lt;msg $Mom &#39;&lt;&lt;yourname $Mom&gt;&gt;! How may I serve you?&#39;&gt;&gt;
			With a languid motion she turns around, reaches around and spreads herself for your viewing pleasure.
			&lt;&lt;thought &quot;Having a personal sexslave is nice indeed. Thank you, Uncle Albert!&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;switch $Mom.status&gt;&gt;
		&lt;&lt;case 1&gt;&gt;
			&lt;&lt;msg $Mom &quot;Wait a moment &lt;&lt;yourname $Mom&gt;&gt;.&quot;&gt;&gt;
			She quickly opens the door. She hasn&#39;t had time to finish buttoning up her pants. That&#39;s how much in a hurry she was to be useful to you.
			&lt;&lt;msg $Mom &quot;I was going to take a bath, but if you need the bathroom, I can wait.&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;No, I don&#39;t need it right now.&quot;&gt;&gt;
			&lt;&lt;msg $Mom &quot;Why have you come then?&quot;&gt;&gt;
			&lt;&lt;thought &quot;Lets see how far I can push her.&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;I came to ask you something.&quot;&gt;&gt;
			A look of annoyance flashes over her face, but she quickly pulls herself together and puts her brightest smile on.
			&lt;&lt;msg $Mom &quot;Of course, &lt;&lt;yourname $Mom&gt;&gt;. What do you want to know?&quot;&gt;&gt;
		&lt;&lt;case 2&gt;&gt;
			She opens the door in a millisecond. She is wearing sexy underwear, just as she always does these days.
			&lt;&lt;msg $Mom &quot;I was just about to take a bath. Do you care to join me?&quot;&gt;&gt;
			&lt;&lt;thought &quot;Let&#39;s play a little with her.&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;But you&#39;re my Mom.&quot;&gt;&gt;
			She laughs a little.
			&lt;&lt;msg $Mom &quot;Oh, come on &lt;&lt;yourname $Mom&gt;&gt;. I&#39;ve seen you naked all the time when you were a child.&quot;&gt;&gt;
			She tries to look casual, but you can clearly see the desperate need in her eyes.
		&lt;&lt;case 3&gt;&gt;
			&lt;&lt;msg $Mom &quot;Come in &lt;&lt;yourname $Mom&gt;&gt;. The door is not locked.&quot;&gt;&gt;
			You open the door and are greated by the view of your naked Mom, bent over the bathtub. She eagerly spreads her ass for you.
			&lt;&lt;msg $Mom &quot;The bath is ready, as am I. Would you like to join me?&quot;&gt;&gt;
			She smiles seductively at you.
			&lt;&lt;msg $Mom &quot;Or would you like to just take me?&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;jpg &quot;locations&quot; &quot;home_bathroom&quot;&gt;&gt;&lt;br&gt;
	The bathroom is empty.
	&lt;&lt;thought &quot;Do I smell? I could shower.&quot;&gt;&gt; 	
	@@.choice;&lt;&lt;link &quot;Take a shower&quot;&gt;&gt;&lt;&lt;fatiguereduce 1&gt;&gt;&lt;&lt;timepass 10&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;link &quot;Take a bath&quot;&gt;&gt;&lt;&lt;fatiguereduce 2&gt;&gt;&lt;&lt;timepass 20&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*==============================================================*/
&lt;&lt;widget mombathroomoccupied&gt;&gt;
@@.left;&lt;&lt;jpg &quot;random&quot; &quot;indoor&quot;&gt;&gt;@@
Mom is in the bathroom. The door is &lt;&lt;if $Mom.status lte 1&gt;&gt;locked&lt;&lt;else&gt;&gt;unlocked&lt;&lt;/if&gt;&gt;.
@@.choice;
&lt;&lt;if $Mom.status gte 2&gt;&gt;
&lt;&lt;link &quot;Enter&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;set $location to $home_bathroom&gt;&gt;&lt;&lt;set $knocked.bathroom to false&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $Mom.status is 0&gt;&gt;&lt;&lt;link &quot;Knock&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mombathroomknocked&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;else&gt;&gt;&lt;&lt;link &quot;Knock&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;set $location to $home_bathroom&gt;&gt;&lt;&lt;set $knocked.bathroom to true&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;link &quot;Leave&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
@@
&lt;&lt;/widget&gt;&gt;
/*==============================================================*/
&lt;&lt;widget mombathroomknocked&gt;&gt;
@@.left;&lt;&lt;jpg &quot;random&quot; &quot;indoor&quot;&gt;&gt;@@
&lt;&lt;msg $Mom &quot;Occupied! Get lost! Go clean your room or something. Or better: Find a job and move out!&quot;&gt;&gt;
&lt;&lt;thought &quot;I whish I could do that. But in this shithole of a town there are no jobs.&quot;&gt;&gt;
@@.choice;
&lt;&lt;link &quot;Leave&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
@@		
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="83" name="Moms bedroom widgets" tags="widget nobr" position="1000,0" size="100,100">&lt;&lt;widget mom_bedroom&gt;&gt;
&lt;&lt;if $Mom.location is &quot;Moms bedroom&quot;&gt;&gt;
	&lt;&lt;if $knocked.moms_bedroom is false&gt;&gt;
		&lt;&lt;locpic $Mom&gt;&gt;
		&lt;&lt;switch $Mom.status&gt;&gt;	
		&lt;&lt;case 1&gt;&gt;
			Your hear your mom walking to the door and unlocking it. She is wearing her sleeping outfit, looking quite nice in it.
			&lt;&lt;msg $Mom &quot;Hey, &lt;&lt;yourname $Mom&gt;&gt;. Everything alright? Do you need something? I could make you a sandwich.&quot;&gt;&gt;
			She looks sleepy, but eager.
			&lt;&lt;thought &quot;I could get her to do almost anything for me.&quot;&gt;&gt;
		&lt;&lt;case 2&gt;&gt;
			It takes her a long time to open the door. Her clothes are in disarray, her breathing heavy and her face flushed. 
			&lt;&lt;msg $Mom &quot;Hi...&lt;&lt;yourname $Mom&gt;&gt;... I... Ahmm... Do you want to come in?&quot;&gt;&gt;
			She steps aside and makes way for you to enter. The sheets are ruffled	from recent activity and you can see a dildo poking out from under the sheets.
			&lt;&lt;msg $Mom &quot;What can I do for you?&quot;&gt;&gt;
		&lt;&lt;case 3&gt;&gt;
			&lt;&lt;msg $Mom &quot;Come in, master. The door is unlocked.&quot;&gt;&gt;
			You enter the room and see her lying on the bed, her legs in the air and spreading her already wet pussy.
			&lt;&lt;msg $Mom &quot;Master! I&#39;m so happy you decided to visit me tonight. All my holes are ready for you. Please use me however you like.&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;else&gt;&gt;
		You enter the room without knocking,
		&lt;&lt;switch $Mom.status&gt;&gt;
		&lt;&lt;case 2&gt;&gt;
			trusting that Mom is too occupied or horny to care.&lt;br&gt;
			&lt;&lt;xxxjpg &quot;Mom&quot; &quot;Moms bedroom&quot; &quot;dildo&quot;&gt;&gt;&lt;br&gt;
			And indeed, Mom is masturbating with a powerful vibrator. 
			&lt;&lt;thought &quot;I didn&#39;t know she had one of these.&quot;&gt;&gt;
			&lt;&lt;msg $Mom &quot;Mhhmmmmmm.&quot;&gt;&gt;
			@@.choice;&lt;&lt;link &quot;Watch her.&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;sexdialog&#39; true&gt;&gt;&lt;&lt;sexmp4 &quot;Mom&quot; &quot;hitachi&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;timepass 5&gt;&gt;&lt;&lt;/link&gt;&gt;@@
		&lt;&lt;case 3&gt;&gt;
			&lt;&lt;locpic $Mom&gt;&gt;
			as is your right as the master of the house.&lt;br&gt;
			She hears you and quickly assumes a position that puts all her assets on display. She spreads her pussylips for you.
			&lt;&lt;msg $Mom &quot;&lt;&lt;yourname $Mom&gt;&gt;! I hoped you came to visit me. My ass and my pussy are ready for you.&quot;&gt;&gt;
			She smiles seductively.
			&lt;&lt;msg $Mom &quot;Or would you prefer a blowjob?&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;jpg &quot;locations&quot; &quot;home_mom_bedroom&quot;&gt;&gt;
	Moms bedroom is empty. She is not here.
	&lt;&lt;switch $Mom.status&gt;&gt;
		&lt;&lt;case 0&gt;&gt;&lt;&lt;thought &quot;I should get out quickly. Who knows what she&#39;ll do to me if she catches me snooping around in here.&quot;&gt;&gt;
		&lt;&lt;case 1 2&gt;&gt;&lt;&lt;thought &quot;Her room is nice. She actually has an eye for interior decoration.&quot;&gt;&gt;
		&lt;&lt;case 3&gt;&gt;&lt;&lt;thought &quot;Should I move here? Nah, my room is better. Plus: I can sleep in here whenever I want.&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/widget&gt;&gt;


&lt;&lt;widget mombedroomoccupied&gt;&gt;
	@@.left;&lt;&lt;jpg &quot;random&quot; &quot;indoor&quot;&gt;&gt;@@
	Mom is in her bedroom. The door is &lt;&lt;if $Mom.status lte 1&gt;&gt;locked&lt;&lt;else&gt;&gt;unlocked&lt;&lt;/if&gt;&gt;.
	@@.choice;
	&lt;&lt;if $Mom.status gte 2&gt;&gt;
		&lt;&lt;link &quot;Enter&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;set $location to $moms_bedroom&gt;&gt;&lt;&lt;set $knocked.mom_bedroom to false&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $Mom.status is 0&gt;&gt;
		&lt;&lt;link &quot;Knock&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;mombedroomknocked&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;link &quot;Knock&quot; &quot;Home&quot;&gt;&gt;&lt;&lt;set $location to $moms_bedroom&gt;&gt;&lt;&lt;set $knocked.mom_bedroom to true&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &quot;Leave&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;
	@@
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget mombedroomknocked&gt;&gt;
	@@.right;&lt;&lt;jpg &quot;random&quot; &quot;indoor&quot;&gt;&gt;
	After a short while you hear a loud angry voice yelling.
	&lt;&lt;msg $Mom &quot;Oh my GOD! If you don&#39;t get lost immediately I&#39;m	gonna beat you into a pulp and then disown what is left of you.&quot;&gt;&gt;
	She sounds furious.
	&lt;&lt;thought &quot;I should go. She might really do it.&quot;&gt;&gt;
	@@.choice;&lt;&lt;link &quot;Go&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;


















</tw-passagedata><tw-passagedata pid="84" name="Interaction widgets" tags="widget nobr" position="2850,225" size="100,100">/*This widget creates the NPCs head and the interaction menu beneath them. It also checks who and where you can fuck.*/
&lt;&lt;widget interaction&gt;&gt;
	&lt;div class=&quot;head&quot;&gt;
	&lt;&lt;if $peoplepresent gt 2 or $faces is false&gt;&gt;&lt;&lt;=$args[0].callname&gt;&gt;&lt;&lt;else&gt;&gt; [img[$args[0].facepic]]&lt;&lt;/if&gt;&gt;
	&lt;&lt;switch $args[0].id&gt;&gt;
	&lt;&lt;case &quot;Mom&quot;&gt;&gt;
		&lt;&lt;message &quot;Interaction&quot; &quot;Mom&quot;&gt;&gt;&lt;div class=&quot;interactioninner&quot;&gt;
			&lt;&lt;link &quot;Talk&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talk $Mom&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
			&lt;&lt;if $Mom.status gte 1&gt;&gt;
				&lt;&lt;if $Mom.privacy.includes($location.id)&gt;&gt;
					&lt;&lt;link &#39;Fuck&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;set $fucked to &quot;Mom&quot;&gt;&gt;&lt;&lt;set $sidemenu to false&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
				&lt;&lt;else&gt;&gt;
					&lt;&lt;link &quot;Fuck&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;msg $Mom &quot;No way. This is too public. Someone might see us.&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;link &quot;Fuck&quot; &quot;end&quot;&gt;&gt;&lt;&lt;set $end to &quot;angeredmom&quot;&gt;&gt;&lt;&lt;set $sidemenu to false&gt;&gt;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if $peoplepresent gt 1&gt;&gt;
				&lt;&lt;link &quot;Enchant&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;There are too many people around. You can&#39;t risk anyone overseeing you using magic.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;if $Mom.status lt 3&gt;&gt;&lt;&lt;usemagic_on $Mom&gt;&gt;&lt;&lt;/if&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;/div&gt;&lt;&lt;/message&gt;&gt;
	&lt;&lt;case &quot;Jasmin&quot;&gt;&gt;
		&lt;&lt;message &quot;Interaction&quot; &quot;Jasmin&quot;&gt;&gt;&lt;div class=&quot;interactioninner&quot;&gt;
			&lt;&lt;link &quot;Talk&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktojasmin&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt; 
			&lt;&lt;if $Jasmin.status gte 1&gt;&gt;
				&lt;&lt;if $Jasmin.privacy.includes($location.id)&gt;&gt;
					&lt;&lt;link &#39;Fuck&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;set $fucked to &quot;Jasmin&quot;&gt;&gt;&lt;&lt;set $sidemenu to false&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
				&lt;&lt;else&gt;&gt;
					&lt;&lt;link &quot;Fuck&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;msg $Jasmin &quot;No way. This is too public. Someone might see us.&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;link &quot;Fuck&quot; &quot;end&quot;&gt;&gt;&lt;&lt;set $end to &quot;angeredjasmin&quot;&gt;&gt;&lt;&lt;set $sidemenu to false&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if $peoplepresent gt 1&gt;&gt;
				&lt;&lt;link &quot;Enchant&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;There are too many people around. You can&#39;t risk anyone overseeing you using magic.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
			&lt;&lt;else&gt;&gt;			
				&lt;&lt;if $Jasmin.status lt 3&gt;&gt;&lt;&lt;usemagic_on $Jasmin&gt;&gt;&lt;&lt;/if&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;/div&gt;&lt;&lt;/message&gt;&gt;
		
		
	&lt;&lt;case &quot;Andrea&quot;&gt;&gt;
		&lt;&lt;message &quot;Interaction&quot; &quot;Andrea&quot;&gt;&gt;&lt;div class=&quot;interactioninner&quot;&gt;
			&lt;&lt;link &quot;Talk&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktoandrea&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
			&lt;&lt;if $Andrea.status gte 3&gt;&gt;
				&lt;&lt;if $Andrea.privacy.includes($location.id)&gt;&gt;
					&lt;&lt;link &#39;Fuck&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;set $fucked to &quot;Andrea&quot;&gt;&gt;&lt;&lt;set $sidemenu to false&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
				&lt;&lt;else&gt;&gt;
					&lt;&lt;link &quot;Fuck&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;msg $Andrea &quot;No way. This is too public. Someone might see us.&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;link &quot;Fuck&quot; &quot;end&quot;&gt;&gt;&lt;&lt;set $end to &quot;angeredandrea&quot;&gt;&gt;&lt;&lt;set $sidemenu to false&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if $peoplepresent gt 1&gt;&gt;
				&lt;&lt;link &quot;Enchant&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;There are too many people around. You can&#39;t risk anyone overseeing you using magic.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;if $Andrea.status lt 4&gt;&gt;&lt;&lt;usemagic_on $Andrea&gt;&gt;&lt;&lt;/if&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;/div&gt;&lt;&lt;/message&gt;&gt;
		
	&lt;&lt;case &quot;Henry&quot;&gt;&gt;
		&lt;&lt;message &quot;Interaction&quot; &quot;Henry&quot;&gt;&gt;&lt;div class=&quot;interactioninner&quot;&gt;
		&lt;&lt;link &quot;Talk&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktohenry&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;	
		&lt;&lt;if $Henry.privacy.includes($location.id)&gt;&gt;
			&lt;&lt;if $Henry.status gte 3&gt;&gt;
				&lt;&lt;link &#39;Fuck&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;set $fucked to &quot;Henry&quot;&gt;&gt;&lt;&lt;set $sidemenu to false&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;link &quot;Fuck&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;msg $Henry &quot;No way. This is too public. Someone might see us.&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $peoplepresent gt 1&gt;&gt;
				&lt;&lt;link &quot;Enchant&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;There are too many people around. You can&#39;t risk anyone overseeing you using magic.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;switch $Henry.status&gt;&gt;
				&lt;&lt;case 0 1 3&gt;&gt;&lt;&lt;usemagic_on $Henry&gt;&gt;
				&lt;&lt;case 2&gt;&gt;
					&lt;&lt;link &quot;Enchant&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39;&gt;&gt;&lt;&lt;thought &quot;I think I&#39;ll better turn him into a woman first, or else the spell won&#39;t work correctly.&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
					&lt;&lt;if $mutarisknown is true&gt;&gt;&lt;&lt;link &quot;Transform&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;henry_prove_prompt&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt; 
			&lt;&lt;/switch&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;/div&gt;&lt;&lt;/message&gt;&gt;	

	&lt;&lt;case &quot;Brian&quot;&gt;&gt;
		&lt;&lt;message &quot;Interaction&quot; &quot;Brian&quot;&gt;&gt;&lt;div class=&quot;interactioninner&quot;&gt;
		&lt;&lt;link &quot;Talk&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktobrian&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
		&lt;&lt;if $Brian.privacy.includes($location.id)&gt;&gt;
			&lt;&lt;if $Brian.status gte 3&gt;&gt;
				&lt;&lt;link &#39;Fuck&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;set $fucked to &quot;Brian&quot;&gt;&gt;&lt;&lt;set $sidemenu to false&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;link &quot;Fuck&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;msg $Brian &quot;No way. This is too public. Someone might see us.&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $peoplepresent gt 1&gt;&gt;
			&lt;&lt;link &quot;Enchant&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;There are too many people around. You can&#39;t risk anyone overseeing you using magic.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;switch $Brian.status&gt;&gt;
				&lt;&lt;case 0&gt;&gt;&lt;&lt;link &quot;Enchant&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;As soon as he sees you his hand curl into fists and he stares at you aggressively.
					&lt;&lt;thought &quot;This is too dangerous. I need to somehow surprise him or weaken his mental state before I can try to use the spell.&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
				&lt;&lt;case 1 3&gt;&gt;&lt;&lt;usemagic_on $Brian&gt;&gt;
				&lt;&lt;case 2&gt;&gt;
					&lt;&lt;link &quot;Enchant&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39;&gt;&gt;&lt;&lt;thought &quot;I think I&#39;ll better turn him into a woman first, or else the spell won&#39;t work correctly.&quot;&gt;&gt;&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
					&lt;&lt;if $mutarisknown is true&gt;&gt;&lt;&lt;link &quot;Transform&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;brian_transform&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
			&lt;&lt;/switch&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;/div&gt;&lt;&lt;/message&gt;&gt;		
	&lt;&lt;case &quot;Lisa&quot;&gt;&gt;
		&lt;&lt;message &quot;Interaction&quot; &quot;Lisa&quot;&gt;&gt;&lt;div class=&quot;interactioninner&quot;&gt;
		&lt;&lt;link &quot;Talk&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;talk&#39;&gt;&gt;&lt;&lt;talktolisa&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
		&lt;&lt;if $Lisa.privacy.includes($location.id)&gt;&gt; /*At her home*/
			&lt;&lt;if $Lisa.status gte 2&gt;&gt;
				&lt;&lt;link &#39;Fuck&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;set $fucked to &quot;Lisa&quot;&gt;&gt;&lt;&lt;set $sidemenu to false&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;link &#39;Fuck&#39; &#39;end&#39;&gt;&gt;&lt;&lt;set $end to &quot;angeredlisa&quot;&gt;&gt;&lt;&lt;set $sidemenu to false&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;else&gt;&gt; /*not at her home*/
			&lt;&lt;if $Lisa.status gte 2&gt;&gt;
				&lt;&lt;link &#39;Fuck&#39; &#39;sex&#39;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;msg $Lisa &quot;No way, there are&lt;&lt;bimbo&gt;&gt; way too many people around here.&quot;&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;link &#39;Fuck&#39; &#39;end&#39;&gt;&gt;&lt;&lt;set $end to &quot;angeredlisa&quot;&gt;&gt;&lt;&lt;set $sidemenu to false&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;br&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $peoplepresent gt 1&gt;&gt;&lt;&lt;link &quot;Enchant&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;There are too many people around. You can&#39;t risk anyone overseeing you using magic.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;switch $Lisa.status&gt;&gt;
				&lt;&lt;case 0&gt;&gt;&lt;&lt;link &quot;Enchant&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;She won&#39;t even talk to you. It is not possible to have enough time and calm to use the spell on her.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
				&lt;&lt;case 1 2&gt;&gt;&lt;&lt;usemagic_on $Lisa&gt;&gt;
				&lt;&lt;case 3&gt;&gt;
					&lt;&lt;if $Lisa.iqdrop gte 3&gt;&gt;&lt;&lt;usemagic_on $Lisa&gt;&gt;
					&lt;&lt;else&gt;&gt;&lt;&lt;link &quot;Enchant&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;She is not stupid enough for what you have planned. You need to fuck her brains out some more.&lt;&lt;continueon&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
					&lt;&lt;/if&gt;&gt;
			&lt;&lt;/switch&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;/div&gt;&lt;&lt;/message&gt;&gt;	
	&lt;&lt;/switch&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="85" name="andreas apt widgets" tags="widget nobr" position="750,625" size="100,100">&lt;&lt;widget andreanothome&gt;&gt;
&lt;&lt;jpg &quot;random&quot; &quot;outdoor&quot;&gt;&gt;&lt;br&gt;You knock on the door, but no one answers. There is no one at home.&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;

/*===================================================================*/
&lt;&lt;widget andreas_apartment&gt;&gt;
&lt;&lt;if $Andrea.location is &quot;Andreas apt&quot;&gt;&gt;
	&lt;&lt;switch $Andrea.event&gt;&gt;
	&lt;&lt;case &quot;submission&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;andrea_submission&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;case &quot;horny&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;andrea_horny&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;case &quot;slave&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;andrea_slave&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/switch&gt;&gt; 
	&lt;&lt;locpic $Andrea&gt;&gt;&lt;br&gt;
	&lt;&lt;switch $Andrea.status&gt;&gt;
		&lt;&lt;case 1&gt;&gt;She lets you in and looks with you a nasty smile.&lt;&lt;msg $Andrea &quot;Thank you for bringing the bag over. Came to cry over $Lisa.callname again?&quot;&gt;&gt;
		&lt;&lt;case 2&gt;&gt;&lt;&lt;msg $Andrea &quot;Come in, little bro.&quot;&gt;&gt; She crosses her arms which in turn pushes her boobs up and gives you a nice view.&lt;&lt;msg $Andrea &quot;Anything I can do for you?&quot;&gt;&gt;
		&lt;&lt;case 3&gt;&gt;$Andrea.callname opens the door. She is wearing a set of sexy black lingerie. &lt;&lt;msg $Andrea &quot;I was just changing. Do you think I look good like that?&quot;&gt;&gt;
			&lt;&lt;msg $You &quot;I hate to admit, but you look amazing in it, sis.&quot;&gt;&gt;
		&lt;&lt;case 4&gt;&gt;She smiles at you seductively and spreads her legs. She is not wearing any panties. &lt;&lt;msg $Andrea &quot;Come and get some!&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;jpg &quot;locations&quot; &quot;andrea_apartment&quot;&gt;&gt;&lt;br&gt;
	You use the keys and enter &lt;&lt;=$Andrea.callname&gt;&gt;s apartment.
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/

&lt;&lt;widget momatandreas&gt;&gt;
	&lt;&lt;if $Mom.status lte 2 or $Andrea.status lt 3&gt;&gt;
		@@#locpic;&lt;&lt;jpg &quot;Andrea/Andreas apt&quot; &quot;mom_visit_neutral&quot;&gt;&gt;@@Mom is visiting &lt;&lt;=$Andrea.callname&gt;&gt;  
		They both seem preoccupied. &lt;&lt;thought &quot;I better leave, before it gets weird.&quot;&gt;&gt;
		@@.choice;&lt;&lt;link &quot;Leave&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $location to $apartment_foyer&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;elseif $Mom.status gte 2 and $Andrea.status gt 2&gt;&gt;
		@@#locpic;&lt;&lt;jpg &quot;Andrea/Andreas apt&quot; &quot;mom_visit_slave&quot;&gt;&gt;@@
		As you enter you see Mom and $Andrea.callname waiting for you. They are undressing each other sensually for your viewing pleasure.
		&lt;&lt;msg $Andrea &quot;Welcome &lt;&lt;yourname $Andrea&gt;&gt;!&quot;&gt;&gt;
		&lt;&lt;msg $Mom &quot;Hello &lt;&lt;yourname $Mom&gt;&gt;!&quot;&gt;&gt;
		&lt;@@.talklink;&lt;&lt;link &quot;Mom, go home!&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;set $Mom.location to &quot;Kitchen&quot;&gt;&gt;&lt;&lt;set $Mom.movecd to 30&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
		@@.choice;&lt;&lt;link &quot;THERE WILL BE MORE IN THE FUTURE&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

/*===================================================================*/
&lt;&lt;widget andreahomeangry&gt;&gt;
	You knock on the door. $Andrea.callname opens it, recognizes you and sneers.
	&lt;&lt;msg $Andrea &quot;What do you want?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;I just wanted to visit my sister.&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;I don&#39;t have time for your bullshit. Get lost.&quot;&gt;&gt;
	&lt;&lt;if $andreas_bag.owned is true&gt;&gt;
		@@.talklink;&lt;&lt;link &quot;Wait! I found this bag...&quot; &quot;Apartment complex&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;&lt;&lt;andrea_give_bag&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;@@
	&lt;&lt;/if&gt;&gt; 
	@@.choice;&lt;&lt;link &quot;Go&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget andrea_give_bag&gt;&gt;	
	&lt;&lt;msg $Andrea &quot;What?&quot;&gt;&gt;
	She looks annoyed.
	&lt;&lt;msg $You &quot;I found this in the attic. I thought you might want to have it.&quot;&gt;&gt;
	You show her the bag. &lt;br&gt; 
	&lt;&lt;png &quot;random/items&quot; &quot;andreas_bag&quot;&gt;&gt;&lt;br&gt;
	Her eyes light up.
	&lt;&lt;msg $Andrea &quot;I thought I&#39;d lost it.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Nah! It just was buried beneath a lot of junk.&quot;&gt;&gt;
	She suddenly looks at you suspiciously.
	&lt;&lt;msg $Andrea &quot;What do you want for it?&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Nothing. I&#39;m just being a good brother.&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;Bullshit!&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Ok! Ok! I just wanted to talk. You know Lisa well, right?&quot;&gt;&gt;
	&lt;&lt;msg $Andrea &quot;You poor fool! Still trying to get her back?&quot;&gt;&gt;
	&lt;&lt;thought &quot;Not really, but it is a good opening to get to her.&quot;&gt;&gt;
	You try to look as depressed as possible, even squeezing a tear out of your eyes.
	&lt;&lt;msg $Andrea &quot;You are an idiot, but if you can live with me laughing at you, you can come in and pour your heart out.&quot;&gt;&gt;
	&lt;&lt;thought &quot;You&#39;ll regret that soon enough.&quot;&gt;&gt;
	&lt;&lt;set $andreas_bag.owned to false&gt;&gt;
	&lt;&lt;set $Andrea.status to 1&gt;&gt;&lt;&lt;set $quests[3].progress++&gt;&gt;
	&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="86" name="lisas apt widgets" tags="widget nobr" position="875,625" size="100,100">&lt;&lt;widget lisas_apartment&gt;&gt;
	&lt;&lt;switch $Lisa.event&gt;&gt;
		&lt;&lt;case &quot;depressed&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;lisadepressed&gt;&gt;&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;case &quot;convinced&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;lisaconvinved&gt;&gt;&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;case &quot;lisasubmissivefirst&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;lisasubmissivefirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;case &quot;lisahornyfirst&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;lisahornyfirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;case &quot;lisaenslavefirst&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39; true&gt;&gt;&lt;&lt;lisaenslavefirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
	&lt;&lt;locpic $Lisa&gt;&gt;
	&lt;&lt;switch $Lisa.status&gt;&gt;
		&lt;&lt;case 1&gt;&gt;&lt;&lt;msg $Lisa &quot;What do you want?&quot;&gt;&gt;
		&lt;&lt;case 2&gt;&gt;$Lisa.callname looks at you with a curious expression. &lt;&lt;msg $Lisa &quot;You know, you are kinda cute. Let&#39;s fuck.&quot;&gt;&gt; She turns around and leads you into her apartment.
			&lt;&lt;msg $Lisa &quot;...&quot;&gt;&gt;Suddenly she stops.
			&lt;&lt;msg $Lisa &quot;Don&#39;t get your hopes up. This doesn&#39;t mean we are back together. It is strictly sex!&quot;&gt;&gt;
		&lt;&lt;case 3&gt;&gt;$Lisa.callname blows a bubble with the chewinggum she is chewing. &lt;&lt;msg $Lisa &quot;Hey &lt;&lt;lisabimbotalk $Lisa.callsyou &#39;there, cutie&#39;&gt;&gt;. 
			&lt;&lt;lisabimbotalk &#39;Do you think that we, maybe, could fuck again? I could really need some of those endorphines!&#39; &#39;Do you want to put your meatrod down my lovehole &lt;i&gt;Hihihi&lt;/i&gt;!&#39;&gt;&gt;&quot;&gt;&gt;
		&lt;&lt;case 4&gt;&gt;$Lisa.callname strikes a pose, presenting her red lingerie to you. &lt;&lt;msg $Lisa &quot;Do you like &lt;&lt;=$Lisa.callname&gt;&gt;s new clothes? 
			She bought it to look extra super duper pretty for you, the bestest man she could ever wish for.&quot;&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;/widget&gt;&gt;

/*===================================================================*/
&lt;&lt;widget lisanothome&gt;&gt;
	&lt;&lt;jpg &quot;random&quot; &quot;outdoor&quot;&gt;&gt;&lt;br&gt;
	You knock on the door, but no one answers. There is no one at home.
	@@.choice;&lt;&lt;link &quot;Leave&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
&lt;&lt;widget lisahomeangry&gt;&gt;
	$Lisa.callname opens the door, looks at you and frowns.
	&lt;&lt;msg $Lisa &quot;Not interested!&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;But...&quot;&gt;&gt;
	&lt;&lt;msg $Lisa &quot;NO! Everything that can be said, has been said.&quot;&gt;&gt;
	&lt;&lt;msg $You &quot;Fine...&quot;&gt;&gt; 
	@@.choice;&lt;&lt;link &quot;Leave&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*===================================================================*/
</tw-passagedata><tw-passagedata pid="87" name="gallerydef" tags="" position="150,900" size="100,100">/*Galleries are defined by name, the variable imageseen which controls the image that is initially shown and an array of the paths for the images as strings. New pictures can be added in the game by &lt;&lt;set $(galleryname).pictures.pushUnique(&quot;the path of the image&quot;)*/
&lt;&lt;set $momgallery to {
	imageseen:0,
  	pictures: [&quot;img/Mom/mom_intro.jpg&quot;]
}&gt;&gt;
&lt;&lt;set $jasmingallery to {
	imageseen:0,
	pictures: [&quot;img/Jasmin/jasmin_intro.jpg&quot;]
}&gt;&gt;
&lt;&lt;set $henrygallery to {
	imageseen:0,
	pictures: [&quot;img/Henry/henry_intro.jpg&quot;]
}&gt;&gt;
&lt;&lt;set $andreagallery to {
	imageseen:0,
	pictures: [&quot;img/Andrea/andrea_intro.jpg&quot;]
}&gt;&gt;
&lt;&lt;set $briangallery to {
	imageseen:0,
	pictures: [&quot;img/Brian/brian_intro.jpg&quot;]
}&gt;&gt;
&lt;&lt;set $lisagallery to {
	imageseen:0,
	pictures: [&quot;img/Lisa/lisa_intro.jpg&quot;]
}&gt;&gt;</tw-passagedata><tw-passagedata pid="88" name="cafe widgets" tags="widget nobr" position="750,500" size="100,100">&lt;&lt;widget cafe&gt;&gt;
&lt;&lt;if $Lucy.known is false&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;&lt;&lt;cafefirst&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;jpg &quot;locations&quot; &quot;cafe&quot;&gt;&gt;&lt;br&gt;  
You stand in the Busy Bean, the nice, little Café that is situated in the Springvale Mall. 
@@.choice;&lt;&lt;link &quot;Buy something&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;shop&#39;&gt;&gt;&lt;&lt;coffee_store&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;if $cafejob.hired is true&gt;&gt;
	&lt;&lt;link &quot;Work as a $cafejob.name&quot;&gt;&gt;&lt;&lt;timepass 60&gt;&gt;&lt;&lt;addmoney $cafejob.pay&gt;&gt;
		&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;
		&lt;&lt;switch $cafejob.name&gt;&gt;
			&lt;&lt;case &quot;dishwasher&quot;&gt;&gt;&lt;&lt;mp4 &quot;Lucy&quot; &quot;dishwashing&quot;&gt;&gt; You wash dishes for an hour. Lucy pays you &lt;&lt;= $cafejob.pay&gt;&gt;$.&lt;&lt;continueon&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
		&lt;&lt;/dialog&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;else&gt;&gt;&lt;&lt;link &quot;Ask for a job&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;jobcafe&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;if $You.money gte 5&gt;&gt;&lt;&lt;link &quot;Drink a coffee (5$)&quot;&gt;&gt;&lt;&lt;losemoney 5&gt;&gt;&lt;&lt;fatiguereduce 2&gt;&gt;&lt;&lt;/link&gt;&gt;@@&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*=======================================================*/
&lt;&lt;widget cafe_office&gt;&gt;
&lt;&lt;jpg &quot;locations&quot; &quot;cafe_office&quot;&gt;&gt;&lt;br&gt;
This is the small office from where $Lucy.callname does all the managing stuff of the Busy Bean.
&lt;&lt;/widget&gt;&gt;
/*=======================================================*/
&lt;&lt;widget jobcafe&gt;&gt;
You approach $Lucy.callname and smile a broad smile.
&lt;&lt;msg $You &quot;Do you, by chance, have a job for me?&quot;&gt;&gt;
&lt;&lt;msg $Lucy &quot;Actually I could use a little help in the back, loading and unloading the dishwasher, cleaning the joint and all around supporting me. I won&#39;t let you interact with the customers though. That is my job.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;No problem. How much do you pay?&quot;&gt;&gt;
&lt;&lt;msg $Lucy &quot;10$ per hour. Flexible work hours. Come by, help out, get payed.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Sounds great. When do I start?&quot;&gt;&gt;
@@.right;&lt;&lt;png &quot;random&quot; &quot;apron&quot;&gt;&gt;@@&lt;br&gt;&lt;&lt;set $apron.owned to true&gt;&gt;
&lt;&lt;msg $Lucy &quot;How about right now? Here is your apron.&quot;&gt;&gt;
You work for an hour, scrubbing dishes.
@@.left;&lt;&lt;mp4 &quot;Lucy&quot; &quot;dishwashing&quot;&gt;&gt;@@
After the work $Lucy.callname pays you 10$ and sends you on your way.
&lt;&lt;set $cafejob.hired to true&gt;&gt;&lt;&lt;set $quests[6].progress++&gt;&gt;
@@.choice;&lt;&lt;link &quot;Continue&quot; &quot;Mall&quot;&gt;&gt;&lt;&lt;addmoney 10&gt;&gt;&lt;&lt;timepass 60&gt;&gt;&lt;&lt;set $cafejob.hoursworked++&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;

/*=======================================================*/
&lt;&lt;widget cafefirst&gt;&gt;
As you enter the Busy Bean you see a beautiful asian lady working behind the counter. You approach her.
@@.right;&lt;&lt;jpg &quot;Lucy&quot; &quot;lucy_intro&quot;&gt;&gt;@@
&lt;&lt;msg $Lucy &quot;&lt;&lt;greetings&gt;&gt;.Welcome to the Busy Bean. How may I help you?&quot;&gt;&gt;You can see a nametag on her vest that reads &lt;&lt;textbox &quot;$Lucy.callname&quot; &quot;Lucy&quot;&gt;&gt;.
&lt;span id=&quot;cafefirst&quot;&gt;
@@.talklink;
&lt;&lt;if $You.money gte 5&gt;&gt;&lt;&lt;link &quot;I&#39;d like a coffee&quot;&gt;&gt;&lt;&lt;replace &quot;#cafefirst&quot;&gt;&gt;
&lt;&lt;msg $You &quot;I&#39;d like a coffee please.&quot;&gt;&gt;
She smiles professionally.
&lt;&lt;msg $Lucy &quot;Big, medium, small, sugar, milk?&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Just a medium coffee, no sugar, no milk please.&quot;&gt;&gt;
&lt;&lt;msg $Lucy &quot;Just plain black coffee. A traditionalist. Just how I like it.&quot;&gt;&gt;
You grin at her.&lt;br&gt;
She turns around and starts the impressive cafe machine.
@@.right;&lt;&lt;mp4 &quot;Lucy&quot; &quot;coffee_machine&quot;&gt;&gt;@@
&lt;&lt;msg $You &quot;It&#39;s the only way to enjoy a really good coffee, I say.&quot;&gt;&gt;
&lt;&lt;msg $Lucy &quot;Isn&#39;t it?&quot;&gt;&gt;
&lt;&lt;msg $You &quot;I&#39;m &lt;&lt;= $You.callname&gt;&gt;. Nice to meet you.&quot;&gt;&gt;
She reaches over the counter to shake your hand.
&lt;&lt;msg $Lucy &quot;&lt;&lt;=$Lucy.callname&gt;&gt;. Nice to meet a fellow coffee afficionado.&quot;&gt;&gt;
She sets a cup of steaming hot coffee down in front of you.&lt;br&gt;
&lt;&lt;msg $Lucy &quot;That is 5$.&quot;&gt;&gt;
You give her the money.&lt;br&gt;&lt;&lt;losemoney 5&gt;&gt;
You take a sniff of the unique aroma of freshly brewed coffee.
&lt;&lt;msg $Lucy &quot;Be careful. It&#39;s hot.&quot;&gt;&gt;
You take your time, really enjoying it. Lucy brews a really good coffee.
&lt;&lt;set $You.fatigue -=2&gt;&gt;&lt;&lt;if $You.fatigue lt 0&gt;&gt;&lt;&lt;set $You.fatigue to 0&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;continueon&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;link &quot;Nothing right now.&quot;&gt;&gt;&lt;&lt;replace &quot;#cafefirst&quot;&gt;&gt;
&lt;&lt;msg $Lucy &quot;Too bad.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Maybe later.&quot;&gt;&gt;
&lt;&lt;msg $Lucy &quot;Come back anytime. The coffee is always hot and fresh.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;I&#39;m looking forward to it. My name is Hunter by the way.&quot;&gt;&gt;
You offer her your hand.&lt;br&gt;
She shakes it carefully, keeping her distance. She is all professional.
&lt;&lt;msg $Lucy &quot;I&#39;m &lt;&lt;=$Lucy.callname&gt;&gt;, owner of the Busy Bean.&quot;&gt;&gt;
&lt;&lt;continueon&gt;&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;/span&gt;
&lt;&lt;set $Lucy.known to true&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="89" name="sexshop widgets" tags="widget nobr" position="875,500" size="100,100">&lt;&lt;widget sexshop&gt;&gt;
&lt;&lt;jpg &quot;locations&quot; &quot;sexshop&quot;&gt;&gt;&lt;br&gt;
You are standing in the &#39;Happy Secrets&#39;.
&lt;&lt;if $Christina.known is false&gt;&gt;&lt;&lt;dialog &#39;&#39; true&gt;&gt;&lt;&lt;sexshopintro&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;switch $Christina.status&gt;&gt;
&lt;&lt;case 0&gt;&gt;&lt;&lt;if $Christina.known is true&gt;&gt;$Christina.callname&lt;&lt;else&gt;&gt;The shop clerk&lt;&lt;/if&gt;&gt; smiles a predatory smile as you enter. She is wearing a sexy outfit, comprised of a short skirt that emphasises her great ass, a small vest and cat ears.
&lt;&lt;msg $Christina &quot;Hey there &lt;&lt;yourname $Christina&gt;&gt;. Looking for something specific?&quot;&gt;&gt;
&lt;&lt;/switch&gt;&gt;
&lt;&lt;if $streamadd is false&gt;&gt; &lt;br&gt;There is an advert for models that are willing to join a website where they earn money by livestreaming themselves having doing hardcore or solo scenes.
&lt;&lt;thought &quot;That could be a way to make some money of my slaves without having to let other people use MY property.&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
@@.choice;
&lt;&lt;link &quot;Buy some toys&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;shop&#39;&gt;&gt;&lt;&lt;sextoy_store&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;if $streamadd is false&gt;&gt;&lt;&lt;link &quot;Ask about the ad&quot; &quot;Mall&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;streamadd&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;link &quot;Buy streaming equipment&quot;&gt;&gt;&lt;&lt;dialog &#39;&#39; &#39;event&#39;&gt;&gt;&lt;&lt;streamingshop&gt;&gt;&lt;&lt;/dialog&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
@@
&lt;&lt;/widget&gt;&gt;
/*=======================================================*/
&lt;&lt;widget sexshopintro&gt;&gt;
You enter &#39;Happy Secrets&#39; the sexshop in the Springvale Mall. Although some of the older, more conservative members of the community constantly try to get rid of it, it still has enough supporters to hold on.
&lt;&lt;thought &quot;Maybe the owner also knows some&amp;nbsp;&lt;b&gt; Happy Secrets &lt;/b&gt; &amp;nbsp;about some influential people in the community?&quot;&gt;&gt;
@@.right;&lt;&lt;jpg &quot;Christina&quot; &quot;christina_intro&quot;&gt;&gt;@@
The stores clerk, a sexy woman in a sexy outfit struts around the counter in her ridiciously high heels and saunters over to you.
&lt;&lt;msg $Christina &quot;Hi &lt;&lt;yourname $Christina&gt;&gt;. Can I help you with anything?&quot;&gt;&gt;
She winks knowingly.
&lt;&lt;msg $You &quot;Not right now, I&#39;m just having a look.&quot;&gt;&gt;
She twirls around, letting her skirt fly up and giving you a view of her magnificent ass.
&lt;&lt;msg $Christina &quot;Look all you want, but no touching the goods!&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Do you have a name?&quot;&gt;&gt;
&lt;&lt;msg $Christina &quot;You can call me Mistress. I&#39;ll also accept Goddess or Mylady&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Maybe something more ... relatable?&quot;&gt;&gt;
She looks at you with mock sadness.
&lt;&lt;code &quot;_txtbx&quot;&gt;&gt;&lt;&lt;textbox &quot;$Christina.callname&quot; &quot;Christina&quot;&gt;&gt;&lt;&lt;/code&gt;&gt;
&lt;&lt;msg $Christina &quot;Your loss... Call me &lt;&lt;wiki &#39;_txtbx&#39;&gt;&gt;.&quot;&gt;&gt;

@@.choice;&lt;&lt;link &quot;Continue&quot; &quot;Mall&quot;&gt;&gt;&lt;&lt;set Dialog.close()&gt;&gt;&lt;&lt;set $Christina.callname to &quot;Christina&quot;&gt;&gt;&lt;&lt;set $Christina.known to true&gt;&gt;&lt;&lt;/link&gt;&gt;@@
&lt;&lt;/widget&gt;&gt;
/*=======================================================*/
&lt;&lt;widget streamadd&gt;&gt;
&lt;&lt;msg $You &quot;What about that ad over there?&quot;&gt;&gt;
&lt;&lt;msg $Christina &quot;I&#39;m setting up a porn streaming site and am looking for models. Do you know some girls that would be willing? Maybe a girlfriend...&quot;&gt;&gt;
&lt;&lt;msg $You &quot;I might know one or two girls. How much does it pay?&quot;&gt;&gt;
&lt;&lt;msg $Christina &quot;Depends on how popular the girl gets. Anything between 10 to 100 bucks per streaming session. And as the owner and manager of the site I get 50% of the earnings, non negotiable.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;50%? That&#39;s a lot.&quot;&gt;&gt;
&lt;&lt;msg $Christina &quot;Take it or leave it, honey.&quot;&gt;&gt;
&lt;&lt;thought &quot;It could still be a lot of money... And I&#39;m sure she will be more agreeable once I get to use the spell on her.&quot;&gt;&gt;
&lt;&lt;msg $You &quot;What do I need?&quot;&gt;&gt;
&lt;&lt;msg $Christina &quot;Deciding for your girl? A dominant man, you are, aren&#39;t you?&quot;&gt;&gt;
&lt;&lt;msg $You &quot;Maybe... What do I need to do, though?&quot;&gt;&gt;
&lt;&lt;msg $Christina &quot;I&#39;ll sell you a starterkit, including a camera, software, a decent mike and a few basic toys for 100$. If you invest more money into better equipment the earnings will surely rise.&quot;&gt;&gt;
&lt;&lt;set $streamadd to true&gt;&gt;
&lt;&lt;continueon&gt;&gt;
&lt;&lt;/widget&gt;&gt;
/*=======================================================*/</tw-passagedata></tw-storydata>
	<script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS */
	if(document.documentElement.getAttribute("data-init")==="loading"){!function(window,document,jQuery,undefined){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_slicedToArray=function(){function e(e,t){var r=[],n=!0,a=!1,i=undefined;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},errorPrologRegExp=/^(?:(?:uncaught\s+(?:exception:\s+)?)?\w*(?:error|exception|_err):\s+)+/i,Alert=function(){function e(e,t,r,n){var a="fatal"===e,i="Apologies! "+(a?"A fatal":"An")+" error has occurred.";i+=a?" Aborting.":" You may be able to continue, but some parts may not work properly.",null==t&&null==r||(i+="\n\nError",null!=t&&(i+=" ["+t+"]"),i+=null!=r?": "+r.replace(errorPrologRegExp,"")+".":": unknown error."),"object"===(void 0===n?"undefined":_typeof(n))&&n.stack&&(i+="\n\nStack Trace:\n"+n.stack),window.alert(i)}function t(t,r,n){e(null,t,r,n)}function r(t,r,n){e("fatal",t,r,n)}return function(e){window.onerror=function(n,a,i,o,s){"complete"===document.readyState?t(null,n,s):(r(null,n,s),window.onerror=e,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))}}(window.onerror),Object.freeze(Object.defineProperties({},{error:{value:t},fatal:{value:r}}))}(),Patterns=function(){var e=function(){var e=new Map([[" ","\\u0020"],["\f","\\f"],["\n","\\n"],["\r","\\r"],["\t","\\t"],["\v","\\v"],[" ","\\u00a0"],[" ","\\u1680"],["᠎","\\u180e"],[" ","\\u2000"],[" ","\\u2001"],[" ","\\u2002"],[" ","\\u2003"],[" ","\\u2004"],[" ","\\u2005"],[" ","\\u2006"],[" ","\\u2007"],[" ","\\u2008"],[" ","\\u2009"],[" ","\\u200a"],["\u2028","\\u2028"],["\u2029","\\u2029"],[" ","\\u202f"],[" ","\\u205f"],["　","\\u3000"],["\ufeff","\\ufeff"]]),t=/^\s$/,r="";return e.forEach(function(e,n){t.test(n)||(r+=e)}),r?"[\\s"+r+"]":"\\s"}(),t="\\s"===e?"\\S":e.replace(/^\[/,"[^"),r="[0-9A-Z_a-z\\-\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]",n=r.replace("\\-",""),a=function(){return"("+r+"+)\\(([^\\)\\|\\n]+)\\):|("+r+"+):([^;\\|\\n]+);|((?:\\."+r+"+)+);|((?:#"+r+"+)+);"}();return Object.freeze({space:e,spaceNoTerminator:"[\\u0020\\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",lineTerminator:"[\\n\\r\\u2028\\u2029]",notSpace:t,anyChar:"(?:.|[\\n\\r\\u2028\\u2029])",anyLetter:r,anyLetterStrict:n,identifierFirstChar:"[$A-Z_a-z]",identifierNextChar:"[$0-9A-Z_a-z]",identifier:"[$A-Z_a-z][$0-9A-Z_a-z]*",variableSigil:"[$_]",variable:"[$_][$A-Z_a-z][$0-9A-Z_a-z]*",macroName:"[A-Za-z][\\w-]*|[=-]",templateName:"[A-Za-z][\\w-]*",cssImage:"\\[[<>]?[Ii][Mm][Gg]\\[(?:\\s|\\S)*?\\]\\]+",inlineCss:a,url:"(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+"})}();!function(){!function(e){if(e&&e.prototype&&null==e.prototype.firstElementChild){var t=Node.ELEMENT_NODE;Object.defineProperty(e.prototype,"firstElementChild",{get:function(){for(var e=this.childNodes,r=0;r<e.length;++r){var n=e[r];if(n.nodeType===t)return n}return null}})}}(window.Node||window.Element)}(),function(){function e(e,t){var r=Number.parseInt(e,10)||0;if(r<1)return"";var n=void 0===t?"":String(t);for(""===n&&(n=" ");n.length<r;){var a=n.length,i=r-a;n+=a>i?n.slice(0,i):n}return n.length>r&&(n=n.slice(0,r)),n}var t=function(){function e(e,n){var a=String(e);if(!a)return a;switch(n){case"start":return t.test(a)?a.replace(t,""):a;case"end":return r.test(a)?a.replace(r,""):a;default:throw new Error('_trimString called with incorrect where parameter value: "'+n+'"')}}var t=new RegExp("^"+Patterns.space+Patterns.space+"*"),r=new RegExp(""+Patterns.space+Patterns.space+"*$");return e}();Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,writable:!0,value:function(){function e(){if(null==this)throw new TypeError("Array.prototype.flat called on null or undefined");var t=0===arguments.length?1:Number(arguments[0])||0;return t<1?Array.prototype.slice.call(this):Array.prototype.reduce.call(this,function(r,n){return n instanceof Array?r.push.apply(r,_toConsumableArray(e.call(n,t-1))):r.push(n),r},[])}return e}()}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatMap called on null or undefined");return Array.prototype.map.apply(this,arguments).flat()}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var e=this.length>>>0;if(0===e)return!1;var t=arguments[0],r=Number(arguments[1])||0;for(r<0&&(r=Math.max(0,e+r));r<e;++r){var n=this[r];if(n===t||n!==n&&t!==t)return!0}return!1}}),Object.entries||Object.defineProperty(Object,"entries",{configurable:!0,writable:!0,value:function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)throw new TypeError("Object.entries object parameter must be an object");return Object.keys(e).map(function(t){return[t,e[t]]})}}),Object.fromEntries||Object.defineProperty(Object,"fromEntries",{configurable:!0,writable:!0,value:function(e){return Array.from(e).reduce(function(e,t){if(Object(t)!==t)throw new TypeError("Object.fromEntries iterable parameter must yield objects");return t[0]in e?Object.defineProperty(e,t[0],{configurable:!0,enumerable:!0,writable:!0,value:t[1]}):e[t[0]]=t[1],e},{})}}),Object.getOwnPropertyDescriptors||Object.defineProperty(Object,"getOwnPropertyDescriptors",{configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Object.getOwnPropertyDescriptors object parameter is null or undefined");var t=Object(e);return Reflect.ownKeys(t).reduce(function(e,r){var n=Object.getOwnPropertyDescriptor(t,r);return void 0!==n&&(r in e?Object.defineProperty(e,r,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[r]=n),e},{})}}),Object.values||Object.defineProperty(Object,"values",{configurable:!0,writable:!0,value:function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)throw new TypeError("Object.values object parameter must be an object");return Object.keys(e).map(function(t){return e[t]})}}),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(t,r){if(null==this)throw new TypeError("String.prototype.padStart called on null or undefined");var n=String(this),a=n.length,i=Number.parseInt(t,10);return i<=a?n:e(i-a,r)+n}}),String.prototype.padEnd||Object.defineProperty(String.prototype,"padEnd",{configurable:!0,writable:!0,value:function(t,r){if(null==this)throw new TypeError("String.prototype.padEnd called on null or undefined");var n=String(this),a=n.length,i=Number.parseInt(t,10);return i<=a?n:n+e(i-a,r)}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return t(this,"start")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return t(this,"start")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return t(this,"end")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return t(this,"end")}})}(),function(){function _random(){var e=void 0,t=void 0;switch(arguments.length){case 0:throw new Error("_random called with insufficient parameters");case 1:e=0,t=arguments[0];break;default:e=arguments[0],t=arguments[1]}if(e>t){var r=[t,e];e=r[0],t=r[1]}return Math.floor(_nativeMathRandom()*(t-e+1))+e}function _randomIndex(e,t){var r=void 0,n=void 0;switch(t.length){case 1:r=0,n=e-1;break;case 2:r=0,n=Math.trunc(t[1]);break;default:r=Math.trunc(t[1]),n=Math.trunc(t[2])}return Number.isNaN(r)?r=0:!Number.isFinite(r)||r>=e?r=e-1:r<0&&(r=e+r)<0&&(r=0),Number.isNaN(n)?n=0:!Number.isFinite(n)||n>=e?n=e-1:n<0&&(n=e+n)<0&&(n=e-1),_random(r,n)}function _getCodePointStartAndEnd(e,t){var r=e.charCodeAt(t);if(Number.isNaN(r))return{char:"",start:-1,end:-1};if(r<55296||r>57343)return{char:e.charAt(t),start:t,end:t};if(r>=55296&&r<=56319){var n=t+1;if(n>=e.length)throw new Error("high surrogate without trailing low surrogate");var a=e.charCodeAt(n);if(a<56320||a>57343)throw new Error("high surrogate without trailing low surrogate");return{char:e.charAt(t)+e.charAt(n),start:t,end:n}}if(0===t)throw new Error("low surrogate without leading high surrogate");var i=t-1,o=e.charCodeAt(i);if(o<55296||o>56319)throw new Error("low surrogate without leading high surrogate");return{char:e.charAt(i)+e.charAt(t),start:i,end:t}}var _nativeMathRandom=Math.random;Object.defineProperty(Array,"random",{configurable:!0,writable:!0,value:function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e||!Object.prototype.hasOwnProperty.call(e,"length"))throw new TypeError("Array.random array parameter must be an array or array-lke object");var t=e.length>>>0;if(0!==t){return e[0===arguments.length?_random(0,t-1):_randomIndex(t,Array.prototype.slice.call(arguments,1))]}}}),Object.defineProperty(Array.prototype,"concatUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.concatUnique called on null or undefined");var e=Array.from(this);if(0===arguments.length)return e;var t=Array.prototype.reduce.call(arguments,function(e,t){return e.concat(t)},[]),r=t.length;if(0===r)return e;for(var n=Array.prototype.indexOf,a=Array.prototype.push,i=0;i<r;++i){var o=t[i];-1===n.call(e,o)&&a.call(e,o)}return e}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var e=Array.prototype.indexOf,t=arguments[0],r=Number(arguments[1])||0,n=0;-1!==(r=e.call(this,t,r));)++n,++r;return n}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.delete called on null or undefined");if(0===arguments.length)return[];var e=this.length>>>0;if(0===e)return[];for(var t=Array.prototype.concat.apply([],arguments),r=t.length,n=[],a=0;a<e;++a)for(var i=this[a],o=0;o<r;++o){var s=t[o];if(i===s||i!==i&&s!==s){n.push(a);break}}for(var u=[],l=0,c=n.length;l<c;++l)u[l]=this[n[l]];for(var d=Array.prototype.splice,f=n.length-1;f>=0;--f)d.call(this,n[f],1);return u}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var e=this.length>>>0;if(0===e)return[];for(var t=Array.prototype.splice,r=[].concat(_toConsumableArray(new Set(Array.prototype.concat.apply([],arguments).map(function(t){return t<0?Math.max(0,e+t):t})).values())),n=[].concat(_toConsumableArray(r)).sort(function(e,t){return t-e}),a=[],i=0,o=r.length;i<o;++i)a[i]=this[r[i]];for(var s=0,u=n.length;s<u;++s)t.call(this,n[s],1);return a}}),Object.defineProperty(Array.prototype,"deleteWith",{configurable:!0,writable:!0,value:function(e,t){if(null==this)throw new TypeError("Array.prototype.deleteWith called on null or undefined");if("function"!=typeof e)throw new Error("Array.prototype.deleteWith predicate parameter must be a function");var r=this.length>>>0;if(0===r)return[];for(var n=Array.prototype.splice,a=[],i=[],o=0;o<r;++o)e.call(t,this[o],o,this)&&(i.push(this[o]),a.push(o));for(var s=a.length-1;s>=0;--s)n.call(this,a[s],1);return i}}),Object.defineProperty(Array.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.first called on null or undefined");if(0!=this.length>>>0)return this[0]}}),Object.defineProperty(Array.prototype,"includesAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAll.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var e=0,t=arguments.length;e<t;++e)if(!Array.prototype.some.call(this,function(e){return e===this.val||e!==e&&this.val!==this.val},{val:arguments[e]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"includesAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAny.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var e=0,t=arguments.length;e<t;++e)if(Array.prototype.some.call(this,function(e){return e===this.val||e!==e&&this.val!==this.val},{val:arguments[e]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.last called on null or undefined");var e=this.length>>>0;if(0!==e)return this[e-1]}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var e=this.length>>>0;if(0!==e){var t=0===arguments.length?_random(0,e-1):_randomIndex(e,[].concat(Array.prototype.slice.call(arguments)));return Array.prototype.splice.call(this,t,1)[0]}}}),Object.defineProperty(Array.prototype,"pluckMany",{configurable:!0,writable:!0,value:function(e){if(null==this)throw new TypeError("Array.prototype.pluckMany called on null or undefined");var t=this.length>>>0;if(0===t)return[];var r=Math.trunc(e);if(!Number.isInteger(r))throw new Error("Array.prototype.pluckMany want parameter must be an integer");if(r<1)return[];r>t&&(r=t);var n=Array.prototype.splice,a=[],i=t-1;do{a.push(n.call(this,_random(0,i--),1)[0])}while(a.length<r);return a}}),Object.defineProperty(Array.prototype,"pushUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pushUnique called on null or undefined");var e=arguments.length;if(0===e)return this.length>>>0;for(var t=Array.prototype.indexOf,r=Array.prototype.push,n=0;n<e;++n){var a=arguments[n];-1===t.call(this,a)&&r.call(this,a)}return this.length>>>0}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var e=this.length>>>0;if(0!==e){return this[0===arguments.length?_random(0,e-1):_randomIndex(e,[].concat(Array.prototype.slice.call(arguments)))]}}}),Object.defineProperty(Array.prototype,"randomMany",{configurable:!0,writable:!0,value:function(e){if(null==this)throw new TypeError("Array.prototype.randomMany called on null or undefined");var t=this.length>>>0;if(0===t)return[];var r=Math.trunc(e);if(!Number.isInteger(r))throw new Error("Array.prototype.randomMany want parameter must be an integer");if(r<1)return[];r>t&&(r=t);var n=new Map,a=[],i=t-1;do{var o=void 0;do{o=_random(0,i)}while(n.has(o));n.set(o,!0),a.push(this[o])}while(a.length<r);return a}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var e=this.length>>>0;if(0===e)return this;for(var t=e-1;t>0;--t){var r=Math.floor(_nativeMathRandom()*(t+1));if(t!==r){var n=this[t];this[t]=this[r],this[r]=n}}return this}}),Object.defineProperty(Array.prototype,"unshiftUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.unshiftUnique called on null or undefined");var e=arguments.length;if(0===e)return this.length>>>0;for(var t=Array.prototype.indexOf,r=Array.prototype.unshift,n=0;n<e;++n){var a=arguments[n];-1===t.call(this,a)&&r.call(this,a)}return this.length>>>0}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var e=Array.prototype.slice,t=this,r=e.call(arguments,0);return function(){for(var n=[],a=0,i=0;i<r.length;++i)n.push(r[i]===undefined?arguments[a++]:r[i]);return t.apply(this,n.concat(e.call(arguments,a)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function(e,t,r){var n=Number(e);return Number.isNaN(n)?NaN:n.clamp(t,r)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(e){return 1-(Math.cos(Number(e)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters");var e=Number(arguments[0]),t=Number(arguments[1]);if(e>t){var r=[t,e];e=r[0],t=r[1]}return Math.min(Math.max(this,e),t)}}),RegExp.escape||function(){var e=/[\\^$*+?.()|[\]{}]/g,t=new RegExp(e.source);Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(r){var n=String(r);return n&&t.test(n)?n.replace(e,"\\$&"):n}})}(),function(){var e=/{(\d+)(?:,([+-]?\d+))?}/g,t=new RegExp(e.source);Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(r){function n(e,t,r){if(!t)return e;var n=Math.abs(t)-e.length;if(n<1)return e;var a=String(r).repeat(n);return t<0?e+a:a+e}if(arguments.length<2)return 0===arguments.length?"":r;var a=2===arguments.length&&Array.isArray(arguments[1])?[].concat(_toConsumableArray(arguments[1])):Array.prototype.slice.call(arguments,1);return 0===a.length?r:t.test(r)?(e.lastIndex=0,r.replace(e,function(e,t,r){var i=a[t];if(null==i)return"";for(;"function"==typeof i;)i=i();switch(void 0===i?"undefined":_typeof(i)){case"string":break;case"object":i=JSON.stringify(i);break;default:i=String(i)}return n(i,r?Number.parseInt(r,10):0," ")})):r}})}(),Object.defineProperty(String.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.contains called on null or undefined");return-1!==String.prototype.indexOf.apply(this,arguments)}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var e=String(arguments[0]||"");if(""===e)return 0;for(var t=String.prototype.indexOf,r=e.length,n=Number(arguments[1])||0,a=0;-1!==(n=t.call(this,e,n));)++a,n+=r;return a}}),Object.defineProperty(String.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.first called on null or undefined");return _getCodePointStartAndEnd(String(this),0).char}}),Object.defineProperty(String.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.last called on null or undefined");var e=String(this);return _getCodePointStartAndEnd(e,e.length-1).char}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(e,t,r){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var n=this.length>>>0;if(0===n)return"";var a=Number(e);Number.isSafeInteger(a)?a<0&&(a+=n)<0&&(a=0):a=0,a>n&&(a=n);var i=Number(t);(!Number.isSafeInteger(i)||i<0)&&(i=0);var o=this.slice(0,a);return void 0!==r&&(o+=r),a+i<n&&(o+=this.slice(a+i)),o}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"toLocaleUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");var e=String(this),t=_getCodePointStartAndEnd(e,0),r=t.char,n=t.end;return-1===n?"":r.toLocaleUpperCase()+e.slice(n+1)}}),Object.defineProperty(String.prototype,"toUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toUpperFirst called on null or undefined");var e=String(this),t=_getCodePointStartAndEnd(e,0),r=t.char,n=t.end;return-1===n?"":r.toUpperCase()+e.slice(n+1)}}),Object.defineProperty(Date.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:date)",this.toISOString()]}}),Object.defineProperty(Function.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)","("+this.toString()+")"]}}),Object.defineProperty(Map.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:map)",[].concat(_toConsumableArray(this))]}}),Object.defineProperty(RegExp.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)",this.toString()]}}),Object.defineProperty(Set.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:set)",[].concat(_toConsumableArray(this))]}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(e,t){if("string"!=typeof e)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return["(revive:eval)",[e,t]]}}),Object.defineProperty(JSON,"_real_parse",{value:JSON.parse}),Object.defineProperty(JSON,"parse",{configurable:!0,writable:!0,value:function value(text,reviver){return JSON._real_parse(text,function(key,val){var value=val;if(Array.isArray(value)&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":try{if(Array.isArray(value[1])){var $ReviveData$=value[1][1];value=eval(value[1][0])}else value=eval(value[1])}catch(e){}}else if("string"==typeof value&&"@@revive@@"===value.slice(0,10))try{value=eval(value.slice(10))}catch(e){}if("function"==typeof reviver)try{value=reviver(key,value)}catch(e){}return value})}}),Object.defineProperty(Array.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.contains called on null or undefined");return Array.prototype.includes.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAll called on null or undefined");return Array.prototype.includesAll.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAny called on null or undefined");return Array.prototype.includesAny.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"flatten",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatten called on null or undefined");return Array.prototype.flat.call(this,1/0)}}),Object.defineProperty(String.prototype,"readBracketedList",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.readBracketedList called on null or undefined");for(var e=new RegExp("(?:\\[\\[((?:\\s|\\S)*?)\\]\\])|([^\"'\\s]\\S*)","gm"),t=[],r=void 0;null!==(r=e.exec(this));)r[1]?t.push(r[1]):r[2]&&t.push(r[2]);return t}})}();var Browser=function(){var e=navigator.userAgent.toLowerCase(),t=e.includes("windows phone"),r=Object.freeze({Android:!t&&e.includes("android"),BlackBerry:/blackberry|bb10/.test(e),iOS:!t&&/ip(?:hone|ad|od)/.test(e),Opera:!t&&("object"===_typeof(window.operamini)||e.includes("opera mini")),Windows:t||/iemobile|wpdesktop/.test(e),any:function(){return r.Android||r.BlackBerry||r.iOS||r.Opera||r.Windows}}),n=!r.Windows&&!/khtml|trident|edge/.test(e)&&e.includes("gecko"),a=!e.includes("opera")&&/msie|trident/.test(e),i=a?function(){var t=/(?:msie\s+|rv:)(\d+\.\d)/.exec(e);return t?Number(t[1]):0}():null,o=e.includes("opera")||e.includes(" opr/"),s=o?function(){var t=new RegExp((/khtml|chrome/.test(e)?"opr":"version")+"\\/(\\d+\\.\\d+)"),r=t.exec(e);return r?Number(r[1]):0}():null,u=e.includes("vivaldi");return Object.freeze({userAgent:e,isMobile:r,isGecko:n,isIE:a,ieVersion:i,isOpera:o,operaVersion:s,isVivaldi:u})}(),Has=function(){var e=function(){try{return"function"==typeof document.createElement("audio").canPlayType}catch(e){}return!1}(),t=e&&function(){try{var e=document.createElement("audio").play();return e.catch(function(){}),e instanceof Promise}catch(e){}return!1}(),r=function(){try{return"Blob"in window&&"File"in window&&"FileList"in window&&"FileReader"in window&&!Browser.isMobile.any()&&(!Browser.isOpera||Browser.operaVersion>=15)}catch(e){}return!1}(),n=function(){try{return"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition}catch(e){}return!1}(),a=function(){try{return"MutationObserver"in window&&"function"==typeof window.MutationObserver}catch(e){}return!1}(),i=function(){try{return"performance"in window&&"function"==typeof window.performance.now}catch(e){}return!1}(),o=function(){try{return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof window.DocumentTouch||!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints}catch(e){}return!1}(),s=function(){try{for(var e=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),t=[].concat(_toConsumableArray(e.keys())),r=document.createElement("div"),n=0;n<t.length;++n)if(r.style[t[n]]!==undefined)return e.get(t[n])}catch(e){}return!1}();return Object.freeze({audio:e,audioPromise:t,fileAPI:r,geolocation:n,mutationObserver:a,performance:i,touch:o,transitionEndEvent:s})}(),Visibility=function(){function e(){return Boolean(r&&document[r.hiddenProperty])}function t(){return r&&document[r.stateProperty]||"visible"}var r=function(){try{return Object.freeze([{hiddenProperty:"hidden",stateProperty:"visibilityState",changeEvent:"visibilitychange"},{hiddenProperty:"webkitHidden",stateProperty:"webkitVisibilityState",changeEvent:"webkitvisibilitychange"},{hiddenProperty:"mozHidden",stateProperty:"mozVisibilityState",changeEvent:"mozvisibilitychange"},{hiddenProperty:"msHidden",stateProperty:"msVisibilityState",changeEvent:"msvisibilitychange"}].find(function(e){return e.hiddenProperty in document}))}catch(e){}return null}();return Object.freeze(Object.defineProperties({},{isHidden:{value:e},state:{value:t},hiddenProperty:{value:r.hiddenProperty},stateProperty:{value:r.stateProperty},changeEvent:{value:r.changeEvent}}))}(),_ref3=function(){function e(t){if("object"!==(void 0===t?"undefined":_typeof(t))||null===t)return t;if(t instanceof String)return String(t);if(t instanceof Number)return Number(t);if(t instanceof Boolean)return Boolean(t);if("function"==typeof t.clone)return t.clone(!0);if(t.nodeType&&"function"==typeof t.cloneNode)return t.cloneNode(!0);var r=void 0;return t instanceof Array?r=new Array(t.length):t instanceof Date?r=new Date(t.getTime()):t instanceof Map?(r=new Map,t.forEach(function(t,n){return r.set(n,e(t))})):t instanceof RegExp?r=new RegExp(t):t instanceof Set?(r=new Set,t.forEach(function(t){return r.add(e(t))})):r=Object.create(Object.getPrototypeOf(t)),Object.keys(t).forEach(function(n){return r[n]=e(t[n])}),r}function t(e){for(var t=document.createDocumentFragment(),r=document.createElement("p"),n=void 0;null!==(n=e.firstChild);){if(n.nodeType===Node.ELEMENT_NODE){switch(n.nodeName.toUpperCase()){case"BR":if(null!==n.nextSibling&&n.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===n.nextSibling.nodeName.toUpperCase()){e.removeChild(n.nextSibling),e.removeChild(n),t.appendChild(r),r=document.createElement("p");continue}if(!r.hasChildNodes()){e.removeChild(n);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":r.hasChildNodes()&&(t.appendChild(r),r=document.createElement("p")),t.appendChild(n);continue}}r.appendChild(n)}r.hasChildNodes()&&t.appendChild(r),e.appendChild(t)}function r(){try{return document.activeElement||null}catch(e){return null}}function n(e,t,r){var n="object"===(void 0===e?"undefined":_typeof(e))?e:document.getElementById(e);if(null==n)return null;var a=Array.isArray(t)?t:[t];jQuery(n).empty();for(var i=0,o=a.length;i<o;++i)if(Story.has(a[i]))return new Wikifier(n,Story.get(a[i]).processText().trim()),n;if(null!=r){var s=String(r).trim();""!==s&&new Wikifier(n,s)}return n}function a(e,t,r){var n=jQuery(document.createElement("div")),a=jQuery(document.createElement("button")),i=jQuery(document.createElement("pre")),o=L10n.get("errorTitle")+": "+(t||"unknown error");return a.addClass("error-toggle").ariaClick({label:L10n.get("errorToggle")},function(){a.hasClass("enabled")?(a.removeClass("enabled"),i.attr({"aria-hidden":!0,hidden:"hidden"})):(a.addClass("enabled"),i.removeAttr("aria-hidden hidden"))}).appendTo(n),jQuery(document.createElement("span")).addClass("error").text(o).appendTo(n),jQuery(document.createElement("code")).text(r).appendTo(i),i.addClass("error-source").attr({"aria-hidden":!0,hidden:"hidden"}).appendTo(n),n.addClass("error-view").appendTo(e),console.warn(o+"\n\t"+r.replace(/\n/g,"\n\t")),!1}function i(e,t){var r=i;switch(void 0===e?"undefined":_typeof(e)){case"number":if(Number.isNaN(e))return t;break;case"object":if(null===e)return t;if(Array.isArray(e))return e.map(function(e){return r(e,t)}).join(", ");if(e instanceof Set)return[].concat(_toConsumableArray(e)).map(function(e){return r(e,t)}).join(", ");if(e instanceof Map){return"{ "+[].concat(_toConsumableArray(e)).map(function(e){var n=_slicedToArray(e,2),a=n[0],i=n[1];return r(a,t)+" → "+r(i,t)}).join(", ")+" }"}return e instanceof Date?e.toLocaleString():"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e);case"function":case"undefined":return t}return String(e)}return Object.freeze(Object.defineProperties({},{clone:{value:e},convertBreaks:{value:t},safeActiveElement:{value:r},setPageElement:{value:n},throwError:{value:a},toStringOrDefault:{value:i}}))
}(),clone=_ref3.clone,convertBreaks=_ref3.convertBreaks,safeActiveElement=_ref3.safeActiveElement,setPageElement=_ref3.setPageElement,throwError=_ref3.throwError,toStringOrDefault=_ref3.toStringOrDefault;!function(){function e(e){13!==e.which&&32!==e.which||(e.preventDefault(),jQuery(safeActiveElement()||this).trigger("click"))}function t(e){return function(){var t=jQuery(this);t.ariaIsDisabled()||(t.is("[aria-pressed]")&&t.attr("aria-pressed","true"===t.attr("aria-pressed")?"false":"true"),e.apply(this,arguments))}}function r(e){return t(function(){jQuery(this).off(".aria-clickable").removeAttr("tabindex aria-controls aria-pressed").not("a,button").removeAttr("role").end().filter("button").prop("disabled",!0),e.apply(this,arguments)})}jQuery.fn.extend({ariaClick:function(n,a){if(0===this.length||0===arguments.length)return this;var i=n,o=a;return null==o&&(o=i,i=undefined),i=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,controls:undefined,pressed:undefined,label:undefined},i),"string"!=typeof i.namespace?i.namespace="":"."!==i.namespace[0]&&(i.namespace="."+i.namespace),"boolean"==typeof i.pressed&&(i.pressed=i.pressed?"true":"false"),this.filter("button").prop("type","button"),this.not("a,button").attr("role","button"),this.attr("tabindex",0),null!=i.controls&&this.attr("aria-controls",i.controls),null!=i.pressed&&this.attr("aria-pressed",i.pressed),null!=i.label&&this.attr({"aria-label":i.label,title:i.label}),this.not("button").on("keypress.aria-clickable"+i.namespace,i.selector,e),this.on("click.aria-clickable"+i.namespace,i.selector,i.data,i.one?r(o):t(o)),this},ariaDisabled:function(e){if(0===this.length||0===arguments.length)return this;var t=this.not("button,fieldset,input,menuitem,optgroup,option,select,textarea"),r=this.filter("button,fieldset,input,menuitem,optgroup,option,select,textarea");return e?(t.each(function(){this.setAttribute("disabled",""),this.setAttribute("aria-disabled","")}),r.each(function(){this.disabled=!0,this.setAttribute("aria-disabled","")})):(t.each(function(){this.removeAttribute("disabled"),this.removeAttribute("aria-disabled")}),r.each(function(){this.disabled=!1,this.removeAttribute("aria-disabled")})),this},ariaIsDisabled:function(){return this.is("[disabled]")}})}(),function(){jQuery.extend({wikiWithOptions:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(0!==r.length){var a=document.createDocumentFragment();r.forEach(function(t){return new Wikifier(a,t,e)});var i=[].concat(_toConsumableArray(a.querySelectorAll(".error"))).map(function(e){return e.textContent.replace(errorPrologRegExp,"")});if(i.length>0)throw new Error(i.join("; "))}},wiki:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.wikiWithOptions.apply(this,[undefined].concat(t))}}),jQuery.fn.extend({wikiWithOptions:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(0===this.length||0===r.length)return this;var a=document.createDocumentFragment();return r.forEach(function(t){return new Wikifier(a,t,e)}),this.append(a),this},wiki:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.wikiWithOptions.apply(this,[undefined].concat(t))}})}();var Util=function(){function e(e){if(e instanceof Array)return Object.freeze(e.reduce(function(e,t,r){return e[t]=r,e},Object.create(null)));if(e instanceof Object)return Object.freeze(Object.assign(Object.create(null),e));throw new TypeError("Util.toEnum obj parameter must be an array or generic object")}function t(e){return Object.prototype.toString.call(e).slice(8,-1)}function r(e){if(null===e)return"null";var t=void 0===e?"undefined":_typeof(e);return"object"===t?Object.prototype.toString.call(e).slice(8,-1):t}function n(e){var t=void 0;switch(void 0===e?"undefined":_typeof(e)){case"number":t=e;break;case"string":t=Number(e);break;default:return!1}return!Number.isNaN(t)&&Number.isFinite(t)}function a(e){return"boolean"==typeof e||"string"==typeof e&&("true"===e||"false"===e)}function i(e,t){return e===t||e!==e&&t!==t}function o(e){var t=String(e).trim(),r=t.replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase();return v.test(r)?t.replace(m,"").replace(/[_\s\u2013\u2014-]+/g,"-"):r}function s(e){if(null==e)return"";var t=String(e);return t&&b.test(t)?t.replace(y,function(e){return w[e]}):t}function u(e){if(null==e)return"";var t=String(e);return t&&S.test(t)?t.replace(k,function(e){return E[e.toLowerCase()]}):t}function l(e,t){var r=String(e),n=Math.trunc(t),a=r.charCodeAt(n);if(Number.isNaN(a))return{char:"",start:-1,end:-1};var i={char:r.charAt(n),start:n,end:n};if(a<55296||a>57343)return i;if(a>=55296&&a<=56319){var o=n+1;if(o>=r.length)return i;var s=r.charCodeAt(o);return s<56320||s>57343?i:(i.char=i.char+r.charAt(o),i.end=o,i)}if(0===n)return i;var u=n-1,l=r.charCodeAt(u);return l<55296||l>56319?i:(i.char=r.charAt(u)+i.char,i.start=u,i)}function c(){return j.now()}function d(e){var t=x.exec(String(e));if(null===t)throw new SyntaxError('invalid time value syntax: "'+e+'"');var r=Number(t[1]);if(1===t[2].length&&(r*=1e3),Number.isNaN(r)||!Number.isFinite(r))throw new RangeError('invalid time value: "'+e+'"');return r}function f(e){if("number"!=typeof e||Number.isNaN(e)||!Number.isFinite(e)){var r=void 0;switch(void 0===e?"undefined":_typeof(e)){case"string":r='"'+e+'"';break;case"number":r=String(e);break;default:r=t(e)}throw new Error("invalid milliseconds: "+r)}return e+"ms"}function p(e){if(!e.includes("-"))switch(e){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return e}return("-ms-"===e.slice(0,4)?e.slice(1):e).split("-").map(function(e,t){return 0===t?e:e.toUpperFirst()}).join("")}function h(e){var t=document.createElement("a"),r=Object.create(null);t.href=e,t.search&&t.search.replace(/^\?/,"").splitOrEmpty(/(?:&(?:amp;)?|;)/).forEach(function(e){var t=e.split("="),n=_slicedToArray(t,2),a=n[0],i=n[1];r[a]=i});var n=t.host&&"/"!==t.pathname[0]?"/"+t.pathname:t.pathname;return{href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:t.port,path:""+n+t.search,pathname:n,query:t.search,search:t.search,queries:r,searches:r,hash:t.hash}}function g(e,t,r){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)throw new Error("Util.newExceptionFrom original parameter must be an object");if("function"!=typeof t)throw new Error("Util.newExceptionFrom exceptionType parameter must be an error type constructor");var n=new t(e.message);void 0!==e.name&&(n.name=e.name),void 0!==e.code&&(n.code=e.code),void 0!==e.columnNumber&&(n.columnNumber=e.columnNumber),void 0!==e.description&&(n.description=e.description),void 0!==e.fileName&&(n.fileName=e.fileName),void 0!==e.lineNumber&&(n.lineNumber=e.lineNumber),void 0!==e.number&&(n.number=e.number),void 0!==e.stack&&(n.stack=e.stack);var a=void 0===r?"undefined":_typeof(r);if("undefined"!==a)if("object"===a&&null!==r)Object.assign(n,r);else{if("string"!==a)throw new Error("Util.newExceptionFrom override parameter must be an object or string");n.message=r}return n}var m=/[\x00-\x1f"#$%&'*+,\/:;<=>?\\^`|\x7f-\x9f]+/g,v=/^-*$/,y=/[&<>"'`]/g,b=new RegExp(y.source),w=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"}),k=/&(?:amp|#38|#x26|lt|#60|#x3c|gt|#62|#x3e|quot|#34|#x22|apos|#39|#x27|#96|#x60);/gi,S=new RegExp(k.source,"i"),E=Object.freeze({"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3c;":"<","&gt;":">","&#62;":">","&#x3e;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"}),j=Has.performance?performance:Date,x=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/;return Object.freeze(Object.defineProperties({},{toEnum:{value:e},toStringTag:{value:t},getType:{value:r},isNumeric:{value:n},isBoolean:{value:a},sameValueZero:{value:i},slugify:{value:o},escape:{value:s},unescape:{value:u},charAndPosAt:{value:l},fromCssTime:{value:d},toCssTime:{value:f},fromCssProperty:{value:p},parseUrl:{value:h},newExceptionFrom:{value:g},now:{value:c},random:{value:Math.random},entityEncode:{value:s},entityDecode:{value:u},evalExpression:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),SimpleStore=function(){function e(e,n){if(r)return r.create(e,n);for(var a=0;a<t.length;++a)if(t[a].init(e,n))return r=t[a],r.create(e,n);throw new Error("no valid storage adapters found")}var t=[],r=null;return Object.freeze(Object.defineProperties({},{adapters:{value:t},create:{value:e}}))}();SimpleStore.adapters.push(function(){function e(){function e(e){try{var t=window[e],r="_sc_"+String(Date.now());t.setItem(r,r);var n=t.getItem(r)===r;return t.removeItem(r),n}catch(e){}return!1}return r=e("localStorage")&&e("sessionStorage")}function t(e,t){if(!r)throw new Error("adapter not initialized");return new n(e,t)}var r=!1,n=function(){function e(t,r){_classCallCheck(this,e);var n=t+".",a=null,i=null;r?(a=window.localStorage,i="localStorage"):(a=window.sessionStorage,i="sessionStorage"),Object.defineProperties(this,{_engine:{value:a},_prefix:{value:n},_prefixRe:{value:new RegExp("^"+RegExp.escape(n))},name:{value:i},id:{value:t},persistent:{value:!!r}})}return _createClass(e,[{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){for(var e=[],t=0;t<this._engine.length;++t){var r=this._engine.key(t);this._prefixRe.test(r)&&e.push(r.replace(this._prefixRe,""))}return e}},{key:"has",value:function(e){return!("string"!=typeof e||!e)&&this._engine.hasOwnProperty(this._prefix+e)}},{key:"get",value:function(t){if("string"!=typeof t||!t)return null;var r=this._engine.getItem(this._prefix+t);return null==r?null:e._deserialize(r)}},{key:"set",value:function(t,r){if("string"!=typeof t||!t)return!1;try{this._engine.setItem(this._prefix+t,e._serialize(r))}catch(e){if(/quota.?(?:exceeded|reached)/i.test(e.name+e.message))throw Util.newExceptionFrom(e,Error,this.name+" quota exceeded");throw e}return!0}},{key:"delete",value:function(e){return!("string"!=typeof e||!e)&&(this._engine.removeItem(this._prefix+e),!0)}},{key:"clear",value:function(){for(var e=this.keys(),t=0,r=e.length;t<r;++t)this.delete(e[t]);return!0}},{key:"length",get:function(){return this.keys().length}}],[{key:"_serialize",value:function(e){return LZString.compressToUTF16(JSON.stringify(e))}},{key:"_deserialize",value:function(e){return JSON.parse(LZString.decompressFromUTF16(e))}}]),e}();return Object.freeze(Object.defineProperties({},{init:{value:e},create:{value:t}}))}()),SimpleStore.adapters.push(function(){function e(e){try{var t="_sc_"+String(Date.now());o._setCookie(t,o._serialize(t),undefined),i=o._deserialize(o._getCookie(t))===t,o._setCookie(t,undefined,a)}catch(e){i=!1}return i&&r(e),i}function t(e,t){if(!i)throw new Error("adapter not initialized");return new o(e,t)}function r(e){if(""!==document.cookie)for(var t=e+".",r=new RegExp("^"+RegExp.escape(t)),i=e+"!.",s=e+"*.",u=/\.(?:state|rcWarn)$/,l=document.cookie.split(/;\s*/),c=0;c<l.length;++c){var d=l[c].split("="),f=decodeURIComponent(d[0]);if(r.test(f)){var p=decodeURIComponent(d[1]);""!==p&&function(){var e=!u.test(f);o._setCookie(f,undefined,a),o._setCookie(f.replace(r,function(){return e?i:s}),p,e?n:undefined)}()}}}var n="Tue, 19 Jan 2038 03:14:07 GMT",a="Thu, 01 Jan 1970 00:00:00 GMT",i=!1,o=function(){function e(t,r){_classCallCheck(this,e);var n=t+(r?"!":"*")+".";Object.defineProperties(this,{_prefix:{value:n},_prefixRe:{value:new RegExp("^"+RegExp.escape(n))},name:{value:"cookie"},id:{value:t},persistent:{value:!!r}})}return _createClass(e,[{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){if(""===document.cookie)return[];for(var e=document.cookie.split(/;\s*/),t=[],r=0;r<e.length;++r){var n=e[r].split("="),a=decodeURIComponent(n[0]);if(this._prefixRe.test(a)){""!==decodeURIComponent(n[1])&&t.push(a.replace(this._prefixRe,""))}}return t}},{key:"has",value:function(t){return!("string"!=typeof t||!t)&&null!==e._getCookie(this._prefix+t)}},{key:"get",value:function(t){if("string"!=typeof t||!t)return null;var r=e._getCookie(this._prefix+t);return null===r?null:e._deserialize(r)}},{key:"set",value:function(t,r){if("string"!=typeof t||!t)return!1;try{if(e._setCookie(this._prefix+t,e._serialize(r),this.persistent?n:undefined),!this.has(t))throw new Error("unknown validation error during set")}catch(e){throw Util.newExceptionFrom(e,Error,"cookie error: "+e.message)}return!0}},{key:"delete",value:function(t){if("string"!=typeof t||!t||!this.has(t))return!1;try{if(e._setCookie(this._prefix+t,undefined,a),this.has(t))throw new Error("unknown validation error during delete")}catch(e){throw Util.newExceptionFrom(e,Error,"cookie error: "+e.message)}return!0}},{key:"clear",value:function(){for(var e=this.keys(),t=0,r=e.length;t<r;++t)this.delete(e[t]);return!0}},{key:"length",get:function(){return this.keys().length}}],[{key:"_getCookie",value:function(e){if(!e||""===document.cookie)return null;for(var t=document.cookie.split(/;\s*/),r=0;r<t.length;++r){var n=t[r].split("=");if(e===decodeURIComponent(n[0])){return decodeURIComponent(n[1])||null}}return null}},{key:"_setCookie",value:function(e,t,r){if(e){var n=encodeURIComponent(e)+"=";null!=t&&(n+=encodeURIComponent(t)),null!=r&&(n+="; expires="+r),n+="; path=/",document.cookie=n}}},{key:"_serialize",value:function(e){return LZString.compressToBase64(JSON.stringify(e))}},{key:"_deserialize",value:function(e){return JSON.parse(LZString.decompressFromBase64(e))}}]),e}();return Object.freeze(Object.defineProperties({},{init:{value:e},create:{value:t}}))}());var DebugView=function(){return function(){function e(t,r,n,a){_classCallCheck(this,e),Object.defineProperties(this,{parent:{value:t},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:a,"aria-label":a,"data-type":null!=r?r:"","data-name":null!=n?n:""}).addClass("debug"),jQuery(this.break).addClass("debug hidden"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(e,[{key:"append",value:function(e){return jQuery(this.view).append(e),this}},{key:"modes",value:function(e){if(null==e){var t={};return this.view.className.splitOrEmpty(/\s+/).forEach(function(e){"debug"!==e&&(t[e]=!0)}),t}if("object"===(void 0===e?"undefined":_typeof(e)))return Object.keys(e).forEach(function(t){this[e[t]?"addClass":"removeClass"](t)},jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}},{key:"remove",value:function(){var e=jQuery(this.view);this.view.hasChildNodes()&&e.contents().appendTo(this.parent),e.remove(),jQuery(this.break).remove()}},{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(e){this.view.setAttribute("data-type",null!=e?e:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(e){this.view.setAttribute("data-name",null!=e?e:"")}},{key:"title",get:function(){return this.view.title},set:function(e){this.view.title=e}}],[{key:"isEnabled",value:function(){return"enabled"===jQuery(document.documentElement).attr("data-debug-view")}},{key:"enable",value:function(){jQuery(document.documentElement).attr("data-debug-view","enabled"),jQuery.event.trigger(":debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeAttr("data-debug-view"),jQuery.event.trigger(":debugviewupdate")}},{key:"toggle",value:function(){"enabled"===jQuery(document.documentElement).attr("data-debug-view")?e.disable():e.enable()}}]),e}()}(),PRNGWrapper=function(){return function(){function e(t,r){_classCallCheck(this,e),Object.defineProperties(this,new Math.seedrandom(t,r,function(e,t){return{_prng:{value:e},seed:{writable:!0,value:t},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this._prng()}}}}))}return _createClass(e,null,[{key:"marshal",value:function(e){if(!e||!e.hasOwnProperty("seed")||!e.hasOwnProperty("pull"))throw new Error("PRNG is missing required data");return{seed:e.seed,pull:e.pull}}},{key:"unmarshal",value:function(t){if(!t||!t.hasOwnProperty("seed")||!t.hasOwnProperty("pull"))throw new Error("PRNG object is missing required data");for(var r=new e(t.seed,!1),n=t.pull;n>0;--n)r.random();return r}}]),e}()}(),StyleWrapper=function(){var e=new RegExp(Patterns.cssImage,"g"),t=new RegExp(Patterns.cssImage);return function(){function r(e){if(_classCallCheck(this,r),null==e)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:e}})}return _createClass(r,[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(e){this.clear(),this.add(e)}},{key:"add",value:function(r){var n=r;t.test(n)&&(e.lastIndex=0,n=n.replace(e,function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup({source:e,matchStart:0});if(t.hasOwnProperty("error")||t.pos<e.length)return e;var r=t.source;if("data:"!==r.slice(0,5)&&Story.has(r)){var n=Story.get(r);n.tags.includes("Twine.image")&&(r=n.text.trim())}return'url("'+r.replace(/"/g,"%22")+'")'})),this.style.styleSheet?this.style.styleSheet.cssText+=n:this.style.appendChild(document.createTextNode(n))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}]),r}()}(),Diff=function(){function e(t,n){for(var a=Object.prototype.toString,i=t instanceof Array,o=[].concat(Object.keys(t),Object.keys(n)).sort().filter(function(e,t,r){return 0===t||r[t-1]!==e}),s={},u=void 0,l=function(e){return e===u},c=0,d=o.length;c<d;++c){var f=o[c],p=t[f],h=n[f];if(t.hasOwnProperty(f))if(n.hasOwnProperty(f)){if(p===h)continue;if((void 0===p?"undefined":_typeof(p))===(void 0===h?"undefined":_typeof(h)))if("function"==typeof p)p.toString()!==h.toString()&&(s[f]=[r.Copy,h]);else if("object"!==(void 0===p?"undefined":_typeof(p))||null===p)s[f]=[r.Copy,h];else{var g=a.call(p),m=a.call(h);if(g===m)if(p instanceof Date)Number(p)!==Number(h)&&(s[f]=[r.Copy,clone(h)]);else if(p instanceof Map)s[f]=[r.Copy,clone(h)];else if(p instanceof RegExp)p.toString()!==h.toString()&&(s[f]=[r.Copy,clone(h)]);else if(p instanceof Set)s[f]=[r.Copy,clone(h)];else if("[object Object]"!==g)s[f]=[r.Copy,clone(h)];else{var v=e(p,h);null!==v&&(s[f]=v)}else s[f]=[r.Copy,clone(h)]}else s[f]=[r.Copy,"object"!==(void 0===h?"undefined":_typeof(h))||null===h?h:clone(h)]}else if(i&&Util.isNumeric(f)){var y=Number(f);if(!u){u="";do{u+="~"}while(o.some(l));s[u]=[r.SpliceArray,y,y]}y<s[u][1]&&(s[u][1]=y),y>s[u][2]&&(s[u][2]=y)}else s[f]=r.Delete;else s[f]=[r.Copy,"object"!==(void 0===h?"undefined":_typeof(h))||null===h?h:clone(h)]}return Object.keys(s).length>0?s:null}function t(e,n){for(var a=Object.keys(n||{}),i=clone(e),o=0,s=a.length;o<s;++o){var u=a[o],l=n[u];if(l===r.Delete)delete i[u];else if(l instanceof Array)switch(l[0]){case r.SpliceArray:i.splice(l[1],l[2]-l[1]+1);break;case r.Copy:i[u]=clone(l[1]);break;case r.CopyDate:i[u]=new Date(l[1])}else i[u]=t(i[u],l)}return i}var r=Util.toEnum({Delete:0,SpliceArray:1,Copy:2,CopyDate:3});return Object.freeze(Object.defineProperties({},{Op:{value:r},diff:{value:e},patch:{value:t}}))}(),L10n=function(){function e(){r()}function t(e,t){if(!e)return"";var r=function(e){var t=void 0;return e.some(function(e){return!!l10nStrings.hasOwnProperty(e)&&(t=e,!0)}),t}(Array.isArray(e)?e:[e]);if(!r)return"";for(var i=l10nStrings[r],o=0;a.test(i);){if(++o>50)throw new Error("L10n.get exceeded maximum replacement iterations, probable infinite loop");n.lastIndex=0,i=i.replace(n,function(e){var r=e.slice(1,-1);return t&&t.hasOwnProperty(r)?t[r]:l10nStrings.hasOwnProperty(r)?l10nStrings[r]:void 0})}return i}function r(){strings&&Object.keys(strings).length>0&&Object.keys(l10nStrings).forEach(function(e){try{var t=void 0;switch(e){case"identity":t=strings.identity;break;case"aborting":t=strings.aborting;break;case"cancel":t=strings.cancel;break;case"close":t=strings.close;break;case"ok":t=strings.ok;break;case"errorTitle":t=strings.errors.title;break;case"errorNonexistentPassage":t=strings.errors.nonexistentPassage;break;case"errorSaveMissingData":t=strings.errors.saveMissingData;break;case"errorSaveIdMismatch":t=strings.errors.saveIdMismatch;break;case"warningDegraded":t=strings.warnings.degraded;break;case"debugViewTitle":t=strings.debugView.title;break;case"debugViewToggle":t=strings.debugView.toggle;break;case"uiBarToggle":t=strings.uiBar.toggle;break;case"uiBarBackward":t=strings.uiBar.backward;break;case"uiBarForward":t=strings.uiBar.forward;break;case"uiBarJumpto":t=strings.uiBar.jumpto;break;case"jumptoTitle":t=strings.jumpto.title;break;case"jumptoTurn":t=strings.jumpto.turn;break;case"jumptoUnavailable":t=strings.jumpto.unavailable;break;case"savesTitle":t=strings.saves.title;break;case"savesDisallowed":t=strings.saves.disallowed;break;case"savesIncapable":t=strings.saves.incapable;break;case"savesLabelAuto":t=strings.saves.labelAuto;break;case"savesLabelDelete":t=strings.saves.labelDelete;break;case"savesLabelExport":t=strings.saves.labelExport;break;case"savesLabelImport":t=strings.saves.labelImport;break;case"savesLabelLoad":t=strings.saves.labelLoad;break;case"savesLabelClear":t=strings.saves.labelClear;break;case"savesLabelSave":t=strings.saves.labelSave;break;case"savesLabelSlot":t=strings.saves.labelSlot;break;case"savesUnavailable":t=strings.saves.unavailable;break;case"savesUnknownDate":t=strings.saves.unknownDate;break;case"settingsTitle":t=strings.settings.title;break;case"settingsOff":t=strings.settings.off;break;case"settingsOn":t=strings.settings.on;break;case"settingsReset":t=strings.settings.reset;break;case"restartTitle":t=strings.restart.title;break;case"restartPrompt":t=strings.restart.prompt;break;case"shareTitle":t=strings.share.title;break;case"autoloadTitle":t=strings.autoload.title;break;case"autoloadCancel":t=strings.autoload.cancel;break;case"autoloadOk":t=strings.autoload.ok;break;case"autoloadPrompt":t=strings.autoload.prompt;break;case"macroBackText":t=strings.macros.back.text;break;case"macroReturnText":t=strings.macros.return.text}t&&(l10nStrings[e]=t.replace(/%\w+%/g,function(e){return"{"+e.slice(1,-1)+"}"}))}catch(e){}})}var n=/\{\w+\}/g,a=new RegExp(n.source);return Object.freeze(Object.defineProperties({},{init:{value:e},get:{value:t}}))}(),strings={errors:{},warnings:{},debugView:{},uiBar:{},jumpto:{},saves:{},settings:{},restart:{},share:{},autoload:{},macros:{back:{},return:{}}},l10nStrings={identity:"game",aborting:"Aborting",cancel:"Cancel",close:"Close",ok:"OK",errorTitle:"Error",errorToggle:"Toggle the error view",errorNonexistentPassage:'the passage "{passage}" does not exist',errorSaveMissingData:"save is missing required data. Either the loaded file is not a save or the save has become corrupted",errorSaveIdMismatch:"save is from the wrong {identity}",_warningIntroLacking:"Your browser either lacks or has disabled",_warningOutroDegraded:", so this {identity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningNoWebStorage:"{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}",warningDegraded:"{_warningIntroLacking} some of the capabilities required by this {identity}{_warningOutroDegraded}",debugBarToggle:"Toggle the debug bar",debugBarNoWatches:"— no watches set —",debugBarAddWatch:"Add watch",debugBarDeleteWatch:"Delete watch",debugBarWatchAll:"Watch all",debugBarWatchNone:"Delete all",debugBarLabelAdd:"Add",debugBarLabelWatch:"Watch",debugBarLabelTurn:"Turn",debugBarLabelViews:"Views",debugBarViewsToggle:"Toggle the debug views",debugBarWatchToggle:"Toggle the watch panel",uiBarToggle:"Toggle the UI bar",uiBarBackward:"Go backward within the {identity} history",uiBarForward:"Go forward within the {identity} history",uiBarJumpto:"Jump to a specific point within the {identity} history",jumptoTitle:"Jump To",jumptoTurn:"Turn",jumptoUnavailable:"No jump points currently available…",savesTitle:"Saves",savesDisallowed:"Saving has been disallowed on this passage.",savesIncapable:"{_warningIntroLacking} the capabilities required to support saves, so saves have been disabled for this session.",savesLabelAuto:"Autosave",savesLabelDelete:"Delete",savesLabelExport:"Save to Disk…",savesLabelImport:"Load from Disk…",savesLabelLoad:"Load",savesLabelClear:"Delete All",savesLabelSave:"Save",savesLabelSlot:"Slot",savesUnavailable:"No save slots found…",savesUnknownDate:"unknown",settingsTitle:"Settings",settingsOff:"Off",settingsOn:"On",settingsReset:"Reset to Defaults",restartTitle:"Restart",restartPrompt:"Are you sure that you want to restart? Unsaved progress will be lost.",shareTitle:"Share",autoloadTitle:"Autoload",autoloadCancel:"Go to start",autoloadOk:"Load autosave",autoloadPrompt:"An autosave exists. Load it now or go to the start?",macroBackText:"Back",macroReturnText:"Return"},Config=function(){function e(){throw new Error("Config.history.mode has been deprecated and is no longer used by SugarCube, please remove it from your code")}function t(){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")}var r=!1,n=!1,a=!1,i=0,o=!0,s=!0,u=!0,l=100,c=!0,d=1e3,f=void 0,p=void 0,h=!1,g=!1,m=void 0,v=void 0,y=void 0,b=void 0,w=void 0,k="untitled-story",S=void 0,E=void 0,j=void 0,x=8,O=void 0,T=800,C=!0;return Object.freeze({get debug(){return r},set debug(e){r=Boolean(e)},get addVisitedLinkClass(){return n},set addVisitedLinkClass(e){n=Boolean(e)},get cleanupWikifierOutput(){return a},set cleanupWikifierOutput(e){a=Boolean(e)},get loadDelay(){return i},set loadDelay(e){if(!Number.isSafeInteger(e)||e<0)throw new RangeError("Config.loadDelay must be a non-negative integer");i=e},audio:Object.freeze({get pauseOnFadeToZero(){return o},set pauseOnFadeToZero(e){o=Boolean(e)},get preloadMetadata(){return s},set preloadMetadata(e){s=Boolean(e)}}),history:Object.freeze({get controls(){return u},set controls(e){if((u=Boolean(e))&&1===l)throw u=!1,new Error("Config.history.controls must be false when Config.history.maxStates is 1")},get maxStates(){return l},set maxStates(e){if(!Number.isSafeInteger(e)||e<0)throw new RangeError("Config.history.maxStates must be a non-negative integer");l=e,u&&1===e&&(u=!1)},get mode(){e()},set mode(t){e()},get tracking(){t()},set tracking(e){t()}}),macros:Object.freeze({get ifAssignmentError(){return c},set ifAssignmentError(e){c=Boolean(e)},get maxLoopIterations(){return d},set maxLoopIterations(e){if(!Number.isSafeInteger(e)||e<0)throw new RangeError("Config.macros.maxLoopIterations must be a non-negative integer");d=e}}),navigation:Object.freeze({get override(){return f},set override(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.navigation.override must be a function or null/undefined (received: "+Util.getType(e)+")");f=e}}),passages:Object.freeze({get descriptions(){return p},set descriptions(e){if(null!=e){var t=Util.getType(e);if("boolean"!==t&&"Object"!==t&&"function"!==t)throw new TypeError("Config.passages.descriptions must be a boolean, object, function, or null/undefined (received: "+t+")")}p=e},get displayTitles(){return h},set displayTitles(e){h=Boolean(e)},get nobr(){return g},set nobr(e){g=Boolean(e)},get onProcess(){return v},set onProcess(e){if(null!=e){var t=Util.getType(e);if("function"!==t)throw new TypeError("Config.passages.onProcess must be a function or null/undefined (received: "+t+")")}v=e},get start(){return m},set start(e){if(null!=e){var t=Util.getType(e);if("string"!==t)throw new TypeError("Config.passages.start must be a string or null/undefined (received: "+t+")")}m=e},get transitionOut(){return y},set transitionOut(e){if(null!=e){var t=Util.getType(e);if("string"!==t&&("number"!==t||!Number.isSafeInteger(e)||e<0))throw new TypeError("Config.passages.transitionOut must be a string, non-negative integer, or null/undefined (received: "+t+")")}y=e}}),saves:Object.freeze({get autoload(){return b},set autoload(e){if(null!=e){var t=Util.getType(e);if("boolean"!==t&&"string"!==t&&"function"!==t)throw new TypeError("Config.saves.autoload must be a boolean, string, function, or null/undefined (received: "+t+")")}b=e},get autosave(){return w},set autosave(e){if(null!=e){var t=Util.getType(e);if("string"===t)return void(w=[e]);if("boolean"!==t&&("Array"!==t||!e.every(function(e){return"string"==typeof e}))&&"function"!==t)throw new TypeError("Config.saves.autosave must be a boolean, Array of strings, function, or null/undefined (received: "+t+("Array"===t?" of mixed":"")+")")}w=e},get id(){return k},set id(e){if("string"!=typeof e||""===e)throw new TypeError("Config.saves.id must be a non-empty string (received: "+Util.getType(e)+")");k=e},get isAllowed(){return S},set isAllowed(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.saves.isAllowed must be a function or null/undefined (received: "+Util.getType(e)+")");S=e},get onLoad(){return E},set onLoad(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.saves.onLoad must be a function or null/undefined (received: "+Util.getType(e)+")");E=e},get onSave(){return j},set onSave(e){if(!(null==e||e instanceof Function))throw new TypeError("Config.saves.onSave must be a function or null/undefined (received: "+Util.getType(e)+")");j=e},get slots(){return x},set slots(e){if(!Number.isSafeInteger(e)||e<0)throw new RangeError("Config.saves.slots must be a non-negative integer");x=e},get version(){return O},set version(e){O=e}}),ui:Object.freeze({get stowBarInitially(){return T},set stowBarInitially(e){var t=Util.getType(e);if("boolean"!==t&&("number"!==t||!Number.isSafeInteger(e)||e<0))throw new TypeError("Config.passages.transitionOut must be a boolean or non-negative integer (received: "+t+")");T=e},get updateStoryElements(){return C},set updateStoryElements(e){C=Boolean(e)}})})}(),SimpleAudio=function(){function e(){if(arguments.length<2){var e=[];throw arguments.length<1&&e.push("track ID"),arguments.length<2&&e.push("sources"),new Error("no "+e.join(" or ")+" specified")}var t=String(arguments[0]).trim(),r='track ID "'+t+'"';if(_.test(t))throw new Error("invalid "+r+": track IDs must not contain colons or whitespace");var n=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1),a=void 0;try{a=T(n)}catch(e){throw new Error(r+": error during track initialization: "+e.message)}if(Config.debug&&!a.hasSource())throw new Error(r+": no supported audio sources found");N.has(t)&&N.get(t)._destroy(),N.set(t,a)}function t(e){return N.has(e)&&N.get(e)._destroy(),N.delete(e)}function r(){N.forEach(function(e){return e._destroy()}),N.clear()}function n(e){return N.has(e)}function a(e){return N.get(e)||null}function i(){if(arguments.length<2){var e=[];throw arguments.length<1&&e.push("group ID"),arguments.length<2&&e.push("track IDs"),new Error("no "+e.join(" or ")+" specified")}var t=String(arguments[0]).trim(),r='group ID "'+t+'"';if(":"!==t[0]||_.test(t.slice(1)))throw new Error("invalid "+r+": group IDs must start with a colon and must not contain colons or whitespace");if(A.includes(t))throw new Error("cannot clobber special "+r);var n=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1),a=void 0;try{a=new Set(n.map(function(e){if(!N.has(e))throw new Error('track "'+e+'" does not exist');return e}))}catch(e){throw new Error(r+": error during group initialization: "+e.message)}I.set(t,Object.freeze(Array.from(a)))}function o(e){return I.delete(e)}function s(){I.clear()}function u(e){return I.has(e)}function l(e){return I.get(e)||null}function c(){if(arguments.length<2){var e=[];throw arguments.length<1&&e.push("list ID"),
arguments.length<2&&e.push("track IDs"),new Error("no "+e.join(" or ")+" specified")}var t=String(arguments[0]).trim(),r='list ID "'+t+'"';if(_.test(t))return this.error("invalid "+r+": list IDs must not contain colons or whitespace");var n=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1),a=void 0;try{a=new B(n.map(function(e){if(null===e)throw new Error("track descriptor must be a string or object (type: null)");switch(void 0===e?"undefined":_typeof(e)){case"string":e={id:e};break;case"object":if(!e.hasOwnProperty("id")&&!e.hasOwnProperty("sources"))throw new Error('track descriptor must contain one of either an "id" or a "sources" property');if(e.hasOwnProperty("id")&&e.hasOwnProperty("sources"))throw new Error('track descriptor must contain either an "id" or a "sources" property, not both');break;default:throw new Error("track descriptor must be a string or object (type: "+(void 0===e?"undefined":_typeof(e))+")")}var t=void 0,r=void 0,n=void 0;if(e.hasOwnProperty("id")){if("string"!=typeof e.id)throw new Error('"id" property must be a string');if(!N.has(e.id))throw new Error('track "'+e.id+'" does not exist');r=N.get(e.id)}else if(e.hasOwnProperty("sources")){if(!Array.isArray(e.sources)||0===e.sources.length)throw new Error('"sources" property must be a non-empty array');if(e.hasOwnProperty("own"))throw new Error('"own" property is not allowed with the "sources" property');try{r=T(e.sources),t=!0}catch(e){throw new Error("error during track initialization: "+e.message)}if(Config.debug&&!r.hasSource())throw new Error("no supported audio sources found")}if(e.hasOwnProperty("own")){if("boolean"!=typeof e.own)throw new Error('"own" property must be a boolean');t=e.own,t&&(r=r.clone())}if(e.hasOwnProperty("volume")){if("number"!=typeof e.volume||Number.isNaN(e.volume)||!Number.isFinite(e.volume)||e.volume<0)throw new Error('"volume" property must be a non-negative finite number');n=e.volume}return{own:null!=t&&t,track:r,volume:null!=n?n:r.volume()}}))}catch(e){throw new Error(r+": error during playlist initialization: "+e.message)}D.has(t)&&D.get(t)._destroy(),D.set(t,a)}function d(e){return D.has(e)&&D.get(e)._destroy(),D.delete(e)}function f(){D.forEach(function(e){return e._destroy()}),D.clear()}function p(e){return D.has(e)}function h(e){return D.get(e)||null}function g(){if(0===arguments.length)throw new Error("no track selector specified");var e=String(arguments[0]).trim(),t=new Set;try{var r=function e(t){var r=t.id,a=void 0;switch(r){case":all":a=n;break;case":looped":a=n.filter(function(e){return N.get(e).loop()});break;case":muted":a=n.filter(function(e){return N.get(e).mute()});break;case":paused":a=n.filter(function(e){return N.get(e).isPaused()});break;case":playing":a=n.filter(function(e){return N.get(e).isPlaying()});break;default:a=":"===r[0]?I.get(r):[r]}if(t.hasOwnProperty("not")){var i=t.not.map(function(t){return e(t)}).flat(1/0);a=a.filter(function(e){return!i.includes(e)})}return a},n=Array.from(N.keys());V(e).forEach(function(e){return r(e).forEach(function(e){if(!N.has(e))throw new Error('track "'+e+'" does not exist');t.add(e)})})}catch(e){throw new Error("error during runner initialization: "+e.message)}return new U(t)}function m(){O("load")}function v(){O("loadwithscreen")}function y(e){if(null==e)return R;R=!!e,O("mute",R)}function b(e){if(null==e)return W;if(W=!!e){var t=Visibility.changeEvent+".SimpleAudio_masterMuteOnHidden";jQuery(document).off(t).on(t,function(){return y(Visibility.isHidden())}),Visibility.isHidden()&&y(!0)}else jQuery(document).off(".SimpleAudio_masterMuteOnHidden")}function w(e){if(null==e)return M;if("number"!=typeof e||Number.isNaN(e)||!Number.isFinite(e))throw new Error("rate must be a finite number");M=Math.clamp(e,.2,5),O("rate",M)}function k(){O("stop")}function S(){O("unload")}function E(e){if(null==e)return Q;if("number"!=typeof e||Number.isNaN(e)||!Number.isFinite(e))throw new Error("volume must be a finite number");Q=Math.clamp(e,0,1),O("volume",Q)}function j(e,t){if("function"!=typeof t)throw new Error("callback parameter must be a function");L.set(e,t)}function x(e){L.delete(e)}function O(e,t){L.forEach(function(r){return r(e,t)})}function T(e){return new F(e.map(function(e){if("data:"!==e.slice(0,5)&&Story.has(e)){var t=Story.get(e);if(t.tags.includes("Twine.audio"))return t.text.trim()}var r=P.exec(e);return null===r?e:{format:r[1],src:r[2]}}))}var C=Object.freeze(["click","contextmenu","dblclick","keyup","mouseup","pointerup","touchend"]),A=Object.freeze([":not",":all",":looped",":muted",":paused",":playing"]),P=/^([\w-]+)\s*\|\s*(\S.*)$/,_=/[:\s]/,N=new Map,I=new Map,D=new Map,L=new Map,M=1,Q=1,R=!1,W=!1,F=function(){function e(t){if(_classCallCheck(this,e),t instanceof Array)this._create(t);else{if(!(t instanceof e))throw new Error("sources parameter must be either an array, of URIs or source objects, or an AudioTrack instance");this._copy(t)}}return _createClass(e,[{key:"_create",value:function(t){var r=/^data:\s*audio\/([^;,]+)\s*[;,]/i,n=/\.([^.\/\\]+)$/,a=e.getType,i=[],o=document.createElement("audio");o.preload="none",t.forEach(function(e){var t=null;switch(void 0===e?"undefined":_typeof(e)){case"string":var s=void 0;if("data:"===e.slice(0,5)){if(null===(s=r.exec(e)))throw new Error("source data URI missing media type")}else if(null===(s=n.exec(Util.parseUrl(e).pathname)))throw new Error("source URL missing file extension");var u=a(s[1]);null!==u&&(t={src:e,type:u});break;case"object":if(null===e)throw new Error("source object cannot be null");if(!e.hasOwnProperty("src"))throw new Error('source object missing required "src" property');if(!e.hasOwnProperty("format"))throw new Error('source object missing required "format" property');var l=a(e.format);null!==l&&(t={src:e.src,type:l});break;default:throw new Error("invalid source value (type: "+(void 0===e?"undefined":_typeof(e))+")")}if(null!==t){Browser.isOpera&&(t.type=t.type.replace(/;.*$/,""));var c=document.createElement("source");c.src=t.src,c.type=t.type,o.appendChild(c),i.push(t)}}),o.hasChildNodes()&&Config.audio.preloadMetadata&&(o.preload="metadata"),this._finalize(o,i,clone(t))}},{key:"_copy",value:function(e){this._finalize(e.audio.cloneNode(!0),clone(e.sources),clone(e.originals))}},{key:"_finalize",value:function(e,t,r){var n=this;Object.defineProperties(this,{audio:{configurable:!0,value:e},sources:{value:Object.freeze(t)},originals:{value:Object.freeze(r)},_error:{writable:!0,value:!1},_faderId:{writable:!0,value:null},_mute:{writable:!0,value:!1},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1}}),jQuery(this.audio).on("loadstart.AudioTrack",function(){return n._error=!1}).on("error.AudioTrack",function(){return n._error=!0}).find("source:last-of-type").on("error.AudioTrack",function(){return n._trigger("error")}),j(this,function(e){if(!n.audio)return void x(n);switch(e){case"loadwithscreen":if(n.hasSource()){var t=LoadScreen.lock();n.one("canplaythrough.AudioTrack_loadwithscreen error.AudioTrack_loadwithscreen",function(){jQuery(this).off(".AudioTrack_loadwithscreen"),LoadScreen.unlock(t)}).load()}break;case"load":n.load();break;case"mute":n._updateAudioMute();break;case"rate":n._updateAudioRate();break;case"stop":n.stop();break;case"volume":n._updateAudioVolume();break;case"unload":n.unload()}}),this._updateAudioMute(),this._updateAudioRate(),this._updateAudioVolume()}},{key:"_trigger",value:function(e){jQuery(this.audio).triggerHandler(e)}},{key:"_destroy",value:function(){x(this),this.audio&&(jQuery(this.audio).off(),this.unload(),this._error=!0,delete this.audio)}},{key:"clone",value:function(){return new e(this)}},{key:"load",value:function(){var e=this;if(this.fadeStop(),this.audio.pause(),!this.audio.hasChildNodes()){if(0===this.sources.length)return;this.sources.forEach(function(t){var r=document.createElement("source");r.src=t.src,r.type=t.type,e.audio.appendChild(r)})}"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.isLoading()||this.audio.load()}},{key:"unload",value:function(){this.fadeStop(),this.stop();var e=this.audio;for(e.preload="none";e.hasChildNodes();)e.removeChild(e.firstChild);e.load()}},{key:"play",value:function(){var e=this;return this.hasSource()?this.isUnloaded()?Promise.reject(new Error("no sources are loaded")):this.isFailed()?Promise.reject(new Error("failed to load any of the sources")):("auto"!==this.audio.preload&&(this.audio.preload="auto"),Has.audioPromise?this.audio.play():new Promise(function(t,r){jQuery(e.audio).off(".AudioTrack_play").one("error.AudioTrack_play playing.AudioTrack_play",function(n){jQuery(e).off(".AudioTrack_play"),"error"===n.type?r(new Error("unknown error")):t()}),e.audio.play()})):Promise.reject(new Error("none of the candidate sources were acceptable"))}},{key:"playWhenAllowed",value:function(){var e=this;this.play().catch(function(){var t=C.map(function(e){return e+".AudioTrack_playWhenAllowed"}).join(" ");jQuery(document).one(t,function(){jQuery(document).off(".AudioTrack_playWhenAllowed"),e.audio.play()})})}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time(0),this._trigger(":stopped")}},{key:"fade",value:function(e,t,r){var n=this;if("number"!=typeof e)throw new TypeError("duration parameter must be a number");if("number"!=typeof t)throw new TypeError("toVolume parameter must be a number");if(null!=r&&"number"!=typeof r)throw new TypeError("fromVolume parameter must be a number");if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));this.fadeStop();var a=Math.clamp(null==r?this.volume():r,0,1),i=Math.clamp(t,0,1);return a!==i?(this.volume(a),jQuery(this.audio).off("timeupdate.AudioTrack_fade").one("timeupdate.AudioTrack_fade",function(){var t=void 0,r=void 0;a<i?(t=a,r=i):(t=i,r=a);var o=Math.max(e,1),s=(i-a)/(o/.025);n._trigger(":fading"),n._faderId=setInterval(function(){if(!n.isPlaying())return void n.fadeStop();n.volume(Math.clamp(n.volume()+s,t,r)),Config.audio.pauseOnFadeToZero&&0===n.volume()&&n.pause(),n.volume()===i&&(n.fadeStop(),n._trigger(":faded"))},25)}),this.play()):void 0}},{key:"fadeIn",value:function(e,t){return this.fade(e,1,t)}},{key:"fadeOut",value:function(e,t){return this.fade(e,0,t)}},{key:"fadeStop",value:function(){null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null)}},{key:"loop",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return null==e?this.audio.loop:(this.audio.loop=!!e,this)})},{key:"mute",value:function(e){return null==e?this._mute:(this._mute=!!e,this._updateAudioMute(),this)}},{key:"_updateAudioMute",value:function(){this.audio.muted=this._mute||R}},{key:"rate",value:function(e){if(null==e)return this._rate;if("number"!=typeof e)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(e,.2,5),this._updateAudioRate(),this}},{key:"_updateAudioRate",value:function(){this.audio.playbackRate=Math.clamp(this._rate*M,.2,5)}},{key:"time",value:function(e){var t=this;if(null==e)return this.audio.currentTime;if("number"!=typeof e)throw new TypeError("time parameter must be a number");return this.hasMetadata()?this.audio.currentTime=e:jQuery(this.audio).off("loadedmetadata.AudioTrack_time").one("loadedmetadata.AudioTrack_time",function(){return t.audio.currentTime=e}),this}},{key:"volume",value:function(e){if(null==e)return this._volume;if("number"!=typeof e)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(e,0,1),this._updateAudioVolume(),this}},{key:"_updateAudioVolume",value:function(){this.audio.volume=Math.clamp(this._volume*Q,0,1)}},{key:"duration",value:function(){return this.audio.duration}},{key:"remaining",value:function(){return this.audio.duration-this.audio.currentTime}},{key:"isFailed",value:function(){return this._error}},{key:"isLoading",value:function(){return this.audio.networkState===HTMLMediaElement.NETWORK_LOADING}},{key:"isUnloaded",value:function(){return!this.audio.hasChildNodes()}},{key:"isUnavailable",value:function(){return!this.hasSource()||this.isUnloaded()||this.isFailed()}},{key:"isPlaying",value:function(){return!this.audio.paused&&this.hasSomeData()}},{key:"isPaused",value:function(){return this.audio.paused&&(this.audio.duration===1/0||this.audio.currentTime>0)&&!this.audio.ended}},{key:"isStopped",value:function(){return this.audio.paused&&0===this.audio.currentTime}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isFading",value:function(){return null!==this._faderId}},{key:"isSeeking",value:function(){return this.audio.seeking}},{key:"hasSource",value:function(){return this.sources.length>0}},{key:"hasNoData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_NOTHING}},{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasSomeData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"hasData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA}},{key:"on",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return jQuery.fn.on.apply(jQuery(this.audio),t),this}},{key:"one",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return jQuery.fn.one.apply(jQuery(this.audio),t),this}},{key:"off",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return jQuery.fn.off.apply(jQuery(this.audio),t),this}}],[{key:"_verifyType",value:function(t){if(!t||!Has.audio)return null;var r=e._types;if(!r.hasOwnProperty(t)){var n=document.createElement("audio");r[t]=""!==n.canPlayType(t).replace(/^no$/i,"")}return r[t]?t:null}},{key:"getType",value:function(t){if(!t||!Has.audio)return null;var r=e.formats,n=t.toLowerCase(),a=r.hasOwnProperty(n)?r[n]:"audio/"+n;return e._verifyType(a)}},{key:"canPlayFormat",value:function(t){return null!==e.getType(t)}},{key:"canPlayType",value:function(t){return null!==e._verifyType(t)}}]),e}();Object.defineProperties(F,{formats:{value:{aac:"audio/aac",caf:"audio/x-caf","x-caf":"audio/x-caf",mp3:'audio/mpeg; codecs="mp3"',mpeg:'audio/mpeg; codecs="mp3"',m4a:"audio/mp4",mp4:"audio/mp4","x-m4a":"audio/mp4","x-mp4":"audio/mp4",oga:"audio/ogg",ogg:"audio/ogg",opus:'audio/ogg; codecs="opus"',wav:"audio/wav",wave:"audio/wav",weba:"audio/webm",webm:"audio/webm"}},_types:{value:{}}});var B=function(){function e(t){if(_classCallCheck(this,e),t instanceof Array)this._create(t);else{if(!(t instanceof e))throw new Error("tracks parameter must be either an array, of track objects, or an AudioTrack instance");this._copy(t)}}return _createClass(e,[{key:"_create",value:function(e){var t=this;this._finalize(e.map(function(e){if("object"!==(void 0===e?"undefined":_typeof(e)))throw new Error("tracks parameter array members must be objects");var r=void 0,n=void 0,a=void 0,i=void 0;if(e instanceof F)r=!0,n=e.rate(),a=e.clone(),i=e.volume();else{if(!e.hasOwnProperty("track"))throw new Error('track object missing required "track" property');if(!(e.track instanceof F))throw new Error('track object\'s "track" property must be an AudioTrack object');r=e.hasOwnProperty("own")&&e.own,n=e.hasOwnProperty("rate")?e.rate:e.track.rate(),a=e.track,i=e.hasOwnProperty("volume")?e.volume:e.track.volume()}return a.stop(),a.loop(!1),a.mute(!1),a.rate(n),a.volume(i),a.on("ended.AudioList",function(){return t._onEnd()}),{own:r,track:a,volume:i,rate:n}}))}},{key:"_copy",value:function(e){this._finalize(clone(e.tracks))}},{key:"_finalize",value:function(e){Object.defineProperties(this,{tracks:{configurable:!0,value:Object.freeze(e)},queue:{configurable:!0,value:[]},current:{writable:!0,value:null},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1},_mute:{writable:!0,value:!1},_loop:{writable:!0,value:!1},_shuffle:{writable:!0,value:!1}})}},{key:"_destroy",value:function(){this.stop(),this.tracks.filter(function(e){return e.own}).forEach(function(e){return e.track._destroy()}),delete this.tracks,delete this.queue}},{key:"load",value:function(){this.tracks.forEach(function(e){return e.track.load()})}},{key:"unload",value:function(){this.stop(),this.tracks.forEach(function(e){return e.track.unload()})}},{key:"play",value:function(){return null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||(0===this.queue.length&&this._fillQueue(),this._next())?this.current.track.play():Promise.reject(new Error("no tracks were available"))}},{key:"playWhenAllowed",value:function(){var e=this;this.play().catch(function(){var t=C.map(function(e){return e+".AudioList_playWhenAllowed"}).join(" ");jQuery(document).one(t,function(){jQuery(document).off(".AudioList_playWhenAllowed"),e.play()})})}},{key:"pause",value:function(){null!==this.current&&this.current.track.pause()}},{key:"stop",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null),this._drainQueue()}},{key:"skip",value:function(){this._next()?this.current.track.play():this._loop&&this.play()}},{key:"fade",value:function(e,t,r){if("number"!=typeof e)throw new TypeError("duration parameter must be a number");if("number"!=typeof t)throw new TypeError("toVolume parameter must be a number");if(null!=r&&"number"!=typeof r)throw new TypeError("fromVolume parameter must be a number");if(0===this.queue.length&&this._fillQueue(),null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||this._next()){var n=Math.clamp(t,0,1)*this.current.volume,a=void 0;return null!=r&&(a=Math.clamp(r,0,1)*this.current.volume),this._volume=t,this.current.track.fade(e,n,a)}}},{key:"fadeIn",value:function(e,t){return this.fade(e,1,t)}},{key:"fadeOut",value:function(e,t){return this.fade(e,0,t)}},{key:"fadeStop",value:function(){null!==this.current&&this.current.track.fadeStop()}},{key:"loop",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return null==e?this._loop:(this._loop=!!e,this)})},{key:"mute",value:function(e){return null==e?this._mute:(this._mute=!!e,null!==this.current&&this.current.track.mute(this._mute),this)}},{key:"rate",value:function(e){if(null==e)return this._rate;if("number"!=typeof e)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(e,.2,5),null!==this.current&&this.current.track.rate(this._rate*this.current.rate),this}},{key:"shuffle",value:function(e){var t=this;if(null==e)return this._shuffle;if(this._shuffle=!!e,this.queue.length>0&&(this._fillQueue(),!this._shuffle&&null!==this.current&&this.queue.length>1)){var r=this.queue.findIndex(function(e){return e===t.current});if(-1!==r){var n;(n=this.queue).push.apply(n,_toConsumableArray(this.queue.splice(0,r+1)))}}return this}},{key:"volume",value:function(e){if(null==e)return this._volume;if("number"!=typeof e)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(e,0,1),null!==this.current&&this.current.track.volume(this._volume*this.current.volume),this}},{key:"duration",value:function(){if(arguments.length>0)throw new Error("duration takes no parameters");return this.tracks.map(function(e){return e.track.duration()}).reduce(function(e,t){return e+t},0)}},{key:"remaining",value:function(){if(arguments.length>0)throw new Error("remaining takes no parameters");var e=this.queue.map(function(e){return e.track.duration()}).reduce(function(e,t){return e+t},0);return null!==this.current&&(e+=this.current.track.remaining()),e}},{key:"time",value:function(){if(arguments.length>0)throw new Error("time takes no parameters");return this.duration()-this.remaining()}},{key:"isPlaying",value:function(){return null!==this.current&&this.current.track.isPlaying()}},{key:"isPaused",value:function(){return null===this.current||this.current.track.isPaused()}},{key:"isStopped",value:function(){return 0===this.queue.length&&null===this.current}},{key:"isEnded",value:function(){return 0===this.queue.length&&(null===this.current||this.current.track.isEnded())}},{key:"isFading",value:function(){return null!==this.current&&this.current.track.isFading()}},{key:"_next",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null);for(var e=void 0;e=this.queue.shift();)if(!e.track.isUnavailable()){this.current=e;break}return null!==this.current&&(this.current.track.mute(this._mute),this.current.track.rate(this._rate*this.current.rate),this.current.track.volume(this._volume*this.current.volume),this.current.track.loop(!1),!0)}},{key:"_onEnd",value:function(){if(0===this.queue.length){if(!this._loop)return;this._fillQueue()}this._next()&&this.current.track.play()}},{key:"_drainQueue",value:function(){this.queue.splice(0)}},{key:"_fillQueue",value:function(){var e;this._drainQueue(),(e=this.queue).push.apply(e,_toConsumableArray(this.tracks.filter(function(e){return!e.track.isUnavailable()}))),0!==this.queue.length&&this._shuffle&&(this.queue.shuffle(),this.queue.length>1&&this.queue[0]===this.current&&this.queue.push(this.queue.shift()))}}]),e}(),U=function(){function e(t){if(_classCallCheck(this,e),!(t instanceof Set||t instanceof e))throw new TypeError("list parameter must be a Set or a AudioRunner instance");Object.defineProperties(this,{trackIds:{value:new Set(t instanceof e?t.trackIds:t)}})}return _createClass(e,[{key:"load",value:function(){e._run(this.trackIds,F.prototype.load)}},{key:"unload",value:function(){e._run(this.trackIds,F.prototype.unload)}},{key:"play",value:function(){e._run(this.trackIds,F.prototype.play)}},{key:"playWhenAllowed",value:function(){e._run(this.trackIds,F.prototype.playWhenAllowed)}},{key:"pause",value:function(){e._run(this.trackIds,F.prototype.pause)}},{key:"stop",value:function(){e._run(this.trackIds,F.prototype.stop)}},{key:"fade",value:function(t,r,n){if(null==t||null==r)throw new Error("fade requires parameters");e._run(this.trackIds,F.prototype.fade,t,r,n)}},{key:"fadeIn",value:function(t,r){if(null==t)throw new Error("fadeIn requires a parameter");e._run(this.trackIds,F.prototype.fadeIn,t,1,r)}},{key:"fadeOut",value:function(t,r){if(null==t)throw new Error("fadeOut requires a parameter");e._run(this.trackIds,F.prototype.fadeOut,t,0,r)}},{key:"fadeStop",value:function(){e._run(this.trackIds,F.prototype.fadeStop)}},{key:"loop",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){if(null==t)throw new Error("loop requires a parameter");return e._run(this.trackIds,F.prototype.loop,t),this})},{key:"mute",value:function(t){if(null==t)throw new Error("mute requires a parameter");return e._run(this.trackIds,F.prototype.mute,t),this}},{key:"rate",value:function(t){if(null==t)throw new Error("rate requires a parameter");return e._run(this.trackIds,F.prototype.rate,t),this}},{key:"time",value:function(t){if(null==t)throw new Error("time requires a parameter");return e._run(this.trackIds,F.prototype.time,t),this}},{key:"volume",value:function(t){if(null==t)throw new Error("volume requires a parameter");return e._run(this.trackIds,F.prototype.volume,t),this}},{key:"on",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e._run.apply(e,[this.trackIds,F.prototype.on].concat(r)),this}},{key:"one",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e._run.apply(e,[this.trackIds,F.prototype.one].concat(r)),this}},{key:"off",value:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e._run.apply(e,[this.trackIds,F.prototype.off].concat(r)),this}}],[{key:"_run",value:function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];e.forEach(function(e){var r=N.get(e);r&&t.apply(r,n)})}}]),e}(),V=function(){function e(e,t){var a=void 0;if(r.lastIndex=t,null===(a=r.exec(e))||"("!==a[0])throw new Error('invalid ":not()" syntax: missing parentheticals');n.lastIndex=r.lastIndex;for(var i=r.lastIndex,o={str:"",nextMatch:-1},s=1;null!==(a=n.exec(e));)if("("===a[0]?++s:--s,s<1){o.nextMatch=n.lastIndex,o.str=e.slice(i,o.nextMatch-1);break}return o}function t(r){for(var n=[],a=/:?[^\s:()]+/g,i=void 0;null!==(i=a.exec(r));){var o=i[0];if(":not"===o){if(0===n.length)throw new Error('invalid negation: no group ID preceded ":not()"');var s=n[n.length-1];if(":"!==s.id[0])throw new Error('invalid negation of track "'+s.id+'": only groups may be negated with ":not()"');var u=e(r,a.lastIndex);if(-1===u.nextMatch)throw new Error('unknown error parsing ":not()"');a.lastIndex=u.nextMatch,s.not=t(u.str)}else n.push({id:o})}return n}var r=/\S/g,n=/[()]/g;return t}();return Object.freeze(Object.defineProperties({},{tracks:{value:Object.freeze(Object.defineProperties({},{add:{value:e},delete:{value:t},clear:{value:r},has:{value:n},get:{value:a}}))},groups:{value:Object.freeze(Object.defineProperties({},{add:{value:i},delete:{value:o},clear:{value:s},has:{value:u},get:{value:l}}))},lists:{value:Object.freeze(Object.defineProperties({},{add:{value:c},delete:{value:d},clear:{value:f},has:{value:p},get:{value:h}}))},select:{value:g},load:{value:m},loadWithScreen:{value:v},mute:{value:y},muteOnHidden:{value:b},rate:{value:w},stop:{value:k},unload:{value:S},volume:{value:E}}))}(),State=function(){function e(){session.delete("state"),$=[],J=c(),G=-1,Z=[],Y=null===Y?null:new PRNGWrapper(Y.seed,!1)}function t(){if(session.has("state")){var e=session.get("state");return null!=e&&(n(e),!0)}return!1}function r(e){var t={index:G};return e?t.history=clone($):t.delta=A($),Z.length>0&&(t.expired=[].concat(_toConsumableArray(Z))),null!==Y&&(t.seed=Y.seed),t}function n(e,t){if(null==e)throw new Error("state object is null or undefined");if(!e.hasOwnProperty(t?"history":"delta")||0===e[t?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!e.hasOwnProperty("index"))throw new Error("state object has no index");if(null!==Y&&!e.hasOwnProperty("seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===Y&&e.hasOwnProperty("seed"))throw new Error("state object has seed, but PRNG is disabled");$=t?clone(e.history):P(e.delta),G=e.index,Z=e.hasOwnProperty("expired")?[].concat(_toConsumableArray(e.expired)):[],e.hasOwnProperty("seed")&&(Y.seed=e.seed),g(G)}function a(){return r(!0)}function i(e){return n(e,!0)}function o(){return Z}function s(){return Z.length+v()}function u(){return Z.concat($.slice(0,v()).map(function(e){return e.title}))}function l(e){return null!=e&&""!==e&&(!!Z.includes(e)||!!$.slice(0,v()).some(function(t){return t.title===e}))}function c(e,t){return{title:null==e?"":String(e),variables:null==t?{}:clone(t)}}function d(){return J}function f(){return G}function p(){return J.title}function h(){return J.variables}function g(e){if(null==e)throw new Error("moment activation attempted with null or undefined");switch(void 0===e?"undefined":_typeof(e)){case"object":J=clone(e);break;case"number":if(b())throw new Error("moment activation attempted with index on empty history");if(e<0||e>=y())throw new RangeError("moment activation attempted with out-of-bounds index; need [0, "+(y()-1)+"], got "+e);J=clone($[e]);break;default:throw new TypeError('moment activation attempted with a "'+(void 0===e?"undefined":_typeof(e))+'"; must be an object or valid history stack index')}return null!==Y&&(Y=PRNGWrapper.unmarshal({seed:Y.seed,pull:J.pull})),session.set("state",r()),jQuery.event.trigger(":historyupdate"),J}function m(){return $}function v(){return G+1}function y(){return $.length}function b(){return 0===$.length}function w(){return $.length>0?$[G]:null}function k(){return $.length>0?$[$.length-1]:null}function S(){return $.length>0?$[0]:null}function E(e){return b()||e<0||e>G?null:$[e]}function j(e){if(b())return null;var t=1+(e?Math.abs(e):0);return t>v()?null:$[v()-t]}function x(e){if(b()||null==e||""===e)return!1;for(var t=G;t>=0;--t)if($[t].title===e)return!0;return!1}function O(e){if(v()<y()&&$.splice(v(),y()-v()),$.push(c(e,J.variables)),Y&&(k().pull=Y.pull),Config.history.maxStates>0)for(;y()>Config.history.maxStates;)Z.push($.shift().title);return G=y()-1,g(G),v()}function T(e){return!(null==e||e<0||e>=y()||e===G)&&(G=e,g(G),!0)}function C(e){return null!=e&&0!==e&&T(G+e)}function A(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[clone(e[0])],r=1,n=e.length;r<n;++r)t.push(Diff.diff(e[r-1],e[r]));return t}function P(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[clone(e[0])],r=1,n=e.length;r<n;++r)t.push(Diff.patch(t[r-1],e[r]));return t}function _(e,t){if(!b()){var r=void 0;throw r="the Story JavaScript",new Error("State.initPRNG must be called during initialization, within either "+r+" or the StoryInit special passage")}Y=new PRNGWrapper(e,t),J.pull=Y.pull}function N(){return null!==Y}function I(){return Y?Y.pull:NaN}function D(){return Y?Y.seed:null}function L(){return Y?Y.random():Math.random()}function M(){K={},TempVariables=K}function Q(){return K}function R(e){var t=F(e);if(null!==t){for(var r=t.names,n=t.store,a=0,i=r.length;a<i;++a){if(void 0===n[r[a]])return;n=n[r[a]]}return n}}function W(e,t){var r=F(e);if(null===r)return!1;for(var n=r.names,a=n.pop(),i=r.store,o=0,s=n.length;o<s;++o){if(void 0===i[n[o]])return!1;i=i[n[o]]}return i[a]=t,!0}function F(e){for(var t={store:"$"===e[0]?State.variables:State.temporary,names:[]},r=e,n=void 0;null!==(n=X.exec(r));)r=r.slice(n[0].length),n[1]?t.names.push(n[1]):n[2]?t.names.push(n[2]):n[3]?t.names.push(n[3]):n[4]?t.names.push(n[4]):n[5]?t.names.push(R(n[5])):n[6]&&t.names.push(Number(n[6]));return""===r?t:null}function B(){storage.delete(ee)}function U(e){if("string"!=typeof e)throw new TypeError("State.metadata.delete key parameter must be a string (received: "+(void 0===e?"undefined":_typeof(e))+")");var t=storage.get(ee);t&&t.hasOwnProperty(e)&&(1===Object.keys(t).length?storage.delete(ee):(delete t[e],storage.set(ee,t)))}function V(e){if("string"!=typeof e)throw new TypeError("State.metadata.get key parameter must be a string (received: "+(void 0===e?"undefined":_typeof(e))+")");var t=storage.get(ee);return t&&t.hasOwnProperty(e)?t[e]:undefined}function z(e){if("string"!=typeof e)throw new TypeError("State.metadata.has key parameter must be a string (received: "+(void 0===e?"undefined":_typeof(e))+")");var t=storage.get(ee);return t&&t.hasOwnProperty(e)}function q(e,t){if("string"!=typeof e)throw new TypeError("State.metadata.set key parameter must be a string (received: "+(void 0===e?"undefined":_typeof(e))+")");if(void 0===t)U(e);else{var r=storage.get(ee)||{};r[e]=t,storage.set(ee,r)}}function H(){var e=storage.get(ee);return e?Object.keys(e).length:0}var $=[],J=c(),G=-1,Z=[],Y=null,K={},X=new RegExp("^(?:"+Patterns.variableSigil+"("+Patterns.identifier+")|\\.("+Patterns.identifier+")|\\[(?:(?:\"((?:\\\\.|[^\"\\\\])+)\")|(?:'((?:\\\\.|[^'\\\\])+)')|("+Patterns.variableSigil+Patterns.identifierFirstChar+".*)|(\\d+))\\])"),ee="metadata";return Object.freeze(Object.defineProperties({},{reset:{value:e},restore:{value:t},marshalForSave:{value:a},unmarshalForSave:{value:i},expired:{get:o},turns:{get:s},passages:{get:u},hasPlayed:{value:l},active:{get:d},activeIndex:{get:f},passage:{get:p},variables:{get:h},history:{get:m},length:{get:v},size:{get:y},isEmpty:{value:b},current:{get:w},top:{get:k},bottom:{get:S},index:{value:E},peek:{value:j},has:{value:x},create:{value:O},goTo:{value:T},go:{value:C},deltaEncode:{value:A},deltaDecode:{value:P},prng:{value:Object.freeze(Object.defineProperties({},{init:{value:_},isEnabled:{value:N},pull:{get:I},seed:{get:D}}))},random:{value:L},clearTemporary:{value:M},temporary:{get:Q},getVar:{
value:R},setVar:{value:W},metadata:{value:Object.freeze(Object.defineProperties({},{clear:{value:B},delete:{value:U},get:{value:V},has:{value:z},set:{value:q},size:{get:H}}))},initPRNG:{value:_},restart:{value:function(){return Engine.restart()}},backward:{value:function(){return Engine.backward()}},forward:{value:function(){return Engine.forward()}},display:{value:function(){return Engine.display.apply(Engine,arguments)}},show:{value:function(){return Engine.show.apply(Engine,arguments)}},play:{value:function(){return Engine.play.apply(Engine,arguments)}}}))}(),Scripting=function(){function addAccessibleClickHandler(e,t,r,n,a){if(arguments.length<2)throw new Error("addAccessibleClickHandler insufficient number of parameters");var i=void 0,o=void 0;if("function"==typeof t?(i=t,o={namespace:n,one:!!r}):(i=r,o={namespace:a,one:!!n,selector:t}),"function"!=typeof i)throw new TypeError("addAccessibleClickHandler handler parameter must be a function");return jQuery(e).ariaClick(o,i)}function insertElement(e,t,r,n,a,i){var o=jQuery(document.createElement(t));return r&&o.attr("id",r),n&&o.addClass(n),i&&o.attr("title",i),a&&o.text(a),e&&o.appendTo(e),o[0]}function insertText(e,t){jQuery(e).append(document.createTextNode(t))}function removeChildren(e){jQuery(e).empty()}function removeElement(e){jQuery(e).remove()}function fade(e,t){function r(){i+=.05*a,n(o,Math.easeInOut(i)),(1===a&&i>=1||-1===a&&i<=0)&&(e.style.visibility="in"===t.fade?"visible":"hidden",o.parentNode.replaceChild(e,o),o=null,window.clearInterval(s),t.onComplete&&t.onComplete())}function n(e,t){e.style.zoom=1,e.style.filter="alpha(opacity="+Math.floor(100*t)+")",e.style.opacity=t}var a="in"===t.fade?1:-1,i=void 0,o=e.cloneNode(!0),s=void 0;e.parentNode.replaceChild(o,e),"in"===t.fade?(i=0,o.style.visibility="visible"):i=1,n(o,i),s=window.setInterval(r,25)}function scrollWindowTo(e,t){function r(){l+=a,window.scroll(0,i+u*(s*Math.easeInOut(l))),l>=1&&window.clearInterval(c)}function n(e){for(var t=0;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;return t}var a=null!=t?Number(t):.1;Number.isNaN(a)||!Number.isFinite(a)||a<0?a=.1:a>1&&(a=1);var i=window.scrollY?window.scrollY:document.body.scrollTop,o=function(e){var t=n(e),r=t+e.offsetHeight,a=window.scrollY?window.scrollY:document.body.scrollTop,i=window.innerHeight?window.innerHeight:document.body.clientHeight,o=a+i;return t>=a&&r>o&&e.offsetHeight<i?t-(i-e.offsetHeight)+20:t}(e),s=Math.abs(i-o),u=i>o?-1:1,l=0,c=void 0;c=window.setInterval(r,25)}function either(){if(0!==arguments.length)return Array.prototype.concat.apply([],arguments).random()}function forget(e){if("string"!=typeof e)throw new TypeError("forget key parameter must be a string (received: "+Util.getType(e)+")");State.metadata.delete(e)}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var e=Array.prototype.concat.apply([],arguments),t=State.passages,r=0,n=e.length;r<n;++r)if(!t.includes(e[r]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var e=Array.prototype.concat.apply([],arguments),t=State.passages,r=t.length-1,n=State.turns,a=0,i=e.length;a<i&&n>-1;++a){var o=t.lastIndexOf(e[a]);n=Math.min(n,-1===o?-1:r-o)}return n}function memorize(e,t){if("string"!=typeof e)throw new TypeError("memorize key parameter must be a string (received: "+Util.getType(e)+")");State.metadata.set(e,t)}function passage(){return State.passage}function previous(){var e=State.passages;if(arguments.length>0){var t=Number(arguments[0]);if(!Number.isSafeInteger(t)||t<1)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return e.length>t?e[e.length-1-t]:""}for(var r=e.length-2;r>=0;--r)if(e[r]!==State.passage)return e[r];return""}function random(){var e=void 0,t=void 0;switch(arguments.length){case 0:throw new Error("random called with insufficient parameters");case 1:e=0,t=Math.trunc(arguments[0]);break;default:e=Math.trunc(arguments[0]),t=Math.trunc(arguments[1])}if(!Number.isInteger(e))throw new Error("random min parameter must be an integer");if(!Number.isInteger(t))throw new Error("random max parameter must be an integer");if(e>t){var r=[t,e];e=r[0],t=r[1]}return Math.floor(State.random()*(t-e+1))+e}function randomFloat(){var e=void 0,t=void 0;switch(arguments.length){case 0:throw new Error("randomFloat called with insufficient parameters");case 1:e=0,t=Number(arguments[0]);break;default:e=Number(arguments[0]),t=Number(arguments[1])}if(Number.isNaN(e)||!Number.isFinite(e))throw new Error("randomFloat min parameter must be a number");if(Number.isNaN(t)||!Number.isFinite(t))throw new Error("randomFloat max parameter must be a number");if(e>t){var r=[t,e];e=r[0],t=r[1]}return State.random()*(t-e)+e}function recall(e,t){if("string"!=typeof e)throw new TypeError("recall key parameter must be a string (received: "+Util.getType(e)+")");return State.metadata.has(e)?State.metadata.get(e):t}function tags(){if(0===arguments.length)return Story.get(State.passage).tags.slice(0);for(var e=Array.prototype.concat.apply([],arguments),t=[],r=0,n=e.length;r<n;++r)t=t.concat(Story.get(e[r]).tags);return t}function temporary(){return State.temporary}function time(){return null===Engine.lastPlay?0:Util.now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var e=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),t=State.passages,r=State.turns,n=0,a=e.length;n<a&&r>0;++n)r=Math.min(r,t.count(e[n]));return r}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var e=Array.prototype.concat.apply([],arguments),t=e.length,r=State.passages,n=new Map,a=0,i=0,o=r.length;i<o;++i){var s=r[i];if(n.has(s))n.get(s)&&++a;else{var u=Story.get(s).tags;if(u.length>0){for(var l=0,c=0;c<t;++c)u.includes(e[c])&&++l;l===t?(++a,n.set(s,!0)):n.set(s,!1)}}}return a}function evalJavaScript(code,output){return function(code,output){return eval(code)}.call(output?{output:output}:null,String(code),output)}function evalTwineScript(code,output){return function(code,output){return eval(code)}.call(output?{output:output}:null,parse(String(code)),output)}var _ref8=function(){function e(e){return Util.parseUrl(e).path.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w]+/g,"-").toLocaleLowerCase()}function t(t){return new Promise(function(r,n){jQuery(document.createElement("script")).one("load abort error",function(e){jQuery(e.target).off(),"load"===e.type?r(e.target):n(new Error('importScripts failed to load the script "'+t+'".'))}).appendTo(document.head).attr({id:"script-imported-"+e(t),type:"text/javascript",src:t})})}function r(t){return new Promise(function(r,n){jQuery(document.createElement("link")).one("load abort error",function(e){jQuery(e.target).off(),"load"===e.type?r(e.target):n(new Error('importStyles failed to load the stylesheet "'+t+'".'))}).appendTo(document.head).attr({id:"style-imported-"+e(t),rel:"stylesheet",href:t})})}function n(e){return e.reduce(function(e,t){return e=e.then(t)},Promise.resolve())}function a(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return Promise.all(r.map(function(e){return Array.isArray(e)?n(e.map(function(e){return function(){return t(e)}})):t(e)}))}function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return Promise.all(t.map(function(e){return Array.isArray(e)?n(e.map(function(e){return function(){return r(e)}})):r(e)}))}return{importScripts:a,importStyles:i}}(),importScripts=_ref8.importScripts,importStyles=_ref8.importStyles,parse=function(){function e(e){if(0!==r.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start");for(var a=e,i=void 0;null!==(i=r.exec(a));)if(i[5]){var o=i[5];if("$"===o||"_"===o)continue;if(n.test(o))o=o[0];else if("is"===o){var s=r.lastIndex,u=a.slice(s);/^\s+not\b/.test(u)&&(a=a.splice(s,u.search(/\S/)),o="isnot")}t.hasOwnProperty(o)&&(a=a.splice(i.index,o.length,t[o]),r.lastIndex+=t[o].length-o.length)}return a}var t=Object.freeze({$:"State.variables.",_:"State.temporary.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),r=new RegExp(["(\"\"|'')",'("(?:\\\\.|[^"\\\\])+")',"('(?:\\\\.|[^'\\\\])+')","([=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),n=new RegExp("^"+Patterns.variable);return e}();return Object.freeze(Object.defineProperties({},{parse:{value:parse},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript}}))}(),_ref9=function(){return{EOF:-1,Lexer:function(){function e(t,r){if(_classCallCheck(this,e),arguments.length<2)throw new Error("Lexer constructor called with too few parameters (source:string , initialState:function)");Object.defineProperties(this,{source:{value:t},initial:{value:r},state:{writable:!0,value:r},start:{writable:!0,value:0},pos:{writable:!0,value:0},depth:{writable:!0,value:0},items:{writable:!0,value:[]},data:{writable:!0,value:{}}})}return _createClass(e,[{key:"reset",value:function(){this.state=this.initial,this.start=0,this.pos=0,this.depth=0,this.items=[],this.data={}}},{key:"run",value:function(){for(;null!==this.state;)this.state=this.state(this);return this.items}},{key:"nextItem",value:function(){for(;0===this.items.length&&null!==this.state;)this.state=this.state(this);return this.items.shift()}},{key:"next",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos++]}},{key:"peek",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos]}},{key:"backup",value:function(e){this.pos-=e||1}},{key:"forward",value:function(e){this.pos+=e||1}},{key:"ignore",value:function(){this.start=this.pos}},{key:"accept",value:function(e){var t=this.next();return-1!==t&&(!!e.includes(t)||(this.backup(),!1))}},{key:"acceptRe",value:function(e){var t=this.next();return-1!==t&&(!!e.test(t)||(this.backup(),!1))}},{key:"acceptRun",value:function(e){for(;;){var t=this.next();if(-1===t)return;if(!e.includes(t))break}this.backup()}},{key:"acceptRunRe",value:function(e){for(;;){var t=this.next();if(-1===t)return;if(!e.test(t))break}this.backup()}},{key:"emit",value:function(e){this.items.push({type:e,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),this.start=this.pos}},{key:"error",value:function(e,t){if(arguments.length<2)throw new Error("Lexer.prototype.error called with too few parameters (type:number , message:string)");return this.items.push({type:e,message:t,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),null}}],[{key:"enumFromNames",value:function(e){var t=e.reduce(function(e,t,r){return e[t]=r,e},{});return Object.freeze(Object.assign(Object.create(null),t))}}]),e}()}}(),EOF=_ref9.EOF,Lexer=_ref9.Lexer,Wikifier=function(){var e=0,t=function(){function t(r,n,a){_classCallCheck(this,t),t.Parser.Profile.isEmpty()&&t.Parser.Profile.compile(),Object.defineProperties(this,{source:{value:String(n)},options:{writable:!0,value:Object.assign({profile:"all"},a)},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""}}),null==r?this.output=document.createDocumentFragment():r.jquery?this.output=r[0]:this.output=r;try{++e,this.subWikify(this.output),1===e&&Config.cleanupWikifierOutput&&convertBreaks(this.output)}finally{--e}}return _createClass(t,[{key:"subWikify",value:function(e,r,n){var a=this.output,i=void 0;this.output=e,null!=n&&"object"===(void 0===n?"undefined":_typeof(n))&&(i=this.options,this.options=Object.assign({},this.options,n));var o=t.Parser.Profile.get(this.options.profile),s=r?new RegExp("(?:"+r+")",this.options.ignoreTerminatorCase?"gim":"gm"):null,u=void 0,l=void 0;do{if(o.parserRegExp.lastIndex=this.nextMatch,s&&(s.lastIndex=this.nextMatch),l=o.parserRegExp.exec(this.source),(u=s?s.exec(this.source):null)&&(!l||u.index<=l.index))return u.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,u.index),this.matchStart=u.index,this.matchLength=u[0].length,this.matchText=u[0],this.nextMatch=s.lastIndex,this.output=a,void(i&&(this.options=i));if(l){l.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,l.index),this.matchStart=l.index,this.matchLength=l[0].length,this.matchText=l[0],this.nextMatch=o.parserRegExp.lastIndex;for(var c=void 0,d=1,f=l.length;d<f;++d)if(l[d]){c=d-1;break}if(o.parsers[c].handler(this),null!=TempState.break)break}}while(u||l);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=a,i&&(this.options=i)}},{key:"outputText",value:function(e,t,r){jQuery(e).append(document.createTextNode(this.source.substring(t,r)))}},{key:"rawArgs",value:function(){return this._rawArgs}},{key:"fullArgs",value:function(){return Scripting.parse(this._rawArgs)}}],[{key:"wikifyEval",value:function(e){var r=document.createDocumentFragment();new t(r,e);var n=r.querySelector(".error");if(null!==n)throw new Error(n.textContent.replace(errorPrologRegExp,""));return r}},{key:"createInternalLink",value:function(e,t,r,n){var a=jQuery(document.createElement("a"));return null!=t&&(a.attr("data-passage",t),Story.has(t)?(a.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(t)&&a.addClass("link-visited")):a.addClass("link-broken"),a.ariaClick({one:!0},function(){"function"==typeof n&&n(),Engine.play(t)})),r&&a.append(document.createTextNode(r)),e&&a.appendTo(e),a[0]}},{key:"createExternalLink",value:function(e,t,r){var n=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(r).appendTo(e);return null!=t&&n.attr({href:t,tabindex:0}),n[0]}},{key:"isExternalLink",value:function(e){return!Story.has(e)&&(new RegExp("^"+Patterns.url,"gim").test(e)||/[\/.?#]/.test(e))}}]),t}();return Object.defineProperty(t,"Parser",{value:function(){function e(){return d}function t(e){if("object"!==(void 0===e?"undefined":_typeof(e)))throw new Error("Wikifier.Parser.add parser parameter must be an object");if(!e.hasOwnProperty("name"))throw new Error('parser object missing required "name" property');if("string"!=typeof e.name)throw new Error('parser object "name" property must be a string');if(!e.hasOwnProperty("match"))throw new Error('parser object missing required "match" property');if("string"!=typeof e.match)throw new Error('parser object "match" property must be a string');if(!e.hasOwnProperty("handler"))throw new Error('parser object missing required "handler" property');if("function"!=typeof e.handler)throw new Error('parser object "handler" property must be a function');if(e.hasOwnProperty("profiles")&&!Array.isArray(e.profiles))throw new Error('parser object "profiles" property must be an array');if(a(e.name))throw new Error('cannot clobber existing parser "'+e.name+'"');d.push(e)}function r(e){var t=d.find(function(t){return t.name===e});t&&d.delete(t)}function n(){return 0===d.length}function a(e){return!!d.find(function(t){return t.name===e})}function i(e){return d.find(function(t){return t.name===e})||null}function o(){return f}function s(){var e=d,t=e.filter(function(e){return!Array.isArray(e.profiles)||e.profiles.includes("core")});return f=Object.freeze({all:{parsers:e,parserRegExp:new RegExp(e.map(function(e){return"("+e.match+")"}).join("|"),"gm")},core:{parsers:t,parserRegExp:new RegExp(t.map(function(e){return"("+e.match+")"}).join("|"),"gm")}})}function u(){return"object"!==(void 0===f?"undefined":_typeof(f))||0===Object.keys(f).length}function l(e){if("object"!==(void 0===f?"undefined":_typeof(f))||!f.hasOwnProperty(e))throw new Error('nonexistent parser profile "'+e+'"');return f[e]}function c(e){return"object"===(void 0===f?"undefined":_typeof(f))&&f.hasOwnProperty(e)}var d=[],f=void 0;return Object.freeze(Object.defineProperties({},{parsers:{get:e},add:{value:t},delete:{value:r},isEmpty:{value:n},has:{value:a},get:{value:i},Profile:{value:Object.freeze(Object.defineProperties({},{profiles:{get:o},compile:{value:s},isEmpty:{value:u},has:{value:c},get:{value:l}}))}}))}()}),Object.defineProperties(t,{helpers:{value:{}},getValue:{value:State.getVar},setValue:{value:State.setVar},parse:{value:Scripting.parse},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(t.helpers,{inlineCss:{value:function(){function e(e){var r={classes:[],id:"",styles:{}},n=void 0;do{t.lastIndex=e.nextMatch;var a=t.exec(e.source);n=a&&a.index===e.nextMatch,n&&(a[1]?r.styles[Util.fromCssProperty(a[1])]=a[2].trim():a[3]?r.styles[Util.fromCssProperty(a[3])]=a[4].trim():a[5]?r.classes=r.classes.concat(a[5].slice(1).split(/\./)):a[6]&&(r.id=a[6].slice(1).split(/#/).pop()),e.nextMatch=t.lastIndex)}while(n);return r}var t=new RegExp(Patterns.inlineCss,"gm");return e}()},evalText:{value:function(e){var t=void 0;try{switch(t=Scripting.evalTwineScript(e),void 0===t?"undefined":_typeof(t)){case"string":""===t.trim()&&(t=e);break;case"number":t=String(t);break;default:t=e}}catch(r){t=e}return t}},evalPassageId:{value:function(e){return null==e||Story.has(e)?e:t.helpers.evalText(e)}},hasBlockContext:{value:function(e){for(var t="function"==typeof window.getComputedStyle,r=e.length-1;r>=0;--r){var n=e[r];switch(n.nodeType){case Node.ELEMENT_NODE:var a=n.nodeName.toUpperCase();if("BR"===a)return!0;var i=t?window.getComputedStyle(n,null):n.currentStyle;if(i&&i.display){if("none"===i.display)continue;return"block"===i.display}switch(a){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}},createShadowSetterCallback:{value:function(){function e(){if(!a&&!(a=t.Parser.get("macro")))throw new Error('cannot find "macro" parser');return a}function r(){for(var t=a||e(),r=new Set,n=t.context;null!==n;n=n.parent)n._shadows&&n._shadows.forEach(function(e){return r.add(e)});return[].concat(_toConsumableArray(r))}function n(e){var t={};return r().forEach(function(e){var r=e.slice(1),n="$"===e[0]?State.variables:State.temporary;t[e]=n[r]}),function(){var r=Object.keys(t),n=r.length>0?{}:null;try{return r.forEach(function(e){var r=e.slice(1),a="$"===e[0]?State.variables:State.temporary;a.hasOwnProperty(r)&&(n[r]=a[r]),a[r]=t[e]}),Scripting.evalJavaScript(e)}finally{r.forEach(function(e){var r=e.slice(1),a="$"===e[0]?State.variables:State.temporary;t[e]=a[r],n.hasOwnProperty(r)?a[r]=n[r]:delete a[r]})}}}var a=null;return n}()},parseSquareBracketedMarkup:{value:function(){function e(e,t){e:for(;;)switch(e.next()){case"\\":var r=e.next();if(r!==EOF&&"\n"!==r)break;case EOF:case"\n":return EOF;case t:break e}return e.pos}function t(e){if(!e.accept("["))return e.error(o.Error,"malformed square-bracketed markup");if(e.accept("["))e.data.isLink=!0,e.emit(o.LinkMeta);else{if(e.accept("<>"),!(e.accept("Ii")&&e.accept("Mm")&&e.accept("Gg")&&e.accept("[")))return e.error(o.Error,"malformed square-bracketed markup");e.data.isLink=!1,e.emit(o.ImageMeta)}return e.depth=2,r}function r(t){for(var r=t.data.isLink?"link":"image",i=s.None;;)switch(t.next()){case EOF:case"\n":return t.error(o.Error,"unterminated "+r+" markup");case'"':if(e(t,'"')===EOF)return t.error(o.Error,"unterminated double quoted string in "+r+" markup");break;case"|":i===s.None&&(i=s.LTR,t.backup(),t.emit(o.Text),t.forward(),t.emit(o.DelimLTR));break;case"-":i===s.None&&">"===t.peek()&&(i=s.LTR,t.backup(),t.emit(o.Text),t.forward(2),t.emit(o.DelimLTR));break;case"<":i===s.None&&"-"===t.peek()&&(i=s.RTL,t.backup(),t.emit(t.data.isLink?o.Link:o.Source),t.forward(2),t.emit(o.DelimRTL));break;case"[":++t.depth;break;case"]":if(1===--t.depth)switch(t.peek()){case"[":return++t.depth,t.backup(),i===s.RTL?t.emit(o.Text):t.emit(t.data.isLink?o.Link:o.Source),t.forward(2),t.emit(o.InnerMeta),t.data.isLink?a:n;case"]":return--t.depth,t.backup(),i===s.RTL?t.emit(o.Text):t.emit(t.data.isLink?o.Link:o.Source),t.forward(2),t.emit(o.RightMeta),null;default:return t.error(o.Error,"malformed "+r+" markup")}}}function n(t){for(var r=t.data.isLink?"link":"image";;)switch(t.next()){case EOF:case"\n":return t.error(o.Error,"unterminated "+r+" markup");case'"':if(e(t,'"')===EOF)return t.error(o.Error,"unterminated double quoted string in "+r+" markup link component");break;case"[":++t.depth;break;case"]":if(1===--t.depth)switch(t.peek()){case"[":return++t.depth,t.backup(),t.emit(o.Link),t.forward(2),t.emit(o.InnerMeta),a;case"]":return--t.depth,t.backup(),t.emit(o.Link),t.forward(2),t.emit(o.RightMeta),null;default:return t.error(o.Error,"malformed "+r+" markup")}}}function a(t){for(var r=t.data.isLink?"link":"image";;)switch(t.next()){case EOF:case"\n":return t.error(o.Error,"unterminated "+r+" markup");case'"':if(e(t,'"')===EOF)return t.error(o.Error,"unterminated double quoted string in "+r+" markup setter component");break;case"'":if(e(t,"'")===EOF)return t.error(o.Error,"unterminated single quoted string in "+r+" markup setter component");break;case"[":++t.depth;break;case"]":if(1===--t.depth)return"]"!==t.peek()?t.error(o.Error,"malformed "+r+" markup"):(--t.depth,t.backup(),t.emit(o.Setter),t.forward(2),t.emit(o.RightMeta),null)}}function i(e){var r=new Lexer(e.source,t);r.start=r.pos=e.matchStart;var n={},a=r.run(),i=a.last();return i&&i.type===o.Error?n.error=i.message:a.forEach(function(e){var t=e.text.trim();switch(e.type){case o.ImageMeta:n.isImage=!0,"<"===t[1]?n.align="left":">"===t[1]&&(n.align="right");break;case o.LinkMeta:n.isLink=!0;break;case o.Link:"~"===t[0]?(n.forceInternal=!0,n.link=t.slice(1)):n.link=t;break;case o.Setter:n.setter=t;break;case o.Source:n.source=t;break;case o.Text:n.text=t}}),n.pos=r.pos,n}var o=Lexer.enumFromNames(["Error","DelimLTR","DelimRTL","InnerMeta","ImageMeta","LinkMeta","Link","RightMeta","Setter","Source","Text"]),s=Lexer.enumFromNames(["None","LTR","RTL"]);return i}()}}),t}();!function(){function e(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(t[1]).appendTo(e.output))}Wikifier.Parser.add({name:"quoteByBlock",profiles:["block"],match:"^<<<\\n",terminator:"^<<<\\n",handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));e.subWikify(jQuery(document.createElement("blockquote")).appendTo(e.output).get(0),this.terminator)}}),Wikifier.Parser.add({name:"quoteByLine",profiles:["block"],match:"^>+",lookahead:/^>+/gm,terminator:"\\n",handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));var t=[e.output],r=0,n=e.matchLength,a=void 0,i=void 0;do{if(n>r)for(i=r;i<n;++i)t.push(jQuery(document.createElement("blockquote")).appendTo(t[t.length-1]).get(0));else if(n<r)for(i=r;i>n;--i)t.pop();r=n,e.subWikify(t[t.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(t[t.length-1]),this.lookahead.lastIndex=e.nextMatch;var o=this.lookahead.exec(e.source);a=o&&o.index===e.nextMatch,a&&(n=o[0].length,e.nextMatch+=o[0].length)}while(a)}}),Wikifier.Parser.add({name:"macro",profiles:["core"],match:"<<",lookahead:new RegExp("<<(/?"+Patterns.macroName+")(?:\\s*)((?:(?:`(?:\\\\.|[^`\\\\])*`)|(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>","gm"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(e){var t=this.lookahead.lastIndex=e.matchStart;if(this.parseTag(e)){var r=e.nextMatch,n=this.working.name,a=this.working.arguments,i=void 0;try{if(!(i=Macro.get(n))){if(Macro.tags.has(n)){var o=Macro.tags.get(n);return throwError(e.output,"child tag <<"+n+">> was found outside of a call to its parent macro"+(1===o.length?"":"s")+" <<"+o.join(">>, <<")+">>",e.source.slice(t,e.nextMatch))}return throwError(e.output,"macro <<"+n+">> does not exist",e.source.slice(t,e.nextMatch))}var s=null;if(i.hasOwnProperty("tags")&&!(s=this.parseBody(e,i)))return e.nextMatch=r,throwError(e.output,"cannot find a closing tag for macro <<"+n+">>",e.source.slice(t,e.nextMatch)+"…");if("function"!=typeof i.handler)return throwError(e.output,"macro <<"+n+">> handler function "+(i.hasOwnProperty("handler")?"is not a function":"does not exist"),e.source.slice(t,e.nextMatch));var u=s?s[0].args:this.createArgs(a,this.skipArgs(i,i.name));if(i.hasOwnProperty("_MACRO_API")){this.context=new MacroContext({macro:i,name:n,args:u,payload:s,source:e.source.slice(t,e.nextMatch),parent:this.context,parser:e});try{i.handler.call(this.context)}finally{this.context=this.context.parent}}else{var l=e._rawArgs;e._rawArgs=a;try{i.handler(e.output,n,u,e,s)}finally{e._rawArgs=l}}}catch(r){return throwError(e.output,"cannot execute "+(i&&i.isWidget?"widget":"macro")+" <<"+n+">>: "+r.message,e.source.slice(t,e.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else e.outputText(e.output,e.matchStart,e.nextMatch)},parseTag:function(e){var t=this.lookahead.exec(e.source);return!(!t||t.index!==e.matchStart||!t[1])&&(e.nextMatch=this.lookahead.lastIndex,this.working.source=e.source.slice(t.index,this.lookahead.lastIndex),this.working.name=t[1],this.working.arguments=t[2],this.working.index=t.index,!0)},parseBody:function(e,t){for(var r=this.working.name,n="/"+r,a="end"+r,i=!!Array.isArray(t.tags)&&t.tags,o=[],s=-1,u=1,l=this.working.source,c=this.working.name,d=this.working.arguments,f=e.nextMatch;-1!==(e.matchStart=e.source.indexOf(this.match,e.nextMatch));)if(this.parseTag(e)){var p=this.working.source,h=this.working.name,g=this.working.arguments,m=this.working.index,v=e.nextMatch;switch(h){case r:++u;break;case a:case n:--u;break;default:if(1===u&&i)for(var y=0,b=i.length;y<b;++y)h===i[y]&&(o.push({source:l,name:c,arguments:d,args:this.createArgs(d,this.skipArgs(t,c)),contents:e.source.slice(f,m)}),l=p,c=h,d=g,f=v)}if(0===u){o.push({source:l,name:c,arguments:d,args:this.createArgs(d,this.skipArgs(t,c)),contents:e.source.slice(f,m)}),s=v;break}}else this.lookahead.lastIndex=e.nextMatch=e.matchStart+this.match.length;return-1!==s?(e.nextMatch=s,o):null},createArgs:function(e,t){var r=t?[]:this.parseArgs(e);return Object.defineProperties(r,{raw:{value:e},full:{value:Scripting.parse(e)}}),r},skipArgs:function(e,t){if(e.hasOwnProperty("skipArgs")){var r=e.skipArgs;return"boolean"==typeof r&&r||Array.isArray(r)&&r.includes(t)}return!!e.hasOwnProperty("skipArg0")&&(e.skipArg0&&e.name===t)},parseArgs:function(){function e(e,t){e:for(;;)switch(e.next()){case"\\":var r=e.next();if(r!==EOF&&"\n"!==r)break;case EOF:case"\n":return EOF;case t:break e}return e.pos}function t(e){var t=e.source.slice(e.pos).search(c);if(t===EOF)return null;switch(0!==t&&(e.pos+=t,e.ignore()),e.next()){case"`":return r;case'"':return n;case"'":return a;case"[":return i;default:return o}}function r(r){return e(r,"`")===EOF?r.error(u.Error,"unterminated backquote expression"):(r.emit(u.Expression),t)}function n(r){return e(r,'"')===EOF?r.error(u.Error,"unterminated double quoted string"):(r.emit(u.String),t)}function a(r){return e(r,"'")===EOF?r.error(u.Error,"unterminated single quoted string"):(r.emit(u.String),t)}function i(e){var r=void 0;if(e.accept("<>IiMmGg")?(r="image",e.acceptRun("<>IiMmGg")):r="link",!e.accept("["))return e.error(u.Error,"malformed "+r+" markup");e.depth=2;e:for(;;)switch(e.next()){case"\\":var n=e.next();if(n!==EOF&&"\n"!==n)break;case EOF:case"\n":return e.error(u.Error,"unterminated "+r+" markup");case"[":++e.depth;break;case"]":if(--e.depth<0)return e.error(u.Error,"unexpected right square bracket ']'");if(1===e.depth){if("]"===e.next()){--e.depth;break e}e.backup()}}return e.emit(u.SquareBracket),t}function o(e){var r=e.source.slice(e.pos).search(l);return e.pos=r===EOF?e.source.length:e.pos+r,e.emit(u.Bareword),r===EOF?null:t}function s(e){var r=new Lexer(e,t),n=[];return r.run().forEach(function(e){var t=e.text;switch(e.type){case u.Error:throw new Error('unable to parse macro argument "'+t+'": '+e.message);case u.Bareword:if(d.test(t))t=State.getVar(t);else if(/^(?:settings|setup)[.[]/.test(t))try{t=Scripting.evalTwineScript(t)}catch(e){throw new Error('unable to parse macro argument "'+t+'": '+e.message)}else if("null"===t)t=null;else if("undefined"===t)t=undefined;else if("true"===t)t=!0;else if("false"===t)t=!1;else if("NaN"===t)t=NaN;else{var r=Number(t);Number.isNaN(r)||(t=r)}break;case u.Expression:if(""===(t=t.slice(1,-1).trim()))t=undefined;else try{t=Scripting.evalTwineScript("("+t+")")}catch(e){throw new Error('unable to parse macro argument expression "'+t+'": '+e.message)}break;case u.String:try{t=Scripting.evalJavaScript(t)}catch(e){throw new Error('unable to parse macro argument string "'+t+'": '+e.message)}break;case u.SquareBracket:var a=Wikifier.helpers.parseSquareBracketedMarkup({source:t,matchStart:0});if(a.hasOwnProperty("error"))throw new Error('unable to parse macro argument "'+t+'": '+a.error);if(a.pos<t.length)throw new Error('unable to parse macro argument "'+t+'": unexpected character(s) "'+t.slice(a.pos)+'" (pos: '+a.pos+")");a.isLink?(t={isLink:!0},t.count=a.hasOwnProperty("text")?2:1,t.link=Wikifier.helpers.evalPassageId(a.link),t.text=a.hasOwnProperty("text")?Wikifier.helpers.evalText(a.text):t.link,t.external=!a.forceInternal&&Wikifier.isExternalLink(t.link),t.setFn=a.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(a.setter)):null):a.isImage&&(t=function(e){var t={source:e,isImage:!0};if("data:"!==e.slice(0,5)&&Story.has(e)){var r=Story.get(e);r.tags.includes("Twine.image")&&(t.source=r.text,t.passage=r.title)}return t}(Wikifier.helpers.evalPassageId(a.source)),a.hasOwnProperty("align")&&(t.align=a.align),a.hasOwnProperty("text")&&(t.title=Wikifier.helpers.evalText(a.text)),a.hasOwnProperty("link")&&(t.link=Wikifier.helpers.evalPassageId(a.link),t.external=!a.forceInternal&&Wikifier.isExternalLink(t.link)),t.setFn=a.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(a.setter)):null)}n.push(t)}),n}var u=Lexer.enumFromNames(["Error","Bareword","Expression","String","SquareBracket"]),l=new RegExp(Patterns.space),c=new RegExp(Patterns.notSpace),d=new RegExp("^"+Patterns.variable);return s}()}),Wikifier.Parser.add({name:"link",profiles:["core"],match:"\\[\\[[^[]",handler:function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup(e);if(t.hasOwnProperty("error"))return void e.outputText(e.output,e.matchStart,e.nextMatch);e.nextMatch=t.pos;var r=Wikifier.helpers.evalPassageId(t.link),n=t.hasOwnProperty("text")?Wikifier.helpers.evalText(t.text):r,a=t.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(t.setter)):null,i=(Config.debug?new DebugView(e.output,"link-markup","[[link]]",e.source.slice(e.matchStart,e.nextMatch)):e).output;t.forceInternal||!Wikifier.isExternalLink(r)?Wikifier.createInternalLink(i,r,n,a):Wikifier.createExternalLink(i,r,n)}}),Wikifier.Parser.add({name:"urlLink",profiles:["core"],match:Patterns.url,handler:function(e){
e.outputText(Wikifier.createExternalLink(e.output,e.matchText),e.matchStart,e.nextMatch)}}),Wikifier.Parser.add({name:"image",profiles:["core"],match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup(e);if(t.hasOwnProperty("error"))return void e.outputText(e.output,e.matchStart,e.nextMatch);e.nextMatch=t.pos;var r=void 0;Config.debug&&(r=new DebugView(e.output,"image-markup",t.hasOwnProperty("link")?"[img[][link]]":"[img[]]",e.source.slice(e.matchStart,e.nextMatch)),r.modes({block:!0}));var n=t.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(t.setter)):null,a=(Config.debug?r:e).output,i=void 0;if(t.hasOwnProperty("link")){var o=Wikifier.helpers.evalPassageId(t.link);a=t.forceInternal||!Wikifier.isExternalLink(o)?Wikifier.createInternalLink(a,o,null,n):Wikifier.createExternalLink(a,o),a.classList.add("link-image")}if(a=jQuery(document.createElement("img")).appendTo(a).get(0),i=Wikifier.helpers.evalPassageId(t.source),"data:"!==i.slice(0,5)&&Story.has(i)){var s=Story.get(i);s.tags.includes("Twine.image")&&(a.setAttribute("data-passage",s.title),i=s.text.trim())}a.src=i,t.hasOwnProperty("text")&&(a.title=Wikifier.helpers.evalText(t.text)),t.hasOwnProperty("align")&&(a.align=t.align)}}),Wikifier.Parser.add({name:"monospacedByBlock",profiles:["block"],match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);if(t&&t.index===e.matchStart){var r=jQuery(document.createElement("pre"));jQuery(document.createElement("code")).text(t[1]).appendTo(r),r.appendTo(e.output),e.nextMatch=this.lookahead.lastIndex}}}),Wikifier.Parser.add({name:"formatByChar",profiles:["core"],match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(e){switch(e.matchText){case"''":e.subWikify(jQuery(document.createElement("strong")).appendTo(e.output).get(0),"''");break;case"//":e.subWikify(jQuery(document.createElement("em")).appendTo(e.output).get(0),"//");break;case"__":e.subWikify(jQuery(document.createElement("u")).appendTo(e.output).get(0),"__");break;case"^^":e.subWikify(jQuery(document.createElement("sup")).appendTo(e.output).get(0),"\\^\\^");break;case"~~":e.subWikify(jQuery(document.createElement("sub")).appendTo(e.output).get(0),"~~");break;case"==":e.subWikify(jQuery(document.createElement("s")).appendTo(e.output).get(0),"==");break;case"{{{":var t=/\{\{\{((?:.|\n)*?)\}\}\}/gm;t.lastIndex=e.matchStart;var r=t.exec(e.source);r&&r.index===e.matchStart&&(jQuery(document.createElement("code")).text(r[1]).appendTo(e.output),e.nextMatch=t.lastIndex)}}}),Wikifier.Parser.add({name:"customStyle",profiles:["core"],match:"@@",terminator:"@@",blockRe:/\s*\n/gm,handler:function(e){var t=Wikifier.helpers.inlineCss(e);this.blockRe.lastIndex=e.nextMatch;var r=this.blockRe.exec(e.source),n=r&&r.index===e.nextMatch,a=jQuery(document.createElement(n?"div":"span")).appendTo(e.output);0===t.classes.length&&""===t.id&&0===Object.keys(t.styles).length?a.addClass("marked"):(t.classes.forEach(function(e){return a.addClass(e)}),""!==t.id&&a.attr("id",t.id),a.css(t.styles)),n?(e.nextMatch+=r[0].length,e.subWikify(a[0],"\\n?"+this.terminator)):e.subWikify(a[0],this.terminator)}}),Wikifier.Parser.add({name:"verbatimText",profiles:["core"],match:'"{3}|<[Nn][Oo][Ww][Ii][Kk][Ii]>',lookahead:/(?:"{3}((?:.|\n)*?)"{3})|(?:<[Nn][Oo][Ww][Ii][Kk][Ii]>((?:.|\n)*?)<\/[Nn][Oo][Ww][Ii][Kk][Ii]>)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex,jQuery(document.createElement("span")).addClass("verbatim").text(t[1]||t[2]).appendTo(e.output))}}),Wikifier.Parser.add({name:"horizontalRule",profiles:["core"],match:"^----+$\\n?|<[Hh][Rr]\\s*/?>\\n?",handler:function(e){jQuery(document.createElement("hr")).appendTo(e.output)}}),Wikifier.Parser.add({name:"emdash",profiles:["core"],match:"--",handler:function(e){jQuery(document.createTextNode("—")).appendTo(e.output)}}),Wikifier.Parser.add({name:"doubleDollarSign",profiles:["core"],match:"\\${2}",handler:function(e){jQuery(document.createTextNode("$")).appendTo(e.output)}}),Wikifier.Parser.add({name:"nakedVariable",profiles:["core"],match:Patterns.variable+"(?:(?:\\."+Patterns.identifier+")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\["+Patterns.variable+"\\]))*",handler:function(e){var t=toStringOrDefault(State.getVar(e.matchText),null);null===t?jQuery(document.createTextNode(e.matchText)).appendTo(e.output):new Wikifier((Config.debug?new DebugView(e.output,"variable",e.matchText,e.matchText):e).output,t)}}),Wikifier.Parser.add({name:"template",profiles:["core"],match:"\\?"+Patterns.templateName,handler:function(e){var t=e.matchText.slice(1),r=Template.get(t),n=null;switch(r instanceof Array&&(r=r.random()),void 0===r?"undefined":_typeof(r)){case"function":try{n=toStringOrDefault(r.call({name:t}),null)}catch(r){return throwError(e.output,"cannot execute function template ?"+t+": "+r.message,e.source.slice(e.matchStart,e.nextMatch))}break;case"string":n=r}null===n?jQuery(document.createTextNode(e.matchText)).appendTo(e.output):new Wikifier((Config.debug?new DebugView(e.output,"template",e.matchText,e.matchText):e).output,n)}}),Wikifier.Parser.add({name:"heading",profiles:["block"],match:"^!{1,6}",terminator:"\\n",handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));e.subWikify(jQuery(document.createElement("h"+e.matchLength)).appendTo(e.output).get(0),this.terminator)}}),Wikifier.Parser.add({name:"table",profiles:["block"],match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));var t=jQuery(document.createElement("table")).appendTo(e.output).get(0),r=[],n=null,a=null,i=0,o=void 0;e.nextMatch=e.matchStart;do{this.lookahead.lastIndex=e.nextMatch;var s=this.lookahead.exec(e.source);if(o=s&&s.index===e.nextMatch){var u=s[2];"k"===u?(t.className=s[1],e.nextMatch+=s[0].length+1):(u!==n&&(n=u,a=jQuery(document.createElement(this.rowTypes[u])).appendTo(t)),"c"===n?(a.css("caption-side",0===i?"top":"bottom"),e.nextMatch+=1,e.subWikify(a[0],this.rowTerminator)):this.rowHandler(e,jQuery(document.createElement("tr")).appendTo(a).get(0),r),++i)}}while(o)},rowHandler:function(e,t,r){var n=this,a=new RegExp(this.cellPattern,"gm"),i=0,o=1,s=void 0;do{a.lastIndex=e.nextMatch;var u=a.exec(e.source);if(s=u&&u.index===e.nextMatch){if("~"===u[1]){var l=r[i];l&&(++l.rowCount,l.$element.attr("rowspan",l.rowCount).css("vertical-align","middle")),e.nextMatch=u.index+u[0].length-1}else if(">"===u[1])++o,e.nextMatch=u.index+u[0].length-1;else{if(u[2]){e.nextMatch=u.index+u[0].length;break}!function(){++e.nextMatch;for(var a=Wikifier.helpers.inlineCss(e),s=!1,u=!1,l=void 0;" "===e.source.substr(e.nextMatch,1);)s=!0,++e.nextMatch;"!"===e.source.substr(e.nextMatch,1)?(l=jQuery(document.createElement("th")).appendTo(t),++e.nextMatch):l=jQuery(document.createElement("td")).appendTo(t),r[i]={rowCount:1,$element:l},o>1&&(l.attr("colspan",o),o=1),e.subWikify(l[0],n.cellTerminator)," "===e.matchText.substr(e.matchText.length-2,1)&&(u=!0),a.classes.forEach(function(e){return l.addClass(e)}),""!==a.id&&l.attr("id",a.id),s&&u?a.styles["text-align"]="center":s?a.styles["text-align"]="right":u&&(a.styles["text-align"]="left"),l.css(a.styles),e.nextMatch=e.nextMatch-1}()}++i}}while(s)}}),Wikifier.Parser.add({name:"list",profiles:["block"],match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(e){if(!Wikifier.helpers.hasBlockContext(e.output.childNodes))return void jQuery(e.output).append(document.createTextNode(e.matchText));e.nextMatch=e.matchStart;var t=[e.output],r=null,n=0,a=void 0,i=void 0;do{this.lookahead.lastIndex=e.nextMatch;var o=this.lookahead.exec(e.source);if(a=o&&o.index===e.nextMatch){var s=o[2]?"ol":"ul",u=o[0].length;if(e.nextMatch+=o[0].length,u>n)for(i=n;i<u;++i)t.push(jQuery(document.createElement(s)).appendTo(t[t.length-1]).get(0));else if(u<n)for(i=n;i>u;--i)t.pop();else u===n&&s!==r&&(t.pop(),t.push(jQuery(document.createElement(s)).appendTo(t[t.length-1]).get(0)));n=u,r=s,e.subWikify(jQuery(document.createElement("li")).appendTo(t[t.length-1]).get(0),this.terminator)}}while(a)}}),Wikifier.Parser.add({name:"commentByBlock",profiles:["core"],match:"(?:/(?:%|\\*))|(?:\x3c!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"lineContinuation",profiles:["core"],match:"\\\\"+Patterns.spaceNoTerminator+"*\\n|\\n"+Patterns.spaceNoTerminator+"*\\\\|\\n?\\\\"+Patterns.spaceNoTerminator+"*$|^"+Patterns.spaceNoTerminator+"*\\\\\\n?",handler:function(e){e.nextMatch=e.matchStart+e.matchLength}}),Wikifier.Parser.add({name:"lineBreak",profiles:["core"],match:"\\n|<[Bb][Rr]\\s*/?>",handler:function(e){e.options.nobr||jQuery(document.createElement("br")).appendTo(e.output)}}),Wikifier.Parser.add({name:"htmlCharacterReference",profiles:["core"],match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",handler:function(e){jQuery(document.createDocumentFragment()).append(e.matchText).appendTo(e.output)}}),Wikifier.Parser.add({name:"xmlProlog",profiles:["core"],match:"<\\?[Xx][Mm][Ll][^>]*\\?>",handler:function(e){e.nextMatch=e.matchStart+e.matchLength}}),Wikifier.Parser.add({name:"verbatimHtml",profiles:["core"],match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:e}),Wikifier.Parser.add({name:"verbatimSvgTag",profiles:["core"],match:"<[Ss][Vv][Gg][^>]*>",lookahead:/(<[Ss][Vv][Gg][^>]*>(?:.|\n)*?<\/[Ss][Vv][Gg]>)/gm,handler:e}),Wikifier.Parser.add({name:"verbatimScriptTag",profiles:["core"],match:"<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>",lookahead:/(<[Ss][Cc][Rr][Ii][Pp][Tt]*>(?:.|\n)*?<\/[Ss][Cc][Rr][Ii][Pp][Tt]>)/gm,handler:e}),Wikifier.Parser.add({name:"styleTag",profiles:["core"],match:"<[Ss][Tt][Yy][Ll][Ee][^>]*>",lookahead:/(<[Ss][Tt][Yy][Ll][Ee]*>)((?:.|\n)*?)(<\/[Ss][Tt][Yy][Ll][Ee]>)/gm,imageMarkup:new RegExp(Patterns.cssImage,"g"),hasImageMarkup:new RegExp(Patterns.cssImage),handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);if(t&&t.index===e.matchStart){e.nextMatch=this.lookahead.lastIndex;var r=t[2];this.hasImageMarkup.test(r)&&(this.imageMarkup.lastIndex=0,r=r.replace(this.imageMarkup,function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup({source:e,matchStart:0});if(t.hasOwnProperty("error")||t.pos<e.length)return e;var r=t.source;if("data:"!==r.slice(0,5)&&Story.has(r)){var n=Story.get(r);n.tags.includes("Twine.image")&&(r=n.text)}return'url("'+r.replace(/"/g,"%22")+'")'})),jQuery(document.createDocumentFragment()).append(t[1]+r+t[3]).appendTo(e.output)}}}),Wikifier.Parser.add({name:"htmlTag",profiles:["core"],match:"<\\w+(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>",tagRe:/^<(\w+)/,mediaElements:["audio","img","source","track","video"],nobrElements:["audio","colgroup","datalist","dl","figure","ol","optgroup","picture","select","table","tbody","tfoot","thead","tr","ul","video"],voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],handler:function(e){var t=this.tagRe.exec(e.matchText),r=t&&t[1],n=r&&r.toLowerCase();if(n){var a=this.voidElements.includes(n)||e.matchText.endsWith("/>"),i=this.nobrElements.includes(n),o=void 0,s=void 0;if(!a){o="<\\/"+n+"\\s*>";var u=new RegExp(o,"gim");u.lastIndex=e.matchStart,s=u.exec(e.source)}if(!a&&!s)return throwError(e.output,"cannot find a closing tag for HTML <"+r+">",e.matchText+"…");var l=e.output,c=document.createElement(e.output.tagName),d=void 0;for(c.innerHTML=e.matchText;c.firstChild;)c=c.firstChild;try{this.processAttributeDirectives(c)}catch(t){return throwError(e.output,"<"+n+">: "+t.message,e.matchText+"…")}c.hasAttribute("data-passage")&&(this.processDataAttributes(c,n),Config.debug&&(d=new DebugView(e.output,"html-"+n,n,e.matchText),d.modes({block:"img"===n,nonvoid:s}),l=d.output)),s&&(e.subWikify(c,o,{ignoreTerminatorCase:!0,nobr:i}),d&&jQuery(c).find(".debug.block").length>0&&d.modes({block:!0})),l.appendChild("track"===n?c.cloneNode(!0):c)}},processAttributeDirectives:function(e){[].concat(_toConsumableArray(e.attributes)).forEach(function(t){var r=t.name,n=t.value,a="@"===r[0];if(a||r.startsWith("sc-eval:")){var i=r.slice(a?1:8),o=void 0;try{o=Scripting.evalTwineScript(n)}catch(e){throw new Error('bad evaluation from attribute directive "'+r+'": '+e.message)}try{e.setAttribute(i,o),e.removeAttribute(r)}catch(e){throw new Error('cannot transform attribute directive "'+r+'" into attribute "'+i+'"')}}})},processDataAttributes:function(e,t){var r=e.getAttribute("data-passage");if(null!=r){var n=Wikifier.helpers.evalPassageId(r);if(n!==r&&(r=n,e.setAttribute("data-passage",n)),""!==r)if(this.mediaElements.includes(t)){if("data:"!==r.slice(0,5)&&Story.has(r)){r=Story.get(r);var a=void 0,i=void 0;switch(t){case"audio":case"video":i="Twine."+t;break;case"img":i="Twine.image";break;case"track":i="Twine.vtt";break;case"source":var o=$(e).closest("audio,picture,video");o.length&&(a=o.get(0).tagName.toLowerCase(),i="Twine."+("picture"===a?"image":a))}r.tags.includes(i)&&(e["picture"===a?"srcset":"src"]=r.text.trim())}}else{var s=e.getAttribute("data-setter"),u=void 0;null!=s&&""!==(s=String(s).trim())&&(u=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(s))),Story.has(r)?(e.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(r)&&e.classList.add("link-visited")):e.classList.add("link-broken"),jQuery(e).ariaClick({one:!0},function(){"function"==typeof u&&u.call(this),Engine.play(r)})}}}})}();var Template=function(){function e(e,t){if(!(s(t)||t instanceof Array&&t.length>0&&t.every(s)))throw new Error("invalid template type ("+e+"); templates must be: functions, strings, or an array of either");(e instanceof Array?e:[e]).forEach(function(e){if(i.has(e))throw new Error("cannot clobber existing template ?"+e);if(!o.test(e))throw new Error('invalid template name "'+e+'"');i.set(e,t)})}function t(e){(e instanceof Array?e:[e]).forEach(function(e){return i.delete(e)})}function r(e){return i.has(e)?i.get(e):null}function n(e){return i.has(e)}function a(){return i.size}var i=new Map,o=new RegExp("^(?:"+Patterns.templateName+")$"),s=function(e){var t=void 0===e?"undefined":_typeof(e);return"function"===t||"string"===t};return Object.freeze(Object.defineProperties({},{add:{value:e},delete:{value:t},get:{value:r},has:{value:n},size:{get:a}}))}(),Macro=function(){function e(t,r,a){if(Array.isArray(t))return void t.forEach(function(t){return e(t,r,a)});if(!f.test(t))throw new Error('invalid macro name "'+t+'"');if(n(t))throw new Error("cannot clobber existing macro <<"+t+">>");if(u(t))throw new Error("cannot clobber child tag <<"+t+">> of parent macro"+(1===d[t].length?"":"s")+" <<"+d[t].join(">>, <<")+">>");try{if("object"===(void 0===r?"undefined":_typeof(r)))c[t]=a?clone(r):r;else{if(!n(r))throw new Error("cannot create alias of nonexistent macro <<"+r+">>");c[t]=a?clone(c[r]):c[r]}Object.defineProperty(c,t,{writable:!1}),c[t]._MACRO_API=!0}catch(e){throw"TypeError"===e.name?new Error("cannot clobber protected macro <<"+t+">>"):new Error("unknown error when attempting to add macro <<"+t+">>: ["+e.name+"] "+e.message)}if(c[t].hasOwnProperty("tags"))if(null==c[t].tags)o(t);else{if(!Array.isArray(c[t].tags))throw new Error('bad value for "tags" property of macro <<'+t+">>");o(t,c[t].tags)}}function t(e){if(Array.isArray(e))return void e.forEach(function(e){return t(e)});if(n(e)){c[e].hasOwnProperty("tags")&&s(e);try{Object.defineProperty(c,e,{writable:!0}),delete c[e]}catch(t){throw new Error("unknown error removing macro <<"+e+">>: "+t.message)}}else if(u(e))throw new Error("cannot remove child tag <<"+e+">> of parent macro <<"+d[e]+">>")}function r(){return 0===Object.keys(c).length}function n(e){return c.hasOwnProperty(e)}function a(e){var t=null;return n(e)&&"function"==typeof c[e].handler?t=c[e]:macros.hasOwnProperty(e)&&"function"==typeof macros[e].handler&&(t=macros[e]),t}function i(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"init";Object.keys(c).forEach(function(t){"function"==typeof c[t][e]&&c[t][e](t)}),Object.keys(macros).forEach(function(t){"function"==typeof macros[t][e]&&macros[t][e](t)})}function o(e,t){if(!e)throw new Error("no parent specified");for(var r=["/"+e,"end"+e],a=[].concat(r,Array.isArray(t)?t:[]),i=0;i<a.length;++i){var o=a[i];if(n(o))throw new Error("cannot register tag for an existing macro");u(o)?d[o].includes(e)||(d[o].push(e),d[o].sort()):d[o]=[e]}}function s(e){if(!e)throw new Error("no parent specified");Object.keys(d).forEach(function(t){var r=d[t].indexOf(e);-1!==r&&(1===d[t].length?delete d[t]:d[t].splice(r,1))})}function u(e){return d.hasOwnProperty(e)}function l(e){return u(e)?d[e]:null}var c={},d={},f=new RegExp("^(?:"+Patterns.macroName+")$");return Object.freeze(Object.defineProperties({},{add:{value:e},delete:{value:t},isEmpty:{value:r},has:{value:n},get:{value:a},init:{value:i},tags:{value:Object.freeze(Object.defineProperties({},{register:{value:o},unregister:{value:s},has:{value:u},get:{value:l}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){return function(){function e(t){_classCallCheck(this,e);var r=Object.assign({parent:null,macro:null,name:"",args:null,payload:null,parser:null,source:""},t);if(null===r.macro||""===r.name||null===r.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{self:{value:r.macro},name:{value:r.name},args:{value:r.args},payload:{value:r.payload},source:{value:r.source},parent:{value:r.parent},parser:{value:r.parser},_output:{value:r.parser.output},_shadows:{writable:!0,value:null},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})}return _createClass(e,[{key:"contextHas",value:function(e){for(var t=this;null!==(t=t.parent);)if(e(t))return!0;return!1}},{key:"contextSelect",value:function(e){for(var t=this;null!==(t=t.parent);)if(e(t))return t;return null}},{key:"contextSelectAll",value:function(e){for(var t=[],r=this;null!==(r=r.parent);)e(r)&&t.push(r);return t}},{key:"addShadow",value:function(){var e=this;this._shadows||(this._shadows=new Set);for(var t=new RegExp("^"+Patterns.variable+"$"),r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];n.flat(1/0).forEach(function(r){if("string"!=typeof r)throw new TypeError("variable name must be a string; type: "+(void 0===r?"undefined":_typeof(r)));if(!t.test(r))throw new Error('invalid variable name "'+r+'"');e._shadows.add(r)})}},{key:"createShadowWrapper",value:function(e,t,r){var n=this,a=void 0;return"function"==typeof e&&(a={},this.shadowView.forEach(function(e){var t=e.slice(1),r="$"===e[0]?State.variables:State.temporary;a[e]=r[t]})),function(){for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];if("function"==typeof r&&r.apply(this,o),"function"==typeof e){var u=Object.keys(a),l=u.length>0?{}:null,c=Wikifier.Parser.get("macro"),d=void 0;try{u.forEach(function(e){var t=e.slice(1),r="$"===e[0]?State.variables:State.temporary;r.hasOwnProperty(t)&&(l[t]=r[t]),r[t]=a[e]}),d=c.context,c.context=n,e.apply(this,o)}finally{d!==undefined&&(c.context=d),u.forEach(function(e){var t=e.slice(1),r="$"===e[0]?State.variables:State.temporary;a[e]=r[t],l.hasOwnProperty(t)?r[t]=l[t]:delete r[t]})}}"function"==typeof t&&t.apply(this,o)}}},{key:"createDebugView",value:function(e,t){return this._debugView=new DebugView(this._output,"macro",e||this.name,t||this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(e,t){return throwError(this._output,"<<"+this.name+">>: "+e,t||this.source)}},{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"shadows",get:function(){return[].concat(_toConsumableArray(this._shadows))}},{key:"shadowView",get:function(){var e=new Set;return this.contextSelectAll(function(e){return e._shadows}).forEach(function(t){return t._shadows.forEach(function(t){return e.add(t)})}),[].concat(_toConsumableArray(e))}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}}]),e}()}();!function(){if(Macro.add("capture",{skipArgs:!0,tags:null,handler:function(){if(0===this.args.raw.length)return this.error("no story/temporary variable list specified");var e={};try{for(var t=new RegExp("("+Patterns.variable+")","g"),r=void 0;null!==(r=t.exec(this.args.raw));){var n=r[1],a=n.slice(1),i="$"===n[0]?State.variables:State.temporary;i.hasOwnProperty(a)&&(e[a]=i[a]),this.addShadow(n)}new Wikifier(this.output,this.payload[0].contents)}finally{this.shadows.forEach(function(t){var r=t.slice(1),n="$"===t[0]?State.variables:State.temporary;e.hasOwnProperty(r)?n[r]=e[r]:delete n[r]})}}}),Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("unset",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");for(var e=new RegExp("State\\.(variables|temporary)\\.("+Patterns.identifier+")","g"),t=void 0;null!==(t=e.exec(this.args.full));){var r=State[t[1]],n=t[2];r.hasOwnProperty(n)&&delete r[n]}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remember",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}for(var e=storage.get("remember")||{},t=new RegExp("State\\.variables\\.("+Patterns.identifier+")","g"),r=void 0;null!==(r=t.exec(this.args.full));){var n=r[1];e[n]=State.variables[n]}if(!storage.set("remember",e))return this.error("unknown error, cannot remember: "+this.args.raw);Config.debug&&this.debugView.modes({hidden:!0})},init:function(){var e=storage.get("remember");e&&Object.keys(e).forEach(function(t){return State.variables[t]=e[t]})}}),Macro.add("forget",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no story variable list specified");for(var e=storage.get("remember"),t=new RegExp("State\\.variables\\.("+Patterns.identifier+")","g"),r=void 0,n=!1;null!==(r=t.exec(this.args.full));){var a=r[1];State.variables.hasOwnProperty(a)&&delete State.variables[a],e&&e.hasOwnProperty(a)&&(n=!0,delete e[a])}if(n)if(0===Object.keys(e).length){if(!storage.delete("remember"))return this.error("unknown error, cannot update remember store")}else if(!storage.set("remember",e))return this.error("unknown error, cannot update remember store");Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("run","set"),Macro.add("script",{skipArgs:!0,tags:null,handler:function(){var e=document.createDocumentFragment();try{Scripting.evalJavaScript(this.payload[0].contents,e)}catch(e){return this.error("bad evaluation: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e),this.source+this.payload[0].contents+"<</"+this.name+">>")}Config.debug&&this.createDebugView(),e.hasChildNodes()&&this.output.appendChild(e)}}),Macro.add("include",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=void 0;if(e="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],!Story.has(e))return this.error('passage "'+e+'" does not exist');Config.debug&&this.debugView.modes({block:!0}),e=Story.get(e);var t=void 0;t=this.args[1]?jQuery(document.createElement(this.args[1])).addClass(e.domId+" macro-"+this.name).attr("data-passage",e.title).appendTo(this.output):jQuery(this.output),t.wiki(e.processText())}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var e=toStringOrDefault(Scripting.evalJavaScript(this.args.full),null);null!==e&&new Wikifier(this.output,"-"===this.name?Util.escape(e):e)}catch(e){return this.error("bad evaluation: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}}}),Macro.add("silently",{skipArgs:!0,tags:null,handler:function(){var e=document.createDocumentFragment();if(new Wikifier(e,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({hidden:!0}),this.output.appendChild(e);else{var t=[].concat(_toConsumableArray(e.querySelectorAll(".error"))).map(function(e){return e.textContent});if(t.length>0)return this.error("error"+(1===t.length?"":"s")+" within contents ("+t.join("; ")+")",this.source+this.payload[0].contents+"<</"+this.name+">>")}}}),Macro.add("display","include"),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],handler:function(){var e=void 0;try{var t=this.payload.length;for(e=0;e<t;++e)switch(this.payload[e].name){case"else":if(this.payload[e].args.raw.length>0)return/^\s*if\b/i.test(this.payload[e].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'+(e>0?" (#"+e+")":"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: "+this.payload[e].args.raw);if(e+1!==t)return this.error("<<else>> must be the final clause");break;default:if(0===this.payload[e].args.full.length)return this.error("no conditional expression specified for <<"+this.payload[e].name+">> clause"+(e>0?" (#"+e+")":""));if(Config.macros.ifAssignmentError&&/[^!=&^|<>*\/%+-]=[^=]/.test(this.payload[e].args.full))return this.error("assignment operator found within <<"+this.payload[e].name+">> clause"+(e>0?" (#"+e+")":"")+" (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: "+this.payload[e].args.raw)}var r=Scripting.evalJavaScript,n=!1;for(e=0;e<t;++e){if(Config.debug&&this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1}),"else"===this.payload[e].name||r(this.payload[e].args.full)){n=!0,new Wikifier(this.output,this.payload[e].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++e;e<t;++e)this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!n,invalid:!n})}}catch(t){return this.error("bad conditional expression in <<"+(0===e?"if":"elseif")+">> clause"+(e>0?" (#"+e+")":"")+": "+("object"===(void 0===t?"undefined":_typeof(t))?t.message:t))}}}),Macro.add("switch",{skipArgs:["switch"],tags:["case","default"],handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var e=this.payload.length;if(1===e)return this.error("no cases specified");var t=void 0;for(t=1;t<e;++t)switch(this.payload[t].name){case"default":if(this.payload[t].args.length>0)return this.error("<<default>> does not accept values, invalid: "+this.payload[t].args.raw);if(t+1!==e)return this.error("<<default>> must be the final case");break;default:if(0===this.payload[t].args.length)return this.error("no value(s) specified for <<"+this.payload[t].name+">> (#"+t+")")}var r=void 0;try{r=Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}var n=this.debugView,a=!1;for(Config.debug&&n.modes({nonvoid:!1,hidden:!0}),t=1;t<e;++t){if(Config.debug&&this.createDebugView(this.payload[t].name,this.payload[t].source).modes({nonvoid:!1}),"default"===this.payload[t].name||this.payload[t].args.some(function(e){return e===r})){a=!0,new Wikifier(this.output,this.payload[t].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++t;t<e;++t)this.createDebugView(this.payload[t].name,this.payload[t].source).modes({nonvoid:!1,hidden:!0,invalid:!0});n.modes({nonvoid:!1,hidden:!0,invalid:!a}),this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!0,invalid:!a})}}}),Macro.add("for",{skipArgs:!0,tags:null,_hasRangeRe:new RegExp("^\\S"+Patterns.anyChar+"*?\\s+range\\s+\\S"+Patterns.anyChar+"*?$"),_rangeRe:new RegExp("^(?:State\\.(variables|temporary)\\.("+Patterns.identifier+")\\s*,\\s*)?State\\.(variables|temporary)\\.("+Patterns.identifier+")\\s+range\\s+(\\S"+Patterns.anyChar+"*?)$"),_3PartRe:/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/,handler:function(){var e=this.args.full.trim(),t=this.payload[0].contents.replace(/\n$/,"");if(0===e.length)this.self._handleFor.call(this,t,null,!0,null);else if(this.self._hasRangeRe.test(e)){var r=e.match(this.self._rangeRe);if(null===r)return this.error("invalid range form syntax, format: [index ,] value range collection");this.self._handleForRange.call(this,t,{type:r[1],name:r[2]},{type:r[3],name:r[4]},r[5])}else{var n=void 0,a=void 0,i=void 0;if(-1===e.indexOf(";")){if(/^\S+\s+in\s+\S+/i.test(e))return this.error("invalid syntax, for…in is not supported; see: for…range");if(/^\S+\s+of\s+\S+/i.test(e))return this.error("invalid syntax, for…of is not supported; see: for…range");a=e}else{var o=e.match(this.self._3PartRe);if(null===o)return this.error("invalid 3-part conditional form syntax, format: [init] ; [condition] ; [post]");n=o[1],a=o[2].trim(),i=o[3],0===a.length&&(a=!0)}this.self._handleFor.call(this,t,n,a,i)}},_handleFor:function(e,t,r,n){var a=Scripting.evalJavaScript,i=!0,o=Config.macros.maxLoopIterations;Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,t)try{a(t)}catch(e){return this.error("bad init expression: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}for(;a(r);){if(--o<0)return this.error("exceeded configured maximum loop iterations ("+Config.macros.maxLoopIterations+")");if(new Wikifier(this.output,i?e.replace(/^\n/,""):e),i&&(i=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(n)try{a(n)}catch(e){return this.error("bad post expression: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}}}catch(e){return this.error("bad conditional expression: "+("object"===(void 0===e?"undefined":_typeof(e))?e.message:e))}finally{TempState.break=null}},_handleForRange:function(e,t,r,n){var a=!0,i=void 0;try{i=this.self._toRangeList(n)}catch(e){return this.error(e.message)}Config.debug&&this.debugView.modes({block:!0});try{TempState.break=null;for(var o=0;o<i.length;++o)if(t.name&&(State[t.type][t.name]=i[o][0]),
State[r.type][r.name]=i[o][1],new Wikifier(this.output,a?e.replace(/^\n/,""):e),a&&(a=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}}catch(e){return this.error("object"===(void 0===e?"undefined":_typeof(e))?e.message:e)}finally{TempState.break=null}},_toRangeList:function(e){var t=Scripting.evalJavaScript,r=void 0;try{r=t("{"===e[0]?"("+e+")":e)}catch(e){if("object"!==(void 0===e?"undefined":_typeof(e)))throw new Error("bad range expression: "+e);throw e.message="bad range expression: "+e.message,e}var n=void 0;switch(void 0===r?"undefined":_typeof(r)){case"string":n=[];for(var a=0;a<r.length;){var i=Util.charAndPosAt(r,a);n.push([a,i.char]),a=1+i.end}break;case"object":if(Array.isArray(r))n=r.map(function(e,t){return[t,e]});else if(r instanceof Set)n=[].concat(_toConsumableArray(r)).map(function(e,t){return[t,e]});else if(r instanceof Map)n=[].concat(_toConsumableArray(r.entries()));else{if("Object"!==Util.toStringTag(r))throw new Error("unsupported range expression type: "+Util.toStringTag(r));n=Object.keys(r).map(function(e){return[e,r[e]]})}break;default:throw new Error("unsupported range expression type: "+(void 0===r?"undefined":_typeof(r)))}return n}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){if(!this.contextHas(function(e){return"for"===e.name}))return this.error("must only be used in conjunction with its parent macro <<for>>");TempState.break="continue"===this.name?1:2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["button","link"],{isAsync:!0,tags:null,handler:function(){var e=this;if(0===this.args.length)return this.error("no "+("button"===this.name?"button":"link")+" text specified");var t=jQuery(document.createElement("button"===this.name?"button":"a")),r=void 0;if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var n=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo(t);this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(r=this.args[0].link),r=this.args[0].link}else t.append(document.createTextNode(this.args[0].text)),r=this.args[0].link;else t.wikiWithOptions({profile:"core"},this.args[0]),r=this.args.length>1?this.args[1]:undefined;null!=r?(t.attr("data-passage",r),Story.has(r)?(t.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(r)&&t.addClass("link-visited")):t.addClass("link-broken")):t.addClass("link-internal"),t.addClass("macro-"+this.name).ariaClick({namespace:".macros",one:null!=r},this.createShadowWrapper(""!==this.payload[0].contents?function(){return Wikifier.wikifyEval(e.payload[0].contents.trim())}:null,null!=r?function(){return Engine.play(r)}:null)).appendTo(this.output)}}),Macro.add("checkbox",{isAsync:!0,handler:function(){if(this.args.length<3){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("unchecked value"),this.args.length<3&&e.push("checked value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');var r=Util.slugify(t),n=this.args[1],a=this.args[2],i=document.createElement("input");jQuery(i).attr({id:this.name+"-"+r,name:this.name+"-"+r,type:"checkbox",tabindex:0}).addClass("macro-"+this.name).on("change.macros",this.createShadowWrapper(function(){State.setVar(t,this.checked?a:n)})).appendTo(this.output),this.args.length>3&&"checked"===this.args[3]?(i.checked=!0,State.setVar(t,a)):State.setVar(t,n)}}),Macro.add(["cycle","listbox"],{isAsync:!0,skipArgs:["optionsfrom"],tags:["option","optionsfrom"],handler:function(){var e=this;if(0===this.args.length)return this.error("no variable name specified");if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');var r=Util.slugify(t),n=this.payload.length;if(1===n)return this.error("no options specified");for(var a=this.args.length>1&&"autoselect"===this.args[1],i=[],o={option:0,optionsfrom:0},s=-1,u=1;u<n;++u){var l=this.payload[u];if("option"===l.name){if(++o.option,0===l.args.length)return this.error("no arguments specified for <<"+l.name+">> (#"+o.option+")");if(i.push({label:String(l.args[0]),value:1===l.args.length?l.args[0]:l.args[1]}),l.args.length>2&&"selected"===l.args[2]){if(a)return this.error("cannot specify both the autoselect and selected keywords");if(-1!==s)return this.error("multiple selected keywords specified for <<"+l.name+">> (#"+(s+1)+" & #"+o.option+")");s=i.length-1}}else{var c=function(){if(++o.optionsfrom,0===l.args.full.length)return{v:e.error("no expression specified for <<"+l.name+">> (#"+o.optionsfrom+")")};var t=void 0;try{var r=l.args.full;t=Scripting.evalJavaScript("{"===r[0]?"("+r+")":r)}catch(t){return{v:e.error("bad evaluation: "+("object"===(void 0===t?"undefined":_typeof(t))?t.message:t))}}if("object"!==(void 0===t?"undefined":_typeof(t))||null===t)return{v:e.error("expression must yield a supported collection or generic object (type: "+(null===t?"null":void 0===t?"undefined":_typeof(t))+")")};if(t instanceof Array||t instanceof Set)t.forEach(function(e){return i.push({label:String(e),value:e})});else if(t instanceof Map)t.forEach(function(e,t){return i.push({label:String(t),value:e})});else{var n=Util.toStringTag(t);if("Object"!==n)return{v:e.error("expression must yield a supported collection or generic object (object type: "+n+")")};Object.keys(t).forEach(function(e){return i.push({label:e,value:t[e]})})}}();if("object"===(void 0===c?"undefined":_typeof(c)))return c.v}}if(-1===s)if(a){var d=Util.sameValueZero,f=State.getVar(t),p=i.findIndex(function(e){return d(e.value,f)});s=-1===p?0:p}else s=0;if("cycle"===this.name){var h=s;jQuery(document.createElement("a")).wikiWithOptions({profile:"core"},i[s].label).addClass("macro-"+this.name).ariaClick({namespace:".macros"},this.createShadowWrapper(function(){h=(h+1)%i.length,$(this).empty().wikiWithOptions({profile:"core"},i[h].label),State.setVar(t,i[h].value)})).appendTo(this.output)}else{var g=jQuery(document.createElement("select"));i.forEach(function(e,t){jQuery(document.createElement("option")).val(t).text(e.label).appendTo(g)}),g.attr({id:this.name+"-"+r,name:this.name+"-"+r,tabindex:0}).addClass("macro-"+this.name).val(s).on("change.macros",this.createShadowWrapper(function(){State.setVar(t,i[Number(this.value)].value)})).appendTo(this.output)}State.setVar(t,i[s].value)}}),Macro.add(["linkappend","linkprepend","linkreplace"],{isAsync:!0,tags:null,handler:function(){var e=this;if(0===this.args.length)return this.error("no link text specified");var t=jQuery(document.createElement("a")),r=jQuery(document.createElement("span")),n=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]);t.wikiWithOptions({profile:"core"},this.args[0]).addClass("link-internal macro-"+this.name).ariaClick({namespace:".macros",one:!0},this.createShadowWrapper(function(){if("linkreplace"===e.name?t.remove():t.wrap('<span class="macro-'+e.name+'"></span>').replaceWith(function(){return t.html()}),""!==e.payload[0].contents){var a=document.createDocumentFragment();new Wikifier(a,e.payload[0].contents),r.append(a)}n&&setTimeout(function(){return r.removeClass("macro-"+e.name+"-in")},Engine.minDomActionDelay)})).appendTo(this.output),r.addClass("macro-"+this.name+"-insert"),n&&r.addClass("macro-"+this.name+"-in"),"linkprepend"===this.name?r.insertBefore(t):r.insertAfter(t)}}),Macro.add("radiobutton",{isAsync:!0,handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("checked value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');var r=Util.slugify(t),n=this.args[1],a=document.createElement("input");TempState.hasOwnProperty(this.name)||(TempState[this.name]={}),TempState[this.name].hasOwnProperty(r)||(TempState[this.name][r]=0),jQuery(a).attr({id:this.name+"-"+r+"-"+TempState[this.name][r]++,name:this.name+"-"+r,type:"radio",tabindex:0}).addClass("macro-"+this.name).on("change.macros",this.createShadowWrapper(function(){this.checked&&State.setVar(t,n)})).appendTo(this.output),this.args.length>2&&"checked"===this.args[2]&&(a.checked=!0,State.setVar(t,n))}}),Macro.add("textarea",{isAsync:!0,handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("default value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');Config.debug&&this.debugView.modes({block:!0});var r=Util.slugify(t),n=this.args[1],a="autofocus"===this.args[2],i=document.createElement("textarea");jQuery(i).attr({id:this.name+"-"+r,name:this.name+"-"+r,rows:4,tabindex:0}).addClass("macro-"+this.name).on("change.macros",this.createShadowWrapper(function(){State.setVar(t,this.value)})).appendTo(this.output),State.setVar(t,n),i.textContent=n,a&&(i.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:"+i.id]=function(e){delete postdisplay[e],setTimeout(function(){return i.focus()},Engine.minDomActionDelay)})}}),Macro.add("textbox",{isAsync:!0,handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("variable name"),this.args.length<2&&e.push("default value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var t=this.args[0].trim();if("$"!==t[0]&&"_"!==t[0])return this.error('variable name "'+this.args[0]+'" is missing its sigil ($ or _)');Config.debug&&this.debugView.modes({block:!0});var r=Util.slugify(t),n=this.args[1],a=document.createElement("input"),i=!1,o=void 0;this.args.length>3?(o=this.args[2],i="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?i=!0:o=this.args[2]),"object"===(void 0===o?"undefined":_typeof(o))&&(o=o.link),jQuery(a).attr({id:this.name+"-"+r,name:this.name+"-"+r,type:"text",tabindex:0}).addClass("macro-"+this.name).on("change.macros",this.createShadowWrapper(function(){State.setVar(t,this.value)})).on("keypress.macros",this.createShadowWrapper(function(e){13===e.which&&(e.preventDefault(),State.setVar(t,this.value),null!=o&&Engine.play(o))})).appendTo(this.output),State.setVar(t,n),a.value=n,i&&(a.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:"+a.id]=function(e){delete postdisplay[e],setTimeout(function(){return a.focus()},Engine.minDomActionDelay)})}}),Macro.add("click","link"),Macro.add("actions",{handler:function(){for(var e=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output),t=0;t<this.args.length;++t){var r=void 0,n=void 0,a=void 0,i=void 0;"object"===_typeof(this.args[t])?this.args[t].isImage?(a=jQuery(document.createElement("img")).attr("src",this.args[t].source),this.args[t].hasOwnProperty("passage")&&a.attr("data-passage",this.args[t].passage),this.args[t].hasOwnProperty("title")&&a.attr("title",this.args[t].title),this.args[t].hasOwnProperty("align")&&a.attr("align",this.args[t].align),r=this.args[t].link,i=this.args[t].setFn):(n=this.args[t].text,r=this.args[t].link,i=this.args[t].setFn):n=r=this.args[t],State.variables.hasOwnProperty("#actions")&&State.variables["#actions"].hasOwnProperty(r)&&State.variables["#actions"][r]||jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo(e),r,null,function(e,t){return function(){State.variables.hasOwnProperty("#actions")||(State.variables["#actions"]={}),State.variables["#actions"][e]=!0,"function"==typeof t&&t()}}(r,i))).addClass("macro-"+this.name).append(a||document.createTextNode(n))}}}),Macro.add(["back","return"],{handler:function(){if(this.args.length>1)return this.error("too many arguments specified, check the documentation for details");var e=-1,t=void 0,r=void 0,n=void 0;if(1===this.args.length&&("object"===_typeof(this.args[0])?this.args[0].isImage?(n=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(t=this.args[0].link)):1===this.args[0].count?t=this.args[0].link:(r=this.args[0].text,t=this.args[0].link):1===this.args.length&&(r=this.args[0])),null==t){for(var a=State.length-2;a>=0;--a)if(State.history[a].title!==State.passage){e=a,t=State.history[a].title;break}if(null==t&&"return"===this.name)for(var i=State.expired.length-1;i>=0;--i)if(State.expired[i]!==State.passage){t=State.expired[i];break}}else{if(!Story.has(t))return this.error('passage "'+t+'" does not exist');if("back"===this.name){for(var o=State.length-2;o>=0;--o)if(State.history[o].title===t){e=o;break}if(-1===e)return this.error('cannot find passage "'+t+'" in the current story history')}}if(null==t)return this.error("cannot find passage");var s=void 0;s="back"!==this.name||-1!==e?jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(t)}:function(){return Engine.goTo(e)}):jQuery(document.createElement("span")).addClass("link-disabled"),s.addClass("macro-"+this.name).append(n||document.createTextNode(r||L10n.get("macro"+this.name.toUpperFirst()+"Text"))).appendTo(this.output)}}),Macro.add("choice",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=State.passage,t=void 0,r=void 0,n=void 0,a=void 0;if(1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?(n=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),t=this.args[0].link,a=this.args[0].setFn):(r=this.args[0].text,t=this.args[0].link,a=this.args[0].setFn):r=t=this.args[0]:(t=this.args[0],r=this.args[1]),State.variables.hasOwnProperty("#choice")&&State.variables["#choice"].hasOwnProperty(e)&&State.variables["#choice"][e])return void jQuery(document.createElement("span")).addClass("link-disabled macro-"+this.name).attr("tabindex",-1).append(n||document.createTextNode(r)).appendTo(this.output);jQuery(Wikifier.createInternalLink(this.output,t,null,function(){State.variables.hasOwnProperty("#choice")||(State.variables["#choice"]={}),State.variables["#choice"][e]=!0,"function"==typeof a&&a()})).addClass("macro-"+this.name).append(n||document.createTextNode(r))}}),Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("selector"),this.args.length<2&&e.push("class names"),this.error("no "+e.join(" or ")+" specified")}var t=jQuery(this.args[0]);if(0===t.length)return this.error('no elements matched the selector "'+this.args[0]+'"');switch(this.name){case"addclass":t.addClass(this.args[1].trim());break;case"toggleclass":t.toggleClass(this.args[1].trim())}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'+this.args[0]+'"');this.args.length>1?e.removeClass(this.args[1].trim()):e.removeClass(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'+this.args[0]+'"');jQuery(this.output).append(e.html()),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["append","prepend","replace"],{tags:null,handler:function(){var e=this;if(0===this.args.length)return this.error("no selector specified");var t=jQuery(this.args[0]);if(0===t.length)return this.error('no elements matched the selector "'+this.args[0]+'"');if(""!==this.payload[0].contents){var r=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]),n=void 0;switch(r?(n=jQuery(document.createElement("span")),n.addClass("macro-"+this.name+"-insert macro-"+this.name+"-in"),setTimeout(function(){return n.removeClass("macro-"+e.name+"-in")},Engine.minDomActionDelay)):n=jQuery(document.createDocumentFragment()),n.wiki(this.payload[0].contents),this.name){case"replace":t.empty();case"append":t.append(n);break;case"prepend":t.prepend(n)}}else"replace"===this.name&&t.empty();Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'+this.args[0]+'"');e.remove(),Config.debug&&this.debugView.modes({hidden:!0})}}),Has.audio){var e=function(e,t){return'only one playback action allowed per invocation, "'+e+'" cannot be combined with "'+t+'"'};Macro.add("audio",{handler:function(){if(this.args.length<2){var t=[];return this.args.length<1&&t.push("track and/or group IDs"),this.args.length<2&&t.push("actions"),this.error("no "+t.join(" or ")+" specified")}var r=void 0;try{r=SimpleAudio.select(this.args[0])}catch(e){return this.error(e.message)}for(var n=this.args.slice(1),a=void 0,i=5,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=void 0;n.length>0;){var f=n.shift(),p=void 0;switch(f){case"load":case"pause":case"play":case"stop":case"unload":if(a)return this.error(e(f,a));a=f;break;case"fadein":if(a)return this.error(e(f,a));a="fade",o=1;break;case"fadeout":if(a)return this.error(e(f,a));a="fade",o=0;break;case"fadeto":if(a)return this.error(e(f,a));if(0===n.length)return this.error("fadeto missing required level value");if(a="fade",p=n.shift(),o=Number.parseFloat(p),Number.isNaN(o)||!Number.isFinite(o))return this.error("cannot parse fadeto: "+p);break;case"fadeoverto":if(a)return this.error(e(f,a));if(n.length<2){var h=[];return n.length<1&&h.push("seconds"),n.length<2&&h.push("level"),this.error("fadeoverto missing required "+h.join(" and ")+" value"+(h.length>1?"s":""))}if(a="fade",p=n.shift(),i=Number.parseFloat(p),Number.isNaN(i)||!Number.isFinite(i))return this.error("cannot parse fadeoverto: "+p);if(p=n.shift(),o=Number.parseFloat(p),Number.isNaN(o)||!Number.isFinite(o))return this.error("cannot parse fadeoverto: "+p);break;case"volume":if(0===n.length)return this.error("volume missing required level value");if(p=n.shift(),d=Number.parseFloat(p),Number.isNaN(d)||!Number.isFinite(d))return this.error("cannot parse volume: "+p);break;case"mute":case"unmute":u="mute"===f;break;case"time":if(0===n.length)return this.error("time missing required seconds value");if(p=n.shift(),c=Number.parseFloat(p),Number.isNaN(c)||!Number.isFinite(c))return this.error("cannot parse time: "+p);break;case"loop":case"unloop":s="loop"===f;break;case"goto":if(0===n.length)return this.error("goto missing required passage title");if(p=n.shift(),l="object"===(void 0===p?"undefined":_typeof(p))?p.link:p,!Story.has(l))return this.error('passage "'+l+'" does not exist');break;default:return this.error("unknown action: "+f)}}try{if(null!=d&&r.volume(d),null!=c&&r.time(c),null!=u&&r.mute(u),null!=s&&r.loop(s),null!=l){var g="ended.macros.macro-"+this.name+"_goto";r.off(g).one(g,function(){r.off(g),Engine.play(l)})}switch(a){case"fade":r.fade(i,o);break;case"load":r.load();break;case"pause":r.pause();break;case"play":r.play();break;case"stop":r.stop();break;case"unload":r.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(e){return this.error("error executing action: "+e.message)}}}),Macro.add("cacheaudio",{handler:function(){var e=this;if(this.args.length<2){var t=[];return this.args.length<1&&t.push("track ID"),this.args.length<2&&t.push("sources"),this.error("no "+t.join(" or ")+" specified")}var r=String(this.args[0]).trim(),n=/^format:\s*([\w-]+)\s*;\s*/i;try{SimpleAudio.tracks.add(r,this.args.slice(1).map(function(t){if(n.test(t)){if(Config.debug)return e.error('track ID "'+r+'": format specifier migration required, "format:formatId;" → "formatId|"');t=t.replace(n,"$1|")}return t}))}catch(e){return this.error(e.message)}if(Config.debug&&!SimpleAudio.tracks.get(r).hasSource())return this.error('track ID "'+r+'": no supported audio sources found');Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("createaudiogroup",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no group ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var e=String(this.args[0]).trim(),t=[],r=1,n=this.payload.length;r<n;++r){if(this.payload[r].args.length<1)return this.error("no track ID specified");t.push(String(this.payload[r].args[0]).trim()),Config.debug&&this.createDebugView(this.payload[r].name,this.payload[r].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.groups.add(e,t)}catch(e){return this.error(e.message)}Config.debug&&this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!0})}}),Macro.add("createplaylist",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no list ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");var e=Macro.get("playlist");if(null!==e.from&&"createplaylist"!==e.from)return this.error("a playlist has already been defined with <<setplaylist>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var t=String(this.args[0]).trim(),r=[],n=1,a=this.payload.length;n<a;++n){if(0===this.payload[n].args.length)return this.error("no track ID specified");for(var i={id:String(this.payload[n].args[0]).trim()},o=this.payload[n].args.slice(1);o.length>0;){var s=o.shift(),u=void 0,l=void 0;switch(s){case"copy":case"own":i.own=!0;break;case"rate":o.length>0&&o.shift();break;case"volume":if(0===o.length)return this.error("volume missing required level value");if(u=o.shift(),l=Number.parseFloat(u),Number.isNaN(l)||!Number.isFinite(l))return this.error("cannot parse volume: "+u);i.volume=l;break;default:return this.error("unknown action: "+s)}}r.push(i),Config.debug&&this.createDebugView(this.payload[n].name,this.payload[n].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.lists.add(t,r)}catch(e){return this.error(e.message)}null===e.from&&(e.from="createplaylist"),Config.debug&&this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!0})}}),Macro.add("masteraudio",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var t=this.args.slice(0),r=void 0,n=void 0,a=void 0,i=void 0;t.length>0;){var o=t.shift(),s=void 0;switch(o){case"load":case"stop":case"unload":if(r)return this.error(e(o,r));r=o;break;case"mute":case"unmute":n="mute"===o;break;case"muteonhide":case"nomuteonhide":a="muteonhide"===o;break;case"volume":if(0===t.length)return this.error("volume missing required level value");if(s=t.shift(),i=Number.parseFloat(s),Number.isNaN(i)||!Number.isFinite(i))return this.error("cannot parse volume: "+s);break;default:return this.error("unknown action: "+o)}}try{switch(null!=n&&SimpleAudio.mute(n),null!=a&&SimpleAudio.muteOnHidden(a),null!=i&&SimpleAudio.volume(i),r){case"load":SimpleAudio.load();break;case"stop":SimpleAudio.stop();break;case"unload":SimpleAudio.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(e){return this.error("error executing action: "+e.message)}}}),Macro.add("playlist",{from:null,handler:function(){var t=this.self.from;if(null===t)return this.error("no playlists have been created");var r=void 0,n=void 0;if("createplaylist"===t){if(this.args.length<2){var a=[];return this.args.length<1&&a.push("list ID"),this.args.length<2&&a.push("actions"),this.error("no "+a.join(" or ")+" specified")}var i=String(this.args[0]).trim();if(!SimpleAudio.lists.has(i))return this.error('playlist "'+i+'" does not exist');r=SimpleAudio.lists.get(i),n=this.args.slice(1)}else{if(0===this.args.length)return this.error("no actions specified");r=SimpleAudio.lists.get("setplaylist"),n=this.args.slice(0)}for(var o=void 0,s=5,u=void 0,l=void 0,c=void 0,d=void 0,f=void 0;n.length>0;){var p=n.shift(),h=void 0;switch(p){case"load":case"pause":case"play":case"skip":case"stop":case"unload":if(o)return this.error(e(p,o));o=p;break;case"fadein":if(o)return this.error(e(p,o));o="fade",u=1;break;case"fadeout":if(o)return this.error(e(p,o));o="fade",u=0;break;case"fadeto":if(o)return this.error(e(p,o));if(0===n.length)return this.error("fadeto missing required level value");if(o="fade",h=n.shift(),u=Number.parseFloat(h),Number.isNaN(u)||!Number.isFinite(u))return this.error("cannot parse fadeto: "+h);break;case"fadeoverto":if(o)return this.error(e(p,o));if(n.length<2){var g=[];return n.length<1&&g.push("seconds"),n.length<2&&g.push("level"),this.error("fadeoverto missing required "+g.join(" and ")+" value"+(g.length>1?"s":""))}if(o="fade",h=n.shift(),s=Number.parseFloat(h),Number.isNaN(s)||!Number.isFinite(s))return this.error("cannot parse fadeoverto: "+h);if(h=n.shift(),u=Number.parseFloat(h),Number.isNaN(u)||!Number.isFinite(u))return this.error("cannot parse fadeoverto: "+h);break;case"volume":if(0===n.length)return this.error("volume missing required level value");if(h=n.shift(),f=Number.parseFloat(h),Number.isNaN(f)||!Number.isFinite(f))return this.error("cannot parse volume: "+h);break;case"mute":case"unmute":c="mute"===p;break;case"loop":case"unloop":l="loop"===p;break;case"shuffle":case"unshuffle":d="shuffle"===p;break;default:return this.error("unknown action: "+p)}}try{switch(null!=f&&r.volume(f),null!=c&&r.mute(c),null!=l&&r.loop(l),null!=d&&r.shuffle(d),o){case"fade":r.fade(s,u);break;case"load":r.load();break;case"pause":r.pause();break;case"play":r.play();break;case"skip":r.skip();break;case"stop":r.stop();break;case"unload":r.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(e){return this.error("error executing action: "+e.message)}}}),Macro.add("removeaudiogroup",{handler:function(){if(0===this.args.length)return this.error("no group ID specified");var e=String(this.args[0]).trim();if(!SimpleAudio.groups.has(e))return this.error('group "'+e+'" does not exist');SimpleAudio.groups.delete(e),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeplaylist",{handler:function(){if(0===this.args.length)return this.error("no list ID specified");var e=String(this.args[0]).trim();if(!SimpleAudio.lists.has(e))return this.error('playlist "'+e+'" does not exist');SimpleAudio.lists.delete(e),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("waitforaudio",{skipArgs:!0,handler:function(){SimpleAudio.loadWithScreen()}}),Macro.add("setplaylist",{handler:function(){if(0===this.args.length)return this.error("no track ID(s) specified");var e=Macro.get("playlist");if(null!==e.from&&"setplaylist"!==e.from)return this.error("playlists have already been defined with <<createplaylist>>");try{SimpleAudio.lists.add("setplaylist",this.args.slice(0))}catch(e){return this.error(e.message)}null===e.from&&(e.from="setplaylist"),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("stopallaudio",{skipArgs:!0,handler:function(){SimpleAudio.select(":all").stop(),Config.debug&&this.debugView.modes({hidden:!0})}})}else Macro.add(["audio","cacheaudio","createaudiogroup","createplaylist","masteraudio","playlist","removeaudiogroup","removeplaylist","waitforaudio","setplaylist","stopallaudio"],{skipArgs:!0,handler:function(){Config.debug&&this.debugView.modes({hidden:!0})}});Macro.add("goto",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=void 0;if(e="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],!Story.has(e))return this.error('passage "'+e+'" does not exist');setTimeout(function(){return Engine.play(e)},Engine.minDomActionDelay)}}),Macro.add("repeat",{isAsync:!0,tags:null,timers:new Set,handler:function(){var e=this;if(0===this.args.length)return this.error("no time value specified");var t=void 0;try{t=Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0]))}catch(e){return this.error(e.message)}Config.debug&&this.debugView.modes({block:!0});var r=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]),n=jQuery(document.createElement("span")).addClass("macro-"+this.name).appendTo(this.output);this.self.registerInterval(this.createShadowWrapper(function(){var t=document.createDocumentFragment();new Wikifier(t,e.payload[0].contents);var a=n;r&&(a=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo(a)),a.append(t),r&&setTimeout(function(){return a.removeClass("macro-repeat-in")},Engine.minDomActionDelay)}),t)},registerInterval:function(e,t){var r=this;if("function"!=typeof e)throw new TypeError("callback parameter must be a function");var n=State.turns,a=this.timers,i=null;i=setInterval(function(){if(n!==State.turns)return clearInterval(i),void a.delete(i);var t=void 0;try{TempState.break=null,TempState.hasOwnProperty("repeatTimerId")&&(t=TempState.repeatTimerId),TempState.repeatTimerId=i,e.call(r)}finally{void 0!==t?TempState.repeatTimerId=t:delete TempState.repeatTimerId,TempState.break=null}},t),a.add(i),prehistory.hasOwnProperty("#repeat-timers-cleanup")||(prehistory["#repeat-timers-cleanup"]=function(e){delete prehistory[e],a.forEach(function(e){return clearInterval(e)}),a.clear()})}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!TempState.hasOwnProperty("repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var e=Macro.get("repeat").timers,t=TempState.repeatTimerId;clearInterval(t),e.delete(t),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("timed",{isAsync:!0,tags:["next"],timers:new Set,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var e=[];try{e.push({name:this.name,source:this.source,delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0])),content:this.payload[0].contents})}catch(e){return this.error(e.message+" in <<timed>>")}if(this.payload.length>1){var t=void 0;try{var r=void 0;for(t=1,r=this.payload.length;t<r;++t)e.push({name:this.payload[t].name,source:this.payload[t].source,delay:0===this.payload[t].args.length?e[e.length-1].delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.payload[t].args[0])),content:this.payload[t].contents})}catch(e){return this.error(e.message+" in <<next>> (#"+t+")")}}Config.debug&&this.debugView.modes({block:!0});var n=this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]),a=jQuery(document.createElement("span")).addClass("macro-"+this.name).appendTo(this.output);this.self.registerTimeout(this.createShadowWrapper(function(e){var t=document.createDocumentFragment();new Wikifier(t,e.content);var r=a;Config.debug&&"next"===e.name&&(r=jQuery(new DebugView(r[0],"macro",e.name,e.source).output)),
n&&(r=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo(r)),r.append(t),n&&setTimeout(function(){return r.removeClass("macro-timed-in")},Engine.minDomActionDelay)}),e)},registerTimeout:function(e,t){if("function"!=typeof e)throw new TypeError("callback parameter must be a function");var r=State.turns,n=this.timers,a=null,i=t.shift(),o=function o(){if(n.delete(a),r===State.turns){var s=i;null!=(i=t.shift())&&(a=setTimeout(o,i.delay),n.add(a)),e.call(this,s)}};a=setTimeout(o,i.delay),n.add(a),prehistory.hasOwnProperty("#timed-timers-cleanup")||(prehistory["#timed-timers-cleanup"]=function(e){delete prehistory[e],n.forEach(function(e){return clearTimeout(e)}),n.clear()})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var e=this.args[0];if(Macro.has(e)){if(!Macro.get(e).isWidget)return this.error('cannot clobber existing macro "'+e+'"');Macro.delete(e)}try{Macro.add(e,{isWidget:!0,handler:function(e){return function(){var t=void 0;try{State.variables.hasOwnProperty("args")&&(t=State.variables.args),State.variables.args=[].concat(_toConsumableArray(this.args)),State.variables.args.raw=this.args.raw,State.variables.args.full=this.args.full,this.addShadow("$args");var r=document.createDocumentFragment(),n=[];if(new Wikifier(r,e),Array.from(r.querySelectorAll(".error")).forEach(function(e){n.push(e.textContent)}),0!==n.length)return this.error("error"+(n.length>1?"s":"")+" within widget contents ("+n.join("; ")+")");this.output.appendChild(r)}catch(e){return this.error("cannot execute widget: "+e.message)}finally{void 0!==t?State.variables.args=t:delete State.variables.args}}}(this.payload[0].contents)}),Config.debug&&this.debugView.modes({hidden:!0})}catch(t){return this.error('cannot create widget macro "'+e+'": '+t.message)}}})}();var Dialog=function(){function e(e,t,r,n,a){return jQuery(e).ariaClick(function(e){e.preventDefault(),"function"==typeof r&&r(e),o(t,a),"function"==typeof n&&n(e)})}function t(){var e;return(e=g).append.apply(e,arguments),Dialog}function r(){return g.get(0)}function n(e){return g.trigger(":dialogclosing"),jQuery(document).off(".dialog-close"),y?(y.disconnect(),y=null):g.off(".dialog-resize"),jQuery(window).off(".dialog-resize"),p.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),f.removeClass("open"),jQuery(document.documentElement).removeAttr("data-dialog"),h.empty(),g.empty().removeClass(),null!==m&&(jQuery(m).focus(),m=null),e&&e.data&&"function"==typeof e.data.closeFn&&e.data.closeFn(e),g.trigger(":dialogclose"),g.trigger(":dialogclosed"),Dialog}function a(){if(!document.getElementById("ui-dialog")){v=function(){var e=void 0;try{var t=document.createElement("p"),r=document.createElement("div");t.style.width="100%",t.style.height="200px",r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.width="100px",r.style.height="100px",r.style.visibility="hidden",r.style.overflow="hidden",r.appendChild(t),document.body.appendChild(r);var n=t.offsetWidth;r.style.overflow="auto";var a=t.offsetWidth;n===a&&(a=r.clientWidth),document.body.removeChild(r),e=n-a}catch(e){}return e||17}();var e=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1><button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'+L10n.get("close")+'"></button></div><div id="ui-dialog-body"></div></div>');f=jQuery(e.find("#ui-overlay").get(0)),p=jQuery(e.find("#ui-dialog").get(0)),h=jQuery(e.find("#ui-dialog-title").get(0)),g=jQuery(e.find("#ui-dialog-body").get(0)),e.insertBefore("body>script#script-sugarcube")}}function i(e){return p.hasClass("open")&&(!e||e.splitOrEmpty(/\s+/).every(function(e){return g.hasClass(e)}))}function o(e,t){g.trigger(":dialogopening");var r=jQuery.extend({top:50},e),a=r.top;return i()||(m=safeActiveElement()),jQuery(document.documentElement).attr("data-dialog","open"),f.addClass("open"),null!==g[0].querySelector("img")&&g.imagesLoaded().always(function(){return d({data:{top:a}})}),jQuery("body>:not(script,#store-area,tw-storydata,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0),p.css(c(a)).addClass("open").focus(),jQuery(window).on("resize.dialog-resize",null,{top:a},jQuery.throttle(40,d)),Has.mutationObserver?(y=new MutationObserver(function(e){for(var t=0;t<e.length;++t)if("childList"===e[t].type){d({data:{top:a}});break}}),y.observe(g[0],{childList:!0,subtree:!0})):g.on("DOMNodeInserted.dialog-resize DOMNodeRemoved.dialog-resize",null,{top:a},jQuery.throttle(40,d)),jQuery(document).on("click.dialog-close",".ui-close",{closeFn:t},n).on("keypress.dialog-close",".ui-close",function(e){13!==e.which&&32!==e.which||jQuery(this).trigger("click")}),g.trigger(":dialogopen"),g.trigger(":dialogopened"),Dialog}function s(e){return d("object"===(void 0===e?"undefined":_typeof(e))?{data:e}:undefined)}function u(e,t){return g.empty().removeClass(),null!=t&&g.addClass(t),h.empty().append((null!=e?String(e):"")||" "),g.get(0)}function l(){var e;return(e=g).wiki.apply(e,arguments),Dialog}function c(e){var t=null!=e?e:50,r=jQuery(window),n={left:"",right:"",top:"",bottom:""};p.css(n);var a=r.width()-p.outerWidth(!0)-1,i=r.height()-p.outerHeight(!0)-1;return a<=32+v&&(i-=v),i<=32+v&&(a-=v),n.left=n.right=a<=32?16:a/2>>0,n.top=i<=32?n.bottom=16:i/2>t?t:n.bottom=i/2>>0,Object.keys(n).forEach(function(e){""!==n[e]&&(n[e]+="px")}),n}function d(e){var t=e&&e.data&&void 0!==e.data.top?e.data.top:50;"block"===p.css("display")&&(p.css({display:"none"}),p.css(jQuery.extend({display:""},c(t))))}var f=null,p=null,h=null,g=null,m=null,v=0,y=null;return Object.freeze(Object.defineProperties({},{append:{value:t},body:{value:r},close:{value:n},init:{value:a},isOpen:{value:i},open:{value:o},resize:{value:s},setup:{value:u},wiki:{value:l},addClickHandler:{value:e}}))}(),Engine=function(){function e(){jQuery("#init-no-js,#init-lacking").remove(),function(){var e=jQuery(document.createDocumentFragment()),t=Story.has("StoryInterface")&&Story.get("StoryInterface").text.trim();if(t){if(UIBar.destroy(),jQuery(document.head).find("#style-core-display").remove(),e.append(t),0===e.find("#passages").length)throw new Error('no element with ID "passages" found within "StoryInterface" special passage');var r=[];e.find("[data-passage]").each(function(e,t){if("passages"===t.id)throw new Error('"StoryInterface" element <'+t.nodeName.toLowerCase()+' id="passages"> must not contain a "data-passage" content attribute');var n=t.getAttribute("data-passage").trim();if(null!==t.firstElementChild)throw new Error('"StoryInterface" element <'+t.nodeName.toLowerCase()+' data-passage="'+n+'"> contains child elements');Story.has(n)&&r.push({passage:n,element:t})}),r.length>0&&(E=r),Config.ui.updateStoryElements=!1}else e.append('<div id="story" role="main"><div id="passages"></div></div>');e.insertBefore("body>script#script-sugarcube")}(),S=new StyleWrapper(function(){return jQuery(document.createElement("style")).attr({id:"style-aria-outlines",type:"text/css"}).appendTo(document.head).get(0)}()),jQuery(document).on("mousedown.aria-outlines keydown.aria-outlines",function(e){return"keydown"===e.type?m():g()})}function t(){if(Story.has("StoryInit"))try{var e=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var t=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");t.modes({hidden:!0}),t.append(e),k=t.output}}catch(e){console.error(e),Alert.error("StoryInit",e.message)}if(null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'+Config.passages.start+'") not found');if(jQuery(document.documentElement).focus(),State.restore())f();else{var r=!0;switch(_typeof(Config.saves.autoload)){case"boolean":Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(r=!Save.autosave.load());break;case"string":"prompt"===Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(r=!1,UI.buildAutoload(),Dialog.open());break;case"function":Save.autosave.ok()&&Save.autosave.has()&&Config.saves.autoload()&&(r=!Save.autosave.load())}r&&p(Config.passages.start)}}function r(){LoadScreen.show(),window.scroll(0,0),State.reset(),jQuery.event.trigger(":enginerestart"),window.location.reload()}function n(){return b}function a(){return b===v.Idle}function i(){return b!==v.Idle}function o(){return b===v.Rendering}function s(){return w}function u(e){var t=State.goTo(e);return t&&f(),t}function l(e){var t=State.go(e);return t&&f(),t}function c(){return l(-1)}function d(){return l(1)}function f(){return p(State.passage,!0)}function p(e,t){var r=e;b=v.Playing,TempState={},State.clearTemporary();var n=void 0,a=void 0;if("function"==typeof Config.navigation.override)try{var i=Config.navigation.override(r);i&&(r=i)}catch(e){}var o=Story.get(r);if(jQuery.event.trigger({type:":passageinit",passage:o}),Object.keys(prehistory).forEach(function(e){"function"==typeof prehistory[e]&&prehistory[e].call(this,e)},o),t||State.create(o.title),w=Util.now(),document.body.className&&(document.body.className=""),Object.keys(predisplay).forEach(function(e){"function"==typeof predisplay[e]&&predisplay[e].call(this,e)},o),Story.has("PassageReady"))try{n=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(e){console.error(e),Alert.error("PassageReady",e.message)}b=v.Rendering;var s=jQuery(o.render()),u=document.getElementById("passages");if(u.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&Has.transitionEndEvent?[].concat(_toConsumableArray(u.childNodes)).forEach(function(e){var t=jQuery(e);if(e.nodeType===Node.ELEMENT_NODE&&t.hasClass("passage")){if(t.hasClass("passage-out"))return;t.attr("id","out-"+t.attr("id")).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?t.on(Has.transitionEndEvent,function(e){e.originalEvent.propertyName===Config.passages.transitionOut&&t.remove()}):setTimeout(function(){return t.remove()},Math.max(y,Config.passages.transitionOut))}else t.remove()}):jQuery(u).empty()),s.addClass("passage-in").appendTo(u),setTimeout(function(){return s.removeClass("passage-in")},y),Config.passages.displayTitles&&o.title!==Config.passages.start&&(document.title=o.title+" | "+Story.title),window.scroll(0,0),b=v.Playing,Story.has("PassageDone"))try{a=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(e){console.error(e),Alert.error("PassageDone",e.message)}if(jQuery.event.trigger({type:":passagedisplay",passage:o}),Object.keys(postdisplay).forEach(function(e){"function"==typeof postdisplay[e]&&postdisplay[e].call(this,e)},o),null!==E?E.forEach(function(e){jQuery(e.element).empty(),new Wikifier(e.element,Story.get(e.passage).processText().trim())}):Config.ui.updateStoryElements&&UIBar.update(),Config.debug){var l=void 0;null!=n&&(l=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady"),l.modes({hidden:!0}),l.append(n),s.prepend(l.output)),null!=a&&(l=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone"),l.modes({hidden:!0}),l.append(a),s.append(l.output)),1===State.turns&&null!=k&&s.prepend(k)}switch(g(),jQuery("#story").find("a[href]:not(.link-external)").addClass("link-external").end().find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),_typeof(Config.saves.autosave)){case"boolean":Config.saves.autosave&&Save.autosave.save();break;case"object":o.tags.some(function(e){return Config.saves.autosave.includes(e)})&&Save.autosave.save();break;case"function":Config.saves.autosave()&&Save.autosave.save()}return jQuery.event.trigger({type:":passageend",passage:o}),b=v.Idle,w=Util.now(),s[0]}function h(e,t,r){var n=!1;switch(r){case undefined:break;case"replace":case"back":n=!0;break;default:throw new Error('Engine.display option parameter called with obsolete value "'+r+'"; please notify the developer')}p(e,n)}function g(){S.set("*:focus{outline:none}")}function m(){S.clear()}var v=Util.toEnum({Idle:"idle",Playing:"playing",Rendering:"rendering"}),y=40,b=v.Idle,w=null,k=null,S=null,E=null;return Object.freeze(Object.defineProperties({},{States:{value:v},minDomActionDelay:{value:y},init:{value:e},start:{value:t},restart:{value:r},state:{get:n},isIdle:{value:a},isPlaying:{value:i},isRendering:{value:o},lastPlay:{get:s},goTo:{value:u},go:{value:l},backward:{value:c},forward:{value:d},show:{value:f},play:{value:p},display:{value:h}}))}(),Passage=function(){var e=void 0;e=/^(?:debug|nobr|passage|widget|twine\..*)$/i;return function(){function t(r,n){var a=this;_classCallCheck(this,t),Object.defineProperties(this,{title:{value:Util.unescape(r)},element:{value:n||null},tags:{value:Object.freeze(n&&n.hasAttribute("tags")?n.getAttribute("tags").trim().splitOrEmpty(/\s+/).sort().filter(function(e,t,r){return 0===t||r[t-1]!==e}):[])},_excerpt:{writable:!0,value:null}}),Object.defineProperties(this,{domId:{value:"passage-"+Util.slugify(this.title)},classes:{value:Object.freeze(0===this.tags.length?[]:function(){return a.tags.filter(function(t){return!e.test(t)}).map(function(e){return Util.slugify(e)})}())}})}return _createClass(t,[{key:"description",value:function(){var e=Config.passages.descriptions;if(null!=e)switch(void 0===e?"undefined":_typeof(e)){case"boolean":if(e)return this.title;break;case"object":if(e instanceof Map&&e.has(this.title))return e.get(this.title);if(e.hasOwnProperty(this.title))return e[this.title];break;case"function":var r=e.call(this);if(r)return r;break;default:throw new TypeError("Config.passages.descriptions must be a boolean, object, or function")}return null===this._excerpt&&(this._excerpt=t.getExcerptFromText(this.text)),this._excerpt}},{key:"processText",value:function(){if(null==this.element)return this.text;if(this.tags.includes("Twine.image"))return"[img["+this.text+"]]";var e=this.text;return Config.passages.onProcess&&(e=Config.passages.onProcess.call(null,{title:this.title,tags:this.tags,text:e})),(Config.passages.nobr||this.tags.includes("nobr"))&&(e=e.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),e}},{key:"render",value:function(){var e=this,r=this.tags.length>0?this.tags.join(" "):null,n=document.createElement("div");return jQuery(n).attr({id:this.domId,"data-passage":this.title,"data-tags":r}).addClass("passage "+this.className),jQuery(document.body).attr("data-tags",r).addClass(this.className),jQuery(document.documentElement).attr("data-tags",r),jQuery.event.trigger({type:":passagestart",content:n,passage:this}),Object.keys(prerender).forEach(function(t){"function"==typeof prerender[t]&&prerender[t].call(e,n,t)}),Story.has("PassageHeader")&&new Wikifier(n,Story.get("PassageHeader").processText()),new Wikifier(n,this.processText()),Story.has("PassageFooter")&&new Wikifier(n,Story.get("PassageFooter").processText()),jQuery.event.trigger({type:":passagerender",content:n,passage:this}),Object.keys(postrender).forEach(function(t){"function"==typeof postrender[t]&&postrender[t].call(e,n,t)}),this._excerpt=t.getExcerptFromNode(n),n}},{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){if(null==this.element){var e=Util.escape(this.title);return'<div class="error-view"><span class="error">'+(L10n.get("errorTitle")+": "+L10n.get("errorNonexistentPassage",{passage:e}))+"</span></div>"}return this.element.textContent.replace(/\r/g,"")}}],[{key:"getExcerptFromNode",value:function(e,t){if(!e.hasChildNodes())return"";var r=e.textContent.trim();if(""!==r){var n=new RegExp("(\\S+(?:\\s+\\S+){0,"+(t>0?t-1:7)+"})");r=r.replace(/\s+/g," ").match(n)}return r?r[1]+"…":"…"}},{key:"getExcerptFromText",value:function(e,t){if(""===e)return"";var r=new RegExp("(\\S+(?:\\s+\\S+){0,"+(t>0?t-1:7)+"})"),n=e.replace(/<<.*?>>/g," ").replace(/<.*?>/g," ").trim().replace(/^\s*\|.*\|.*?$/gm,"").replace(/\[[<>]?img\[[^\]]*\]\]/g,"").replace(/\[\[([^|\]]*?)(?:(?:\||->|<-)[^\]]*)?\]\]/g,"$1").replace(/^\s*!+(.*?)$/gm,"$1").replace(/'{2}|\/{2}|_{2}|@{2}/g,"").trim().replace(/\s+/g," ").match(r);return n?n[1]+"…":"…"}}]),t}()}(),Save=function(){function e(){if("cookie"===storage.name)return n(),Config.saves.autoload=undefined,Config.saves.autosave=undefined,Config.saves.isAllowed=undefined,Config.saves.onLoad=undefined,Config.saves.onSave=undefined,Config.saves.slots=0,!1;var e=r(),t=!1;Array.isArray(e)&&(e={autosave:null,slots:e},t=!0),Config.saves.slots!==e.slots.length&&(Config.saves.slots<e.slots.length?(e.slots.reverse(),e.slots=e.slots.filter(function(e){return!(null===e&&this.count>0)||(--this.count,!1)},{count:e.slots.length-Config.saves.slots}),e.slots.reverse()):Config.saves.slots>e.slots.length&&j(e.slots,Config.saves.slots-e.slots.length),t=!0),T(e.autosave)&&(t=!0);for(var a=0;a<e.slots.length;++a)T(e.slots[a])&&(t=!0);return x(e)&&(storage.delete("saves"),t=!1),t&&O(e),P=e.slots.length-1,!0}function t(){return{autosave:null,slots:j([],Config.saves.slots)}}function r(){var e=storage.get("saves");return null===e?t():e}function n(){return storage.delete("saves"),!0}function a(){return i()||d()}function i(){return"cookie"!==storage.name&&void 0!==Config.saves.autosave}function o(){return null!==r().autosave}function s(){return r().autosave}function u(){var e=r();return null!==e.autosave&&A(e.autosave)}function l(e,t){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return!1;var n=r(),a={title:e||Story.get(State.passage).description(),date:Date.now()};return null!=t&&(a.metadata=t),n.autosave=C(a),O(n)}function c(){var e=r();return e.autosave=null,O(e)}function d(){return"cookie"!==storage.name&&-1!==P}function f(){return P+1}function p(){if(!d())return 0;for(var e=r(),t=0,n=0,a=e.slots.length;n<a;++n)null!==e.slots[n]&&++t;return t}function h(){return 0===p()}function g(e){if(e<0||e>P)return!1;var t=r();return!(e>=t.slots.length||null===t.slots[e])}function m(e){if(e<0||e>P)return null;var t=r();return e>=t.slots.length?null:t.slots[e]}function v(e){if(e<0||e>P)return!1;var t=r();return!(e>=t.slots.length||null===t.slots[e])&&A(t.slots[e])}function y(e,t,n){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",function(){return UI.alert(L10n.get("savesDisallowed"))}):UI.alert(L10n.get("savesDisallowed")),!1;if(e<0||e>P)return!1;var a=r();if(e>=a.slots.length)return!1;var i={title:t||Story.get(State.passage).description(),date:Date.now()};return null!=n&&(i.metadata=n),a.slots[e]=C(i),O(a)}function b(e){if(e<0||e>P)return!1;var t=r();return!(e>=t.slots.length)&&(t.slots[e]=null,O(t))}function w(e,t){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return void(Dialog.isOpen()?$(document).one(":dialogclosed",function(){return UI.alert(L10n.get("savesDisallowed"))}):UI.alert(L10n.get("savesDisallowed")));var r=null==e?Story.domId:Util.slugify(e),n=r+"-"+function(){var e=new Date,t=e.getMonth()+1,r=e.getDate(),n=e.getHours(),a=e.getMinutes(),i=e.getSeconds();return t<10&&(t="0"+t),r<10&&(r="0"+r),n<10&&(n="0"+n),a<10&&(a="0"+a),i<10&&(i="0"+i),""+e.getFullYear()+t+r+"-"+n+a+i}()+".save",a=null==t?{}:{metadata:t},i=LZString.compressToBase64(JSON.stringify(C(a)));saveAs(new Blob([i],{type:"text/plain;charset=UTF-8"}),n)}function k(e){var t=e.target.files[0],r=new FileReader;jQuery(r).on("load",function(e){var r=e.currentTarget;if(r.result){var n=void 0;try{n=JSON.parse(/\.json$/i.test(t.name)||/^\{/.test(r.result)?r.result:LZString.decompressFromBase64(r.result))}catch(e){}A(n)}}),r.readAsText(t)}function S(e){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",function(){return UI.alert(L10n.get("savesDisallowed"))}):UI.alert(L10n.get("savesDisallowed")),null;var t=null==e?{}:{metadata:e};return LZString.compressToBase64(JSON.stringify(C(t)))}function E(e){var t=void 0;try{t=JSON.parse(LZString.decompressFromBase64(e))}catch(e){}return A(t)?t.metadata:null}function j(e,t){for(var r=0;r<t;++r)e.push(null);return e}function x(e){for(var t=e.slots,r=!0,n=0,a=t.length;n<a;++n)if(null!==t[n]){r=!1;break}return null===e.autosave&&r}function O(e){return x(e)?(storage.delete("saves"),!0):storage.set("saves",e)}function T(e){if(null==e||"object"!==(void 0===e?"undefined":_typeof(e)))return!1;var t=!1;return e.hasOwnProperty("state")&&e.state.hasOwnProperty("delta")&&e.state.hasOwnProperty("index")||(e.hasOwnProperty("data")?(delete e.mode,e.state={delta:State.deltaEncode(e.data)},delete e.data):e.state.hasOwnProperty("delta")?e.state.hasOwnProperty("index")||delete e.state.mode:(delete e.state.mode,e.state.delta=State.deltaEncode(e.state.history),delete e.state.history),e.state.index=e.state.delta.length-1,t=!0),e.state.hasOwnProperty("rseed")&&(e.state.seed=e.state.rseed,delete e.state.rseed,e.state.delta.forEach(function(e,t,r){r[t].hasOwnProperty("rcount")&&(r[t].pull=r[t].rcount,delete r[t].rcount)}),t=!0),(e.state.hasOwnProperty("expired")&&"number"==typeof e.state.expired||e.state.hasOwnProperty("unique")||e.state.hasOwnProperty("last"))&&(e.state.hasOwnProperty("expired")&&"number"==typeof e.state.expired&&delete e.state.expired,(e.state.hasOwnProperty("unique")||e.state.hasOwnProperty("last"))&&(e.state.expired=[],e.state.hasOwnProperty("unique")&&(e.state.expired.push(e.state.unique),delete e.state.unique),e.state.hasOwnProperty("last")&&(e.state.expired.push(e.state.last),delete e.state.last)),t=!0),t}function C(e){if(null!=e&&"object"!==(void 0===e?"undefined":_typeof(e)))throw new Error("supplemental parameter must be an object");var t=Object.assign({},e,{id:Config.saves.id,state:State.marshalForSave()});return Config.saves.version&&(t.version=Config.saves.version),"function"==typeof Config.saves.onSave&&Config.saves.onSave(t),t.state.delta=State.deltaEncode(t.state.history),delete t.state.history,t}function A(e){try{if(T(e),!e||!e.hasOwnProperty("id")||!e.hasOwnProperty("state"))throw new Error(L10n.get("errorSaveMissingData"));if(e.state.history=State.deltaDecode(e.state.delta),delete e.state.delta,"function"==typeof Config.saves.onLoad&&Config.saves.onLoad(e),e.id!==Config.saves.id)throw new Error(L10n.get("errorSaveIdMismatch"));State.unmarshalForSave(e.state),Engine.show()}catch(e){return UI.alert(e.message.toUpperFirst()+".</p><p>"+L10n.get("aborting")+"."),!1}return!0}var P=-1;return Object.freeze(Object.defineProperties({},{init:{value:e},get:{value:r},clear:{value:n},ok:{value:a},autosave:{value:Object.freeze(Object.defineProperties({},{ok:{value:i},has:{value:o},get:{value:s},load:{value:u},save:{value:l},delete:{value:c}}))},slots:{value:Object.freeze(Object.defineProperties({},{ok:{value:d},length:{get:f},isEmpty:{value:h},count:{value:p},has:{value:g},get:{value:m},load:{value:v},save:{value:y},delete:{value:b}}))},export:{value:w},import:{value:k},serialize:{value:S},deserialize:{value:E}}))}(),Setting=function(){function e(){if(storage.has("options")){var e=storage.get("options");null!==e&&(window.SugarCube.settings=settings=Object.assign(t(),e)),r(),storage.delete("options")}n(),m.forEach(function(e){if(e.hasOwnProperty("onInit")){var t={name:e.name,value:settings[e.name],default:e.default};e.hasOwnProperty("list")&&(t.list=e.list),e.onInit.call(t)}})}function t(){return Object.create(null)}function r(){var e=t();return Object.keys(settings).length>0&&m.filter(function(e){return e.type!==v.Header&&settings[e.name]!==e.default}).forEach(function(t){return e[t.name]=settings[t.name]}),0===Object.keys(e).length?(storage.delete("settings"),!0):storage.set("settings",e)}function n(){var e=t(),r=storage.get("settings")||t();m.filter(function(e){return e.type!==v.Header}).forEach(function(t){return e[t.name]=t.default}),window.SugarCube.settings=settings=Object.assign(e,r)}function a(){return window.SugarCube.settings=settings=t(),storage.delete("settings"),!0}function i(e){if(0===arguments.length)a(),n();else{if(null==e||!p(e))throw new Error('nonexistent setting "'+e+'"');var t=h(e);t.type!==v.Header&&(settings[e]=t.default)}return r()}function o(e,t){m.forEach(e,t)}function s(e,t,r){if(arguments.length<3){var n=[];throw arguments.length<1&&n.push("type"),arguments.length<2&&n.push("name"),arguments.length<3&&n.push("definition"),new Error("missing parameters, no "+n.join(" or ")+" specified")}if("object"!==(void 0===r?"undefined":_typeof(r)))throw new TypeError("definition parameter must be an object");if(p(t))throw new Error('cannot clobber existing setting "'+t+'"');var a={type:e,name:t,label:"string"==typeof r.label?r.label.trim():""};if("string"==typeof r.desc){var i=r.desc.trim();""!==i&&(a.desc=i)}switch(e){case v.Header:break;case v.Toggle:a.default=!!r.default;break;case v.List:if(!r.hasOwnProperty("list"))throw new Error("no list specified");if(!Array.isArray(r.list))throw new TypeError("list must be an array");if(0===r.list.length)throw new Error("list must not be empty");if(a.list=Object.freeze(r.list),null==r.default)a.default=r.list[0];else{var o=r.list.indexOf(r.default);if(-1===o)throw new Error("list does not contain default");a.default=r.list[o]}break;case v.Range:if(!r.hasOwnProperty("min"))throw new Error("no min specified");if("number"!=typeof r.min||Number.isNaN(r.min)||!Number.isFinite(r.min))throw new TypeError("min must be a finite number");if(!r.hasOwnProperty("max"))throw new Error("no max specified");if("number"!=typeof r.max||Number.isNaN(r.max)||!Number.isFinite(r.max))throw new TypeError("max must be a finite number");if(!r.hasOwnProperty("step"))throw new Error("no step specified");if("number"!=typeof r.step||Number.isNaN(r.step)||!Number.isFinite(r.step)||r.step<=0)throw new TypeError("step must be a finite number greater than zero");var s=function(){var e=String(r.step),t=e.lastIndexOf(".");return-1===t?0:e.length-t-1}();if(function(e){if(s>0){var t=Number(r.min+"e"+s),n=Number(r.step+"e"+s),a=Number(e+"e"+s)-t;return Number(a-a%n+t+"e-"+s)}var i=e-r.min;return i-i%r.step+r.min}(r.max)!==r.max)throw new RangeError("max ("+r.max+") is not a multiple of the step ("+r.step+") plus the min ("+r.min+")");if(a.max=r.max,a.min=r.min,a.step=r.step,null==r.default)a.default=r.max;else{if("number"!=typeof r.default||Number.isNaN(r.default)||!Number.isFinite(r.default))throw new TypeError("default must be a finite number");if(r.default<r.min)throw new RangeError("default ("+r.default+") is less than min ("+r.min+")");if(r.default>r.max)throw new RangeError("default ("+r.default+") is greater than max ("+r.max+")");a.default=r.default}break;default:throw new Error("unknown Setting type: "+e)}"function"==typeof r.onInit&&(a.onInit=Object.freeze(r.onInit)),"function"==typeof r.onChange&&(a.onChange=Object.freeze(r.onChange)),m.push(Object.freeze(a))}function u(e,t){s(v.Header,e,{desc:t})}function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.apply(undefined,[v.Toggle].concat(t))}function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.apply(undefined,[v.List].concat(t))}function d(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];s.apply(undefined,[v.Range].concat(t))}function f(){return 0===m.length}function p(e){return m.some(function(t){return t.name===e})}function h(e){return m.find(function(t){return t.name===e})}function g(e){p(e)&&delete settings[e];for(var t=0;t<m.length;++t)if(m[t].name===e){m.splice(t,1),g(e);break}}var m=[],v=Util.toEnum({Header:0,Toggle:1,List:2,Range:3});return Object.freeze(Object.defineProperties({},{Types:{value:v},init:{value:e},create:{value:t},save:{value:r},load:{value:n},clear:{value:a},reset:{value:i},forEach:{value:o},add:{value:s},addHeader:{value:u},addToggle:{value:l},addList:{value:c},addRange:{value:d},isEmpty:{value:f},has:{value:p},get:{value:h},delete:{value:g}}))}(),Story=function(){function e(){function e(e){if(e.tags.includesAny(n))throw new Error('starting passage "'+e.title+'" contains illegal tags; invalid: "'+e.tags.filter(function(e){return n.includes(e)}).sort().join('", "')+'"')}function t(e){if(a.includes(e.title)&&e.tags.includesAny(n))throw new Error('special passage "'+e.title+'" contains illegal tags; invalid: "'+e.tags.filter(function(e){return n.includes(e)}).sort().join('", "')+'"')}var n=["widget"],a=["PassageDone","PassageFooter","PassageHeader","PassageReady","StoryAuthor","StoryBanner","StoryCaption","StoryInit","StoryMenu","StoryShare","StorySubtitle"],i=jQuery("tw-storydata"),o=i.attr("startnode")||"";Config.passages.start=null,Config.debug=/\bdebug\b/.test(i.attr("options")),i.children("style").each(function(e){d.push(new Passage("tw-user-style-"+e,this))}),i.children("script").each(function(e){f.push(new Passage("tw-user-script-"+e,this))}),i.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])').each(function(){var r=jQuery(this),n=r.attr("pid")||"",a=new Passage(r.attr("name"),this);n===o&&""!==o?(Config.passages.start=a.title,e(a),c[a.title]=a):a.tags.includes("widget")?p.push(a):(t(a),c[a.title]=a)}),g=i.attr("ifid"),r("Hunters Harem"),Config.saves.id=Story.domId}function t(){!function(){var e=document.createElement("style");new StyleWrapper(e).add(d.map(function(e){return e.text.trim()}).join("\n")),jQuery(e).appendTo(document.head).attr({id:"style-story",type:"text/css"})}();for(var e=0;e<f.length;++e)try{Scripting.evalJavaScript(f[e].text)}catch(t){console.error(t),Alert.error(f[e].title,"object"===(void 0===t?"undefined":_typeof(t))?t.message:t)}for(var t=0;t<p.length;++t)try{Wikifier.wikifyEval(p[t].processText())}catch(e){console.error(e),Alert.error(p[t].title,"object"===(void 0===e?"undefined":_typeof(e))?e.message:e)}}function r(e){if(null==e||""===e)throw new Error("story title cannot be null or empty");if(document.title=h=Util.unescape(e),""===(m=Util.slugify(h)))if(""!==g)m=g;else for(var t=0,r=h.length;t<r;++t){var n=Util.charAndPosAt(h,t),a=n.char,i=n.start,o=n.end;m+=a.codePointAt(0).toString(16),t+=o-i}}function n(){return h}function a(){return m}function i(){return g}function o(e){var t=void 0===e?"undefined":_typeof(e);switch(t){case"number":case"string":return c.hasOwnProperty(String(e));case"boolean":case"function":t="a "+t;break;case"undefined":break;default:t=null===e?"null":"an "+t}throw new TypeError("Story.has title parameter cannot be "+t)}function s(e){var t=void 0===e?"undefined":_typeof(e);switch(t){case"number":case"string":var r=String(e);return c.hasOwnProperty(r)?c[r]:new Passage(r||"(unknown)");case"boolean":case"function":t="a "+t;break;case"undefined":break;default:t=null===e?"null":"an "+t}throw new TypeError("Story.get title parameter cannot be "+t)}function u(e,t){for(var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"title",n=Object.keys(c),a=[],i=0;i<n.length;++i){var o=c[n[i]];if(o.hasOwnProperty(e))switch(_typeof(o[e])){case"undefined":break;case"object":o[e]instanceof Array&&o[e].some(function(e){return e==t})&&a.push(o);break;default:o[e]==t&&a.push(o)}}return a.sort(function(e,t){return e[r]==t[r]?0:e[r]<t[r]?-1:1}),a}function l(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"title";if("function"!=typeof e)throw new Error("Story.lookupWith filter parameter must be a function");for(var r=Object.keys(c),n=[],a=0;a<r.length;++a){var i=c[r[a]];e(i)&&n.push(i)}return n.sort(function(e,r){return e[t]==r[t]?0:e[t]<r[t]?-1:1}),n}var c={},d=[],f=[],p=[],h="",g="",m="";return Object.freeze(Object.defineProperties({},{passages:{value:c},styles:{value:d},scripts:{value:f},
widgets:{value:p},load:{value:e},init:{value:t},title:{get:n},domId:{get:a},ifId:{get:i},has:{value:o},get:{value:s},lookup:{value:u},lookupWith:{value:l}}))}(),UI=function(){function e(e,t){var r=t,n=Config.debug,a=Config.cleanupWikifierOutput;Config.debug=!1,Config.cleanupWikifierOutput=!1;try{null==r&&(r=document.createElement("ul"));var i=document.createDocumentFragment();new Wikifier(i,Story.get(e).processText().trim());var o=[].concat(_toConsumableArray(i.querySelectorAll(".error"))).map(function(e){return e.textContent.replace(errorPrologRegExp,"")});if(o.length>0)throw new Error(o.join("; "));for(;i.hasChildNodes();){var s=i.firstChild;if(s.nodeType===Node.ELEMENT_NODE&&"A"===s.nodeName.toUpperCase()){var u=document.createElement("li");r.appendChild(u),u.appendChild(s)}else i.removeChild(s)}}finally{Config.cleanupWikifierOutput=a,Config.debug=n}return r}function t(e){jQuery(Dialog.setup("Alert","alert")).append("<p>"+e+'</p><ul class="buttons"><li><button id="alert-ok" class="ui-close">'+L10n.get(["alertOk","ok"])+"</button></li></ul>");for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Dialog.open.apply(Dialog,r)}function r(){u(),Dialog.open.apply(Dialog,arguments)}function n(){l(),Dialog.open.apply(Dialog,arguments)}function a(){c(),Dialog.open.apply(Dialog,arguments)}function i(){d(),Dialog.open.apply(Dialog,arguments)}function o(){f(),Dialog.open.apply(Dialog,arguments)}function s(){return jQuery(Dialog.setup(L10n.get("autoloadTitle"),"autoload")).append("<p>"+L10n.get("autoloadPrompt")+'</p><ul class="buttons"><li><button id="autoload-ok" class="ui-close">'+L10n.get(["autoloadOk","ok"])+'</button></li><li><button id="autoload-cancel" class="ui-close">'+L10n.get(["autoloadCancel","cancel"])+"</button></li></ul>"),jQuery(document).one("click.autoload",".ui-close",function(e){var t="autoload-ok"===e.target.id;jQuery(document).one(":dialogclosed",function(){t&&Save.autosave.load()||Engine.play(Config.passages.start)})}),!0}function u(){var e=document.createElement("ul");jQuery(Dialog.setup(L10n.get("jumptoTitle"),"jumpto list")).append(e);for(var t=State.expired.length,r=State.size-1;r>=0;--r)if(r!==State.activeIndex){var n=Story.get(State.history[r].title);n&&n.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(e){return function(){return jQuery(document).one(":dialogclosed",function(){return Engine.goTo(e)})}}(r)).addClass("ui-close").text(L10n.get("jumptoTurn")+" "+(t+r+1)+": "+n.description())).appendTo(e)}e.hasChildNodes()||jQuery(e).append("<li><a><em>"+L10n.get("jumptoUnavailable")+"</em></a></li>")}function l(){return jQuery(Dialog.setup(L10n.get("restartTitle"),"restart")).append("<p>"+L10n.get("restartPrompt")+'</p><ul class="buttons"><li><button id="restart-ok">'+L10n.get(["restartOk","ok"])+'</button></li><li><button id="restart-cancel" class="ui-close">'+L10n.get(["restartCancel","cancel"])+"</button></li></ul>").find("#restart-ok").ariaClick({one:!0},function(){jQuery(document).one(":dialogclosed",function(){return Engine.restart()}),Dialog.close()}),!0}function c(){function e(e,t,r,n){var a=jQuery(document.createElement("button")).attr("id","saves-"+e).html(r);return t&&a.addClass(t),n?a.ariaClick(n):a.ariaDisabled(!0),jQuery(document.createElement("li")).append(a)}var r=jQuery(Dialog.setup(L10n.get("savesTitle"),"saves")),n=Save.ok();if(n&&r.append(function(){function e(e,t,r,n,a){var i=jQuery(document.createElement("button")).attr("id","saves-"+e+"-"+n).addClass(e).html(r);return t&&i.addClass(t),a?"auto"===n?i.ariaClick({label:r+" "+L10n.get("savesLabelAuto")},function(){return a()}):i.ariaClick({label:r+" "+L10n.get("savesLabelSlot")+" "+(n+1)},function(){return a(n)}):i.ariaDisabled(!0),i}var t=Save.get(),r=jQuery(document.createElement("tbody"));if(Save.autosave.ok()){var n=jQuery(document.createElement("td")),a=jQuery(document.createElement("td")),i=jQuery(document.createElement("td")),o=jQuery(document.createElement("td"));jQuery(document.createElement("b")).attr({title:L10n.get("savesLabelAuto"),"aria-label":L10n.get("savesLabelAuto")}).text("A").appendTo(n),t.autosave?(a.append(e("load","ui-close",L10n.get("savesLabelLoad"),"auto",function(){jQuery(document).one(":dialogclosed",function(){return Save.autosave.load()})})),jQuery(document.createElement("div")).text(t.autosave.title).appendTo(i),jQuery(document.createElement("div")).addClass("datestamp").html(t.autosave.date?""+new Date(t.autosave.date).toLocaleString():"<em>"+L10n.get("savesUnknownDate")+"</em>").appendTo(i),o.append(e("delete",null,L10n.get("savesLabelDelete"),"auto",function(){Save.autosave.delete(),c()}))):(a.append(e("load",null,L10n.get("savesLabelLoad"),"auto")),i.addClass("empty").text("•  •  •"),o.append(e("delete",null,L10n.get("savesLabelDelete"),"auto"))),jQuery(document.createElement("tr")).append(n).append(a).append(i).append(o).appendTo(r)}for(var s=0,u=t.slots.length;s<u;++s){var l=jQuery(document.createElement("td")),d=jQuery(document.createElement("td")),f=jQuery(document.createElement("td")),p=jQuery(document.createElement("td"));l.append(document.createTextNode(s+1)),t.slots[s]?(d.append(e("load","ui-close",L10n.get("savesLabelLoad"),s,function(e){jQuery(document).one(":dialogclosed",function(){return Save.slots.load(e)})})),jQuery(document.createElement("div")).text(t.slots[s].title).appendTo(f),jQuery(document.createElement("div")).addClass("datestamp").html(t.slots[s].date?""+new Date(t.slots[s].date).toLocaleString():"<em>"+L10n.get("savesUnknownDate")+"</em>").appendTo(f),p.append(e("delete",null,L10n.get("savesLabelDelete"),s,function(e){Save.slots.delete(e),c()}))):(d.append(e("save","ui-close",L10n.get("savesLabelSave"),s,Save.slots.save)),f.addClass("empty").text("•  •  •"),p.append(e("delete",null,L10n.get("savesLabelDelete"),s))),jQuery(document.createElement("tr")).append(l).append(d).append(f).append(p).appendTo(r)}return jQuery(document.createElement("table")).attr("id","saves-list").append(r)}()),n||Has.fileAPI){var a=jQuery(document.createElement("ul")).addClass("buttons").appendTo(r);return Has.fileAPI&&(a.append(e("export","ui-close",L10n.get("savesLabelExport"),function(){return Save.export()})),a.append(e("import",null,L10n.get("savesLabelImport"),function(){return r.find("#saves-import-file").trigger("click")})),jQuery(document.createElement("input")).css({display:"block",visibility:"hidden",position:"fixed",left:"-9999px",top:"-9999px",width:"1px",height:"1px"}).attr({type:"file",id:"saves-import-file",tabindex:-1,"aria-hidden":!0}).on("change",function(e){jQuery(document).one(":dialogclosed",function(){return Save.import(e)}),Dialog.close()}).appendTo(r)),n&&a.append(e("clear",null,L10n.get("savesLabelClear"),Save.autosave.has()||!Save.slots.isEmpty()?function(){Save.clear(),c()}:null)),!0}return t(L10n.get("savesIncapable")),!1}function d(){var e=jQuery(Dialog.setup(L10n.get("settingsTitle"),"settings"));return Setting.forEach(function(t){if(t.type===Setting.Types.Header){var r=t.name,n=Util.slugify(r),a=jQuery(document.createElement("div")),i=jQuery(document.createElement("h2"));return a.attr("id","header-body-"+n).append(i).appendTo(e),i.attr("id","header-heading-"+n).wiki(r),void(t.desc&&jQuery(document.createElement("p")).attr("id","header-desc-"+n).wiki(t.desc).appendTo(a))}var o=t.name,s=Util.slugify(o),u=jQuery(document.createElement("div")),l=jQuery(document.createElement("label")),c=jQuery(document.createElement("div")),d=void 0;switch(jQuery(document.createElement("div")).append(l).append(c).appendTo(u),t.desc&&jQuery(document.createElement("p")).attr("id","setting-desc-"+s).wiki(t.desc).appendTo(u),l.attr({id:"setting-label-"+s,for:"setting-control-"+s}).wiki(t.label),null==settings[o]&&(settings[o]=t.default),t.type){case Setting.Types.Toggle:d=jQuery(document.createElement("button")),settings[o]?d.addClass("enabled").text(L10n.get("settingsOn")):d.text(L10n.get("settingsOff")),d.ariaClick(function(){settings[o]?(jQuery(this).removeClass("enabled").text(L10n.get("settingsOff")),settings[o]=!1):(jQuery(this).addClass("enabled").text(L10n.get("settingsOn")),settings[o]=!0),Setting.save(),t.hasOwnProperty("onChange")&&t.onChange.call({name:o,value:settings[o],default:t.default})});break;case Setting.Types.List:d=jQuery(document.createElement("select"));for(var f=0,p=t.list.length;f<p;++f)jQuery(document.createElement("option")).val(f).text(t.list[f]).appendTo(d);d.val(t.list.indexOf(settings[o])).attr("tabindex",0).on("change",function(){settings[o]=t.list[Number(this.value)],Setting.save(),t.hasOwnProperty("onChange")&&t.onChange.call({name:o,value:settings[o],default:t.default,list:t.list})});break;case Setting.Types.Range:d=jQuery(document.createElement("input")),d.attr({type:"range",min:t.min,max:t.max,step:t.step,value:settings[o],tabindex:0}).on("change input",function(){settings[o]=Number(this.value),Setting.save(),t.hasOwnProperty("onChange")&&t.onChange.call({name:o,value:settings[o],default:t.default,min:t.min,max:t.max,step:t.step})}).on("keypress",function(e){13===e.which&&(e.preventDefault(),d.trigger("change"))})}d.attr("id","setting-control-"+s).appendTo(c),u.attr("id","setting-body-"+s).appendTo(e)}),e.append('<ul class="buttons"><li><button id="settings-ok" class="ui-close">'+L10n.get(["settingsOk","ok"])+'</button></li><li><button id="settings-reset">'+L10n.get("settingsReset")+"</button></li></ul>").find("#settings-reset").ariaClick({one:!0},function(){jQuery(document).one(":dialogclosed",function(){Setting.reset(),window.location.reload()}),Dialog.close()}),!0}function f(){try{jQuery(Dialog.setup(L10n.get("shareTitle"),"share list")).append(e("StoryShare"))}catch(e){return console.error(e),Alert.error("StoryShare",e.message),!1}return!0}return Object.freeze(Object.defineProperties({},{assembleLinkList:{value:e},alert:{value:t},jumpto:{value:r},restart:{value:n},saves:{value:a},settings:{value:i},share:{value:o},buildAutoload:{value:s},buildJumpto:{value:u},buildRestart:{value:l},buildSaves:{value:c},buildSettings:{value:d},buildShare:{value:f},stow:{value:function(){return UIBar.stow()}},unstow:{value:function(){return UIBar.unstow()}},setStoryElements:{value:function(){return UIBar.update()}},isOpen:{value:function(){return Dialog.isOpen.apply(Dialog,arguments)}},body:{value:function(){return Dialog.body()}},setup:{value:function(){return Dialog.setup.apply(Dialog,arguments)}},addClickHandler:{value:function(){return Dialog.addClickHandler.apply(Dialog,arguments)}},open:{value:function(){return Dialog.open.apply(Dialog,arguments)}},close:{value:function(){return Dialog.close.apply(Dialog,arguments)}},resize:{value:function(){return Dialog.resize()}},buildDialogAutoload:{value:s},buildDialogJumpto:{value:u},buildDialogRestart:{value:l},buildDialogSaves:{value:c},buildDialogSettings:{value:d},buildDialogShare:{value:f},buildLinkListFromPassage:{value:e}}))}(),UIBar=function(){function e(){c&&(c.hide(),jQuery(document).off(".ui-bar"),jQuery(document.head).find("#style-ui-bar").remove(),c.remove(),c=null)}function t(){return c&&c.hide(),this}function r(){if(!document.getElementById("ui-bar")){var e=function(){var e=L10n.get("uiBarToggle"),t=L10n.get("uiBarBackward"),r=L10n.get("uiBarJumpto"),n=L10n.get("uiBarForward");return jQuery(document.createDocumentFragment()).append('<div id="ui-bar"><div id="ui-bar-tray"><button id="ui-bar-toggle" tabindex="0" title="'+e+'" aria-label="'+e+'"></button><div id="ui-bar-history"><button id="history-backward" tabindex="0" title="'+t+'" aria-label="'+t+'"></button><button id="history-jumpto" tabindex="0" title="'+r+'" aria-label="'+r+'"></button><button id="history-forward" tabindex="0" title="'+n+'" aria-label="'+n+'"></button></div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core"><li id="menu-item-saves"><a tabindex="0">'+L10n.get("savesTitle")+'</a></li><li id="menu-item-settings"><a tabindex="0">'+L10n.get("settingsTitle")+'</a></li><li id="menu-item-restart"><a tabindex="0">'+L10n.get("restartTitle")+'</a></li><li id="menu-item-share"><a tabindex="0">'+L10n.get("shareTitle")+"</a></li></ul></nav></div></div>")}();c=jQuery(e.find("#ui-bar").get(0)),e.insertBefore("body>script#script-sugarcube"),jQuery(document).on(":historyupdate.ui-bar",function(e,t){return function(){e.ariaDisabled(State.length<2),t.ariaDisabled(State.length===State.size)}}(jQuery("#history-backward"),jQuery("#history-forward")))}}function n(){return c&&"none"===c.css("display")}function a(){return c&&c.hasClass("stowed")}function i(){return c&&c.show(),this}function o(){c&&(("boolean"==typeof Config.ui.stowBarInitially?Config.ui.stowBarInitially:jQuery(window).width()<=Config.ui.stowBarInitially)&&function(){var e=jQuery(c).add("#story");e.addClass("no-transition"),c.addClass("stowed"),setTimeout(function(){return e.removeClass("no-transition")},Engine.minDomActionDelay)}(),jQuery("#ui-bar-toggle").ariaClick({label:L10n.get("uiBarToggle")},function(){return c.toggleClass("stowed")}),Config.history.controls?(jQuery("#history-backward").ariaDisabled(State.length<2).ariaClick({label:L10n.get("uiBarBackward")},function(){return Engine.backward()}),Story.lookup("tags","bookmark").length>0?jQuery("#history-jumpto").ariaClick({label:L10n.get("uiBarJumpto")},function(){return UI.jumpto()}):jQuery("#history-jumpto").remove(),jQuery("#history-forward").ariaDisabled(State.length===State.size).ariaClick({label:L10n.get("uiBarForward")},function(){return Engine.forward()})):jQuery("#ui-bar-history").remove(),jQuery("#story-title").text(Story.title),Story.has("StoryCaption")||jQuery("#story-caption").remove(),Story.has("StoryMenu")||jQuery("#menu-story").remove(),Config.ui.updateStoryElements||l(),jQuery("#menu-item-saves a").ariaClick(function(e){e.preventDefault(),UI.buildSaves(),Dialog.open()}).text(L10n.get("savesTitle")),Setting.isEmpty()?jQuery("#menu-item-settings").remove():jQuery("#menu-item-settings a").ariaClick(function(e){e.preventDefault(),UI.buildSettings(),Dialog.open()}).text(L10n.get("settingsTitle")),jQuery("#menu-item-restart a").ariaClick(function(e){e.preventDefault(),UI.buildRestart(),Dialog.open()}).text(L10n.get("restartTitle")),Story.has("StoryShare")?jQuery("#menu-item-share a").ariaClick(function(e){e.preventDefault(),UI.buildShare(),Dialog.open()}).text(L10n.get("shareTitle")):jQuery("#menu-item-share").remove())}function s(e){if(c&&!c.hasClass("stowed")){var t=void 0;e&&(t=jQuery("#story"),t.addClass("no-transition"),c.addClass("no-transition")),c.addClass("stowed"),e&&setTimeout(function(){t.removeClass("no-transition"),c.removeClass("no-transition")},Engine.minDomActionDelay)}return this}function u(e){if(c&&c.hasClass("stowed")){var t=void 0;e&&(t=jQuery("#story"),t.addClass("no-transition"),c.addClass("no-transition")),c.removeClass("stowed"),e&&setTimeout(function(){t.removeClass("no-transition"),c.removeClass("no-transition")},Engine.minDomActionDelay)}return this}function l(){if(c){setPageElement("story-banner","StoryBanner"),setPageElement("story-subtitle","StorySubtitle"),setPageElement("story-author","StoryAuthor"),setPageElement("story-caption","StoryCaption");var e=document.getElementById("menu-story");if(null!==e&&(jQuery(e).empty(),Story.has("StoryMenu")))try{UI.assembleLinkList("StoryMenu",e)}catch(e){console.error(e),Alert.error("StoryMenu",e.message)}}}var c=null;return Object.freeze(Object.defineProperties({},{destroy:{value:e},hide:{value:t},init:{value:r},isHidden:{value:n},isStowed:{value:a},show:{value:i},start:{value:o},stow:{value:s},unstow:{value:u},update:{value:l},setStoryElements:{value:l}}))}(),DebugBar=function(){function e(){var e=L10n.get("debugBarToggle"),t=L10n.get("debugBarAddWatch"),o=L10n.get("debugBarWatchAll"),u=L10n.get("debugBarWatchNone"),c=L10n.get("debugBarWatchToggle"),h=L10n.get("debugBarViewsToggle");jQuery(document.createDocumentFragment()).append('<div id="debug-bar"><div id="debug-bar-watch" aria-hidden="true" hidden="hidden"><div>'+L10n.get("debugBarNoWatches")+'</div>></div><div><button id="debug-bar-watch-toggle" tabindex="0" title="'+c+'" aria-label="'+c+'">'+L10n.get("debugBarLabelWatch")+'</button><label id="debug-bar-watch-label" for="debug-bar-watch-input">'+L10n.get("debugBarLabelAdd")+'</label><input id="debug-bar-watch-input" name="debug-bar-watch-input" type="text" list="debug-bar-watch-list" tabindex="0"><datalist id="debug-bar-watch-list" aria-hidden="true" hidden="hidden"></datalist><button id="debug-bar-watch-add" tabindex="0" title="'+t+'" aria-label="'+t+'"></button><button id="debug-bar-watch-all" tabindex="0" title="'+o+'" aria-label="'+o+'"></button><button id="debug-bar-watch-none" tabindex="0" title="'+u+'" aria-label="'+u+'"></button></div><div><button id="debug-bar-views-toggle" tabindex="0" title="'+h+'" aria-label="'+h+'">'+L10n.get("debugBarLabelViews")+'</button><label id="debug-bar-turn-label" for="debug-bar-turn-select">'+L10n.get("debugBarLabelTurn")+'</label><select id="debug-bar-turn-select" tabindex="0"></select></div><button id="debug-bar-toggle" tabindex="0" title="'+e+'" aria-label="'+e+'"></button></div><div id="debug-bar-hint"></div>').appendTo("body"),y=jQuery("#debug-bar"),b=jQuery(y.find("#debug-bar-watch").get(0)),w=jQuery(y.find("#debug-bar-watch-list").get(0)),k=jQuery(y.find("#debug-bar-turn-select").get(0));var g=jQuery(y.find("#debug-bar-toggle").get(0)),m=jQuery(y.find("#debug-bar-watch-toggle").get(0)),v=jQuery(y.find("#debug-bar-watch-input").get(0)),E=jQuery(y.find("#debug-bar-watch-add").get(0)),j=jQuery(y.find("#debug-bar-watch-all").get(0)),x=jQuery(y.find("#debug-bar-watch-none").get(0)),O=jQuery(y.find("#debug-bar-views-toggle").get(0));g.ariaClick(function(){S?n():r(),S=!S,l()}),m.ariaClick(function(){b.attr("hidden")?b.removeAttr("aria-hidden hidden"):b.attr({"aria-hidden":!0,hidden:"hidden"}),l()}),v.on(":addwatch",function(){a(this.value.trim()),this.value=""}).on("keypress",function(e){13===e.which&&(e.preventDefault(),v.trigger(":addwatch"))}),E.ariaClick(function(){return v.trigger(":addwatch")}),j.ariaClick(i),x.ariaClick(s),k.on("change",function(){Engine.goTo(Number(this.value))}),O.ariaClick(function(){DebugView.toggle(),l()}),jQuery(document).on(":historyupdate.debug-bar",p).on(":passageend.debug-bar",function(){d(),f()}).on(":enginerestart.debug-bar",function(){session.delete("debugState")})}function t(){u(),c(),p(),d(),f()}function r(){y.css("right","-"+y.outerWidth()+"px"),l()}function n(){y.css("right",0),l()}function a(e){g.test(e)&&(v.pushUnique(e),v.sort(),d(),f(),l())}function i(){Object.keys(State.variables).map(function(e){return v.pushUnique("$"+e)}),Object.keys(State.temporary).map(function(e){return v.pushUnique("_"+e)}),v.sort(),d(),f(),l()}function o(e){v.delete(e),d(),f(),l()}function s(){for(var e=v.length-1;e>=0;--e)v.pop();d(),f(),l()}function u(){if(session.has("debugState")){var e=session.get("debugState");S=e.stowed,v.push.apply(v,_toConsumableArray(e.watchList)),e.watchEnabled?b.removeAttr("aria-hidden hidden"):b.attr({"aria-hidden":!0,hidden:"hidden"}),e.viewsEnabled?DebugView.enable():DebugView.disable()}}function l(){session.set("debugState",{stowed:S,watchList:v,watchEnabled:!b.attr("hidden"),viewsEnabled:DebugView.isEnabled()})}function c(){S?r():n()}function d(){if(0===v.length)return void b.empty().append("<div>"+L10n.get("debugBarNoWatches")+"</div>");for(var e=L10n.get("debugBarDeleteWatch"),t=jQuery(document.createElement("table")),r=jQuery(document.createElement("tbody")),n=0,a=v.length;n<a;++n)!function(t,n){var a=v[t],i=a.slice(1),s="$"===a[0]?State.variables:State.temporary,u=jQuery(document.createElement("tr")),l=jQuery(document.createElement("button")),c=jQuery(document.createElement("code"));l.addClass("watch-delete").attr("data-name",a).ariaClick({one:!0,label:e},function(){return o(a)}),c.text(h(s[i])),jQuery(document.createElement("td")).append(l).appendTo(u),jQuery(document.createElement("td")).text(a).appendTo(u),jQuery(document.createElement("td")).append(c).appendTo(u),u.appendTo(r)}(n);t.append(r),b.empty().append(t)}function f(){var e=Object.keys(State.variables),t=Object.keys(State.temporary);if(0===e.length&&0===t.length)return void w.empty();var r=[].concat(_toConsumableArray(e.map(function(e){return"$"+e})),_toConsumableArray(t.map(function(e){return"_"+e}))).sort(),n=document.createDocumentFragment();r.delete(v);for(var a=0,i=r.length;a<i;++a)jQuery(document.createElement("option")).val(r[a]).appendTo(n);w.empty().append(n)}function p(){for(var e=State.size,t=State.expired.length,r=document.createDocumentFragment(),n=0;n<e;++n)jQuery(document.createElement("option")).val(n).text(t+n+1+". "+Util.escape(State.history[n].title)).appendTo(r);k.empty().ariaDisabled(e<2).append(r).val(State.activeIndex)}function h(e){if(null===e)return"null";switch(void 0===e?"undefined":_typeof(e)){case"number":if(Number.isNaN(e))return"NaN";if(!Number.isFinite(e))return"Infinity";case"boolean":case"symbol":case"undefined":return String(e);case"string":return JSON.stringify(e);case"function":return"Function"}var t=Util.toStringTag(e);if("Date"===t)return"Date {"+e.toLocaleString()+"}";if("RegExp"===t)return"RegExp "+e.toString();var r=[];if(e instanceof Array||e instanceof Set){for(var n=e instanceof Array?e:Array.from(e),a=0,i=n.length;a<i;++a)r.push(n.hasOwnProperty(a)?h(n[a]):"<empty>");return Object.keys(n).filter(function(e){return!m.test(e)}).forEach(function(e){return r.push(h(e)+": "+h(n[e]))}),t+"("+n.length+") ["+r.join(", ")+"]"}return e instanceof Map?(e.forEach(function(e,t){return r.push(h(t)+" → "+h(e))}),t+"("+e.size+") {"+r.join(", ")+"}"):(Object.keys(e).forEach(function(t){return r.push(h(t)+": "+h(e[t]))}),t+" {"+r.join(", ")+"}")}var g=new RegExp("^"+Patterns.variable+"$"),m=/^\d+$/,v=[],y=null,b=null,w=null,k=null,S=!0;return Object.freeze(Object.defineProperties({},{init:{value:e},start:{value:t},stow:{value:r},unstow:{value:n},watch:{value:a},watchAll:{value:i},unwatch:{value:o},unwatchAll:{value:s}}))}(),LoadScreen=function(){function e(){jQuery(document).on("readystatechange.SugarCube",function(){o.size>0||("complete"===document.readyState?"loading"===jQuery(document.documentElement).attr("data-init")&&(Config.loadDelay>0?setTimeout(function(){0===o.size&&r()},Math.max(Engine.minDomActionDelay,Config.loadDelay)):r()):n())})}function t(){jQuery(document).off("readystatechange.SugarCube"),o.clear(),r()}function r(){jQuery(document.documentElement).removeAttr("data-init")}function n(){jQuery(document.documentElement).attr("data-init","loading")}function a(){return++s,o.add(s),n(),s}function i(e){if(null==e)throw new Error("LoadScreen.unlock called with a null or undefined ID");o.has(e)&&o.delete(e),0===o.size&&jQuery(document).trigger("readystatechange")}var o=new Set,s=0;return Object.freeze(Object.defineProperties({},{init:{value:e},clear:{value:t},hide:{value:r},show:{value:n},lock:{value:a},unlock:{value:i}}))}(),version=Object.freeze({title:"SugarCube",major:2,minor:30,patch:0,prerelease:null,build:9082,date:new Date("2019-09-26T20:43:20.257Z"),extensions:{},toString:function(){var e=this.prerelease?"-"+this.prerelease:"";return this.major+"."+this.minor+"."+this.patch+e+"+"+this.build},short:function(){var e=this.prerelease?"-"+this.prerelease:"";return this.title+" (v"+this.major+"."+this.minor+"."+this.patch+e+")"},long:function(){return this.title+" v"+this.toString()+" ("+this.date.toUTCString()+")"}}),TempState={},macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={},session=null,settings={},setup={},storage=null,browser=Browser,config=Config,has=Has,History=State,state=State,tale=Story,TempVariables=State.temporary;window.SugarCube={},jQuery(function(){try{var e=LoadScreen.lock();LoadScreen.init(),document.normalize&&document.normalize(),Story.load(),storage=SimpleStore.create(Story.domId,!0),session=SimpleStore.create(Story.domId,!1),Dialog.init(),UIBar.init(),Engine.init(),Story.init(),L10n.init(),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(L10n.get("warningNoWebStorage"))),Save.init(),Setting.init(),Macro.init(),Engine.start(),Config.debug&&DebugBar.init();var t=$(window),r=setInterval(function(){t.width()&&(clearInterval(r),setTimeout(function(){UIBar.start(),Config.debug&&DebugBar.start(),LoadScreen.unlock(e)},Engine.minDomActionDelay))},Engine.minDomActionDelay);window.SugarCube={Browser:Browser,Config:Config,Dialog:Dialog,Engine:Engine,Has:Has,L10n:L10n,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,SimpleAudio:SimpleAudio,State:State,Story:Story,UI:UI,UIBar:UIBar,DebugBar:DebugBar,Util:Util,Visibility:Visibility,Wikifier:Wikifier,session:session,settings:settings,setup:setup,storage:storage,version:version}}catch(e){return console.error(e),LoadScreen.clear(),Alert.fatal(null,e.message,e)}})}(window,window.document,jQuery);}
	</script>
</body>
</html>
